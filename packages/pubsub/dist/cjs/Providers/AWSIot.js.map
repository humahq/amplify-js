{"version":3,"file":"AWSIot.js","sources":["../../../src/Providers/AWSIot.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AWSIoT = void 0;\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst utils_1 = require(\"@aws-amplify/core/internals/utils\");\nconst core_1 = require(\"@aws-amplify/core\");\nconst MqttOverWS_1 = require(\"./MqttOverWS\");\nconst SERVICE_NAME = 'iotdevicegateway';\nclass AWSIoT extends MqttOverWS_1.MqttOverWS {\n    constructor(options = {}) {\n        super(options);\n    }\n    get region() {\n        return this.options?.region;\n    }\n    get endpoint() {\n        return (async () => {\n            const { endpoint } = this.options;\n            const serviceInfo = {\n                service: SERVICE_NAME,\n                region: this.region,\n            };\n            const session = await (0, core_1.fetchAuthSession)();\n            if (!session.credentials) {\n                throw new Error('No auth session credentials');\n            }\n            const { accessKeyId: access_key, secretAccessKey: secret_key, sessionToken: session_token, } = session.credentials;\n            const result = utils_1.Signer.signUrl(endpoint, { access_key, secret_key, session_token }, serviceInfo);\n            return result;\n        })();\n    }\n}\nexports.AWSIoT = AWSIoT;\n"],"names":[],"mappings":";;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;AACxB;AACA;AACA,MAAM,OAAO,GAAG,OAAO,CAAC,mCAAmC,CAAC,CAAC;AAC7D,MAAM,MAAM,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAC5C,MAAM,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC7C,MAAM,YAAY,GAAG,kBAAkB,CAAC;AACxC,MAAM,MAAM,SAAS,YAAY,CAAC,UAAU,CAAC;AAC7C,IAAI,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE;AAC9B,QAAQ,KAAK,CAAC,OAAO,CAAC,CAAC;AACvB,KAAK;AACL,IAAI,IAAI,MAAM,GAAG;AACjB,QAAQ,OAAO,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;AACpC,KAAK;AACL,IAAI,IAAI,QAAQ,GAAG;AACnB,QAAQ,OAAO,CAAC,YAAY;AAC5B,YAAY,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AAC9C,YAAY,MAAM,WAAW,GAAG;AAChC,gBAAgB,OAAO,EAAE,YAAY;AACrC,gBAAgB,MAAM,EAAE,IAAI,CAAC,MAAM;AACnC,aAAa,CAAC;AACd,YAAY,MAAM,OAAO,GAAG,MAAM,IAAI,MAAM,CAAC,gBAAgB,GAAG,CAAC;AACjE,YAAY,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;AACtC,gBAAgB,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;AAC/D,aAAa;AACb,YAAY,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,eAAe,EAAE,UAAU,EAAE,YAAY,EAAE,aAAa,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC;AAC/H,YAAY,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,aAAa,EAAE,EAAE,WAAW,CAAC,CAAC;AACpH,YAAY,OAAO,MAAM,CAAC;AAC1B,SAAS,GAAG,CAAC;AACb,KAAK;AACL,CAAC;AACD,OAAO,CAAC,MAAM,GAAG,MAAM;;"}