{"version":3,"file":"AWSIot.mjs","sources":["../../../src/Providers/AWSIot.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Signer } from '@aws-amplify/core/internals/utils';\nimport { fetchAuthSession } from '@aws-amplify/core';\nimport { MqttOverWS } from './MqttOverWS';\nconst SERVICE_NAME = 'iotdevicegateway';\nexport class AWSIoT extends MqttOverWS {\n    constructor(options = {}) {\n        super(options);\n    }\n    get region() {\n        return this.options?.region;\n    }\n    get endpoint() {\n        return (async () => {\n            const { endpoint } = this.options;\n            const serviceInfo = {\n                service: SERVICE_NAME,\n                region: this.region,\n            };\n            const session = await fetchAuthSession();\n            if (!session.credentials) {\n                throw new Error('No auth session credentials');\n            }\n            const { accessKeyId: access_key, secretAccessKey: secret_key, sessionToken: session_token, } = session.credentials;\n            const result = Signer.signUrl(endpoint, { access_key, secret_key, session_token }, serviceInfo);\n            return result;\n        })();\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAIA,MAAM,YAAY,GAAG,kBAAkB,CAAC;AACjC,MAAM,MAAM,SAAS,UAAU,CAAC;AACvC,IAAI,WAAW,CAAC,OAAO,GAAG,EAAE,EAAE;AAC9B,QAAQ,KAAK,CAAC,OAAO,CAAC,CAAC;AACvB,KAAK;AACL,IAAI,IAAI,MAAM,GAAG;AACjB,QAAQ,OAAO,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;AACpC,KAAK;AACL,IAAI,IAAI,QAAQ,GAAG;AACnB,QAAQ,OAAO,CAAC,YAAY;AAC5B,YAAY,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;AAC9C,YAAY,MAAM,WAAW,GAAG;AAChC,gBAAgB,OAAO,EAAE,YAAY;AACrC,gBAAgB,MAAM,EAAE,IAAI,CAAC,MAAM;AACnC,aAAa,CAAC;AACd,YAAY,MAAM,OAAO,GAAG,MAAM,gBAAgB,EAAE,CAAC;AACrD,YAAY,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;AACtC,gBAAgB,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;AAC/D,aAAa;AACb,YAAY,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,eAAe,EAAE,UAAU,EAAE,YAAY,EAAE,aAAa,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC;AAC/H,YAAY,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,aAAa,EAAE,EAAE,WAAW,CAAC,CAAC;AAC5G,YAAY,OAAO,MAAM,CAAC;AAC1B,SAAS,GAAG,CAAC;AACb,KAAK;AACL;;;;"}