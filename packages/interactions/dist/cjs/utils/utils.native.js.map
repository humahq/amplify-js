{"version":3,"file":"utils.native.js","sources":["../../../src/utils/utils.native.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.gzipDecompressToString = exports.base64ToArrayBuffer = exports.convert = void 0;\nconst base_64_1 = require(\"base-64\");\nconst pako_1 = require(\"pako\");\nconst convert = async (stream) => {\n    if (!(stream instanceof Blob)) {\n        return Promise.reject(new Error('Invalid content type'));\n    }\n    return new Promise((resolve, reject) => {\n        try {\n            const fileReaderInstance = new FileReader();\n            fileReaderInstance.readAsDataURL(stream);\n            fileReaderInstance.onload = async () => {\n                const blobURL = fileReaderInstance.result;\n                const base64Blob = blobURL.split(/,(.*)/s)[1];\n                const decodedArrayBuffer = (0, exports.base64ToArrayBuffer)(base64Blob);\n                resolve(decodedArrayBuffer);\n            };\n        }\n        catch (error) {\n            reject(new Error('unable to convert blob to arrayBuffer: ' + error));\n        }\n    });\n};\nexports.convert = convert;\nconst base64ToArrayBuffer = (base64) => {\n    const binaryString = (0, base_64_1.decode)(base64);\n    return Uint8Array.from(binaryString, c => c.charCodeAt(0));\n};\nexports.base64ToArrayBuffer = base64ToArrayBuffer;\nconst gzipDecompressToString = async (data) => {\n    return new Promise((resolve, reject) => {\n        try {\n            const result = (0, pako_1.ungzip)(data, { to: 'string' });\n            resolve(result);\n        }\n        catch (error) {\n            reject(new Error('unable to decompress' + error));\n        }\n    });\n};\nexports.gzipDecompressToString = gzipDecompressToString;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,sBAAsB,GAAG,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;AACxF,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACrC,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC/B,MAAM,OAAO,GAAG,OAAO,MAAM,KAAK;AAClC,IAAI,IAAI,EAAE,MAAM,YAAY,IAAI,CAAC,EAAE;AACnC,QAAQ,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC;AACjE,KAAK;AACL,IAAI,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC5C,QAAQ,IAAI;AACZ,YAAY,MAAM,kBAAkB,GAAG,IAAI,UAAU,EAAE,CAAC;AACxD,YAAY,kBAAkB,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AACrD,YAAY,kBAAkB,CAAC,MAAM,GAAG,YAAY;AACpD,gBAAgB,MAAM,OAAO,GAAG,kBAAkB,CAAC,MAAM,CAAC;AAC1D,gBAAgB,MAAM,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9D,gBAAgB,MAAM,kBAAkB,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,mBAAmB,EAAE,UAAU,CAAC,CAAC;AACxF,gBAAgB,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC5C,aAAa,CAAC;AACd,SAAS;AACT,QAAQ,OAAO,KAAK,EAAE;AACtB,YAAY,MAAM,CAAC,IAAI,KAAK,CAAC,yCAAyC,GAAG,KAAK,CAAC,CAAC,CAAC;AACjF,SAAS;AACT,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;AAC1B,MAAM,mBAAmB,GAAG,CAAC,MAAM,KAAK;AACxC,IAAI,MAAM,YAAY,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACvD,IAAI,OAAO,UAAU,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,CAAC,CAAC;AACF,OAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;AAClD,MAAM,sBAAsB,GAAG,OAAO,IAAI,KAAK;AAC/C,IAAI,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC5C,QAAQ,IAAI;AACZ,YAAY,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAC;AACtE,YAAY,OAAO,CAAC,MAAM,CAAC,CAAC;AAC5B,SAAS;AACT,QAAQ,OAAO,KAAK,EAAE;AACtB,YAAY,MAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,GAAG,KAAK,CAAC,CAAC,CAAC;AAC9D,SAAS;AACT,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF,OAAO,CAAC,sBAAsB,GAAG,sBAAsB;;"}