{"version":3,"file":"aws-amplify-analytics.min.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,qBACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,wBAAyB,CAAC,oBAAqBJ,GAC5B,iBAAZC,QACdA,QAA+B,sBAAID,EAAQG,QAAQ,qBAEnDJ,EAA4B,sBAAIC,EAAQD,EAAuB,iBAChE,CATD,CASGO,MAAOC,G,kCCTVL,EAAOD,QAAUM,C,GCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaV,QAGrB,IAAIC,EAASM,EAAyBE,GAAY,CAGjDT,QAAS,CAAC,GAOX,OAHAY,EAAoBH,GAAUR,EAAQA,EAAOD,QAASQ,GAG/CP,EAAOD,OACf,CCrBAQ,EAAoBK,EAAI,CAACb,EAASc,KACjC,IAAI,IAAIC,KAAOD,EACXN,EAAoBQ,EAAEF,EAAYC,KAASP,EAAoBQ,EAAEhB,EAASe,IAC5EE,OAAOC,eAAelB,EAASe,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDP,EAAoBQ,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFd,EAAoBkB,EAAK1B,IACH,oBAAX2B,QAA0BA,OAAOC,aAC1CX,OAAOC,eAAelB,EAAS2B,OAAOC,YAAa,CAAEC,MAAO,WAE7DZ,OAAOC,eAAelB,EAAS,aAAc,CAAE6B,OAAO,GAAO,E,+JCH1DC,E,UACJ,SAAWA,GACPA,EAAe,MAAI,QACnBA,EAAe,MAAI,QACnBA,EAAc,KAAI,OAClBA,EAAc,KAAI,OAClBA,EAAiB,QAAI,UACrBA,EAAc,KAAI,MACrB,CAPD,CAOGA,IAAYA,EAAU,CAAC,ICL1B,MAAMC,EAAa,CACfC,QAAS,EACTC,MAAO,EACPC,KAAM,EACNC,KAAM,EACNC,MAAO,EACPC,KAAM,GAMV,MAAMC,EAKF,WAAAC,CAAYC,EAAMC,EAAQX,EAAQK,MAC9B9B,KAAKmC,KAAOA,EACZnC,KAAKoC,MAAQA,EACbpC,KAAKqC,YAAc,EACvB,CACA,QAAAC,CAASC,GACL,OAAOA,EAAI,GAAK,IAAMA,EAAI,GAAKA,CACnC,CACA,GAAAC,GACI,MAAMC,EAAK,IAAIC,KACf,MAAQ,CAAC1C,KAAKsC,SAASG,EAAGE,cAAe3C,KAAKsC,SAASG,EAAGG,eAAeC,KAAK,KAC1E,IACAJ,EAAGK,iBACX,CACA,SAAAC,CAAUC,GACN,OAAKA,GAELhD,KAAKiD,QAAUD,EACRhD,KAAKiD,SAFDjD,KAAKiD,OAGpB,CAQA,IAAAC,CAAKC,KAASC,GACV,IAAIC,EAAkBrD,KAAKoC,MAS3B,GARIH,EAAcqB,YACdD,EAAkBpB,EAAcqB,WAEd,oBAAXC,QAA0BA,OAAOD,YACxCD,EAAkBE,OAAOD,aAGX5B,EAAWyB,IADTzB,EAAW2B,IAI3B,OAEJ,IAAIG,EAAMC,QAAQD,IAAIE,KAAKD,SACvBN,IAAS1B,EAAQM,OAAS0B,QAAQE,QAClCH,EAAMC,QAAQE,MAAMD,KAAKD,UAEzBN,IAAS1B,EAAQK,MAAQ2B,QAAQG,OACjCJ,EAAMC,QAAQG,KAAKF,KAAKD,UAExBxB,EAAc4B,sBACVV,IAAS1B,EAAQI,MAAQ4B,QAAQK,OACjCN,EAAMC,QAAQK,KAAKJ,KAAKD,UAExBN,IAAS1B,EAAQG,OAAS6B,QAAQM,QAClCP,EAAMC,QAAQM,MAAML,KAAKD,WAGjC,MAAMO,EAAS,IAAIb,MAASnD,KAAKwC,SAASxC,KAAKmC,OAC/C,IAAI8B,EAAU,GACd,GAAmB,IAAfb,EAAIc,QAAkC,iBAAXd,EAAI,GAC/Ba,EAAU,GAAGD,OAAYZ,EAAI,KAC7BI,EAAIS,QAEH,GAAmB,IAAfb,EAAIc,OACTD,EAAU,GAAGD,KAAUZ,EAAI,KAC3BI,EAAIQ,EAAQZ,EAAI,SAEf,GAAsB,iBAAXA,EAAI,GAAiB,CACjC,IAAIpC,EAAMoC,EAAIe,MAAM,GACD,IAAfnD,EAAIkD,SACJlD,EAAMA,EAAI,IAEdiD,EAAU,GAAGD,OAAYZ,EAAI,MAAMpC,IACnCwC,EAAI,GAAGQ,OAAYZ,EAAI,KAAMpC,EACjC,MAEIiD,EAAU,GAAGD,KAAUZ,IACvBI,EAAIQ,EAAQZ,GAEhB,IAAK,MAAMgB,KAAUpE,KAAKqC,YAAa,CACnC,MAAMgC,EAAW,CAAEJ,UAASK,UAAW5B,KAAK6B,OAC5CH,EAAOI,SAAS,CAACH,GACrB,CACJ,CAOA,GAAAb,IAAOJ,GACHpD,KAAKkD,KAAKzB,EAAQI,QAASuB,EAC/B,CAOA,IAAAU,IAAQV,GACJpD,KAAKkD,KAAKzB,EAAQI,QAASuB,EAC/B,CAOA,IAAAQ,IAAQR,GACJpD,KAAKkD,KAAKzB,EAAQK,QAASsB,EAC/B,CAOA,KAAAO,IAASP,GACLpD,KAAKkD,KAAKzB,EAAQM,SAAUqB,EAChC,CAOA,KAAAW,IAASX,GACLpD,KAAKkD,KAAKzB,EAAQG,SAAUwB,EAChC,CAOA,OAAAqB,IAAWrB,GACPpD,KAAKkD,KAAKzB,EAAQE,WAAYyB,EAClC,CACA,YAAAsB,CAAaC,GACLA,GC7JoB,YD6JPA,EAAUC,oBACvB5E,KAAKqC,YAAYwC,KAAKF,GACtBA,EAAU5B,UAAU/C,KAAKiD,SAEjC,CACA,cAAA6B,GACI,OAAO9E,KAAKqC,WAChB,EAEJJ,EAAcqB,UAAY,KAC1BrB,EAAc4B,qBAAsB,EExKpC,MAAMkB,UAAqBC,MASvB,WAAA9C,EAAY,QAAE+B,EAAO,KAAE9B,EAAI,mBAAE8C,EAAkB,gBAAEC,IAC7CC,MAAMlB,GACNjE,KAAKmC,KAAOA,EACZnC,KAAKkF,gBAAkBA,EACvBlF,KAAKiF,mBAAqBA,EAG1BjF,KAAKkC,YAAc6C,EACnBnE,OAAOwE,eAAepF,KAAM+E,EAAa7D,UAC7C,ECZJ,MAAMmE,EAAoC,oBAAX/D,OACzBA,OAAO,mBACP,oBACAgE,EAAS,IAAIrD,EAAc,OACjC,MAAMsD,EACF,WAAArD,CAAYC,GACRnC,KAAKwF,UAAY,IAAIC,IACrBzF,KAAK0F,kBAAoB,CACrB,OACA,OACA,MACA,YACA,eACA,SACA,UACA,KACA,MAEJ1F,KAAKmC,KAAOA,CAChB,CAOA,OAAAwD,CAAQC,EAASC,GACb,MAAMC,EAAS9F,KAAKwF,UAAUzE,IAAI6E,GAC7BE,EAIL9F,KAAKwF,UAAUO,IAAIH,EAAS,IACrBE,EAAOE,QAAO,EAAGC,cAAeA,IAAaJ,MAJhDP,EAAO1B,KAAK,oBAAoBgC,IAMxC,CACA,QAAAM,CAASN,EAASO,EAASC,EAAQC,GACR,iBAAZT,GACP5F,KAAK0F,kBAAkBY,QAAQV,IAAY,IACzBS,IAAchB,GAE5BC,EAAO1B,KAAK,YAAYgC,0EAGhC,MAAMW,EAAU,CACZX,UACAO,QAAS,IAAKA,GACdC,SACAI,YAAa,IAEjB,IACIxG,KAAKyG,aAAaF,EACtB,CACA,MAAOG,GACHpB,EAAO3B,MAAM+C,EACjB,CACJ,CACA,MAAAC,CAAOf,EAASK,EAAUW,EAAe,UACrC,IAAIC,EACJ,GAAwB,mBAAbZ,EACP,MAAM,IAAIlB,EAAa,CACnB5C,KF/D0B,iCEgE1B8B,QAAS,gCAKb4C,EAAKZ,EAET,IAAIH,EAAS9F,KAAKwF,UAAUzE,IAAI6E,GAShC,OARKE,IACDA,EAAS,GACT9F,KAAKwF,UAAUO,IAAIH,EAASE,IAEhCA,EAAOjB,KAAK,CACR1C,KAAMyE,EACNX,SAAUY,IAEP,KACH7G,KAAK2F,QAAQC,EAASiB,EAAG,CAEjC,CACA,YAAAJ,CAAaF,GACT,MAAM,QAAEX,EAAO,QAAEO,GAAYI,EACvBT,EAAS9F,KAAKwF,UAAUzE,IAAI6E,GAC9BE,GACAA,EAAOgB,SAAQjB,IACXP,EAAOvB,MAAM,kBAAkB6B,UAAiBO,GAChD,IACIN,EAASI,SAASM,EACtB,CACA,MAAOG,GACHpB,EAAO3B,MAAM+C,EACjB,IAGZ,ECtGJ,IAAIK,EAsBA,EAeAC,EAYAC,EAKAC,EAUAC,EA+BAC,EAKAC,EAWAC,EAMAC,EAIAC,EAMAC,EAIAC,EAKAC,EAjHOC,EDoFC,IAAIrC,EAAS,eAOL,IAAIA,EAAS,gBCjHjC,SAAWwB,GAEPA,EAAsB,WAAI,IAC1BA,EAAiB,MAAI,IACrBA,EAAkB,OAAI,IACtBA,EAAmB,QAAI,IACvBA,EAAiB,MAAI,IACrBA,EAAgB,KAAI,IACpBA,EAAkB,OAAI,IAEtBA,EAA6B,kBAAI,MACjCA,EAAoB,SAAI,MACxBA,EAAqB,UAAI,MACzBA,EAAsB,WAAI,MAC1BA,EAAoB,SAAI,MACxBA,EAAmB,QAAI,MACvBA,EAAqB,UAAI,MAEzBA,EAAuB,YAAI,MAC3BA,EAAgB,KAAI,KACvB,CApBD,CAoBGA,IAAcA,EAAY,CAAC,KAEnBa,EAaR,IAAa,EAAW,CAAC,IAZX,GAAI,KACjBA,EAAc,IAAI,MAClBA,EAAe,KAAI,OACnBA,EAAoB,UAAI,YACxBA,EAAoB,UAAI,YACxBA,EAAc,IAAI,MAClBA,EAAyB,eAAI,iBAC7BA,EAAuB,aAAI,eAC3BA,EAAsB,YAAI,cAC1BA,EAAiB,OAAI,SACrBA,EAA2B,iBAAI,mBAC/BA,EAAkB,QAAI,UAG1B,SAAWZ,GACPA,EAA6B,mBAAI,IACjCA,EAA0B,gBAAI,IAC9BA,EAA4B,kBAAI,IAChCA,EAA6B,mBAAI,IACjCA,EAAsB,YAAI,IAC1BA,EAAuB,aAAI,IAC3BA,EAAoB,UAAI,IACxBA,EAAqB,WAAI,IACzBA,EAA6B,mBAAI,GACpC,CAVD,CAUGA,IAAaA,EAAW,CAAC,IAE5B,SAAWC,GACPA,EAAwB,OAAI,IAC5BA,EAA8B,aAAI,GACrC,CAHD,CAGGA,IAAoBA,EAAkB,CAAC,IAE1C,SAAWC,GACPA,EAAmB,QAAI,IACvBA,EAAe,IAAI,IACnBA,EAAgB,KAAI,IACpBA,EAAe,IAAI,IACnBA,EAAiB,MAAI,IACrBA,EAAe,IAAI,IACnBA,EAAgB,KAAI,GACvB,CARD,CAQGA,IAAcA,EAAY,CAAC,IAE9B,SAAWC,GACPA,EAAmB,OAAI,IACvBA,EAA0B,cAAI,IAC9BA,EAA6B,iBAAI,IACjCA,EAAmB,OAAI,IACvBA,EAA+B,mBAAI,IACnCA,EAAgC,oBAAI,IACpCA,EAAsB,UAAI,KAC1BA,EAA4B,gBAAI,KAChCA,EAA0B,cAAI,KAC9BA,EAAiC,qBAAI,KACrCA,EAAuB,WAAI,KAC3BA,EAAiC,qBAAI,KACrCA,EAAgC,oBAAI,KACpCA,EAAiC,qBAAI,KACrCA,EAAoB,QAAI,KACxBA,EAA2B,eAAI,KAC/BA,EAA0B,cAAI,KAC9BA,EAAiC,qBAAI,KACrCA,EAA4B,gBAAI,KAChCA,EAA2B,eAAI,KAC/BA,EAAyB,aAAI,KAC7BA,EAAyB,aAAI,KAC7BA,EAA8C,kCAAI,KAClDA,EAA+B,mBAAI,KACnCA,EAAsC,0BAAI,KAC1CA,EAAyC,6BAAI,KAC7CA,EAAoC,wBAAI,KACxCA,EAAqC,yBAAI,IAC5C,CA7BD,CA6BGA,IAAeA,EAAa,CAAC,IAEhC,SAAWC,GACPA,EAA2B,UAAI,IAC/BA,EAAyB,QAAI,GAChC,CAHD,CAGGA,IAAoBA,EAAkB,CAAC,IAE1C,SAAWC,GACPA,EAAwB,aAAI,IAC5BA,EAA+B,oBAAI,IACnCA,EAAgC,qBAAI,IACpCA,EAA2B,gBAAI,IAC/BA,EAAyB,cAAI,IAC7BA,EAAuB,YAAI,IAC3BA,EAAyB,cAAI,IAC7BA,EAA2B,gBAAI,GAClC,CATD,CASGA,IAAcA,EAAY,CAAC,IAE9B,SAAWC,GACPA,EAAmC,aAAI,IACvCA,EAAmC,aAAI,IACvCA,EAA+C,yBAAI,GACtD,CAJD,CAIGA,IAAyBA,EAAuB,CAAC,IAEpD,SAAWC,GACPA,EAAyB,KAAI,GAChC,CAFD,CAEGA,IAAuBA,EAAqB,CAAC,IAEhD,SAAWC,GACPA,EAA2B,QAAI,IAC/BA,EAA4B,SAAI,IAChCA,EAA6B,UAAI,GACpC,CAJD,CAIGA,IAAsBA,EAAoB,CAAC,IAE9C,SAAWC,GACPA,EAAwB,UAAI,GAC/B,CAFD,CAEGA,IAAiBA,EAAe,CAAC,IAEpC,SAAWC,GACPA,EAAoD,4BAAI,IACxDA,EAAqC,aAAI,GAC5C,CAHD,CAGGA,IAA2BA,EAAyB,CAAC,IAExD,SAAWC,GACPA,EAA0B,WAAI,IAC9BA,EAA4B,aAAI,IAChCA,EAAoB,KAAI,IACxBA,EAAoB,KAAI,IACxBA,EAAsB,OAAI,IAC1BA,EAA6B,cAAI,IACjCA,EAAsB,OAAI,IAC1BA,EAA6B,cAAI,IACjCA,EAAsC,uBAAI,GAC7C,CAVD,CAUGA,IAAkBA,EAAgB,CAAC,ICrJtC,MACA,GACEE,WAFmC,oBAAXC,QAA0BA,OAAOD,YAAcC,OAAOD,WAAWnE,KAAKoE,SCGhG,IAAIC,EACJ,MAAMC,EAAQ,IAAIC,WAAW,IACd,SAASC,IAEtB,IAAKH,IAEHA,EAAoC,oBAAXD,QAA0BA,OAAOC,iBAAmBD,OAAOC,gBAAgBrE,KAAKoE,SAEpGC,GACH,MAAM,IAAI/C,MAAM,4GAIpB,OAAO+C,EAAgBC,EACzB,CCXA,MAAMG,EAAY,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAI,MAAOA,EACzBD,EAAUtD,MAAMuD,EAAI,KAAOC,SAAS,IAAIlE,MAAM,ICmBhD,MCxBMmE,EDAN,SAAYC,EAASC,EAAKC,GACxB,GAAI,EAAOZ,aAAeW,IAAQD,EAChC,OAAO,EAAOV,aAIhB,MAAMa,GADNH,EAAUA,GAAW,CAAC,GACDI,SAAWJ,EAAQL,KAAOA,KAK/C,GAHAQ,EAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,GAAVA,EAAK,GAAY,IAEvBF,EAAK,CACPC,EAASA,GAAU,EAEnB,IAAK,IAAIL,EAAI,EAAGA,EAAI,KAAMA,EACxBI,EAAIC,EAASL,GAAKM,EAAKN,GAGzB,OAAOI,CACT,CAEA,ODbK,SAAyBI,EAAKH,EAAS,GAG5C,OAAON,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAM,IAAMN,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAM,IAAMN,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAM,IAAMN,EAAUS,EAAIH,EAAS,IAAMN,EAAUS,EAAIH,EAAS,IAAM,IAAMN,EAAUS,EAAIH,EAAS,KAAON,EAAUS,EAAIH,EAAS,KAAON,EAAUS,EAAIH,EAAS,KAAON,EAAUS,EAAIH,EAAS,KAAON,EAAUS,EAAIH,EAAS,KAAON,EAAUS,EAAIH,EAAS,IAChf,CCSSI,CAAgBH,EACzB,EExBA,IAAII,GACJ,SAAWA,GACPA,EAA+B,aAAI,eACnCA,EAAuC,qBAAI,uBAC3CA,EAA0B,QAAI,UAC9BA,EAA+B,aAAI,cACtC,CALD,CAKGA,IAAqBA,EAAmB,CAAC,ICH5C,MAAMC,UAAkChE,EACpC,WAAA7C,GACIiD,MAAM,CACFhD,KAAM2G,EAAiBE,qBACvB/E,QAAS,8CAEjB,ECHJ,MAAMgF,EACF,WAAA/G,CAAYgH,GACRlJ,KAAKkJ,QAAUA,CACnB,CAOA,aAAMC,CAAQzI,EAAKc,GACf,IAAKxB,KAAKkJ,QACN,MAAM,IAAIH,EACd/I,KAAKkJ,QAAQC,QAAQzI,EAAKc,EAC9B,CAOA,aAAM4H,CAAQ1I,GACV,IAAKV,KAAKkJ,QACN,MAAM,IAAIH,EACd,OAAO/I,KAAKkJ,QAAQE,QAAQ1I,EAChC,CAMA,gBAAM2I,CAAW3I,GACb,IAAKV,KAAKkJ,QACN,MAAM,IAAIH,EACd/I,KAAKkJ,QAAQG,WAAW3I,EAC5B,CAKA,WAAM4I,GACF,IAAKtJ,KAAKkJ,QACN,MAAM,IAAIH,EACd/I,KAAKkJ,QAAQI,OACjB,EC/CJ,MAAM,EACF,WAAApH,GACIlC,KAAKkJ,QAAU,IAAIzD,GACvB,CACA,UAAIvB,GACA,OAAOlE,KAAKkJ,QAAQK,IACxB,CACA,GAAA7I,CAAI8I,GACA,OAAIA,EAAQxJ,KAAKkE,OAAS,EACf,KAEJuF,MAAMC,KAAK1J,KAAKkJ,QAAQS,QAAQH,EAC3C,CACA,OAAAL,CAAQzI,EAAKc,GACTxB,KAAKkJ,QAAQnD,IAAIrF,EAAKc,EAC1B,CACA,OAAA4H,CAAQ1I,GACJ,OAAOV,KAAKkJ,QAAQnI,IAAIL,IAAQ,IACpC,CACA,UAAA2I,CAAW3I,GACPV,KAAKkJ,QAAQU,OAAOlJ,EACxB,CACA,KAAA4I,GACItJ,KAAKkJ,QAAQI,OACjB,ECpBJ,MAAM,EAAS,IAAIrH,EAAc,oBCJ3B4H,EAAgB,CAClBC,UAAW,oBACXC,gBAAiB,QACjBC,YAAa,KACbC,WAAY,OACZC,gBAAiB,EACjBC,iBAAkB,IAEhBC,EAAiB,UCLvB,SAASC,EAAcC,GACnB,IAAIC,EAAM,EACVA,EAAMD,EAAIpG,OACV,IAAK,IAAIkE,EAAIkC,EAAIpG,OAAQkE,GAAK,EAAGA,GAAK,EAAG,CACrC,MAAMoC,EAAWF,EAAIG,WAAWrC,GAC5BoC,EAAW,KAAQA,GAAY,KAC/BD,GAAO,EAEFC,EAAW,MAASA,GAAY,QACrCD,GAAO,GAGPC,GAAY,OAAUA,GAAY,QAClCpC,GAAK,EAEb,CACA,OAAOmC,CACX,CAIA,SAASG,IAEL,OADoB,IAAIhI,MACLiI,SACvB,CAUA,MAAMC,EAAqBd,GAAc,GAAGA,IAAYM,ICtClDS,EAA0B,CAACC,EAAUC,EAAiBhG,IAAiB,CAACiG,EAAW7I,EAAM8I,KAC3F,MAAM,QAAEhH,EAAO,mBAAEgB,GAAuB6F,EAAS3I,GACjD,IAAK6I,EACD,MAAM,IAAID,EAAe,CACrB5I,OACA8B,QAASgH,EACH,GAAGhH,KAAWgH,IACdhH,EACNgB,sBAER,ECRJ,IAAIiG,GACJ,SAAWA,GACPA,EAA4B,YAAI,cAChCA,EAA6B,aAAI,eACjCA,EAAiC,iBAAI,kBACxC,CAJD,CAIGA,IAAmBA,EAAiB,CAAC,IACxC,MAWMC,EAASN,EAXO,CAClB,CAACK,EAAeE,aAAc,CAC1BnH,QAAS,wCAEb,CAACiH,EAAeG,cAAe,CAC3BpH,QAAS,sBAEb,CAACiH,EAAeI,kBAAmB,CAC/BrH,QAAS,4BCbX,EAAS,IAAIhC,EAAc,gBAKjC,MAAMsJ,EAMF,WAAArJ,EAAY,OAAEc,EAAM,gBAAEwI,IAClBxL,KAAKgD,OAAS,IACP6G,KACA7G,GAEPhD,KAAKwL,gBAAkBA,EACvBxL,KAAKyL,gBACT,CACA,aAAAC,GACI,MAAO,OACX,CAQA,SAAA3I,CAAUC,GAWN,OAVIA,IACIA,EAAO8G,WACP,EAAOlG,KAAK,qEAEhB5D,KAAKgD,OAAS,IACPhD,KAAKgD,UACLA,IAGXhD,KAAKyL,iBACEzL,KAAKgD,MAChB,CAKA,yBAAM2I,GACF,IAAIpC,QAAavJ,KAAK4L,aAAaxC,QAAQwB,EAAkB5K,KAAKgD,OAAO8G,YAKzE,OAJKP,UACKvJ,KAAK4L,aAAazC,QAAQyB,EAAkB5K,KAAKgD,OAAO8G,WAAY,KAC1EP,EAAO,KAEJsC,OAAOtC,EAClB,CAmBA,aAAMJ,CAAQzI,EAAKc,EAAO+G,GAEtB,GADA,EAAOxE,MAAM,oBAAoBrD,eAAiBc,mBAAuB+G,MACpE7H,GAAOA,IAAQ0J,EAEhB,YADA,EAAOxG,KAAK,sDAAsDwG,MAGtE,QAAqB,IAAV5I,EAEP,YADA,EAAOoC,KAAK,8CAGhB,MAAMkI,EAAmB,CACrBC,cAAgCzL,IAAtBiI,GAASwD,SACbxD,EAAQwD,SACR/L,KAAKgD,OAAOkH,gBAClB8B,aAA8B1L,IAArBiI,GAASyD,QACZzD,EAAQyD,QACRhM,KAAKgD,OAAOiH,WAAaS,KAEnC,GAAIoB,EAAiBC,SAAW,GAAKD,EAAiBC,SAAW,EAE7D,YADA,EAAOnI,KAAK,iFAGhB,MAAMqI,EAAc,GAAGjM,KAAKgD,OAAO8G,YAAYpJ,IACzCwL,EAAOlM,KAAKmM,cAAcF,EAAazK,EAAOsK,GAEpD,GAAII,EAAKE,SAAWpM,KAAKgD,OAAOgH,YAC5B,EAAOpG,KAAK,kBAAkBlD,iDAGlC,IAEI,MAAM2L,QAAYrM,KAAK4L,aAAaxC,QAAQ6C,GAK5C,GAJII,SACMrM,KAAKsM,gBAAgBL,EAAaM,KAAKC,MAAMH,GAAKD,gBAGlDpM,KAAKyM,YAAYP,EAAKE,UAAW,CACvC,MAAMM,QAAkB1M,KAAK2M,kCAC7B,SAAU3M,KAAKyM,YAAYP,EAAKE,UAAW,CACvC,MAAMQ,QAAkB5M,KAAK4M,UAAUV,EAAKE,gBACtCpM,KAAK6M,YAAYH,EAAWE,EACtC,CACJ,CAEA,OAAO5M,KAAK8M,aAAab,EAAaC,EAC1C,CACA,MAAOxF,GACH,EAAO9C,KAAK,mBAAmB8C,IACnC,CACJ,CAgBA,aAAM0C,CAAQ1I,EAAK6H,GAEf,IAAIwE,EACJ,GAFA,EAAOhJ,MAAM,oBAAoBrD,kBAAoB6H,MAEhD7H,GAAOA,IAAQ0J,EAEhB,OADA,EAAOxG,KAAK,sDAAsDwG,MAC3D,KAEX,MAAM6B,EAAc,GAAGjM,KAAKgD,OAAO8G,YAAYpJ,IAC/C,IAEI,GADAqM,QAAe/M,KAAK4L,aAAaxC,QAAQ6C,GAC3B,MAAVc,EAAgB,CAChB,UAAU/M,KAAKgN,UAAUf,GAOrB,aADmBjM,KAAKiN,kBAAkBV,KAAKC,MAAMO,GAASd,IAClDiB,WALNlN,KAAKsM,gBAAgBL,EAAaM,KAAKC,MAAMO,GAAQX,SAOnE,CACA,GAAI7D,GAAStC,SAAU,CACnB,MAAMoG,EAAM9D,EAAQtC,WAIpB,OAHY,OAARoG,SACMrM,KAAKmJ,QAAQzI,EAAK2L,EAAK9D,GAE1B8D,CACX,CACA,OAAO,IACX,CACA,MAAO3F,GAEH,OADA,EAAO9C,KAAK,mBAAmB8C,KACxB,IACX,CACJ,CAQA,gBAAM2C,CAAW3I,GAEb,GADA,EAAOqD,MAAM,uBAAuBrD,MAC/BA,GAAOA,IAAQ0J,EAEhB,YADA,EAAOxG,KAAK,sDAAsDwG,MAGtE,MAAM6B,EAAc,GAAGjM,KAAKgD,OAAO8G,YAAYpJ,IAC/C,IACI,MAAM2L,QAAYrM,KAAK4L,aAAaxC,QAAQ6C,GACxCI,SACMrM,KAAKsM,gBAAgBL,EAAaM,KAAKC,MAAMH,GAAKD,SAEhE,CACA,MAAO1F,GACH,EAAO9C,KAAK,sBAAsB8C,IACtC,CACJ,CAOA,gBAAMyG,GACF,IACI,aAAanN,KAAKoN,iBACtB,CACA,MAAO1G,GAEH,OADA,EAAO9C,KAAK,sBAAsB8C,KAC3B,EACX,CACJ,CACA,UAAAkF,GACI,OAAO5L,KAAKwL,eAChB,CAQA,eAAMwB,CAAUtM,GACZ,MAAM2M,QAAarN,KAAK4L,aAAaxC,QAAQ1I,GAC7CyK,EAAgB,OAATkC,EAAenC,EAAeE,YAAa,QAAQ1K,KAC1D,MAAMwL,EAAOK,KAAKC,MAAMa,GACxB,OAAI3C,KAAoBwB,EAAKF,OAIjC,CAOA,qBAAMM,CAAgBL,EAAa1C,GAC/B,MAAM2C,QAAalM,KAAK4L,aAAaxC,QAAQ6C,GAC7Cd,EAAgB,OAATe,EAAehB,EAAeE,YAAa,QAAQa,KAC1D,MAAMqB,EAAW/D,GAAQgD,KAAKC,MAAMN,GAAME,eAEpCpM,KAAKuN,2BAA2BD,GAEtC,UACUtN,KAAK4L,aAAavC,WAAW4C,EACvC,CACA,MAAOuB,SAEGxN,KAAKyN,2BAA2BH,GACtC,EAAO3J,MAAM,0BAA0B6J,IAC3C,CACJ,CAQA,aAAArB,CAAczL,EAAKc,EAAO+G,GACtB,MAAM2D,EAAO,CACTxL,MACAwM,KAAM1L,EACN8C,UAAWoG,IACXgD,YAAahD,IACbqB,SAAUxD,EAAQwD,UAAY,EAC9BC,QAASzD,EAAQyD,SAAW,EAC5B7I,YAAa3B,EACb4K,SAAU,GAMd,OAHAF,EAAKE,SAAW/B,EAAckC,KAAKoB,UAAUzB,IAE7CA,EAAKE,SAAW/B,EAAckC,KAAKoB,UAAUzB,IACtCA,CACX,CACA,cAAAT,GACQzL,KAAKgD,OAAOgH,YAAchK,KAAKgD,OAAO+G,kBACtC,EAAOpG,MAAM,uGACb3D,KAAKgD,OAAOgH,YAAcH,EAAcG,cAExChK,KAAKgD,OAAOkH,gBAAkB,GAAKlK,KAAKgD,OAAOkH,gBAAkB,KACjE,EAAOvG,MAAM,8FACb3D,KAAKgD,OAAOkH,gBAAkBL,EAAcK,kBAE5C2B,OAAO7L,KAAKgD,OAAOmH,kBAAoB,GACvC0B,OAAO7L,KAAKgD,OAAOmH,kBAAoB,KACvC,EAAOxG,MAAM,+FACb3D,KAAKgD,OAAOmH,iBAAmBN,EAAcM,kBAI7CnK,KAAKgD,OAAO+G,gBADG,UAEf,EAAOpG,MAAM,6FACb3D,KAAKgD,OAAO+G,gBAAkBF,EAAcE,gBAEpD,CAMA,gCAAM0D,CAA2BG,GAC7B,MAAMrE,QAAavJ,KAAK2L,4BAClB3L,KAAK4L,aAAazC,QAAQyB,EAAkB5K,KAAKgD,OAAO8G,YAAaP,EAAOqE,GAAQvF,WAC9F,CAMA,gCAAMkF,CAA2BK,GAC7B,MAAMrE,QAAavJ,KAAK2L,4BAClB3L,KAAK4L,aAAazC,QAAQyB,EAAkB5K,KAAKgD,OAAO8G,YAAaP,EAAOqE,GAAQvF,WAC9F,CASA,uBAAM4E,CAAkBf,EAAMD,GAG1B,OAFAC,EAAKwB,YAAchD,UACb1K,KAAK4L,aAAazC,QAAQ8C,EAAaM,KAAKoB,UAAUzB,IACrDA,CACX,CAQA,kBAAMY,CAAab,EAAaC,SAEtBlM,KAAKyN,2BAA2BvB,EAAKE,UAE3C,UACUpM,KAAK4L,aAAazC,QAAQ8C,EAAaM,KAAKoB,UAAUzB,GAChE,CACA,MAAO2B,SAEG7N,KAAKuN,2BAA2BrB,EAAKE,UAC3C,EAAOzI,MAAM,sBAAsBkK,IACvC,CACJ,CAQA,eAAMjB,CAAUU,GACZ,MACMQ,QADY9N,KAAK2L,sBACK2B,EAAWtN,KAAKgD,OAAO+G,gBAC7CgE,GAAuB,EAAI/N,KAAKgD,OAAOmH,kBAAoBnK,KAAKgD,OAAO+G,gBAC7E,OAAO+D,EAAgBC,EACjBD,EACAC,CACV,CAQA,iBAAMtB,CAAYa,GAEd,OAAOA,QADWtN,KAAK2L,sBACC3L,KAAKgD,OAAO+G,eACxC,CASA,iBAAM8C,CAAYlD,EAAMiD,GACpB,MAAMoB,EAAQ,GACd,IAAIC,EAAerB,EACnB,IAAK,MAAMlM,KAAOiJ,EAAM,CACpB,MAAM0C,QAAYrM,KAAK4L,aAAaxC,QAAQ1I,GAC5C,GAAW,MAAP2L,EAAa,CACb,MAAMH,EAAOK,KAAKC,MAAMH,GACxB2B,EAAMnJ,KAAKqH,EACf,CACJ,CAGA8B,EAAME,MAAK,CAACC,EAAGC,IACPD,EAAEpC,SAAWqC,EAAErC,UACP,EAEHoC,EAAEpC,SAAWqC,EAAErC,SACb,EAGHoC,EAAET,YAAcU,EAAEV,aACV,EAGD,IAGnB,IAAK,MAAMxB,KAAQ8B,EAIf,SAFMhO,KAAKsM,gBAAgBJ,EAAKxL,IAAKwL,EAAKE,UAC1C6B,GAAgB/B,EAAKE,SACjB6B,GAAgB,EAChB,MAGZ,CAQA,qCAAMtB,GACF,MAAM0B,EAAgB,GAChB1E,QAAa3J,KAAKoN,gBAAgB,CACpCkB,aAAa,IAEjB,IAAK,MAAM5N,KAAOiJ,QACJ3J,KAAKgN,UAAUtM,SACfV,KAAKsM,gBAAgB5L,GAG3B2N,EAAcxJ,KAAKnE,GAG3B,OAAO2N,CACX,CAMA,WAAM/E,GACF,EAAOvF,MAAM,eACb,IACI,MAAM4F,QAAa3J,KAAKmN,aACxB,IAAK,MAAMzM,KAAOiJ,EAAM,CACpB,MAAMsC,EAAc,GAAGjM,KAAKgD,OAAO8G,YAAYpJ,UACzCV,KAAK4L,aAAavC,WAAW4C,EACvC,CACJ,CACA,MAAOvF,GACH,EAAO9C,KAAK,iBAAiB8C,IACjC,CACJ,ECtcJ,MAAM,EAAS,IAAIzE,EAAc,gBAIjC,MAAMsM,UAAqBhD,EAKvB,WAAArJ,CAAYc,GACR,MAAMkG,ENVsB,MAChC,IAEI,GAAsB,oBAAX3F,QAA0BA,OAAOiL,aACxC,OAAOjL,OAAOiL,YAEtB,CACA,MAAO9H,GAEH,EAAO5C,KAAK,iEAChB,CAEA,OAAO,IAAI,CAAiB,EMFR2K,GAChBtJ,MAAM,CAAEnC,SAAQwI,gBAAiB,IAAIvC,EAAgBC,KACrDlJ,KAAKkJ,QAAUA,EACflJ,KAAKoJ,QAAUpJ,KAAKoJ,QAAQ1F,KAAK1D,MACjCA,KAAKmJ,QAAUnJ,KAAKmJ,QAAQzF,KAAK1D,MACjCA,KAAKqJ,WAAarJ,KAAKqJ,WAAW3F,KAAK1D,KAC3C,CACA,qBAAMoN,CAAgB7E,GAClB,MAAM,YAAE+F,GAAgB/F,GAAW,CAAC,EAC9BoB,EAAO,GACb,IAAK,IAAIvB,EAAI,EAAGA,EAAIpI,KAAKkJ,QAAQhF,OAAQkE,IAAK,CAC1C,MAAM1H,EAAMV,KAAKkJ,QAAQxI,IAAI0H,GACzBkG,GAAe5N,IAAQkK,EAAkB5K,KAAKgD,OAAO8G,YAGrDpJ,GAAKgO,WAAW1O,KAAKgD,OAAO8G,YAC5BH,EAAK9E,KAAKnE,EAAIiO,UAAU3O,KAAKgD,OAAO8G,UAAU5F,QAEtD,CACA,OAAOyF,CACX,CAMA,cAAAiF,CAAe5L,GAKX,OAJKA,EAAO8G,WAAa9G,EAAO8G,YAAcD,EAAcC,YACxD,EAAOnG,MAAM,uDACbX,EAAO8G,UAAYY,EAAerC,YAE/B,IAAIkG,EAAavL,EAC5B,EChDJ,MAAM6L,EAAQ,IAAIN,ECeZ,EAAS1D,EAdS,CACpB,CAAC/B,EAAiBgG,cAAe,CAC7B7K,QAAS,2DAEb,CAAC6E,EAAiBE,sBAAuB,CACrC/E,QAAS,+CAEb,CAAC6E,EAAiBiG,SAAU,CACxB9K,QAAS,8BAEb,CAAC6E,EAAiBkG,cAAe,CAC7B/K,QAAS,mCCZX,EAAS,IAAIhC,EAAc,iBCoJJrB,OAAOqO,OA2GXrO,OAAOqO,OA2DkB,mBAApBC,iBAAiCA,gBC3TxD,IAAIC,GAAa,GAQbC,GAAM,IAAIC,YAAY,CAC7B,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aAKOC,GAAO,CACd,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YAKOC,GAAsBC,KAAKC,IAAI,EAAG,IAAM,ECzF/CC,GAA2B,WAC3B,SAASA,IACL1P,KAAK2P,MAAQC,WAAWlG,KAAK4F,IAC7BtP,KAAK6P,KAAO,IAAID,WAAW,IAC3B5P,KAAK8P,OAAS,IAAI7H,WAAW,IAC7BjI,KAAK+P,aAAe,EACpB/P,KAAKgQ,YAAc,EAInBhQ,KAAKiQ,UAAW,CACpB,CAsGA,OArGAP,EAAUxO,UAAUgP,OAAS,SAAUhD,GACnC,GAAIlN,KAAKiQ,SACL,MAAM,IAAIjL,MAAM,iDAEpB,IAAImL,EAAW,EACXC,EAAalD,EAAKkD,WAEtB,GADApQ,KAAKgQ,aAAeI,EACG,EAAnBpQ,KAAKgQ,YAAkBT,GACvB,MAAM,IAAIvK,MAAM,uCAEpB,KAAOoL,EAAa,GAChBpQ,KAAK8P,OAAO9P,KAAK+P,gBAAkB7C,EAAKiD,KACxCC,IACIpQ,KAAK+P,eAAiBZ,KACtBnP,KAAKqQ,aACLrQ,KAAK+P,aAAe,EAGhC,EACAL,EAAUxO,UAAUoP,OAAS,WACzB,IAAKtQ,KAAKiQ,SAAU,CAChB,IAAIM,EAAgC,EAAnBvQ,KAAKgQ,YAClBQ,EAAa,IAAIC,SAASzQ,KAAK8P,OAAOA,OAAQ9P,KAAK8P,OAAOY,WAAY1Q,KAAK8P,OAAOM,YAClFO,EAAoB3Q,KAAK+P,aAG7B,GAFAS,EAAWI,SAAS5Q,KAAK+P,eAAgB,KAErCY,EAAoBxB,IAAcA,GAAgB,CAClD,IAAK,IAAI/G,EAAIpI,KAAK+P,aAAc3H,EAAI+G,GAAY/G,IAC5CoI,EAAWI,SAASxI,EAAG,GAE3BpI,KAAKqQ,aACLrQ,KAAK+P,aAAe,CACxB,CACA,IAAS3H,EAAIpI,KAAK+P,aAAc3H,EAAI+G,GAAgB/G,IAChDoI,EAAWI,SAASxI,EAAG,GAE3BoI,EAAWK,UAAU1B,GAAgBK,KAAKsB,MAAMP,EAAa,aAAc,GAC3EC,EAAWK,UAAU1B,GAAgBoB,GACrCvQ,KAAKqQ,aACLrQ,KAAKiQ,UAAW,CACpB,CAGA,IAAIc,EAAM,IAAI9I,WDpDK,ICqDnB,IAASG,EAAI,EAAGA,EAAI,EAAGA,IACnB2I,EAAQ,EAAJ3I,GAAUpI,KAAK2P,MAAMvH,KAAO,GAAM,IACtC2I,EAAQ,EAAJ3I,EAAQ,GAAMpI,KAAK2P,MAAMvH,KAAO,GAAM,IAC1C2I,EAAQ,EAAJ3I,EAAQ,GAAMpI,KAAK2P,MAAMvH,KAAO,EAAK,IACzC2I,EAAQ,EAAJ3I,EAAQ,GAAMpI,KAAK2P,MAAMvH,KAAO,EAAK,IAE7C,OAAO2I,CACX,EACArB,EAAUxO,UAAUmP,WAAa,WAG7B,IAFA,IAAeP,EAAN9P,KAAkB8P,OAAQH,EAA1B3P,KAAqC2P,MAC1CqB,EAASrB,EAAM,GAAIsB,EAAStB,EAAM,GAAIuB,EAASvB,EAAM,GAAIwB,EAASxB,EAAM,GAAIyB,EAASzB,EAAM,GAAI0B,EAAS1B,EAAM,GAAI2B,EAAS3B,EAAM,GAAI4B,EAAS5B,EAAM,GAC/IvH,EAAI,EAAGA,EAAI+G,GAAY/G,IAAK,CACjC,GAAIA,EAAI,GACJpI,KAAK6P,KAAKzH,IACY,IAAhB0H,EAAW,EAAJ1H,KAAkB,IACD,IAApB0H,EAAW,EAAJ1H,EAAQ,KAAc,IACT,IAApB0H,EAAW,EAAJ1H,EAAQ,KAAc,EACV,IAApB0H,EAAW,EAAJ1H,EAAQ,OAEvB,CACD,IAAIoJ,EAAIxR,KAAK6P,KAAKzH,EAAI,GAClBqJ,GAASD,IAAM,GAAOA,GAAK,KAASA,IAAM,GAAOA,GAAK,IAAQA,IAAM,GAEpEE,IADJF,EAAIxR,KAAK6P,KAAKzH,EAAI,OACC,EAAMoJ,GAAK,KAASA,IAAM,GAAOA,GAAK,IAAQA,IAAM,EACvExR,KAAK6P,KAAKzH,IACJqJ,EAAOzR,KAAK6P,KAAKzH,EAAI,GAAM,IAAOsJ,EAAO1R,KAAK6P,KAAKzH,EAAI,IAAO,EACxE,CACA,IAAIuJ,KAAWP,IAAW,EAAMA,GAAU,KACpCA,IAAW,GAAOA,GAAU,KAC5BA,IAAW,GAAOA,GAAU,KAC5BA,EAASC,GAAYD,EAASE,GAChC,IACEC,GAAWnC,GAAIhH,GAAKpI,KAAK6P,KAAKzH,GAAM,GAAM,GAC5C,EACAwJ,IAASZ,IAAW,EAAMA,GAAU,KAClCA,IAAW,GAAOA,GAAU,KAC5BA,IAAW,GAAOA,GAAU,MAC5BA,EAASC,EAAWD,EAASE,EAAWD,EAASC,GACnD,EACJK,EAASD,EACTA,EAASD,EACTA,EAASD,EACTA,EAAUD,EAASQ,EAAM,EACzBR,EAASD,EACTA,EAASD,EACTA,EAASD,EACTA,EAAUW,EAAKC,EAAM,CACzB,CACAjC,EAAM,IAAMqB,EACZrB,EAAM,IAAMsB,EACZtB,EAAM,IAAMuB,EACZvB,EAAM,IAAMwB,EACZxB,EAAM,IAAMyB,EACZzB,EAAM,IAAM0B,EACZ1B,EAAM,IAAM2B,EACZ3B,EAAM,IAAM4B,CAChB,EACO7B,CACX,CAlH8B,GCA1B,GAA6B,oBAAXmC,QAA0BA,OAAOnI,KACjD,SAAUoI,GAAS,OAAOD,OAAOnI,KAAKoI,EAAO,OAAS,ECLnCA,IAAU,IAAIC,aAAcC,OAAOF,GDOrD,SAASG,GAAgB/E,GAE5B,OAAIA,aAAgBjF,WACTiF,EACS,iBAATA,EACA,GAASA,GAEhBgF,YAAYC,OAAOjF,GACZ,IAAIjF,WAAWiF,EAAK4C,OAAQ5C,EAAKwD,WAAYxD,EAAKkD,WAAanI,WAAWmK,mBAE9E,IAAInK,WAAWiF,EAC1B,CEdA,IAAImF,GAAwB,WACxB,SAASA,EAAOC,GACZtS,KAAKsS,OAASA,EACdtS,KAAKuS,KAAO,IAAI7C,GAChB1P,KAAKwS,OACT,CA0DA,OAzDAH,EAAOnR,UAAUgP,OAAS,SAAUuC,GCRjC,IAAqBvF,EDSpB,ICRgB,iBADIA,EDSJuF,GCPO,IAAhBvF,EAAKhJ,OAEW,IAApBgJ,EAAKkD,cDKmBpQ,KAAK2D,MAGhC,IACI3D,KAAKuS,KAAKrC,OAAO+B,GAAgBQ,GACrC,CACA,MAAO/L,GACH1G,KAAK2D,MAAQ+C,CACjB,CACJ,EAIA2L,EAAOnR,UAAUwR,WAAa,WAC1B,GAAI1S,KAAK2D,MACL,MAAM3D,KAAK2D,MAEf,OAAI3D,KAAK2S,OACA3S,KAAK2S,MAAM1C,UACZjQ,KAAK2S,MAAMzC,OAAOlQ,KAAKuS,KAAKjC,UAEzBtQ,KAAK2S,MAAMrC,UAEftQ,KAAKuS,KAAKjC,QACrB,EAMA+B,EAAOnR,UAAUoP,OAAS,WACtB,OLwEkBsC,EKxED5S,KLwEU6S,OKxEJ,ELwEmBC,EKxEH,WACnC,OLiFL,SAAqBF,EAASG,GACnC,IAAsGC,EAAGC,EAAGC,EAAxGC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,EAAI,EAAGI,KAAM,GAAIC,IAAK,IAAeC,EAAI5S,OAAOqO,QAA4B,mBAAbwE,SAA0BA,SAAW7S,QAAQM,WACtL,OAAOsS,EAAEE,KAAOC,EAAK,GAAIH,EAAS,MAAIG,EAAK,GAAIH,EAAU,OAAIG,EAAK,GAAsB,mBAAXrS,SAA0BkS,EAAElS,OAAOsS,UAAY,WAAa,OAAO5T,IAAM,GAAIwT,EAC1J,SAASG,EAAKpR,GAAK,OAAO,SAAUsR,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOP,IAAMA,EAAI,EAAGM,EAAG,KAAOX,EAAI,IAAKA,OACnC,GAAIH,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAE9R,KAAK6R,GAAI,GAAKA,EAAES,SAAWR,EAAIA,EAAE9R,KAAK6R,EAAGa,EAAG,KAAKE,KAAM,OAAOd,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAE1R,QACzBsS,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAE5R,MAAOsS,EAAG,GAAIE,MAAM,GAChD,KAAK,EAAGb,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,MAAkBf,GAAZA,EAAIC,EAAEG,MAAYpP,OAAS,GAAKgP,EAAEA,EAAEhP,OAAS,KAAkB,IAAV4P,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,QAAU,CAC3G,GAAc,IAAVW,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEC,EAAEC,MAAQU,EAAG,GAAI,KAAO,CACrF,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQF,EAAE,GAAI,CAAEC,EAAEC,MAAQF,EAAE,GAAIA,EAAIY,EAAI,KAAO,CACpE,GAAIZ,GAAKC,EAAEC,MAAQF,EAAE,GAAI,CAAEC,EAAEC,MAAQF,EAAE,GAAIC,EAAEI,IAAI1O,KAAKiP,GAAK,KAAO,CAC9DZ,EAAE,IAAIC,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKf,EAAK3R,KAAKwR,EAASO,EAC5B,CAAE,MAAOzM,GAAKoN,EAAK,CAAC,EAAGpN,GAAIuM,EAAI,CAAG,CAAE,QAAUD,EAAIE,EAAI,CAAG,CACzD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtS,MAAOsS,EAAG,GAAKA,EAAG,QAAK,EAAQE,MAAM,EAC9E,CAtBgDE,CAAK,CAAC3R,EAAGsR,GAAK,CAAG,CAuBnE,CK3GmBM,CAAYnU,MAAM,SAAUoU,GAC/B,MAAO,CAAC,EAAcpU,KAAK0S,aAC/B,GACJ,ELsEC,KAFsC2B,OKxER,KL0EnBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUjT,GAAS,IAAM0S,EAAKpB,EAAUY,KAAKlS,GAAS,CAAE,MAAOkF,GAAK8N,EAAO9N,EAAI,CAAE,CAC1F,SAASgO,EAASlT,GAAS,IAAM0S,EAAKpB,EAAiB,MAAEtR,GAAS,CAAE,MAAOkF,GAAK8N,EAAO9N,EAAI,CAAE,CAC7F,SAASwN,EAAKS,GAJlB,IAAenT,EAIamT,EAAOX,KAAOO,EAAQI,EAAOnT,QAJ1CA,EAIyDmT,EAAOnT,MAJhDA,aAAiB6S,EAAI7S,EAAQ,IAAI6S,GAAE,SAAUE,GAAWA,EAAQ/S,EAAQ,KAIjBoT,KAAKH,EAAWC,EAAW,CAC7GR,GAAMpB,EAAYA,EAAU+B,MAAMjC,EAASC,GAAc,KAAKa,OAClE,IAPK,IAAmBd,EAASC,EAAYwB,EAAGvB,CKnE9C,EACAT,EAAOnR,UAAUsR,MAAQ,WAErB,GADAxS,KAAKuS,KAAO,IAAI7C,GACZ1P,KAAKsS,OAAQ,CACbtS,KAAK2S,MAAQ,IAAIjD,GACjB,IAAIoF,EAkBhB,SAA0BxC,GACtB,IAAIR,EAAQG,GAAgBK,GAC5B,GAAIR,EAAM1B,WAAajB,GAAY,CAC/B,IAAI4F,EAAa,IAAIrF,GACrBqF,EAAW7E,OAAO4B,GAClBA,EAAQiD,EAAWzE,QACvB,CACA,IAAIR,EAAS,IAAI7H,WAAWkH,IAE5B,OADAW,EAAO/J,IAAI+L,GACJhC,CACX,CA5BwBkF,CAAiBhV,KAAKsS,QAC9BK,EAAQ,IAAI1K,WAAWkH,IAC3BwD,EAAM5M,IAAI+O,GACV,IAAK,IAAI1M,EAAI,EAAGA,EAAI+G,GAAY/G,IAC5B0M,EAAM1M,IAAM,GACZuK,EAAMvK,IAAM,GAKhB,IAHApI,KAAKuS,KAAKrC,OAAO4E,GACjB9U,KAAK2S,MAAMzC,OAAOyC,GAETvK,EAAI,EAAGA,EAAI0M,EAAM1E,WAAYhI,IAClC0M,EAAM1M,GAAK,CAEnB,CACJ,EACOiK,CACX,CAhE2B,GEJ3B,MAAM4C,GAAe,CAAC,EAChBC,GAAe,CAAC,EACtB,IAAK,IAAI9M,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAI+M,EAAc/M,EAAEC,SAAS,IAAI+M,cACN,IAAvBD,EAAYjR,SACZiR,EAAc,IAAIA,KAEtBF,GAAa7M,GAAK+M,EAClBD,GAAaC,GAAe/M,CAChC,CCPA,MA6DMiN,GAAmB,CAACC,EAAWC,KACjC,GAAIA,GAAaC,QACb,OAAOlB,QAAQC,UAEnB,IAAIkB,EACAC,EACJ,MAAMC,EAAe,IAAIrB,SAAQC,IAC7BmB,EAAwBnB,EACxBkB,EAAYG,WAAWrB,EAASe,EAAU,IAO9C,OALAC,GAAaM,iBAAiB,SAAS,SAASC,EAAY3C,GACxD4C,aAAaN,GACbF,GAAaS,oBAAoB,QAASF,GAC1CJ,GACJ,IACOC,CAAY,EAEjBM,GAAiC,CAACC,EAAmBC,KACG,oBAAtDvV,OAAOM,UAAUmH,SAASjH,KAAK8U,KAGnCA,EAAkBE,UAAY,IACtBF,EAAkBE,WAAa,CAAC,EACpCD,YACH,EC5ECE,GAAoBC,GAAY1V,OAAO+I,KAAK2M,GAC7CC,KAAI7V,GAAOA,EAAI0U,gBACflH,OACArL,KAAK,KCAJ2T,GAVuB,aAUgBpB,cACvCqB,GALoB,uBAKarB,cAEjCsB,GAAsB,eACtBC,GAA8B,mBCL9BC,GAAgB,CAAClW,EAAKwM,KACxB,MAAM2J,EAAS,IAAIxE,GAAO3R,QAAOJ,GAIjC,OAHAuW,EAAO3G,OAAOhD,GAEK2J,EAAOnE,YACT,EAWfoE,GAAqB,CAACpW,EAAKwM,IJH1B,SAAe6J,GAClB,IAAIhG,EAAM,GACV,IAAK,IAAI3I,EAAI,EAAGA,EAAI2O,EAAM3G,WAAYhI,IAClC2I,GAAOkE,GAAa8B,EAAM3O,IAE9B,OAAO2I,CACX,CIDWiG,CADYJ,GAAclW,EAAKwM,ICjBpC+J,GAAuBX,GAAY1V,OAAOsW,QAAQZ,GACnDC,KAAI,EAAE7V,EAAKc,MAAW,CACvBd,IAAKA,EAAI0U,cACT5T,MAAOA,GAAO2V,OAAOC,QAAQ,OAAQ,MAAQ,OAE5ClJ,MAAK,CAACC,EAAGC,IAAOD,EAAEzN,IAAM0N,EAAE1N,KAAO,EAAI,IACrC6V,KAAIc,GAAS,GAAGA,EAAM3W,OAAO2W,EAAM7V,YACnCqB,KAAK,ICEJyU,GAAaC,GAAQC,mBAAmBD,GAAKH,QAAQ,WAAYK,IACjEA,GAAaC,GAAM,IAAIA,EAAEjN,WAAW,GAAGpC,SAAS,IAAIsP,gBCVpDC,GAAkB,CAACC,EAAUC,GAAgB,IAASD,EACtDC,EACIN,mBAAmBK,GAAUT,QAAQ,OAAQ,KAC7CS,EACJ,ICHAE,GAAoBhF,GAEV,MAARA,ELKW,mEKFXiF,GAAajF,GACM+D,GAAmB,KAAM/D,GLE3B,mBKInBiF,GAAgBjF,GAAyB,iBAATA,GAAqBb,YAAYC,OAAOY,IAASkF,GAAclF,GAC/FkF,GAAiBC,GAAgC,mBAAhBhG,aAA8BgG,aAAehG,aACxC,yBAAxCtR,OAAOM,UAAUmH,SAASjH,KAAK8W,GCjB7BC,GAAwBC,GAAsB,IAAI1V,KAAKA,KAAK6B,MAAQ6T,GCDpEC,GAAmBC,IACrB,IAAIvL,EACJ,MAAO,KACEA,IAIDA,EAASuL,KAENvL,EACV,ECbCwL,GAAkBC,IAAY,CAAC,OAAQ,MAAO,UAAUC,SAASD,EAAOb,eCIxEe,ICD0BC,GFDHC,OAASC,MAAKL,SAAQlC,UAASvD,SAAUwC,cAAauD,QAAOC,iCACtF,IAAIC,EACJ,IACIA,QAAaC,MAAMJ,EAAK,CACpBL,SACAlC,UACAvD,KAAMwF,GAAeC,GAAUzF,OAAOzS,EACtC4Y,OAAQ3D,EACRuD,QACAK,YAAaJ,EAA6B,UAAY,eAE9D,CACA,MAAOrS,GACH,GAAIA,aAAaqN,UACb,MAAM,IAAIhP,EAAa,CACnB5C,KAAM2G,EAAiBkG,aACvB/K,QAAS,gCACTiB,gBAAiBwB,IAGzB,MAAMA,CACV,CACA,MAAM0S,EAAkB,CAAC,EAgBzB,OAfAJ,EAAK1C,SAASxP,SAAQ,CAACtF,EAAOd,KAC1B0Y,EAAgB1Y,EAAI0U,eAAiB5T,CAAK,IAcvC,CAXH6X,WAAYL,EAAKM,OACjBhD,QAAS8C,EACTrG,KAAM,KAWNA,KAPkBnS,OAAO2Y,OAAOP,EAAKjG,MAAQ,CAAC,EAAG,CACjD1F,KAAMgL,IAAgB,IAAMW,EAAK3L,SACjCmM,KAAMnB,IAAgB,IAAMW,EAAKQ,SACjCC,KAAMpB,IAAgB,IAAMW,EAAKS,WAKpC,EExCwCC,GDC6B,CEHvC,EAAGC,kBAAkB,mBAAoBC,iBAAiB,MAAUlG,GAC5FkF,eAAmCiB,GACtC,GAAqC,IAAjCD,EAAezC,OAAOjT,OAEtB,aADqBwP,EAAKmG,GAGzB,CACD,MAAMC,EAAaH,EAAgBvE,cAKnC,OAJAyE,EAAQvD,QAAQwD,GAAcD,EAAQvD,QAAQwD,GACxC,GAAGD,EAAQvD,QAAQwD,MAAeF,IAClCA,QACiBlG,EAAKmG,EAEhC,CACJ,EbhB2B,EAAGE,cAJH,EAIyCC,eAAcC,eAAc1E,kBAChG,GAAIwE,EAAc,EACd,MAAM,IAAI/U,MAAM,sCAEpB,MAAO,CAAC0O,EAAMwG,IAAYtB,eAA+BiB,GACrD,IAAIlW,EAEAwW,EADAC,EAAgBF,EAAQE,eAAiB,EAG7C,MAAMC,EAAgC,KAClC,GAAIF,EAEA,OADAlE,GAA+BkE,EAAUC,GAClCD,EAIP,MADAlE,GAA+BtS,EAAOyW,GAChCzW,CACV,EAEJ,MAAQ4R,GAAaC,SAAW4E,EAAgBL,GAAa,CACzD,IACII,QAAiBzG,EAAKmG,GACtBlW,OAAQrD,CACZ,CACA,MAAOoG,GACH/C,EAAQ+C,EACRyT,OAAW7Z,CACf,CAEA8Z,GACKF,EAAQE,eAAiB,GAAKA,EACxBF,EAAQE,eAAiB,EAC1BA,EAAgB,EAC1BF,EAAQE,cAAgBA,EACxB,MAAM,0BAAEE,EAAyB,UAAEC,SAAoBP,EAAaG,EAAUxW,EAAOuW,GACrF,IAAIK,EAWA,OAAOF,IARP,GADAH,EAAQM,uBAAyBF,GAC5B/E,GAAaC,SAAW4E,EAAgBL,EAAa,CAEtD,MAAMU,EAAQR,EAAaG,SACrB/E,GAAiBoF,EAAOlF,EAClC,CAMR,CACA,GAAIA,GAAaC,QACb,MAAM,IAAIxQ,MAAM,oBAGhB,OAAOqV,GAEf,CAAC,EcjD4B,EAAGlB,cAAauB,SAAQC,UAAS7C,iBAAgB,MAC9E,IAAI8C,EACJ,MAAO,CAAClH,EAAMwG,IAAYtB,eAAiCiB,GACvDe,EAA2BA,GAA4B,EACvD,MAAMC,EAAqB,CACvB1B,YAAoC,mBAAhBA,QACRA,EAAY,CAChB2B,eAAgBZ,GAASM,uBAE3BrB,EACN4B,YAAa5C,GAAqByC,GAClCI,cAAeN,EACfO,eAAgBN,EAChB7C,iBAEEoD,OCbM,EAACrB,EAAStR,KAC1B,MAAM4S,ECFe,GAAGhC,cAAa4B,cAAc,IAAIrY,KAAQsY,gBAAeC,iBAAgBnD,iBAAgB,MAE9G,MAAM,YAAEsD,EAAW,gBAAEC,EAAe,aAAEC,GAAiBnC,GAEjD,SAAEoC,EAAQ,UAAEC,GCLI,CAACC,IACvB,MAAMF,EAAWE,EAAKC,cAActE,QAAQ,gBAAiB,IAC7D,MAAO,CACHmE,WACAC,UAAWD,EAASpX,MAAM,EAAG,GAChC,EDA+BwX,CAAkBZ,GAGlD,MAAO,CACHK,cACAQ,gBEP8C,GFIPJ,KAAWR,KAAeC,KEJavE,KFQ9E6E,WACAF,kBACAC,eACAE,YACAR,gBACAC,iBACAnD,gBACH,EDfqB+D,CAAiBtT,IACjC,YAAE6S,EAAW,gBAAEQ,EAAe,SAAEL,EAAQ,aAAED,GAAiBH,EAE3D7E,EAAU,IAAKuD,EAAQvD,SAC7BA,EAAmB,KAAIuD,EAAQhB,IAAIiD,KACnCxF,EAAQE,IAAmB+E,EACvBD,IACAhF,EAAQG,IAAgB6E,GAE5B,MAAMS,EAAgB,IAAKlC,EAASvD,WAE9B0F,EITW,EAACnC,GAAW+B,kBAAiBL,WAAUF,kBAAiBG,YAAWR,gBAAeC,iBAAgBnD,oBAEnH,MAAMmE,ECKkB,GAAGlJ,OAAMuD,UAASkC,SAAQK,OAAOf,GAAgB,KAAS,OAClFU,EACAZ,GAAgBiB,EAAIhB,SAAUC,IfbDoE,EecLrD,EAAIqD,afdkBzS,MAAMC,KAAKwS,GACxDhO,MAAK,EAAEiO,EAAMC,IAAQC,EAAMC,KACxBH,IAASE,EACFD,EAAOE,GAAQ,EAAI,EAEvBH,EAAOE,GAAQ,EAAI,IAEzB9F,KAAI,EAAE7V,EAAK2L,KAAS,GAAGiL,GAAU5W,MAAQ4W,GAAUjL,OACnDxJ,KAAK,MeONoU,GAAoBX,GACpBD,GAAiBC,GACjByB,GAAiBhF,IACnBlQ,KAAK,MflByB,IAACqZ,CekBrB,EDZiBK,CAAoB1C,EAAS/B,GAIhD0E,EEJc,EAACf,EAAMG,EAAiBa,IAAkB,CAAC9F,GAA6B8E,EAAMG,EAAiBa,GAAe5Z,KAAK,MFIlH6Z,CAAgBnB,EAAUK,EAFzB9E,GAAmB,KAAMmF,IAIzCD,EAAYlF,GGRA,EAACuE,EAAiBI,EAAMf,EAAQC,KAClD,MACMgC,EAAU/F,GADJ,OAA0ByE,IACHI,GAC7BmB,EAAYhG,GAAc+F,EAASjC,GACnCmC,EAAajG,GAAcgG,EAAWjC,GAE5C,OADmB/D,GAAciG,EAAYnG,GAC5B,EHEoBoG,CAAczB,EAAiBG,EAAWR,EAAeC,GAAiBuB,GAC/G,OAAOR,CAAS,EJAEe,CAAahB,EAAeZ,GACxC6B,EAAkB,cAAc5B,KAAeQ,IAC/CqB,EAAqB,iBAAiB5G,GAAiBC,KACvD4G,EAAiB,aAAalB,IAGpC,OAFA1F,EAAmB,cACf,GAAGK,MAA+BqG,MAAoBC,MAAuBC,IAC1EnB,CAAa,EDLYoB,CAAYtD,EAASgB,GAC3CV,QAAiBzG,EAAKwH,GAItBkC,EAOQ,GAAG9G,WAAY,CAAC,IAAMA,GAASmF,MAAQnF,GAAS5T,MAAQ4T,IAAU,cAP7D+G,CAAclD,GAIjC,OAHIiD,IACAxC,EStBwB,EAAC0C,EAAyB1C,ICIxC,EAAC0C,EAAyBC,IAA8B/N,KAAKgO,IAAIrF,GAAqBoF,GAA2B5S,UACnI2S,IAZgB,IDQZG,CAAcH,EAAyB1C,GAChC0C,EAA0B5a,KAAK6B,MAEnCqW,ETkB4B8C,CAA4Bhb,KAAK8J,MAAM4Q,GAAaxC,IAE5ET,CACX,CAAC,GF3BuD,CAACN,EAAStR,KAClE,MAAM2R,EAAU,CAAC,EACjB,IAAIyD,EAAmBC,GAA0BjF,GAAYiF,EAAuBrV,GACpF,IAAK,IAAIH,EAAIsR,GAAWxV,OAAS,EAAGkE,GAAK,EAAGA,IAGxCuV,GAD2BE,EADjBnE,GAAWtR,IACQG,EACXuV,CAAmBH,EAAiBzD,GAE1D,OAAOyD,EAAgB9D,EAAQ,GARJ,IAAClB,GAAae,Ga4B7C,MAAMqE,GAAoB,CAACC,EAAiBC,EAAYC,EAAcrU,IAC3D+O,MAAO5V,EAAQ8O,KAClB,MAAMqM,EAAiB,IAChBtU,KACA7G,GAIDob,QAAiBD,EAAeE,iBAAiBF,EAAgBrM,GAIjE+H,QAAgBoE,EAAWnM,EAAOsM,GAClCjE,QAAiB6D,EAAgBnE,EAAS,IACzCsE,IAEP,OAAOD,EAAa/D,EAAS,EC3C/BmE,GAA8B/G,GAGzBC,mBAAmBD,GAAKH,QADJ,WACgC,IAEzD,GAAaM,GAAM,IAAIA,EAAEjN,WAAW,GAAGpC,SAAS,IAAIsP,gBCdpD4G,GAAiBpE,IACnB,MAAM,QAAE7D,EAAO,WAAE+C,GAAec,EAChC,MAAO,IACCqE,GAAiBrE,GAAYA,EAAS/D,UAAY,CAAC,EACvDqI,eAAgBpF,EAChBqF,UAAWpI,EAAQ,qBACfA,EAAQ,sBACRA,EAAQ,oBACZqI,kBAAmBrI,EAAQ,cAC3BsI,KAAMtI,EAAQ,eACjB,EAECkI,GAAoBrE,GAA4C,iBAAxBA,GAAU/D,UCJlDyI,GAAiBjG,MAAOuB,IAC1B,IAAKA,GAAYA,EAASd,WAAa,IACnC,OAEJ,MAAMtG,QAAa+L,GAAc3E,GAQ3B4E,EAPoB,CAACC,IACvB,MAAOC,GAAcD,EAAS3W,WAAW6W,MAAM,SAC/C,OAAID,EAAWxG,SAAS,KACbwG,EAAWC,MAAM,KAAK,GAE1BD,CAAU,EAERE,CAAkBhF,EAAS7D,QAAQ,qBAC5CvD,EAAKgM,MACLhM,EAAKqM,QACL,gBACEnb,EAAU8O,EAAK9O,SAAW8O,EAAKsM,SAAW,gBAC1C1b,EAAQ,IAAIqB,MAAMf,GACxB,OAAOrD,OAAO2Y,OAAO5V,EAAO,CACxBxB,KAAM4c,EACN3I,UAAWmI,GAAcpE,IAC3B,EAKA2E,GAAgBlG,MAAOuB,IACzB,IAAKA,EAASpH,KACV,MAAM,IAAI/N,MAAM,4BAEpB,MAAMsa,QAAenF,EAASpH,KAAK0G,OACnC,OAAO7Y,OAAO2Y,OAAO+F,EAAQ,CACzBlJ,UAAWmI,GAAcpE,IAC3B,ECzCAoF,GAAaC,ICKbC,GAAmB,CACrBC,GAAI,MACJC,QAAS,CACLC,UAAW,iBAEfC,YAAa,yCACbC,QAAS,CAAC,eAYRC,GAAiB,CACnBC,WAAY,CACRP,GACA,CACIC,GAAI,SACJC,QAAS,CACLC,UAAW,oBAEfC,YAAa,qBACbC,QAAS,CAAC,oBCpBhBG,GAAgBvF,IAClB,MAAM,WAAEsF,GAAeD,GACvB,IAAK,MAAM,QAAED,EAAO,QAAEH,EAAO,YAAEE,KAAiBG,EAAY,CACxD,MAAME,EAAQ,IAAIC,OAAON,GACzB,GAAIC,EAAQrH,SAASiC,IAAWwF,EAAME,KAAK1F,GACvC,OAAOiF,EAAQC,SAEvB,CACA,OAAOH,GAAiBE,QAAQC,SAAS,ECfvCS,GAAuB,ICJvBC,GAAyB,CAC3B,cACA,4BACA,iBACA,qBACA,uBACA,wBACA,uBCcEC,GAAyB,CAC3B,yBACA,wBACA,yBACA,0BACA,yCACA,uBACA,mBACA,4BACA,WACA,qBACA,aACA,sBACA,4BAEEC,GAAsB,CACxB,eACA,iBACA,2BAEEC,GAAoB,CAACpH,EAAYqH,IAA6B,MAAfrH,KAC9CqH,GAAaH,GAAuB9H,SAASiI,GAC9CC,GAAqBhd,GAAU,CACjCmF,EAAiBkG,aAEjB,eACFyJ,SAAS9U,GAAOxB,MACZye,GAAoB,CAACvH,EAAYqH,MAAiBrH,GAAc,CAAC,IAAK,IAAK,IAAK,KAAKZ,SAASY,MAC7FqH,GAAaF,GAAoB/H,SAASiI,GCnD3CG,GAAU,SCCVC,GAAe,IACQ,oBAAXC,OAKZC,GAAe,IACQ,oBAAXzd,OAEZ0d,GAAiB,IACQ,oBAAbC,SAEZC,GAAgB,IACQ,oBAAZC,QAEZC,GAAiB,CAACC,EAAQtd,MACnBpD,OAAO+I,KAAK2X,GAAQC,MAAK7gB,GAAOA,EAAIgO,WAAW1K,KCJtDwd,GAAe,CAEjB,CAAEC,SAAU1a,EAAU2a,KAAMC,gBCXhC,WACI,OAAOb,WAAyC,IAAhBC,OAAOa,IAC3C,GDUI,CAAEH,SAAU1a,EAAU8a,YAAaF,gBEdvC,WACI,MAA6B,oBAAdG,gBACkB,IAAtBA,UAAUC,SACK,gBAAtBD,UAAUC,OAClB,GFYI,CAAEN,SAAU1a,EAAUib,OAAQL,gBGdlC,WACI,OAAQX,MACJzd,OAAOmQ,MACgB,iBAAhBnQ,OAAOmQ,IACtB,GHWI,CAAE+N,SAAU1a,EAAUkb,KAAMN,gBIfhC,WACI,OAAQX,YACiB1gB,IAApBiD,OAAO2e,eACa5hB,IAAjBiD,OAAO4e,MACnB,GJYI,CAAEV,SAAU1a,EAAUqb,QAAST,gBKhBnC,WACI,MAAMU,EAA8BC,QAAQrB,MAAoBC,SAASqB,cAAc,iBACjFC,EAA4BF,QAAQtB,WAAuC,IAAdzd,OAAOkf,IAC1E,OAAOJ,GAA+BG,CAC1C,GLaI,CAAEf,SAAU1a,EAAU2b,MAAOf,gBMjBjC,WACI,MAAMgB,EAA+BjiB,GAC1BA,EAAIgO,WAAW,WAAahO,EAAIgO,WAAW,WAMtD,OAAOuS,MADyBxX,MAAMC,KAAKwX,SAAS0B,iBAAiB,SACtBC,MAJhBC,GACpBliB,OAAO+I,KAAKmZ,GAASvB,KAAKoB,IAIzC,GNSI,CAAElB,SAAU1a,EAAUgc,MAAOpB,gBOlBjC,WACI,OAAOX,MAAkBK,GAAe9d,OAAQ,QACpD,GPiBI,CAAEke,SAAU1a,EAAUic,OAAQrB,gBQnBlC,WACI,OAAOX,MAAkBK,GAAe9d,OAAQ,WACpD,GRkBI,CAAEke,SAAU1a,EAAUkc,WAAYtB,gBSrBtC,WACI,OAAOX,IACX,GTqBI,CAAES,SAAU1a,EAAUmc,UAAWvB,gBGjBrC,WACI,OAAQb,OACHO,GAAeN,OAAQ,WAAaM,GAAeN,OAAQ,UACpE,GHeI,CAAEU,SAAU1a,EAAUoc,QAASxB,gBIlBnC,WACI,OAAQb,WAAmD,IAA1BC,OAAOqC,cAC5C,GJiBI,CAAE3B,SAAU1a,EAAUsc,SAAU1B,gBMdpC,WACI,OAAQR,WACmB,IAAhBC,QAAQkC,OACb1iB,OAAO+I,KAAKyX,QAAQkC,KAAK/B,MAAK7gB,GAAOA,EAAI+X,SAAS,UAC5D,GNWI,CAAEgJ,SAAU1a,EAAUwc,SAAU5B,gBOtBpC,WACI,OAAOb,MAAkBO,GAAeN,OAAQ,QACpD,GPqBI,CAAEU,SAAU1a,EAAUyc,WAAY7B,gBKrBtC,WACI,OAASR,MACkB,iBAAhBC,QAAQkC,KACflC,QAAQkC,IAAIG,sBAAsB/U,WAAW,SAC7C,CACR,GLiBI,CAAE+S,SAAU1a,EAAU2c,UAAW/B,gBQxBrC,WACI,OAAQR,WACmB,IAAhBC,QAAQkC,OACb1iB,OAAO+I,KAAKyX,QAAQkC,KAAK/B,MAAK7gB,GAAOA,EAAI+X,SAAS,WAC5D,IENA,IAAIkL,GACJ,MAAMC,GAA2B,GAEjC,IAAIC,IAAiB,EACrB,MAGMC,GAAkB,KACpB,IAAKH,GAAgB,CAEjB,GADAA,GVoBInC,GAAaD,MAAKwC,GAAkBA,EAAepC,qBACrDF,UAAY1a,EAAUid,kBUpBpBH,GAKA,KAAOD,GAAyB1f,QAC5B0f,GAAyB3P,KAAzB2P,UAMJA,GAAyB9c,SAAQmd,IAC7BA,GAAK,IAIbC,GAAand,EAAUid,kBAvBL,IAwBlBE,GAAand,EAAUkc,WAvBL,GAwBtB,CACA,OAAOU,EAAc,EAsBzB,SAASO,GAAaC,EAAW1J,GACzBkJ,KAAmBQ,GAAcN,IACjCjO,YAAW,KAVf+N,QAAiBrjB,EAYTujB,IAAiB,EACjBjO,WAAWkO,GAnDO,IAmDgC,GACnDrJ,EAEX,CC/DA,MAAM2J,GAAuB,CAAC,ECIxBC,GAAkB,cAElBC,GAA0BC,GAAmBA,EAAenN,QAAQ,OAAQ,IAgBjE,IAfjB,MACI,WAAAlV,GACIlC,KAAKwkB,UAAY,GAAGH,MAAmBC,GAAuBzD,KAClE,CACA,aAAIsD,GACA,OAAOL,IACX,CACA,iBAAIW,GACA,OAAQzkB,KAAKmkB,YAAcpd,EAAU8a,aACjC7hB,KAAKmkB,YAAcpd,EAAU2a,IACrC,CACA,uBAAAgD,CAAwBT,GFoBI,CAACA,IAGzBJ,IAGJD,GAAyB/e,KAAKof,EAAI,EEzB9BS,CAAwBT,EAC5B,GAEJ,MAmBMU,GAAuBC,GAlBK,GAAGC,WAAUC,UAAY,CAAC,KACxD,MAAMN,EAAY,CACd,CAACH,GAAiBC,GAAuBzD,MAM7C,GAJIgE,GACAL,EAAU3f,KAAK,CAACggB,EAAUC,IAE9BN,EAAU3f,KAAK,CAAC,YAAaif,OACzBe,GAAYC,EAAQ,CACpB,MAAMC,EDgBa,EAACF,EAAUG,IAAQZ,GAAqBS,KAAYG,IAAMC,kBChBzDC,CAAmBL,EAAUC,GAC7CC,GACAA,EAAYje,SAAQ6I,IAChB6U,EAAU3f,KAAK8K,EAAM,GAGjC,CACA,OAAO6U,CAAS,EAGE,CAA0BI,GAEvCrO,KAAI,EAAE4O,EAAUC,KAAgBD,GAAYC,EAAa,GAAGD,KAAYC,IAAeD,IACvFtiB,KAAK,KC1BR,GAAgB,CAClB8X,QAXiB,kBAYjB0D,iBARqB,EAAG3D,aAAa,CACrC7B,IAAK,IAAI0G,GAAW,oBAAoB7E,KAAUuF,GAAavF,QAQ/DV,chBhBqBqL,GgBgBSxG,GhBhBOjG,MAAOuB,EAAUxW,KACtD,MAAM2hB,EAAc3hB,SACT0hB,GAAYlL,SACnB7Z,EACEogB,EAAY4E,GAAavG,MAAQuG,GAAanjB,KAC9CkX,EAAac,GAAUd,WAK7B,MAAO,CACHkB,UALgBoG,GAAkBhd,IAClC8c,GAAkBpH,EAAYqH,IDIb,CAACA,KAAgBA,GAAaJ,GAAuB7H,SAASiI,GCH/E6E,CAAiB7E,IACjBE,GAAkBvH,EAAYqH,GAGjC,GgBKDzG,alBlBoBuL,IACpB,MAAMC,EmBDV,SAAyBC,ECNJ,KDSjB,OAAOF,IACH,MAAM/K,EAAQ,GAAK+K,EAHF,IACC,IAE0ChW,KAAK7G,SACjE,QAAO8R,EAAQiL,IAAqBjL,CAAK,CAEjD,CnBN0BkL,CAAkBtF,IAClC5F,EAAQgL,EAAcD,GAG5B,OAAiB,IAAV/K,EAAkB4F,GAAuB5F,CAAK,EkBcrDb,eAAgB+K,MhBlBI,IAACU,GgBuBzB,MGIMO,GAAiB7H,GAAkBrF,IA1BR,EAAGmN,gBAAgB,GAAIC,aAAa,GAAIC,mBAAmB3H,KACxF,MACMvF,EAAM,IAAI0G,GAAWnB,EAASvF,KAGpC,OAFAA,EAAIhB,SAAW,WAAWyG,GAA2BuH,gBAA4BvH,GAA2BwH,KAErG,CAAEtN,OAAQ,MAAOlC,QHiBG,CAC3B,eAAgB,oBGlBiBuC,MAAK9F,KADzBxG,KAAKoB,UAAUoY,GACgB,IAEbnN,MAAOuB,IACtC,GAAIA,EAASd,YAAc,IAEvB,YADoBwF,GAAe1E,GAGlC,CACD,MAAM,QAAEkF,EAAO,UAAE2G,SAAoBlH,GAAc3E,GACnD,MAAO,CACH8L,YAAa,CACT5G,UACA2G,aAEJ5P,UAAWmI,GAAcpE,GAEjC,IAKiH,IC5B/G+L,GAAc,CAACC,EAAOtB,IAAa,GAAGA,cAA6BsB,ICHnEC,GAAqB,CAAC,ECKtBC,GAAgBzN,MAAOuN,EAAOtB,KAChC,MAAMyB,EAAWJ,GAAYC,EAAOtB,GAEpC,aAD+BhW,EAAMzF,QAAQkd,SAClBhmB,CAAS,ECMlC,GAAiBsY,OAAS2N,UAASJ,QAAOtB,WAAU2B,cAAarN,cAAasN,aAAYC,SAAQhM,SAAQiM,iBAAgBC,SAAQC,cAAajN,qBACjJ,MAAMkN,QAAmBT,GAAcF,EAAOtB,GAExCkC,EAAqBD,OAErBxmB,EFbe,EAAC6lB,EAAOtB,KAC7B,MAAMyB,EAAWJ,GAAYC,EAAOtB,GAIpC,OAHKuB,GAAmBE,KACpBF,GAAmBE,GAAYhe,KAE5B8d,GAAmBE,EAAS,EEO7BU,CAAiBb,EAAOtB,IAExB,iBAAEoC,EAAgB,YAAEC,EAAW,MAAEC,EAAK,SAAEC,EAAQ,QAAEC,EAAO,KAAEllB,EAAI,KAAEmlB,GAAUT,GAAe,CAAC,EAG3FU,EAA6B,CAAC,EAC9BC,EAAiBT,EAAqBH,GAAUH,EAAcG,EACpE,GAAIG,EAAmB,CACnB,MAAMU,ElEzBY,oBAAXlkB,OACA,CAAC,EAIhB,WACI,GAAsB,oBAAXA,OAEP,OADA,EAAOK,KAAK,yDACL,CAAC,EAEZ,MAAM8jB,EAAMnkB,OAAOue,UACnB,IAAK4F,EAED,OADA,EAAO9jB,KAAK,4DACL,CAAC,EAEZ,MAAM,SAAE6d,EAAQ,QAAEM,EAAO,OAAE4F,EAAM,UAAEnD,EAAS,SAAEoD,GAAaF,EACrDvkB,EAgBV,SAAwBqhB,GAEpB,MAAMqD,EAAa,+CAA+CC,KAAKtD,GACvE,GAAIqD,EACA,MAAO,CAAE1kB,KAAM0kB,EAAW,GAAIhH,QAASgH,EAAW,IAGtD,MAAME,EAAU,iDAAiDD,KAAKtD,GACtE,GAAIuD,EACA,MAAO,CAAE5kB,KAAM4kB,EAAQ,GAAIlH,QAASkH,EAAQ,IAKhD,MAAMC,EAAU,+CAA+CF,KAAKtD,GACpE,GAAIwD,EACA,MAAO,CAAE7kB,KAAM6kB,EAAQ,GAAInH,QAASmH,EAAQ,IAGhD,MAAMC,EAAS,2BAA2BH,KAAKtD,GAC/C,GAAIyD,EACA,MAAO,CAAE9kB,KAAM8kB,EAAO,GAAIpH,QAASoH,EAAO,IAE9C,MAAMC,EAAW,gCAAgCJ,KAAKtD,GACtD,GAAI0D,EACA,MAAO,CAAE/kB,KAAM+kB,EAAS,GAAIrH,QAASqH,EAAS,IAElD,MAAMC,EAAW,2BAA2BL,KAAKtD,GACjD,OAAI2D,EACO,CAAEhlB,KAAMglB,EAAS,GAAItH,QAASsH,EAAS,IAE3C,CAAEhlB,KAAM,GAAI0d,QAAS,GAChC,CAhDiBuH,CAAe5D,GACtB6D,EAWV,WACI,MAAMC,EAAU,qBAAqBR,MAAK,IAAIplB,MAAO2F,YACrD,OAAOigB,GAAUA,EAAQ,IAAW,EACxC,CAdqBC,GACjB,MAAO,CACH9G,WACA+G,KAAMzG,GAAW4F,EACjBc,MAAOtlB,EAAKA,KACZ0d,QAAS1d,EAAK0d,QACd6H,WAAY,CAACvlB,EAAKA,KAAMA,EAAK0d,SAAShe,KAAK,KAC3C+kB,WACAS,WAER,CAxBWM,GkEuBHpB,EAA2BmB,WAAajB,EAAWiB,WACnDnB,EAA2BiB,KAAOf,EAAWe,KAC7CjB,EAA2BkB,MAAQhB,EAAWgB,MAC9ClB,EAA2BqB,aAAenB,EAAW5G,QACrD0G,EAA2B9F,SAAWgG,EAAWhG,QACrD,CACA,MAAMoH,EAAoB,IACnBtB,KACAL,GAED4B,EAAa,IACX3B,GAAS,CAAEA,MAAO,CAACA,OACnBhlB,GAAQ,CAAEA,KAAM,CAACA,OACjBmlB,GAAQ,CAAEA,KAAM,CAACA,OAClBL,GAED8B,EAAwBhC,GAAqBG,EAC7C8B,EAAsB7B,GAASF,GAAoB9kB,GAAQmlB,EAC3D2B,EAAgBzB,GAAkBb,EAClC7U,EAAQ,CACV+T,cAAeM,EACfL,WAAYgB,GAAcC,EAC1BhB,gBAAiB,CACbmD,UAAW5gB,IACX6gB,eAAe,IAAIzmB,MAAOgZ,cAC1B0N,YAAa5C,EACb6C,QAAS9C,KACLyC,GAAuB,CAAEM,WAAYR,MACrCC,GAAyB,CACzBQ,YAAa,CACTC,WAAYX,EAAkBH,WAC9Be,OAAQZ,EAAkBa,OAC1BC,KAAMd,EAAkBL,KACxBoB,MAAOf,EAAkBJ,MACzBoB,aAAchB,EAAkBD,aAChCkB,SAAUjB,EAAkBpH,SAC5BsI,gBAAiBlB,EAAkBmB,gBACnCC,SAAUpB,EAAkBR,cAGhCjB,GAAY,CACZ8C,SAAU,CACNC,KAAM/C,EAASgD,KACfC,QAASjD,EAASkD,QAClBC,SAAUnD,EAASoD,SACnBC,UAAWrD,EAASsD,UACpBC,WAAYvD,EAASwD,WACrBC,OAAQzD,EAAS1M,SAGzBoQ,QAASzD,EACT0D,OAAQrE,KACJuC,GAAiB,CACjB+B,KAAM,CACFC,OAAQzD,EACR0D,eAAgBvE,MAKhC,UACUf,GAAiB,CAAEzM,cAAauB,SAAQd,kBAAkB9H,GAE5DiV,QCrFYnO,OAAOuN,EAAOtB,EAAUiC,KAC5C,MAAMR,EAAWJ,GAAYC,EAAOtB,GAI9BsG,GAAa,IAAIzoB,MAAOiI,UADlB,QAEZ,OAAOkE,EAAM1F,QAAQmd,EAAUQ,EAAY,CACvC9a,QAASmf,EACTpf,SAAU,GACZ,ED6EYqf,CAAgBjF,EAAOtB,EAAUkC,EAE/C,CACA,QAGQA,GF/EmB,EAACZ,EAAOtB,KACnC,MAAMyB,EAAWJ,GAAYC,EAAOtB,UAC7BuB,GAAmBE,EAAS,EE8E3B+E,CAAuBlF,EAAOtB,EAEtC,GEnGJ,IAAIyG,IACJ,SAAWA,GACPA,EAAqC,QAAI,SAC5C,CAFD,CAEGA,KAAgCA,GAA8B,CAAC,IAClE,MAKM,GAASzgB,EALoB,CAC/B,CAACygB,GAA4BC,SAAU,CACnCtnB,QAAS,6BCuBXunB,GAAYzN,GAAkBrF,IAxBR,EAAGmN,gBAAe4F,iBAAiBrN,KAC3D,KAASyH,EAAeyF,GAA4BC,SACpD,MACM1S,EAAM,IAAI0G,GAAWnB,EAASvF,KAGpC,OAFAA,EAAIhB,SAAW,WAAWyG,GAA2BuH,YAE9C,CAAErN,OAAQ,OAAQlC,QVeE,CAC3B,eAAgB,oBUhBkBuC,MAAK9F,KAD1BxG,KAAKoB,UAAU8d,GAAiB,CAAC,GACD,IAEnB7S,MAAOuB,IACjC,GAAIA,EAASd,YAAc,IAEvB,YADoBwF,GAAe1E,GAGlC,CACD,MAAM,QAAEuR,SAAkB5M,GAAc3E,GACxC,MAAO,CACHwR,eAAgB,CAAED,WAClBtV,UAAWmI,GAAcpE,GAEjC,IAKkG,ICtBhG,GAAS,IAAIlY,EAAc,uBAC3B2pB,GAAkB,CAAC,IAAK,KACxBC,GAAiB,CAAC,KACxB,MAAMC,GACF,WAAA5pB,CAAYc,GACRhD,KAAK+rB,eAAYzrB,EACjBN,KAAKgsB,QAAS,EACdhsB,KAAKisB,QAAS,EACdjsB,KAAKksB,QAAU,GACflsB,KAAKiD,QAAUD,EACfhD,KAAKmsB,WAAansB,KAAKmsB,WAAWzoB,KAAK1D,MACvCA,KAAKosB,YACT,CACA,IAAAvnB,CAAKwnB,GACGrsB,KAAKksB,QAAQhoB,QAAUlE,KAAKiD,QAAQqpB,WACpC,GAAOvoB,MAAM,wDAAyD,CAClEwoB,QAASF,EAAME,UAIvBvsB,KAAKksB,QAAQrnB,KAAK,CAAE,CAACwnB,EAAME,SAAUF,GACzC,CACA,KAAAG,GACIxsB,KAAKgsB,QAAS,CAClB,CACA,MAAAS,GACIzsB,KAAKgsB,QAAS,CAClB,CACA,KAAAU,GACI1sB,KAAKisB,QAAS,CAClB,CACA,kBAAAU,CAAmBlG,GACf,OAAOzmB,KAAKiD,QAAQwjB,aAAeA,CACvC,CACA,QAAAmG,GACI5sB,KAAK6sB,WAAW7sB,KAAKksB,QAAQY,OAAO,EAAG9sB,KAAKksB,QAAQhoB,QACxD,CACA,UAAAkoB,GACQpsB,KAAK+rB,WACLgB,cAAc/sB,KAAK+rB,WAEvB,MAAM,cAAEiB,GAAkBhtB,KAAKiD,QAC/BjD,KAAK+rB,UAAYkB,YAAYjtB,KAAKmsB,WAAYa,EAClD,CACA,UAAAb,GACI,MAAMpc,EAAe/P,KAAKksB,QAAQhoB,OAIlC,GAHIlE,KAAKisB,SAAWlc,GAAgB/P,KAAK+rB,WACrCgB,cAAc/sB,KAAK+rB,WAEnB/rB,KAAKgsB,SAAWjc,EAChB,OAEJ,MAAM,UAAEmd,GAAcltB,KAAKiD,QACrBkqB,EAAY3d,KAAK4d,IAAIF,EAAWnd,GAChCsd,EAAertB,KAAKksB,QAAQY,OAAO,EAAGK,GAC5CntB,KAAK6sB,WAAWQ,EACpB,CACA,gBAAMR,CAAW/c,GACb,MAAMwd,EAAWttB,KAAKutB,aAAazd,GAC7B0d,EAAmBxtB,KAAKytB,0BAA0BH,GACxD,IACI,MAAM,YAAEnU,EAAW,OAAEuB,EAAM,eAAEd,GAAmB5Z,KAAKiD,QAC/CiK,QAAase,GAAU,CACzBrS,cACAuB,SACAd,kBACD4T,GACHxtB,KAAK0tB,iCAAiCxgB,EAAMogB,EAChD,CACA,MAAOK,GACH3tB,KAAK4tB,wBAAwBD,EAAKL,EACtC,CACJ,CACA,yBAAAG,CAA0BH,GACtB,MAAMO,EAAY,CAAC,EAoBnB,OAnBAjtB,OAAOktB,OAAOR,GAAUxmB,SAAQoF,IAC5B,MAAM,MAAEmgB,EAAK,UAAE/nB,EAAS,WAAEwiB,EAAU,QAAEyF,EAAO,QAAEwB,GAAY7hB,GACrD,KAAE/J,EAAI,WAAE2mB,EAAU,QAAEzB,GAAYgF,EACtCwB,EAAU/G,GAAc,CACpBkH,SAAU,IACHH,EAAU/G,IAAakH,UAE9BC,OAAQ,IACDJ,EAAU/G,IAAamH,OAC1B,CAAC1B,GAAU,CACP2B,UAAW/rB,EACXgsB,UAAW,IAAIzrB,KAAK4B,GAAWoX,cAC/B4N,WAAYR,EACZgC,QAASzD,EACT+G,QAASL,IAGpB,IAEE,CACHlI,cAAe7lB,KAAKiD,QAAQkjB,MAC5BsF,cAAe,CACX4C,UAAWR,GAGvB,CACA,uBAAAD,CAAwBD,EAAKL,GACzB,GAAOvpB,MAAM,qCAAsC4pB,GACnD,MAAMtU,EAAasU,EAAIvX,WAAauX,EAAIvX,UAAUqI,eAClD,GAAImN,GAAgBnT,SAASY,GAAa,CACtC,MAAMiV,EAAkB1tB,OAAOktB,OAAOR,GACtCttB,KAAKuuB,OAAOD,EAChB,CACJ,CACA,gCAAAZ,CAAiCxgB,EAAMogB,GACnC,MAAM,QAAE5B,EAAU,CAAC,GAAMxe,EAAKye,gBAAkB,CAAC,EAC3C2C,EAAkB,GACxB1tB,OAAOsW,QAAQwU,GAAS5kB,SAAQ,EAAEqM,EAAGqb,MACjC,MAAMC,EAAYD,EAAeE,oBAAsB,CAAC,EACxD9tB,OAAOsW,QAAQuX,GAAW3nB,SAAQ,EAAEylB,EAASoC,MACzC,MAAMC,EAActB,EAASf,GAC7B,IAAKqC,EACD,OAEJ,MAAM,WAAEC,EAAU,QAAExP,GAAYsP,GAAe,CAAC,EAChD,GAAIE,GAAchD,GAAepT,SAASoW,GACtC,OAEJ,GAAIA,GAAcjD,GAAgBnT,SAASoW,GAEvC,YADAP,EAAgBzpB,KAAK+pB,GAGzB,MAAM,KAAEzsB,GAASysB,EAAYvC,MAC7B,GAAOzoB,KAAK,iCAAkC,CAC1C2oB,UACApqB,OACA8B,QAASob,GACX,GACJ,IAEFiP,EAAgBpqB,QAChBlE,KAAKuuB,OAAOD,EAEpB,CACA,MAAAC,CAAOD,GAEH,MAAMQ,EAAiB,GACvBR,EAAgBxnB,SAASioB,IACrB,MAAM,QAAExC,GAAYwC,GACd,KAAE5sB,GAAS4sB,EAAc1C,MAC/B,GAAI0C,EAAcC,eAAgB,EAO9B,OANA,GAAOjrB,MAAM,mBAAoB,CAC7BwoB,UACApqB,OACA8sB,kBAAmBF,EAAcC,mBAErCF,EAAejqB,KAAK,CAAE,CAAC0nB,GAAUwC,IAGrC,GAAOhrB,MAAM,yCAA0C,CACnDwoB,UACApqB,QACF,IAGNnC,KAAKksB,QAAQgD,WAAWJ,EAC5B,CACA,YAAAvB,CAAazd,GACT,OAAOA,EAAOqf,QAAO,CAACC,EAAKC,KACvB,OAAQ3uB,EAAKc,IAAUZ,OAAOsW,QAAQmY,GAEtC,OADAD,EAAI1uB,GAAOc,EACJ4tB,CAAG,GACX,CAAC,EACR,EChLJ,MAAME,GAAiB,CAAC,EAMlBC,GAAiB,EAAGpJ,QAAOzL,SAAQvB,cAAamT,aAAYU,gBAAeE,YAAW8B,cAAavI,aAAY7M,qBACjH,GAAI0V,GAAe5U,KAAUyL,GAAQ,CACjC,MAAMrW,EAASwf,GAAe5U,GAAQyL,GAKtC,IAAIrW,EAAO6c,mBAAmBlG,GAI1B,OAAO3W,EAHPA,EAAO4c,OAKf,CACA,MAAM5c,EAAS,IAAIgc,GAAoB,CACnC3F,QACAmG,aACAnT,cACA6T,gBACAE,YACAzG,aACA/L,SACAsU,cACApV,mBAMJ,OAJK0V,GAAe5U,KAChB4U,GAAe5U,GAAU,CAAC,GAE9B4U,GAAe5U,GAAQyL,GAASrW,EACzBA,CAAM,ECrCX0f,GAAsB,iBACtBC,GAAqB,gBCM3B,IAAI1B,GCHJ,MAAM2B,WAAuB3qB,EACzB,WAAA7C,CAAYytB,GACRxqB,MAAMwqB,GAGN3vB,KAAKkC,YAAcwtB,GACnB9uB,OAAOwE,eAAepF,KAAM0vB,GAAexuB,UAC/C,ECZJ,IAAI0uB,IACJ,SAAWA,GACPA,EAAsC,QAAI,UAC1CA,EAA4C,cAAI,gBAChDA,EAA0C,YAAI,cAC9CA,EAAuC,SAAI,WAC3CA,EAA6C,eAAI,iBACjDA,EAAkD,oBAAI,sBACtDA,EAA2C,aAAI,eAC/CA,EAA+C,iBAAI,kBACtD,CATD,CASGA,KAAiCA,GAA+B,CAAC,IACpE,MAAMC,GAAqB,CACvB,CAACD,GAA6BrE,SAAU,CACpCtnB,QAAS,2BAEb,CAAC2rB,GAA6BE,eAAgB,CAC1C7rB,QAAS,oCAEb,CAAC2rB,GAA6BG,aAAc,CACxC9rB,QAAS,+BAEb,CAAC2rB,GAA6BI,UAAW,CACrC/rB,QAAS,mBAEb,CAAC2rB,GAA6BK,gBAAiB,CAC3ChsB,QAAS,mCAEb,CAAC2rB,GAA6BM,qBAAsB,CAChDjsB,QAAS,uDAEb,CAAC2rB,GAA6BO,kBAAmB,CAC7ClsB,QAAS,2DAEb,CAAC2rB,GAA6BQ,cAAe,CACzCnsB,QAAS,uDC5BjB,SAASosB,GAAsBrlB,EAAW7I,EAAM8B,GAC5C,MAAQA,QAASqsB,EAAc,mBAAErrB,GAAuB4qB,GAAmB1tB,GAC3E,IAAK6I,EACD,MAAM,IAAI0kB,GAAe,CACrBvtB,OACA8B,QAASA,GAAWqsB,EACpBrrB,sBAGZ,CCfA,IAAIsrB,IAAmB,ECQvB,SAASC,GAA4B1L,GACjC,OAAOH,GAAoB,CACvBE,SAAU,EAAS4L,UACnB3L,UAER,CCLA,MAAM4L,GAAgB,KAClB,MAAM,MAAEvK,EAAK,OAAEzL,EAAM,WAAE4R,EAAU,UAAEY,EAAS,cAAEF,EAAa,YAAEgC,GAAgB,EAAA2B,QAAQC,YAAYH,WAAWI,UAAY,CAAC,EAGzH,OAFAR,KAAwBlK,EAAOyJ,GAA6BrE,SAC5D8E,KAAwB3V,EAAQkV,GAA6BI,UACtD,CAAE7J,QAAOzL,SAAQ4R,aAAYY,YAAWF,gBAAegC,cAAa,ECJzE8B,GAAqBlY,UACvB,MAAM,YAAEO,EAAW,WAAEsN,SAAqB,IAAAsK,oBAE1C,OADAV,KAAwBlX,EAAayW,GAA6BE,eAC3D,CAAE3W,cAAasN,aAAY,ECGhC,GAAS,IAAI,EAAAxkB,cAAc,aA6B3B,GAAU6P,IACZ,MAAM,MAAEqU,EAAK,OAAEzL,EAAM,WAAE4R,EAAU,UAAEY,EAAS,cAAEF,EAAa,YAAEgC,GAAgB0B,KJlChDH,IIuC7BF,KAAwBve,EAAM3P,KAAMytB,GAA6BG,aACjEe,KACKlc,MAAK,EAAGuE,cAAasN,iBACtB,EAAAuK,IAAI9qB,SAAS,YAAa,CAAEmmB,MAAO,SAAUnf,KAAM4E,EAAO7N,QAAS,6BAA+B,YAAaoB,GRxCxGuT,QAASuN,QAAOtB,WAAU2B,cAAarN,cAAakT,QAAO5F,aAAY/L,SAAQd,iBAAgB0S,aAAYU,gBAAeE,YAAW8B,kBAChJ,IAAIiC,EAAelD,GACnB,MAAMmD,EAAc,IAAIxuB,KAClByuB,EAAqBD,EAAYxV,cACjC6Q,EAAUjkB,IAEVwH,EAASyf,GAAe,CAC1BpJ,QACAzL,SACAvB,cACAmT,WAAYA,GSrBA,ITsBZU,cAAeA,GSpBA,ITqBfE,UAAWA,GStBA,ITuBX8B,YAAaA,GSrBA,ETsBbvI,aACA7M,mBAEEkN,OUlBgBlO,QAAS2N,UAASJ,QAAOtB,WAAU2B,cAAarN,cAAasN,aAAY/L,SAAQd,qBACvG,IAAIkN,QAAmBT,GAAcF,EAAOtB,GAe5C,OAdKiC,UACK,GAAe,CACjBP,UACAJ,QACAtB,WACA2B,cACArN,cACAsN,aACA/L,SACAd,mBAEJkN,QAAmBT,GAAcF,EAAOtB,IAE5C,IAASiC,EAAYhe,EAAiBgG,cAC/BgY,CAAU,EVEQsK,CAAkB,CACvCjL,QACAtB,WACA2B,cACArN,cACAsN,aACA/L,SACAd,mBAGJ,IAAKqX,GAAgB5E,EAAMlqB,OAASqtB,GAAqB,CACrD,MAAM6B,EAAY/oB,IAClBylB,GAAU,CACNuD,GAAID,EACJE,eAAgBJ,GAEpBF,EAAelD,EACnB,CAEIA,IAAW1B,EAAMlqB,OAASstB,KAC1BwB,EAAe,IACRlD,GACHyD,cAAeL,EACfM,SAAUP,EAAYvmB,UAAY,IAAIjI,KAAKqrB,GAAQwD,gBAAgB5mB,WAEvEojB,QAAUztB,GAGdwP,EAAOjL,KAAK,CACR0nB,UACAzF,aACAuF,QACA0B,QAASkD,EACT3sB,UAAW6sB,EACXnC,YAAaA,GS3DA,GT4Df,EQXE0C,CAAS,CACLvL,QACAtB,SAAU,YACV1L,cACAkT,MAAOva,EACP2U,aACA/L,SACAd,eAAgB4W,GAA4BvpB,EAAgB0qB,QAC5DrF,aACAY,YACAF,gBACAgC,eACF,IAED4C,OAAMlrB,IAEP,GAAO9C,KAAK,0BAA2B8C,EAAE,KAvBzC,GAAO3C,MAAM,qDAwBf,EGbA8tB,GAAejZ,OAASgO,SAAQC,cAAate,cAC/C,MAAM,YAAE4Q,EAAW,WAAEsN,SAAqBqK,MACpC,MAAE3K,EAAK,OAAEzL,GAAWgW,MACpB,eAAE/J,GAAmBpe,GAAW,CAAC,QACjC,GAAe,CACjB4d,QACAtB,SAAU,YACV1L,cACAsN,aACA/L,SACAiM,iBACAC,SACAC,cACAjN,eAAgB4W,GAA4BvpB,EAAgB6qB,eAC9D,ECvEAC,GAAY,IAAwB,oBAAXxuB,aAAqD,IAApBA,OAAO2d,SCGjE8Q,GAAiB,CAAC,SAGlB,GAAS,IAAI,EAAA/vB,cAAc,gBACjC,MAAMgwB,GACF,WAAA/vB,CAAYgwB,EAAe3pB,GACvBvI,KAAKuI,QAAU,CAAC,EAChBvI,KAAKmyB,eAAgB,EACrBnyB,KAAKkyB,cAAgBA,EACrBlyB,KAAKoyB,eAAiBpyB,KAAKoyB,eAAe1uB,KAAK1D,MAC/CA,KAAK+C,UAAUmvB,EAAe3pB,EAClC,CACA,SAAAxF,CAAUmvB,EAAe3pB,GACrBvI,KAAKkyB,cAAgBA,EAErBlyB,KAAKqyB,UAELryB,KAAKuI,QAAU,CACXugB,WAAYvgB,GAASugB,iBAAcxoB,EACnCgyB,OAAQ/pB,GAAS+pB,QAAUN,GAC3BO,eAAgBhqB,GAASgqB,gBAnBL,2BAsBpBR,OACA/xB,KAAKuI,QAAQ+pB,QAAQxrB,SAAQ0rB,IACzBtR,SAASrL,iBAAiB2c,EAAaxyB,KAAKoyB,eAAgB,CACxDK,SAAS,GACX,IAENzyB,KAAKmyB,eAAgB,EAE7B,CACA,OAAAE,GAESryB,KAAKmyB,eAIVnyB,KAAKuI,QAAQ+pB,QAAQxrB,SAAQ0rB,IACzBtR,SAASlL,oBAAoBwc,EAAaxyB,KAAKoyB,eAAgB,CAC3DK,SAAS,GACX,GAEV,CACA,cAAAL,CAAe/F,GAYX,MAAMqG,EAAkB,IAAI1yB,KAAKuI,QAAQgqB,oBACnCI,EAAe,GAAG3yB,KAAKuI,QAAQgqB,sBAC/BK,EAAoB,GAAG5yB,KAAKuI,QAAQgqB,qBACpCM,EAAcxG,EAAMyG,OAE1B,GAAK9yB,KAAKuI,QAAQ+pB,QAAQ7Z,SAAS4T,EAAMlpB,OAGrC0vB,aAAuBE,YAAa,CACpC,MAAMD,EAASD,EAAYG,QAAQN,GACnC,GAAII,EAAQ,CAER,MAAMG,EAAYH,EAAOI,aAAaN,IAlE3B,QAoELO,EAAoB,CAAC,EACrBC,EAAuBN,EAAOI,aAAaP,GACjDS,GAAsBlU,MAAM,WAAWpY,SAAQusB,IAC3C,MAAMC,EAAMD,EAAKlc,OAAO+H,MAAM,WAC9BiU,EAAkBG,EAAI,IAAMA,EAAI,EAAE,IAGtC,MAAMxK,EAAaloB,OAAO2Y,OAAO,CAC7BpW,KAAMkpB,EAAMlpB,KACZ2vB,OAAQ,GAAGA,EAAOS,qBAAqBT,EAAOpT,MAC/C1f,KAAKuI,QAAQugB,WAAYqK,GAC5B,GAAOpvB,MAAM,4CAA6C,CACtDkvB,YACAnK,eAEJ9oB,KAAKkyB,cAAce,EAAWnK,EAClC,CACJ,CACJ,ECxFJ,MAAM,GAAS,IAAI,EAAA7mB,cAAc,mBAC3B,GAAqB,WAErBuxB,GAAuB,IAClBjwB,OAAO6jB,SAASqM,OAASlwB,OAAO6jB,SAASvP,SAE9C6b,GAAuB,gCAC7B,MAAMC,GACF,WAAAzxB,CAAYgwB,EAAe3pB,GACvBvI,KAAKuI,QAAU,CAAC,EAChBvI,KAAKmyB,eAAgB,EACrBnyB,KAAKkyB,cAAgBA,EACrBlyB,KAAK4zB,mBAAoB,EACzB5zB,KAAK6zB,qBAAuB7zB,KAAK6zB,qBAAqBnwB,KAAK1D,MAC3DA,KAAK+C,UAAUmvB,EAAe3pB,EAClC,CACA,SAAAxF,CAAUmvB,EAAe3pB,GACrBvI,KAAKkyB,cAAgBA,EAErBlyB,KAAKqyB,UAELryB,KAAKuI,QAAU,CACXurB,QAASvrB,GAASurB,SApBL,aAqBbhL,WAAYvgB,GAASugB,iBAAcxoB,EACnC2yB,UAAWjzB,KAAKuI,SAAS0qB,WAAa,GACtCc,YAAa/zB,KAAKuI,SAASwrB,aAAeP,IAG1CzB,OAC6B,eAAzB/xB,KAAKuI,QAAQurB,QACb9zB,KAAKg0B,mBAGLh0B,KAAKi0B,mBAETj0B,KAAKmyB,eAAgB,EAE7B,CACA,OAAAE,GAESryB,KAAKmyB,eAINnyB,KAAK4zB,oBACLrwB,OAAO2wB,QAAQC,UAAYn0B,KAAKo0B,kBAChC7wB,OAAO2wB,QAAQG,aAAer0B,KAAKs0B,qBACnCt0B,KAAKu0B,gBAAgBC,SACrBx0B,KAAKy0B,mBAAmBD,SACxBjxB,OAAOyS,oBAAoB,WAAYhW,KAAK6zB,sBAC5C7zB,KAAK4zB,mBAAoB,EAEjC,CACA,gBAAAI,GACSh0B,KAAK4zB,oBAEN5zB,KAAKu0B,eAAiBG,MAAMC,UAAUpxB,OAAO2wB,QAAQC,UAAW,CAC5Dtf,MAAO,CAACie,EAAQlgB,EAASgiB,KACrB9B,EAAOje,MAAMjC,EAASgiB,GACtB50B,KAAK6zB,sBAAsB,IAGnC7zB,KAAKy0B,kBAAoBC,MAAMC,UAAUpxB,OAAO2wB,QAAQG,aAAc,CAClExf,MAAO,CAACie,EAAQlgB,EAASgiB,KACrB9B,EAAOje,MAAMjC,EAASgiB,GACtB50B,KAAK6zB,sBAAsB,IAGnC7zB,KAAKo0B,kBAAoB7wB,OAAO2wB,QAAQC,UACxCn0B,KAAKs0B,qBAAuB/wB,OAAO2wB,QAAQG,aAC3C9wB,OAAO2wB,QAAQC,UAAYn0B,KAAKu0B,eAAeM,MAC/CtxB,OAAO2wB,QAAQG,aAAer0B,KAAKy0B,kBAAkBI,MACrDtxB,OAAOsS,iBAAiB,WAAY7V,KAAK6zB,sBACzCiB,eAAezrB,WAAWqqB,IAC1B1zB,KAAK4zB,mBAAoB,EAEjC,CACA,gBAAAK,GACIj0B,KAAK6zB,sBACT,CACA,oBAAAA,GACI,MAAMkB,EAAa/0B,KAAKuI,QAAQwrB,cAC1Bd,EAAYjzB,KAAKuI,QAAQ0qB,WAAa,GAC5C,GAAIjzB,KAAKg1B,gBAAiB,CACtBF,eAAe3rB,QAAQuqB,GAAsBqB,GAE7C,MAAMjM,EAAaloB,OAAO2Y,OAAO,CAC7BV,IAAKkc,GACN/0B,KAAKuI,QAAQugB,YAChB,GAAO/kB,MAAM,kDAAmD,CAC5DkvB,YACAnK,eAEJ9oB,KAAKkyB,cAAce,EAAWnK,EAClC,CACJ,CACA,aAAAkM,GACI,MAAMC,EAAUH,eAAe1rB,QAAQsqB,IAEvC,OADgB1zB,KAAKuI,QAAQwrB,gBACVkB,CACvB,ECrGJ,MAAMC,GAAuB,IAAIC,ICC3BC,GAAkB,IDAxB,MACI,WAAAlzB,GACIlC,KAAKq1B,gBAAiB,EACtBr1B,KAAKs1B,uBAAyBt1B,KAAKs1B,uBAAuB5xB,KAAK1D,MAE3D+xB,OACA7Q,SAASrL,iBAAiB,mBAAoB7V,KAAKs1B,wBAAwB,GAC3Et1B,KAAKq1B,gBAAiB,EAE9B,CACA,sBAAAE,CAAuB1vB,EAAU2vB,GAAc,GAEtCx1B,KAAKq1B,iBAGVH,GAAqBO,IAAI5vB,GAErB2vB,GACA3vB,EAAS7F,KAAK01B,mBAEtB,CACA,yBAAAC,CAA0BC,GAEjB51B,KAAKq1B,gBAGVH,GAAqBtrB,OAAOgsB,EAChC,CACA,sBAAAN,GACIt1B,KAAK61B,gBACT,CACA,cAAAA,GACI,MAAMC,EAAe91B,KAAK01B,kBAC1BR,GAAqBpuB,SAAQjB,IACzBA,EAASiwB,EAAa,GAE9B,CACA,eAAAJ,GACI,OAAI3D,MAA4C,WAA7B7Q,SAAS6U,gBACjB,UAGJ,OACX,GE3CE,GAAS,IAAI,EAAA9zB,cAAc,kBACjC,MAAM+zB,GACF,WAAA9zB,CAAYgwB,EAAe3pB,GACvBvI,KAAKuI,QAAU,CAAC,EAChBvI,KAAKkyB,cAAgBA,EACrBlyB,KAAKi2B,uBAAwB,EAC7Bj2B,KAAKk2B,kBAAmB,EACxBl2B,KAAKm2B,kBAAoBn2B,KAAKm2B,kBAAkBzyB,KAAK1D,MACrDA,KAAK+C,UAAUmvB,EAAe3pB,EAClC,CACA,SAAAxF,CAAUmvB,EAAe3pB,GACrBvI,KAAKkyB,cAAgBA,EAErBlyB,KAAKqyB,UAELryB,KAAKuI,QAAU,CACXugB,WAAYvgB,GAASugB,YAAc,CAAC,GAGnC9oB,KAAKi2B,wBACNb,GAAgBG,uBAAuBv1B,KAAKm2B,mBAAoBn2B,KAAKk2B,kBACrEl2B,KAAKi2B,uBAAwB,EAErC,CACA,OAAA5D,GACQryB,KAAKi2B,uBACLb,GAAgBO,0BAA0B31B,KAAKm2B,mBAEnDn2B,KAAKi2B,uBAAwB,CACjC,CACA,iBAAAE,CAAkBxmB,GACA,YAAVA,EACA3P,KAAKo2B,iBAGLp2B,KAAKq2B,gBAEb,CACA,cAAAD,GACI,MAAMtN,EAAa9oB,KAAKuI,QAAQugB,YAAc,CAAC,EAC/C,GAAO/kB,MAAM,kDAAmD,CAC5DyrB,oBAAmB,GACnB1G,eAEJ9oB,KAAKkyB,cAAc1C,GAAqB1G,GAEnC9oB,KAAKk2B,mBACNl2B,KAAKk2B,kBAAmB,EAEhC,CACA,cAAAG,GACI,MAAMvN,EAAa9oB,KAAKuI,QAAQugB,YAAc,CAAC,EAC/C,GAAO/kB,MAAM,kDAAmD,CAC5D0rB,mBAAkB,GAClB3G,eAEJ9oB,KAAKkyB,cAAczC,GAAoB3G,EAC3C,EClDJ,MCDMwN,GAAqB,CAAC,EAEtBC,GAAoB,CAACtD,EAAWnK,KAClC,GAAO,CACH3mB,KAAM8wB,EACNnK,cACF,EAeA0N,GAAsB1kB,ICvBS,CAACA,IAClCue,GAAqC,UAAfve,EAAM3O,MACT,aAAf2O,EAAM3O,MACS,YAAf2O,EAAM3O,KAAoBysB,GAA6BK,eAAe,EDqB1EwG,CAA6B3kB,GDrBF,EAACA,EAAO4kB,EAAuBC,KAC1D,IAAIC,EACJ,MAAMC,EAAc/kB,EAAM3O,KACpB2zB,EAAiBH,EAAiBE,GAEnC/kB,EAAMilB,OAQPD,EACAA,EAAe/zB,UAAU2zB,EAAuB5kB,EAAMvJ,UAItC,UAAhBsuB,EACAD,EAAkB,IAAI3E,GAAayE,EAAuB5kB,EAAMvJ,SAE3C,aAAhBsuB,EACLD,EAAkB,IAAIjD,GAAgB+C,EAAuB5kB,EAAMvJ,SAE9C,YAAhBsuB,IACLD,EAAkB,IAAIZ,GAAeU,EAAuB5kB,EAAMvJ,UAElEquB,IACAD,EAAiBE,GAAeD,IAtB5BE,IACAA,EAAezE,iBACRsE,EAAiBE,GAqBhC,ECNAG,CAAuBllB,EAAOykB,GAAmBD,GAAmB,EErBlE,GAAS,IAAI,EAAAr0B,cAAc,aAQ3B,GAAc,KAChB,MAAM,MAAEkkB,EAAK,OAAEzL,EAAM,WAAE4R,EAAU,UAAEY,EAAS,cAAEF,EAAa,YAAEgC,GAAgB0B,KAC7EI,KACKlc,MAAK,EAAGuE,cAAasN,iBCpBV,GAAGN,QAAOzL,SAAQvB,cAAamT,aAAYU,gBAAeE,YAAW8B,cAAavI,aAAY7M,qBAC9G2V,GAAe,CACXpJ,QACAzL,SACAvB,cACAmT,WAAYA,GbPA,IaQZU,cAAeA,GbNA,IaOfE,UAAWA,GbRA,IaSX8B,YAAaA,GbPA,EaQbvI,aACA7M,mBACDgT,UAAU,EDUTqK,CAAc,CACV9Q,QACAzL,SACAvB,cACAsN,aACA6F,aACAY,YACAF,gBACAgC,cACApV,eAAgB4W,GAA4BvpB,EAAgB0qB,SAC9D,IAEDC,OAAMlrB,IACP,GAAO9C,KAAK,yBAA0B8C,EAAE,GAC1C,EEvBAqwB,GnBdkB,KACpBxG,IAAmB,CAAI,EoBcrB2G,GpBZmB,KACrB3G,IAAmB,CAAK,E","sources":["webpack:///webpack/universalModuleDefinition","webpack:///external umd \"aws_amplify_core\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./node_modules/@aws-amplify/core/dist/esm/Logger/types.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Logger/ConsoleLogger.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/AmplifyError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Hub/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/types.mjs","webpack:///./node_modules/uuid/dist/esm-browser/native.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/amplifyUuid/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/types/errors.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/PlatformNotSupportedError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/storage/KeyValueStorage.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/storage/InMemoryStorage.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/storage/utils.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/utils/cacheHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/createAssertionFunction.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/utils/errorHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/StorageCacheCommon.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/StorageCache.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Cache/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/errorHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/getClientInfo/getClientInfo.mjs","webpack:///./node_modules/tslib/tslib.es6.mjs","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/constants.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/convertToBuffer.js","webpack:///./node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/isEmptyData.js","webpack:///./node_modules/@smithy/util-hex-encoding/dist-es/index.js","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/utils/memoization.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/handlers/fetch.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/handlers/authenticated.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/internal/composeTransferHandler.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/userAgent/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/internal/composeServiceApi.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/serde/responseInfo.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/serde/json.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/amplifyUrl/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/endpoints/partitions.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/endpoints/getDnsSuffix.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/isClockSkewError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/version.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/helpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Expo.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/ReactNative.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Next.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Nuxt.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Angular.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/React.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Vue.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Svelte.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Web.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detectFramework.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/customUserAgent.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/awsClients/pinpoint/base.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredBackoff.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/awsClients/pinpoint/updateEndpoint.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/createEndpointId.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/getEndpointId.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/apis/updateEndpoint.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/cacheEndpointId.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/awsClients/pinpoint/errorHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/awsClients/pinpoint/putEvents.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/PinpointEventBuffer.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/getEventBuffer.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/sessionListener/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/apis/record.mjs","webpack:///./dist/esm/errors/AnalyticsError.mjs","webpack:///./dist/esm/errors/validation.mjs","webpack:///./dist/esm/errors/assertValidationError.mjs","webpack:///./dist/esm/utils/statusHelpers.mjs","webpack:///./dist/esm/utils/userAgent.mjs","webpack:///./dist/esm/providers/pinpoint/utils/resolveConfig.mjs","webpack:///./dist/esm/providers/pinpoint/utils/resolveCredentials.mjs","webpack:///./dist/esm/providers/pinpoint/apis/record.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/utils/resolveEndpointId.mjs","webpack:///./dist/esm/providers/pinpoint/apis/identifyUser.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/isBrowser.mjs","webpack:///./dist/esm/trackers/EventTracker.mjs","webpack:///./dist/esm/trackers/PageViewTracker.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/sessionListener/SessionListener.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/sessionListener/index.mjs","webpack:///./dist/esm/trackers/SessionTracker.mjs","webpack:///./dist/esm/utils/trackerHelpers.mjs","webpack:///./dist/esm/providers/pinpoint/apis/configureAutoTrack.mjs","webpack:///./dist/esm/utils/trackerConfigHelpers.mjs","webpack:///./dist/esm/providers/pinpoint/apis/flushEvents.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/providers/pinpoint/apis/flushEvents.mjs","webpack:///./dist/esm/apis/enable.mjs","webpack:///./dist/esm/apis/disable.mjs"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aws_amplify_core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aws_amplify_analytics\", [\"aws_amplify_core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aws_amplify_analytics\"] = factory(require(\"aws_amplify_core\"));\n\telse\n\t\troot[\"aws_amplify_analytics\"] = factory(root[\"aws_amplify_core\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__556__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__556__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n\nexport { LogType };\n//# sourceMappingURL=types.mjs.map\n","import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nconst AWS_CLOUDWATCH_CATEGORY = 'Logging';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nconst NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n\nexport { AWS_CLOUDWATCH_CATEGORY, NO_HUBCALLBACK_PROVIDED_EXCEPTION, USER_AGENT_HEADER };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n\nexport { AmplifyError };\n//# sourceMappingURL=AmplifyError.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nclass HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nconst Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nconst HubInternal = new HubClass('internal-hub');\n\nexport { AMPLIFY_SYMBOL, Hub, HubClass, HubInternal };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nvar Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nvar AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nvar ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nvar AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nvar DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nvar GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nvar InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nvar InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nvar PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nvar PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nvar PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nvar StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n\nexport { AiAction, AnalyticsAction, ApiAction, AuthAction, Category, DataStoreAction, Framework, GeoAction, InAppMessagingAction, InteractionsAction, PredictionsAction, PubSubAction, PushNotificationAction, StorageAction };\n//# sourceMappingURL=types.mjs.map\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 } from 'uuid';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyUuid = v4;\n\nexport { amplifyUuid };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n\nexport { AmplifyErrorCode };\n//# sourceMappingURL=errors.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass PlatformNotSupportedError extends AmplifyError {\n    constructor() {\n        super({\n            name: AmplifyErrorCode.PlatformNotSupported,\n            message: 'Function not supported on current platform',\n        });\n    }\n}\n\nexport { PlatformNotSupportedError };\n//# sourceMappingURL=PlatformNotSupportedError.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass KeyValueStorage {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    async setItem(key, value) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    async getItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    async removeItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    async clear() {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.clear();\n    }\n}\n\nexport { KeyValueStorage };\n//# sourceMappingURL=KeyValueStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass InMemoryStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    get length() {\n        return this.storage.size;\n    }\n    key(index) {\n        if (index > this.length - 1) {\n            return null;\n        }\n        return Array.from(this.storage.keys())[index];\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    getItem(key) {\n        return this.storage.get(key) ?? null;\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { InMemoryStorage };\n//# sourceMappingURL=InMemoryStorage.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nconst getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nconst getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n\nexport { getLocalStorageWithFallback, getSessionStorageWithFallback };\n//# sourceMappingURL=utils.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default cache config\n */\nconst defaultConfig = {\n    keyPrefix: 'aws-amplify-cache',\n    capacityInBytes: 1048576,\n    itemMaxSize: 210000,\n    defaultTTL: 259200000,\n    defaultPriority: 5,\n    warningThreshold: 0.8,\n};\nconst currentSizeKey = 'CurSize';\n\nexport { currentSizeKey, defaultConfig };\n//# sourceMappingURL=constants.mjs.map\n","import { currentSizeKey } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * return the byte size of the string\n * @param str\n */\nfunction getByteLength(str) {\n    let ret = 0;\n    ret = str.length;\n    for (let i = str.length; i >= 0; i -= 1) {\n        const charCode = str.charCodeAt(i);\n        if (charCode > 0x7f && charCode <= 0x7ff) {\n            ret += 1;\n        }\n        else if (charCode > 0x7ff && charCode <= 0xffff) {\n            ret += 2;\n        }\n        // trail surrogate\n        if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n            i -= 1;\n        }\n    }\n    return ret;\n}\n/**\n * get current time\n */\nfunction getCurrentTime() {\n    const currentTime = new Date();\n    return currentTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nfunction isInteger(value) {\n    if (Number.isInteger) {\n        return Number.isInteger(value);\n    }\n    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);\n}\nconst getCurrentSizeKey = (keyPrefix) => `${keyPrefix}${currentSizeKey}`;\n\nexport { getByteLength, getCurrentSizeKey, getCurrentTime, isInteger };\n//# sourceMappingURL=cacheHelpers.mjs.map\n","import { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createAssertionFunction = (errorMap, AssertionError = AmplifyError) => (assertion, name, additionalContext) => {\n    const { message, recoverySuggestion } = errorMap[name];\n    if (!assertion) {\n        throw new AssertionError({\n            name,\n            message: additionalContext\n                ? `${message} ${additionalContext}`\n                : message,\n            recoverySuggestion,\n        });\n    }\n};\n\nexport { createAssertionFunction };\n//# sourceMappingURL=createAssertionFunction.mjs.map\n","import { createAssertionFunction } from '../../errors/createAssertionFunction.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar CacheErrorCode;\n(function (CacheErrorCode) {\n    CacheErrorCode[\"NoCacheItem\"] = \"NoCacheItem\";\n    CacheErrorCode[\"NullNextNode\"] = \"NullNextNode\";\n    CacheErrorCode[\"NullPreviousNode\"] = \"NullPreviousNode\";\n})(CacheErrorCode || (CacheErrorCode = {}));\nconst cacheErrorMap = {\n    [CacheErrorCode.NoCacheItem]: {\n        message: 'Item not found in the cache storage.',\n    },\n    [CacheErrorCode.NullNextNode]: {\n        message: 'Next node is null.',\n    },\n    [CacheErrorCode.NullPreviousNode]: {\n        message: 'Previous node is null.',\n    },\n};\nconst assert = createAssertionFunction(cacheErrorMap);\n\nexport { CacheErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { defaultConfig, currentSizeKey } from './constants.mjs';\nimport { getCurrentSizeKey, getCurrentTime, getByteLength } from './utils/cacheHelpers.mjs';\nimport { assert, CacheErrorCode } from './utils/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nclass StorageCacheCommon {\n    /**\n     * Initialize the cache\n     *\n     * @param config - Custom configuration for this instance.\n     */\n    constructor({ config, keyValueStorage, }) {\n        this.config = {\n            ...defaultConfig,\n            ...config,\n        };\n        this.keyValueStorage = keyValueStorage;\n        this.sanitizeConfig();\n    }\n    getModuleName() {\n        return 'Cache';\n    }\n    /**\n     * Set custom configuration for the cache instance.\n     *\n     * @param config - customized configuration (without keyPrefix, which can't be changed)\n     *\n     * @return - the current configuration\n     */\n    configure(config) {\n        if (config) {\n            if (config.keyPrefix) {\n                logger.warn('keyPrefix can not be re-configured on an existing Cache instance.');\n            }\n            this.config = {\n                ...this.config,\n                ...config,\n            };\n        }\n        this.sanitizeConfig();\n        return this.config;\n    }\n    /**\n     * return the current size of the cache\n     * @return {Promise}\n     */\n    async getCurrentCacheSize() {\n        let size = await this.getStorage().getItem(getCurrentSizeKey(this.config.keyPrefix));\n        if (!size) {\n            await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), '0');\n            size = '0';\n        }\n        return Number(size);\n    }\n    /**\n     * Set item into cache. You can put number, string, boolean or object.\n     * The cache will first check whether has the same key.\n     * If it has, it will delete the old item and then put the new item in\n     * The cache will pop out items if it is full\n     * You can specify the cache item options. The cache will abort and output a warning:\n     * If the key is invalid\n     * If the size of the item exceeds itemMaxSize.\n     * If the value is undefined\n     * If incorrect cache item configuration\n     * If error happened with browser storage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} value - the value of the item\n     * @param {Object} [options] - optional, the specified meta-data\n     *\n     * @return {Promise}\n     */\n    async setItem(key, value, options) {\n        logger.debug(`Set item: key is ${key}, value is ${value} with options: ${options}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        if (typeof value === 'undefined') {\n            logger.warn(`The value of item should not be undefined!`);\n            return;\n        }\n        const cacheItemOptions = {\n            priority: options?.priority !== undefined\n                ? options.priority\n                : this.config.defaultPriority,\n            expires: options?.expires !== undefined\n                ? options.expires\n                : this.config.defaultTTL + getCurrentTime(),\n        };\n        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {\n            logger.warn(`Invalid parameter: priority due to out or range. It should be within 1 and 5.`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        const item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);\n        // check whether this item is too big;\n        if (item.byteSize > this.config.itemMaxSize) {\n            logger.warn(`Item with key: ${key} you are trying to put into is too big!`);\n            return;\n        }\n        try {\n            // first look into the storage, if it exists, delete it.\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n            // check whether the cache is full\n            if (await this.isCacheFull(item.byteSize)) {\n                const validKeys = await this.clearInvalidAndGetRemainingKeys();\n                if (await this.isCacheFull(item.byteSize)) {\n                    const sizeToPop = await this.sizeToPop(item.byteSize);\n                    await this.popOutItems(validKeys, sizeToPop);\n                }\n            }\n            // put item in the cache\n            return this.setCacheItem(prefixedKey, item);\n        }\n        catch (e) {\n            logger.warn(`setItem failed! ${e}`);\n        }\n    }\n    /**\n     * Get item from cache. It will return null if item doesn’t exist or it has been expired.\n     * If you specified callback function in the options,\n     * then the function will be executed if no such item in the cache\n     * and finally put the return value into cache.\n     * Please make sure the callback function will return the value you want to put into the cache.\n     * The cache will abort output a warning:\n     * If the key is invalid\n     * If error happened with AsyncStorage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} [options] - the options of callback function\n     *\n     * @return {Promise} - return a promise resolves to be the value of the item\n     */\n    async getItem(key, options) {\n        logger.debug(`Get item: key is ${key} with options ${options}`);\n        let cached;\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return null;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            cached = await this.getStorage().getItem(prefixedKey);\n            if (cached != null) {\n                if (await this.isExpired(prefixedKey)) {\n                    // if expired, remove that item and return null\n                    await this.removeCacheItem(prefixedKey, JSON.parse(cached).byteSize);\n                }\n                else {\n                    // if not expired, update its visitedTime and return the value\n                    const item = await this.updateVisitedTime(JSON.parse(cached), prefixedKey);\n                    return item.data;\n                }\n            }\n            if (options?.callback) {\n                const val = options.callback();\n                if (val !== null) {\n                    await this.setItem(key, val, options);\n                }\n                return val;\n            }\n            return null;\n        }\n        catch (e) {\n            logger.warn(`getItem failed! ${e}`);\n            return null;\n        }\n    }\n    /**\n     * remove item from the cache\n     * The cache will abort output a warning:\n     * If error happened with AsyncStorage\n     * @param {String} key - the key of the item\n     * @return {Promise}\n     */\n    async removeItem(key) {\n        logger.debug(`Remove item: key is ${key}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n        }\n        catch (e) {\n            logger.warn(`removeItem failed! ${e}`);\n        }\n    }\n    /**\n     * Return all the keys owned by this cache.\n     * Will return an empty array if error occurred.\n     *\n     * @return {Promise}\n     */\n    async getAllKeys() {\n        try {\n            return await this.getAllCacheKeys();\n        }\n        catch (e) {\n            logger.warn(`getAllkeys failed! ${e}`);\n            return [];\n        }\n    }\n    getStorage() {\n        return this.keyValueStorage;\n    }\n    /**\n     * check whether item is expired\n     *\n     * @param key - the key of the item\n     *\n     * @return true if the item is expired.\n     */\n    async isExpired(key) {\n        const text = await this.getStorage().getItem(key);\n        assert(text !== null, CacheErrorCode.NoCacheItem, `Key: ${key}`);\n        const item = JSON.parse(text);\n        if (getCurrentTime() >= item.expires) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * delete item from cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param size - optional, the byte size of the item\n     */\n    async removeCacheItem(prefixedKey, size) {\n        const item = await this.getStorage().getItem(prefixedKey);\n        assert(item !== null, CacheErrorCode.NoCacheItem, `Key: ${prefixedKey}`);\n        const itemSize = size ?? JSON.parse(item).byteSize;\n        // first try to update the current size of the cache\n        await this.decreaseCurrentSizeInBytes(itemSize);\n        // try to remove the item from cache\n        try {\n            await this.getStorage().removeItem(prefixedKey);\n        }\n        catch (removeItemError) {\n            // if some error happened, we need to rollback the current size\n            await this.increaseCurrentSizeInBytes(itemSize);\n            logger.error(`Failed to remove item: ${removeItemError}`);\n        }\n    }\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    fillCacheItem(key, value, options) {\n        const item = {\n            key,\n            data: value,\n            timestamp: getCurrentTime(),\n            visitedTime: getCurrentTime(),\n            priority: options.priority ?? 0,\n            expires: options.expires ?? 0,\n            type: typeof value,\n            byteSize: 0,\n        };\n        // calculate byte size\n        item.byteSize = getByteLength(JSON.stringify(item));\n        // re-calculate using cache item with updated byteSize property\n        item.byteSize = getByteLength(JSON.stringify(item));\n        return item;\n    }\n    sanitizeConfig() {\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // Set 5MB limit\n        const cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    }\n    /**\n     * increase current size of the cache\n     *\n     * @param amount - the amount of the cache szie which need to be increased\n     */\n    async increaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size + amount).toString());\n    }\n    /**\n     * decrease current size of the cache\n     *\n     * @param amount - the amount of the cache size which needs to be decreased\n     */\n    async decreaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size - amount).toString());\n    }\n    /**\n     * update the visited time if item has been visited\n     *\n     * @param item - the item which need to be updated\n     * @param prefixedKey - the key of the item\n     *\n     * @return the updated item\n     */\n    async updateVisitedTime(item, prefixedKey) {\n        item.visitedTime = getCurrentTime();\n        await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        return item;\n    }\n    /**\n     * put item into cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param itemData - the value of the item\n     * @param itemSizeInBytes - the byte size of the item\n     */\n    async setCacheItem(prefixedKey, item) {\n        // first try to update the current size of the cache.\n        await this.increaseCurrentSizeInBytes(item.byteSize);\n        // try to add the item into cache\n        try {\n            await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        }\n        catch (setItemErr) {\n            // if some error happened, we need to rollback the current size\n            await this.decreaseCurrentSizeInBytes(item.byteSize);\n            logger.error(`Failed to set item ${setItemErr}`);\n        }\n    }\n    /**\n     * total space needed when poping out items\n     *\n     * @param itemSize\n     *\n     * @return total space needed\n     */\n    async sizeToPop(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        const spaceItemNeed = cur + itemSize - this.config.capacityInBytes;\n        const cacheThresholdSpace = (1 - this.config.warningThreshold) * this.config.capacityInBytes;\n        return spaceItemNeed > cacheThresholdSpace\n            ? spaceItemNeed\n            : cacheThresholdSpace;\n    }\n    /**\n     * see whether cache is full\n     *\n     * @param itemSize\n     *\n     * @return true if cache is full\n     */\n    async isCacheFull(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        return itemSize + cur > this.config.capacityInBytes;\n    }\n    /**\n     * get all the items we have, sort them by their priority,\n     * if priority is same, sort them by their last visited time\n     * pop out items from the low priority (5 is the lowest)\n     * @private\n     * @param keys - all the keys in this cache\n     * @param sizeToPop - the total size of the items which needed to be poped out\n     */\n    async popOutItems(keys, sizeToPop) {\n        const items = [];\n        let remainedSize = sizeToPop;\n        for (const key of keys) {\n            const val = await this.getStorage().getItem(key);\n            if (val != null) {\n                const item = JSON.parse(val);\n                items.push(item);\n            }\n        }\n        // first compare priority\n        // then compare visited time\n        items.sort((a, b) => {\n            if (a.priority > b.priority) {\n                return -1;\n            }\n            else if (a.priority < b.priority) {\n                return 1;\n            }\n            else {\n                if (a.visitedTime < b.visitedTime) {\n                    return -1;\n                }\n                else\n                    return 1;\n            }\n        });\n        for (const item of items) {\n            // pop out items until we have enough room for new item\n            await this.removeCacheItem(item.key, item.byteSize);\n            remainedSize -= item.byteSize;\n            if (remainedSize <= 0) {\n                return;\n            }\n        }\n    }\n    /**\n     * Scan the storage and combine the following operations for efficiency\n     *   1. Clear out all expired keys owned by this cache, not including the size key.\n     *   2. Return the remaining keys.\n     *\n     * @return The remaining valid keys\n     */\n    async clearInvalidAndGetRemainingKeys() {\n        const remainingKeys = [];\n        const keys = await this.getAllCacheKeys({\n            omitSizeKey: true,\n        });\n        for (const key of keys) {\n            if (await this.isExpired(key)) {\n                await this.removeCacheItem(key);\n            }\n            else {\n                remainingKeys.push(key);\n            }\n        }\n        return remainingKeys;\n    }\n    /**\n     * clear the entire cache\n     * The cache will abort and output a warning if error occurs\n     * @return {Promise}\n     */\n    async clear() {\n        logger.debug(`Clear Cache`);\n        try {\n            const keys = await this.getAllKeys();\n            for (const key of keys) {\n                const prefixedKey = `${this.config.keyPrefix}${key}`;\n                await this.getStorage().removeItem(prefixedKey);\n            }\n        }\n        catch (e) {\n            logger.warn(`clear failed! ${e}`);\n        }\n    }\n}\n\nexport { StorageCacheCommon };\n//# sourceMappingURL=StorageCacheCommon.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { KeyValueStorage } from '../storage/KeyValueStorage.mjs';\nimport { getLocalStorageWithFallback } from '../storage/utils.mjs';\nimport { defaultConfig } from './constants.mjs';\nimport { StorageCacheCommon } from './StorageCacheCommon.mjs';\nimport { getCurrentSizeKey, getCurrentTime } from './utils/cacheHelpers.mjs';\nimport './utils/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Customized storage based on the SessionStorage or LocalStorage with LRU implemented\n */\nclass StorageCache extends StorageCacheCommon {\n    /**\n     * initialize the cache\n     * @param config - the configuration of the cache\n     */\n    constructor(config) {\n        const storage = getLocalStorageWithFallback();\n        super({ config, keyValueStorage: new KeyValueStorage(storage) });\n        this.storage = storage;\n        this.getItem = this.getItem.bind(this);\n        this.setItem = this.setItem.bind(this);\n        this.removeItem = this.removeItem.bind(this);\n    }\n    async getAllCacheKeys(options) {\n        const { omitSizeKey } = options ?? {};\n        const keys = [];\n        for (let i = 0; i < this.storage.length; i++) {\n            const key = this.storage.key(i);\n            if (omitSizeKey && key === getCurrentSizeKey(this.config.keyPrefix)) {\n                continue;\n            }\n            if (key?.startsWith(this.config.keyPrefix)) {\n                keys.push(key.substring(this.config.keyPrefix.length));\n            }\n        }\n        return keys;\n    }\n    /**\n     * Return a new instance of cache with customized configuration.\n     * @param {Object} config - the customized configuration\n     * @return {Object} - the new instance of Cache\n     */\n    createInstance(config) {\n        if (!config.keyPrefix || config.keyPrefix === defaultConfig.keyPrefix) {\n            logger.error('invalid keyPrefix, setting keyPrefix with timeStamp');\n            config.keyPrefix = getCurrentTime.toString();\n        }\n        return new StorageCache(config);\n    }\n}\n\nexport { StorageCache };\n//# sourceMappingURL=StorageCache.mjs.map\n","import { StorageCache } from './StorageCache.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst Cache = new StorageCache();\n\nexport { Cache };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { createAssertionFunction } from './createAssertionFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyErrorMap = {\n    [AmplifyErrorCode.NoEndpointId]: {\n        message: 'Endpoint ID was not found and was unable to be created.',\n    },\n    [AmplifyErrorCode.PlatformNotSupported]: {\n        message: 'Function not supported on current platform.',\n    },\n    [AmplifyErrorCode.Unknown]: {\n        message: 'An unknown error occurred.',\n    },\n    [AmplifyErrorCode.NetworkError]: {\n        message: 'A network error has occurred.',\n    },\n};\nconst assert = createAssertionFunction(amplifyErrorMap);\n\nexport { assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('getClientInfo');\nfunction getClientInfo() {\n    if (typeof window === 'undefined') {\n        return {};\n    }\n    return browserClientInfo();\n}\nfunction browserClientInfo() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return {};\n    }\n    const nav = window.navigator;\n    if (!nav) {\n        logger.warn('No navigator object available to get browser client info');\n        return {};\n    }\n    const { platform, product, vendor, userAgent, language } = nav;\n    const type = getBrowserType(userAgent);\n    const timezone = browserTimezone();\n    return {\n        platform,\n        make: product || vendor,\n        model: type.type,\n        version: type.version,\n        appVersion: [type.type, type.version].join('/'),\n        language,\n        timezone,\n    };\n}\nfunction browserTimezone() {\n    const tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\n    return tzMatch ? tzMatch[1] || '' : '';\n}\nfunction getBrowserType(userAgent) {\n    // The latest user agents for Opera: https://www.whatismybrowser.com/guides/the-latest-user-agent/opera\n    const operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9.]+).*/i.exec(userAgent);\n    if (operaMatch) {\n        return { type: operaMatch[1], version: operaMatch[2] };\n    }\n    // The latest user agents for Edge: https://www.whatismybrowser.com/guides/the-latest-user-agent/edge\n    const ieMatch = /.+(Trident|Edge|Edg|EdgA|EdgiOS)\\/([0-9.]+).*/i.exec(userAgent);\n    if (ieMatch) {\n        return { type: ieMatch[1], version: ieMatch[2] };\n    }\n    // The latest user agents for web browsers on Firefox and Chrome\n    // https://www.whatismybrowser.com/guides/the-latest-user-agent/firefox\n    // https://www.whatismybrowser.com/guides/the-latest-user-agent/chrome\n    const cfMatch = /.+(Chrome|CriOS|Firefox|FxiOS)\\/([0-9.]+).*/i.exec(userAgent);\n    if (cfMatch) {\n        return { type: cfMatch[1], version: cfMatch[2] };\n    }\n    // The latest user agents for Safari: https://www.whatismybrowser.com/guides/the-latest-user-agent/safari\n    const sMatch = /.+(Safari)\\/([0-9.]+).*/i.exec(userAgent);\n    if (sMatch) {\n        return { type: sMatch[1], version: sMatch[2] };\n    }\n    const awkMatch = /.+(AppleWebKit)\\/([0-9.]+).*/i.exec(userAgent);\n    if (awkMatch) {\n        return { type: awkMatch[1], version: awkMatch[2] };\n    }\n    const anyMatch = /.*([A-Z]+)\\/([0-9.]+).*/i.exec(userAgent);\n    if (anyMatch) {\n        return { type: anyMatch[1], version: anyMatch[2] };\n    }\n    return { type: '', version: '' };\n}\n\nexport { getClientInfo };\n//# sourceMappingURL=getClientInfo.mjs.map\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","/**\n * @internal\n */\nexport var BLOCK_SIZE = 64;\n/**\n * @internal\n */\nexport var DIGEST_LENGTH = 32;\n/**\n * @internal\n */\nexport var KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/**\n * @internal\n */\nexport var INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n];\n/**\n * @internal\n */\nexport var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n//# sourceMappingURL=constants.js.map","import { BLOCK_SIZE, DIGEST_LENGTH, INIT, KEY, MAX_HASHABLE_LENGTH } from \"./constants\";\n/**\n * @internal\n */\nvar RawSha256 = /** @class */ (function () {\n    function RawSha256() {\n        this.state = Int32Array.from(INIT);\n        this.temp = new Int32Array(64);\n        this.buffer = new Uint8Array(64);\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        /**\n         * @internal\n         */\n        this.finished = false;\n    }\n    RawSha256.prototype.update = function (data) {\n        if (this.finished) {\n            throw new Error(\"Attempted to update an already finished hash.\");\n        }\n        var position = 0;\n        var byteLength = data.byteLength;\n        this.bytesHashed += byteLength;\n        if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n            throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n        }\n        while (byteLength > 0) {\n            this.buffer[this.bufferLength++] = data[position++];\n            byteLength--;\n            if (this.bufferLength === BLOCK_SIZE) {\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n        }\n    };\n    RawSha256.prototype.digest = function () {\n        if (!this.finished) {\n            var bitsHashed = this.bytesHashed * 8;\n            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n            var undecoratedLength = this.bufferLength;\n            bufferView.setUint8(this.bufferLength++, 0x80);\n            // Ensure the final block has enough room for the hashed length\n            if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n                for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                    bufferView.setUint8(i, 0);\n                }\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n            for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n            bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n            this.hashBuffer();\n            this.finished = true;\n        }\n        // The value in state is little-endian rather than big-endian, so flip\n        // each word into a new Uint8Array\n        var out = new Uint8Array(DIGEST_LENGTH);\n        for (var i = 0; i < 8; i++) {\n            out[i * 4] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return out;\n    };\n    RawSha256.prototype.hashBuffer = function () {\n        var _a = this, buffer = _a.buffer, state = _a.state;\n        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];\n        for (var i = 0; i < BLOCK_SIZE; i++) {\n            if (i < 16) {\n                this.temp[i] =\n                    ((buffer[i * 4] & 0xff) << 24) |\n                        ((buffer[i * 4 + 1] & 0xff) << 16) |\n                        ((buffer[i * 4 + 2] & 0xff) << 8) |\n                        (buffer[i * 4 + 3] & 0xff);\n            }\n            else {\n                var u = this.temp[i - 2];\n                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\n                u = this.temp[i - 15];\n                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\n                this.temp[i] =\n                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);\n            }\n            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^\n                ((state4 >>> 11) | (state4 << 21)) ^\n                ((state4 >>> 25) | (state4 << 7))) +\n                ((state4 & state5) ^ (~state4 & state6))) |\n                0) +\n                ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) |\n                0;\n            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^\n                ((state0 >>> 13) | (state0 << 19)) ^\n                ((state0 >>> 22) | (state0 << 10))) +\n                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\n                0;\n            state7 = state6;\n            state6 = state5;\n            state5 = state4;\n            state4 = (state3 + t1) | 0;\n            state3 = state2;\n            state2 = state1;\n            state1 = state0;\n            state0 = (t1 + t2) | 0;\n        }\n        state[0] += state0;\n        state[1] += state1;\n        state[2] += state2;\n        state[3] += state3;\n        state[4] += state4;\n        state[5] += state5;\n        state[6] += state6;\n        state[7] += state7;\n    };\n    return RawSha256;\n}());\nexport { RawSha256 };\n//# sourceMappingURL=RawSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromUtf8 as fromUtf8Browser } from \"@smithy/util-utf8\";\n// Quick polyfill\nvar fromUtf8 = typeof Buffer !== \"undefined\" && Buffer.from\n    ? function (input) { return Buffer.from(input, \"utf8\"); }\n    : fromUtf8Browser;\nexport function convertToBuffer(data) {\n    // Already a Uint8, do nothing\n    if (data instanceof Uint8Array)\n        return data;\n    if (typeof data === \"string\") {\n        return fromUtf8(data);\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n    return new Uint8Array(data);\n}\n//# sourceMappingURL=convertToBuffer.js.map","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","import { __awaiter, __generator } from \"tslib\";\nimport { BLOCK_SIZE } from \"./constants\";\nimport { RawSha256 } from \"./RawSha256\";\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nvar Sha256 = /** @class */ (function () {\n    function Sha256(secret) {\n        this.secret = secret;\n        this.hash = new RawSha256();\n        this.reset();\n    }\n    Sha256.prototype.update = function (toHash) {\n        if (isEmptyData(toHash) || this.error) {\n            return;\n        }\n        try {\n            this.hash.update(convertToBuffer(toHash));\n        }\n        catch (e) {\n            this.error = e;\n        }\n    };\n    /* This synchronous method keeps compatibility\n     * with the v2 aws-sdk.\n     */\n    Sha256.prototype.digestSync = function () {\n        if (this.error) {\n            throw this.error;\n        }\n        if (this.outer) {\n            if (!this.outer.finished) {\n                this.outer.update(this.hash.digest());\n            }\n            return this.outer.digest();\n        }\n        return this.hash.digest();\n    };\n    /* The underlying digest method here is synchronous.\n     * To keep the same interface with the other hash functions\n     * the default is to expose this as an async method.\n     * However, it can sometimes be useful to have a sync method.\n     */\n    Sha256.prototype.digest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.digestSync()];\n            });\n        });\n    };\n    Sha256.prototype.reset = function () {\n        this.hash = new RawSha256();\n        if (this.secret) {\n            this.outer = new RawSha256();\n            var inner = bufferFromSecret(this.secret);\n            var outer = new Uint8Array(BLOCK_SIZE);\n            outer.set(inner);\n            for (var i = 0; i < BLOCK_SIZE; i++) {\n                inner[i] ^= 0x36;\n                outer[i] ^= 0x5c;\n            }\n            this.hash.update(inner);\n            this.outer.update(outer);\n            // overwrite the copied key in memory\n            for (var i = 0; i < inner.byteLength; i++) {\n                inner[i] = 0;\n            }\n        }\n    };\n    return Sha256;\n}());\nexport { Sha256 };\nfunction bufferFromSecret(secret) {\n    var input = convertToBuffer(secret);\n    if (input.byteLength > BLOCK_SIZE) {\n        var bufferHash = new RawSha256();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n//# sourceMappingURL=jsSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isEmptyData(data) {\n    if (typeof data === \"string\") {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\n//# sourceMappingURL=isEmptyData.js.map","const SHORT_TO_HEX = {};\nconst HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_RETRY_ATTEMPTS = 3;\n/**\n * Retry middleware\n */\nconst retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n\nexport { retryMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns signed headers.\n *\n * @param headers `headers` from the request.\n * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers\n * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.\n *\n * @internal\n */\nconst getSignedHeaders = (headers) => Object.keys(headers)\n    .map(key => key.toLowerCase())\n    .sort()\n    .join(';');\n\nexport { getSignedHeaders };\n//# sourceMappingURL=getSignedHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// query params\nconst ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';\nconst AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';\nconst CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';\nconst EXPIRES_QUERY_PARAM = 'X-Amz-Expires';\nconst REGION_SET_PARAM = 'X-Amz-Region-Set';\nconst SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';\nconst SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';\nconst TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';\n// headers\nconst AUTH_HEADER = 'authorization';\nconst HOST_HEADER = 'host';\nconst AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nconst TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\n// identifiers\nconst KEY_TYPE_IDENTIFIER = 'aws4_request';\nconst SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';\nconst SIGNATURE_IDENTIFIER = 'AWS4';\n// preset values\nconst EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\nconst UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';\n\nexport { ALGORITHM_QUERY_PARAM, AMZ_DATE_HEADER, AMZ_DATE_QUERY_PARAM, AUTH_HEADER, CREDENTIAL_QUERY_PARAM, EMPTY_HASH, EXPIRES_QUERY_PARAM, HOST_HEADER, KEY_TYPE_IDENTIFIER, REGION_SET_PARAM, SHA256_ALGORITHM_IDENTIFIER, SIGNATURE_IDENTIFIER, SIGNATURE_QUERY_PARAM, SIGNED_HEADERS_QUERY_PARAM, TOKEN_HEADER, TOKEN_QUERY_PARAM, UNSIGNED_PAYLOAD };\n//# sourceMappingURL=constants.mjs.map\n","import { Sha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@smithy/util-hex-encoding';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: V6 update to different crypto dependency?\n/**\n * Returns the hashed data a `Uint8Array`.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns `Uint8Array` created from the data as input to a hash function.\n */\nconst getHashedData = (key, data) => {\n    const sha256 = new Sha256(key ?? undefined);\n    sha256.update(data);\n    // TODO: V6 flip to async digest\n    const hashedData = sha256.digestSync();\n    return hashedData;\n};\n/**\n * Returns the hashed data as a hex string.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.\n *\n * @internal\n */\nconst getHashedDataAsHex = (key, data) => {\n    const hashedData = getHashedData(key, data);\n    return toHex(hashedData);\n};\n\nexport { getHashedData, getHashedDataAsHex };\n//# sourceMappingURL=dataHashHelpers.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns canonical headers.\n *\n * @param headers Headers from the request.\n * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must\n * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,\n * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values\n * for a multi-value header using commas.\n *\n * @internal\n */\nconst getCanonicalHeaders = (headers) => Object.entries(headers)\n    .map(([key, value]) => ({\n    key: key.toLowerCase(),\n    value: value?.trim().replace(/\\s+/g, ' ') ?? '',\n}))\n    .sort((a, b) => (a.key < b.key ? -1 : 1))\n    .map(entry => `${entry.key}:${entry.value}\\n`)\n    .join('');\n\nexport { getCanonicalHeaders };\n//# sourceMappingURL=getCanonicalHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical query string.\n *\n * @param searchParams `searchParams` from the request url.\n * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,\n * including the space character. Encode names and values separately. If there are empty parameters, append the equals\n * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there\n * is no query string, use an empty string (\"\").\n *\n * @internal\n */\nconst getCanonicalQueryString = (searchParams) => Array.from(searchParams)\n    .sort(([keyA, valA], [keyB, valB]) => {\n    if (keyA === keyB) {\n        return valA < valB ? -1 : 1;\n    }\n    return keyA < keyB ? -1 : 1;\n})\n    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)\n    .join('&');\nconst escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { getCanonicalQueryString };\n//# sourceMappingURL=getCanonicalQueryString.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical uri.\n *\n * @param pathname `pathname` from request url.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark\n * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).\n *\n * @internal\n */\nconst getCanonicalUri = (pathname, uriEscapePath = true) => pathname\n    ? uriEscapePath\n        ? encodeURIComponent(pathname).replace(/%2F/g, '/')\n        : pathname\n    : '/';\n\nexport { getCanonicalUri };\n//# sourceMappingURL=getCanonicalUri.mjs.map\n","import { EMPTY_HASH, UNSIGNED_PAYLOAD } from '../constants.mjs';\nimport { getHashedDataAsHex } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the hashed payload.\n *\n * @param body `body` (payload) from the request.\n * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string\n * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.\n *\n * @internal\n */\nconst getHashedPayload = (body) => {\n    // return precalculated empty hash if body is undefined or null\n    if (body == null) {\n        return EMPTY_HASH;\n    }\n    if (isSourceData(body)) {\n        const hashedData = getHashedDataAsHex(null, body);\n        return hashedData;\n    }\n    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.\n    return UNSIGNED_PAYLOAD;\n};\nconst isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);\nconst isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n\nexport { getHashedPayload };\n//# sourceMappingURL=getHashedPayload.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a `Date` that is corrected for clock skew.\n *\n * @param systemClockOffset The offset of the system clock in milliseconds.\n *\n * @returns `Date` representing the current time adjusted by the system clock offset.\n *\n * @internal\n */\nconst getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);\n\nexport { getSkewCorrectedDate };\n//# sourceMappingURL=getSkewCorrectedDate.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nconst withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n\nexport { withMemoization };\n//# sourceMappingURL=memoization.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n\nexport { fetchTransferHandler };\n//# sourceMappingURL=fetch.mjs.map\n","import { retryMiddlewareFactory } from '../middleware/retry/middleware.mjs';\nimport '../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../utils/retry/retry.mjs';\nimport '../../types/errors.mjs';\nimport { signingMiddlewareFactory } from '../middleware/signing/middleware.mjs';\nimport { userAgentMiddlewareFactory } from '../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from './fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst authenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    retryMiddlewareFactory,\n    signingMiddlewareFactory,\n]);\n\nexport { authenticatedHandler };\n//# sourceMappingURL=authenticated.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nconst composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n\nexport { composeTransferHandler };\n//# sourceMappingURL=composeTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nconst userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n\nexport { userAgentMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","import { signRequest } from './signer/signatureV4/signRequest.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getSkewCorrectedDate } from './utils/getSkewCorrectedDate.mjs';\nimport { getUpdatedSystemClockOffset } from './utils/getUpdatedSystemClockOffset.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.\n * This middleware is expected to be placed after retry middleware.\n */\nconst signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {\n    let currentSystemClockOffset;\n    return (next, context) => async function signingMiddleware(request) {\n        currentSystemClockOffset = currentSystemClockOffset ?? 0;\n        const signRequestOptions = {\n            credentials: typeof credentials === 'function'\n                ? await credentials({\n                    forceRefresh: !!context?.isCredentialsExpired,\n                })\n                : credentials,\n            signingDate: getSkewCorrectedDate(currentSystemClockOffset),\n            signingRegion: region,\n            signingService: service,\n            uriEscapePath,\n        };\n        const signedRequest = await signRequest(request, signRequestOptions);\n        const response = await next(signedRequest);\n        // Update system clock offset if response contains date header, regardless of the status code.\n        // non-2xx response will still be returned from next handler instead of thrown, because it's\n        // only thrown by the retry middleware.\n        const dateString = getDateHeader(response);\n        if (dateString) {\n            currentSystemClockOffset = getUpdatedSystemClockOffset(Date.parse(dateString), currentSystemClockOffset);\n        }\n        return response;\n    };\n};\nconst getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];\n\nexport { signingMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","import { getSignedHeaders } from './utils/getSignedHeaders.mjs';\nimport { getSigningValues } from './utils/getSigningValues.mjs';\nimport { HOST_HEADER, AMZ_DATE_HEADER, TOKEN_HEADER, AUTH_HEADER, SHA256_ALGORITHM_IDENTIFIER } from './constants.mjs';\nimport { getSignature } from './utils/getSignature.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.\n */\nconst signRequest = (request, options) => {\n    const signingValues = getSigningValues(options);\n    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;\n    // create the request to sign\n    const headers = { ...request.headers };\n    headers[HOST_HEADER] = request.url.host;\n    headers[AMZ_DATE_HEADER] = longDate;\n    if (sessionToken) {\n        headers[TOKEN_HEADER] = sessionToken;\n    }\n    const requestToSign = { ...request, headers };\n    // calculate and add the signature to the request\n    const signature = getSignature(requestToSign, signingValues);\n    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;\n    const signedHeadersEntry = `SignedHeaders=${getSignedHeaders(headers)}`;\n    const signatureEntry = `Signature=${signature}`;\n    headers[AUTH_HEADER] =\n        `${SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;\n    return requestToSign;\n};\n\nexport { signRequest };\n//# sourceMappingURL=signRequest.mjs.map\n","import { getCredentialScope } from './getCredentialScope.mjs';\nimport { getFormattedDates } from './getFormattedDates.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Extracts common values used for signing both requests and urls.\n *\n * @param options `SignRequestOptions` object containing values used to construct the signature.\n * @returns Common `SigningValues` used for signing.\n *\n * @internal\n */\nconst getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {\n    // get properties from credentials\n    const { accessKeyId, secretAccessKey, sessionToken } = credentials;\n    // get formatted dates for signing\n    const { longDate, shortDate } = getFormattedDates(signingDate);\n    // copy header and set signing properties\n    const credentialScope = getCredentialScope(shortDate, signingRegion, signingService);\n    return {\n        accessKeyId,\n        credentialScope,\n        longDate,\n        secretAccessKey,\n        sessionToken,\n        shortDate,\n        signingRegion,\n        signingService,\n        uriEscapePath,\n    };\n};\n\nexport { getSigningValues };\n//# sourceMappingURL=getSigningValues.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns expected date strings to be used in signing.\n *\n * @param date JavaScript `Date` object.\n * @returns `FormattedDates` object containing the following:\n * - longDate: A date string in 'YYYYMMDDThhmmssZ' format\n * - shortDate: A date string in 'YYYYMMDD' format\n *\n * @internal\n */\nconst getFormattedDates = (date) => {\n    const longDate = date.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\n\nexport { getFormattedDates };\n//# sourceMappingURL=getFormattedDates.mjs.map\n","import { KEY_TYPE_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the credential scope which restricts the resulting signature to the specified region and service.\n *\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n *\n * @internal\n */\nconst getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${KEY_TYPE_IDENTIFIER}`;\n\nexport { getCredentialScope };\n//# sourceMappingURL=getCredentialScope.mjs.map\n","import { getHashedDataAsHex } from './dataHashHelpers.mjs';\nimport { getCanonicalRequest } from './getCanonicalRequest.mjs';\nimport { getSigningKey } from './getSigningKey.mjs';\nimport { getStringToSign } from './getStringToSign.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nconst getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = getCanonicalRequest(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = getHashedDataAsHex(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = getStringToSign(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = getHashedDataAsHex(getSigningKey(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\n\nexport { getSignature };\n//# sourceMappingURL=getSignature.mjs.map\n","import { getCanonicalHeaders } from './getCanonicalHeaders.mjs';\nimport { getCanonicalQueryString } from './getCanonicalQueryString.mjs';\nimport { getCanonicalUri } from './getCanonicalUri.mjs';\nimport { getHashedPayload } from './getHashedPayload.mjs';\nimport { getSignedHeaders } from './getSignedHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical request.\n *\n * @param request `HttpRequest` from which to create the canonical request from.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns String created by by concatenating the following strings, separated by newline characters:\n * - HTTPMethod\n * - CanonicalUri\n * - CanonicalQueryString\n * - CanonicalHeaders\n * - SignedHeaders\n * - HashedPayload\n *\n * @internal\n */\nconst getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [\n    method,\n    getCanonicalUri(url.pathname, uriEscapePath),\n    getCanonicalQueryString(url.searchParams),\n    getCanonicalHeaders(headers),\n    getSignedHeaders(headers),\n    getHashedPayload(body),\n].join('\\n');\n\nexport { getCanonicalRequest };\n//# sourceMappingURL=getCanonicalRequest.mjs.map\n","import { SHA256_ALGORITHM_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a string to be signed.\n *\n * @param date Current date in the format 'YYYYMMDDThhmmssZ'.\n * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n * @param hashedRequest Hashed canonical request.\n *\n * @returns A string created by by concatenating the following strings, separated by newline characters:\n * - Algorithm\n * - RequestDateTime\n * - CredentialScope\n * - HashedCanonicalRequest\n *\n * @internal\n */\nconst getStringToSign = (date, credentialScope, hashedRequest) => [SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\\n');\n\nexport { getStringToSign };\n//# sourceMappingURL=getStringToSign.mjs.map\n","import { KEY_TYPE_IDENTIFIER, SIGNATURE_IDENTIFIER } from '../constants.mjs';\nimport { getHashedData } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a signing key to be used for signing requests.\n *\n * @param secretAccessKey AWS secret access key from credentials.\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns `Uint8Array` calculated from its composite parts.\n *\n * @internal\n */\nconst getSigningKey = (secretAccessKey, date, region, service) => {\n    const key = `${SIGNATURE_IDENTIFIER}${secretAccessKey}`;\n    const dateKey = getHashedData(key, date);\n    const regionKey = getHashedData(dateKey, region);\n    const serviceKey = getHashedData(regionKey, service);\n    const signingKey = getHashedData(serviceKey, KEY_TYPE_IDENTIFIER);\n    return signingKey;\n};\n\nexport { getSigningKey };\n//# sourceMappingURL=getSigningKey.mjs.map\n","import { isClockSkewed } from './isClockSkewed.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the difference between clock time and the current system time if clock is skewed.\n *\n * @param clockTimeInMilliseconds Clock time in milliseconds.\n * @param currentSystemClockOffset Current system clock offset in milliseconds.\n *\n * @internal\n */\nconst getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {\n    if (isClockSkewed(clockTimeInMilliseconds, currentSystemClockOffset)) {\n        return clockTimeInMilliseconds - Date.now();\n    }\n    return currentSystemClockOffset;\n};\n\nexport { getUpdatedSystemClockOffset };\n//# sourceMappingURL=getUpdatedSystemClockOffset.mjs.map\n","import { getSkewCorrectedDate } from './getSkewCorrectedDate.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10\nconst SKEW_WINDOW = 5 * 60 * 1000;\n/**\n * Checks if the provided date is within the skew window of 5 minutes.\n *\n * @param clockTimeInMilliseconds Time to check for skew in milliseconds.\n * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.\n *\n * @returns True if skewed. False otherwise.\n *\n * @internal\n */\nconst isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs(getSkewCorrectedDate(clockOffsetInMilliseconds).getTime() -\n    clockTimeInMilliseconds) >= SKEW_WINDOW;\n\nexport { isClockSkewed };\n//# sourceMappingURL=isClockSkewed.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a service API handler that accepts input as defined shape and responds conforming to defined output shape.\n * A service API handler is composed with:\n * * A transfer handler\n * * A serializer function\n * * A deserializer function\n * * A default config object\n *\n * The returned service API handler, when called, will trigger the following workflow:\n * 1. When calling the service API handler function, the default config object is merged into the input config\n * object to assign the default values of some omitted configs, resulting to a resolved config object.\n * 2. The `endpointResolver` function from the default config object will be invoked with the resolved config object and\n * API input object resulting to an endpoint instance.\n * 3. The serializer function is invoked with API input object and the endpoint instance resulting to an HTTP request\n * instance.\n * 4. The HTTP request instance and the resolved config object is passed to the transfer handler function.\n * 5. The transfer handler function resolves to an HTTP response instance(can be either successful or failed status code).\n * 6. The deserializer function is invoked with the HTTP response instance resulting to the API output object, and\n * return to the caller.\n *\n *\n * @param transferHandler Async function for dispatching HTTP requests and returning HTTP response.\n * @param serializer  Async function for converting object in defined input shape into HTTP request targeting a given\n * \tendpoint.\n * @param deserializer Async function for converting HTTP response into output object in defined output shape, or error\n * \tshape.\n * @param defaultConfig  object containing default options to be consumed by transfer handler, serializer and\n *  deserializer.\n * @returns a async service API handler function that accepts a config object and input object in defined shape, returns\n * \tan output object in defined shape. It may also throw error instance in defined shape in deserializer. The config\n *  object type is composed with options type of transferHandler, endpointResolver function as well as endpointResolver\n *  function's input options type, region string. The config object property will be marked as optional if it's also\n * \tdefined in defaultConfig.\n *\n * @internal\n */\nconst composeServiceApi = (transferHandler, serializer, deserializer, defaultConfig) => {\n    return async (config, input) => {\n        const resolvedConfig = {\n            ...defaultConfig,\n            ...config,\n        };\n        // We need to allow different endpoints based on both given config(other than region) and input.\n        // However for most of non-S3 services, region is the only input for endpoint resolver.\n        const endpoint = await resolvedConfig.endpointResolver(resolvedConfig, input);\n        // Unlike AWS SDK clients, a serializer should NOT populate the `host` or `content-length` headers.\n        // Both of these headers are prohibited per Spec(https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name).\n        // They will be populated automatically by browser, or node-fetch polyfill.\n        const request = await serializer(input, endpoint);\n        const response = await transferHandler(request, {\n            ...resolvedConfig,\n        });\n        return deserializer(response);\n    };\n};\n\nexport { composeServiceApi };\n//# sourceMappingURL=composeServiceApi.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Wraps encodeURIComponent to encode additional characters to fully adhere to RFC 3986.\n * @see https://github.com/aws/aws-sdk-js-v3/blob/86b432c464150069678b25ff88d57c2ca26e75a2/packages/smithy-client/src/extended-encode-uri-component.ts#L7\n *\n * @param uri URI string to encode\n * @returns RFC 3986 encoded string\n *\n * @internal\n */\nconst extendedEncodeURIComponent = (uri) => {\n    // Match characters normally not encoded by `encodeURIComponent`\n    const extendedCharacters = /[!'()*]/g;\n    return encodeURIComponent(uri).replace(extendedCharacters, hexEncode);\n};\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { extendedEncodeURIComponent };\n//# sourceMappingURL=extendedEncodeURIComponent.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n\nexport { parseMetadata };\n//# sourceMappingURL=responseInfo.mjs.map\n","import { parseMetadata } from './responseInfo.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nconst parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nconst parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n\nexport { parseJsonBody, parseJsonError };\n//# sourceMappingURL=json.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\n\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default partition for AWS services. This is used when the region is not provided or the region is not recognized.\n *\n * @internal\n */\nconst defaultPartition = {\n    id: 'aws',\n    outputs: {\n        dnsSuffix: 'amazonaws.com',\n    },\n    regionRegex: '^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$',\n    regions: ['aws-global'],\n};\n/**\n * This data is adapted from the partition file from AWS SDK shared utilities but remove some contents for bundle size\n * concern. Information removed are `dualStackDnsSuffix`, `supportDualStack`, `supportFIPS`, restricted partitions, and\n * list of regions for each partition other than global regions.\n *\n * * Ref: https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints\n * * Ref: https://github.com/aws/aws-sdk-js-v3/blob/0201baef03c2379f1f6f7150b9d401d4b230d488/packages/util-endpoints/src/lib/aws/partitions.json#L1\n *\n * @internal\n */\nconst partitionsInfo = {\n    partitions: [\n        defaultPartition,\n        {\n            id: 'aws-cn',\n            outputs: {\n                dnsSuffix: 'amazonaws.com.cn',\n            },\n            regionRegex: '^cn\\\\-\\\\w+\\\\-\\\\d+$',\n            regions: ['aws-cn-global'],\n        },\n    ],\n};\n\nexport { defaultPartition, partitionsInfo };\n//# sourceMappingURL=partitions.mjs.map\n","import { defaultPartition, partitionsInfo } from './partitions.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get the AWS Services endpoint URL's DNS suffix for a given region. A typical AWS regional service endpoint URL will\n * follow this pattern: {endpointPrefix}.{region}.{dnsSuffix}. For example, the endpoint URL for Cognito Identity in\n * us-east-1 will be cognito-identity.us-east-1.amazonaws.com. Here the DnsSuffix is `amazonaws.com`.\n *\n * @param region\n * @returns The DNS suffix\n *\n * @internal\n */\nconst getDnsSuffix = (region) => {\n    const { partitions } = partitionsInfo;\n    for (const { regions, outputs, regionRegex } of partitions) {\n        const regex = new RegExp(regionRegex);\n        if (regions.includes(region) || regex.test(region)) {\n            return outputs.dnsSuffix;\n        }\n    }\n    return defaultPartition.outputs.dnsSuffix;\n};\n\nexport { getDnsSuffix };\n//# sourceMappingURL=getDnsSuffix.mjs.map\n","import '../../../utils/getClientInfo/getClientInfo.mjs';\nimport { jitteredBackoff as jitteredBackoff$1 } from '../../../utils/retry/jitteredBackoff.mjs';\nimport '../../../utils/retry/retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nconst DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\nconst jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoff$1(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nconst isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n\nexport { isClockSkewError };\n//# sourceMappingURL=isClockSkewError.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n\nexport { getRetryDecider };\n//# sourceMappingURL=defaultRetryDecider.mjs.map\n","// generated by genversion\nconst version = '6.10.2';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst globalExists = () => {\n    return typeof global !== 'undefined';\n};\nconst globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nconst windowExists = () => {\n    return typeof window !== 'undefined';\n};\nconst documentExists = () => {\n    return typeof document !== 'undefined';\n};\nconst processExists = () => {\n    return typeof process !== 'undefined';\n};\nconst keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n\nexport { documentExists, globalExists, globalThisExists, keyPrefixMatch, processExists, windowExists };\n//# sourceMappingURL=helpers.mjs.map\n","import { Framework } from '../types.mjs';\nimport { reactWebDetect, reactSSRDetect } from './React.mjs';\nimport { vueWebDetect, vueSSRDetect } from './Vue.mjs';\nimport { svelteWebDetect, svelteSSRDetect } from './Svelte.mjs';\nimport { nextWebDetect, nextSSRDetect } from './Next.mjs';\nimport { nuxtWebDetect, nuxtSSRDetect } from './Nuxt.mjs';\nimport { angularWebDetect, angularSSRDetect } from './Angular.mjs';\nimport { reactNativeDetect } from './ReactNative.mjs';\nimport { expoDetect } from './Expo.mjs';\nimport { webDetect } from './Web.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nfunction detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n\nexport { detect };\n//# sourceMappingURL=index.mjs.map\n","import { globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with expo 48 / react-native 0.71.3\nfunction expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n\nexport { expoDetect };\n//# sourceMappingURL=Expo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nfunction reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n\nexport { reactNativeDetect };\n//# sourceMappingURL=ReactNative.mjs.map\n","import { windowExists, globalExists, keyPrefixMatch } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with next 13.4 / react 18.2\nfunction nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nfunction nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n\nexport { nextSSRDetect, nextWebDetect };\n//# sourceMappingURL=Next.mjs.map\n","import { windowExists, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with nuxt 2.15 / vue 2.7\nfunction nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nfunction nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n\nexport { nuxtSSRDetect, nuxtWebDetect };\n//# sourceMappingURL=Nuxt.mjs.map\n","import { documentExists, processExists, windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with @angular/core 16.0.0\nfunction angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nfunction angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n\nexport { angularSSRDetect, angularWebDetect };\n//# sourceMappingURL=Angular.mjs.map\n","import { documentExists, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react 18.2 - built using Vite\nfunction reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nfunction reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n\nexport { reactSSRDetect, reactWebDetect };\n//# sourceMappingURL=React.mjs.map\n","import { windowExists, keyPrefixMatch, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with vue 3.3.2\nfunction vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nfunction vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n\nexport { vueSSRDetect, vueWebDetect };\n//# sourceMappingURL=Vue.mjs.map\n","import { windowExists, keyPrefixMatch, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with svelte 3.59\nfunction svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nfunction svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n\nexport { svelteSSRDetect, svelteWebDetect };\n//# sourceMappingURL=Svelte.mjs.map\n","import { windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction webDetect() {\n    return windowExists();\n}\n\nexport { webDetect };\n//# sourceMappingURL=Web.mjs.map\n","import { Framework } from './types.mjs';\nimport { detect } from './detection/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nconst frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nconst detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nconst observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nfunction clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n\nexport { clearCache, detectFramework, frameworkChangeObservers, observeFrameworkChanges };\n//# sourceMappingURL=detectFramework.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nconst setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nconst getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n\nexport { getCustomUserAgent, setCustomUserAgent };\n//# sourceMappingURL=customUserAgent.mjs.map\n","import { Framework } from './types.mjs';\nimport { version } from './version.mjs';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework.mjs';\nimport { getCustomUserAgent } from './customUserAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nconst sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nconst Platform = new PlatformBuilder();\nconst getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nconst getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n\nexport { Platform, getAmplifyUserAgent, getAmplifyUserAgentObject, sanitizeAmplifyVersion };\n//# sourceMappingURL=index.mjs.map\n","import { getDnsSuffix } from '../../clients/endpoints/getDnsSuffix.mjs';\nimport { jitteredBackoff } from '../../clients/middleware/retry/jitteredBackoff.mjs';\nimport { getRetryDecider } from '../../clients/middleware/retry/defaultRetryDecider.mjs';\nimport { parseJsonError } from '../../clients/serde/json.mjs';\nimport { getAmplifyUserAgent } from '../../Platform/index.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'mobiletargeting';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = ({ region }) => ({\n    url: new AmplifyUrl(`https://pinpoint.${region}.${getDnsSuffix(region)}`),\n});\n/**\n * @internal\n */\nconst defaultConfig = {\n    service: SERVICE_NAME,\n    endpointResolver,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n};\n/**\n * @internal\n */\nconst getSharedHeaders = () => ({\n    'content-type': 'application/json',\n});\n\nexport { defaultConfig, getSharedHeaders };\n//# sourceMappingURL=base.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nfunction jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { MAX_DELAY_MS };\n//# sourceMappingURL=constants.mjs.map\n","import { authenticatedHandler } from '../../clients/handlers/authenticated.mjs';\nimport { composeServiceApi } from '../../clients/internal/composeServiceApi.mjs';\nimport { extendedEncodeURIComponent } from '../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs';\nimport { parseMetadata } from '../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../clients/serde/json.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\nimport { defaultConfig, getSharedHeaders } from './base.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst updateEndpointSerializer = ({ ApplicationId = '', EndpointId = '', EndpointRequest }, endpoint) => {\n    const headers = getSharedHeaders();\n    const url = new AmplifyUrl(endpoint.url);\n    url.pathname = `v1/apps/${extendedEncodeURIComponent(ApplicationId)}/endpoints/${extendedEncodeURIComponent(EndpointId)}`;\n    const body = JSON.stringify(EndpointRequest);\n    return { method: 'PUT', headers, url, body };\n};\nconst updateEndpointDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const { Message, RequestID } = await parseJsonBody(response);\n        return {\n            MessageBody: {\n                Message,\n                RequestID,\n            },\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n/**\n * @internal\n */\nconst updateEndpoint = composeServiceApi(authenticatedHandler, updateEndpointSerializer, updateEndpointDeserializer, defaultConfig);\n\nexport { updateEndpoint };\n//# sourceMappingURL=updateEndpoint.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'pinpoint';\n/**\n * Returns a unique cache key for a particular category/appId combination.\n *\n * @internal\n */\nconst getCacheKey = (appId, category) => `${category}:${PROVIDER_NAME}:${appId}`;\n\nexport { getCacheKey };\n//# sourceMappingURL=getCacheKey.mjs.map\n","import { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createdEndpointIds = {};\n/**\n * Creates an endpoint id and guarantees multiple creations for a category returns the same uuid.\n *\n * @internal\n */\nconst createEndpointId = (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    if (!createdEndpointIds[cacheKey]) {\n        createdEndpointIds[cacheKey] = amplifyUuid();\n    }\n    return createdEndpointIds[cacheKey];\n};\n/**\n * Clears a created endpoint id for a category.\n *\n * @internal\n */\nconst clearCreatedEndpointId = (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    delete createdEndpointIds[cacheKey];\n};\n\nexport { clearCreatedEndpointId, createEndpointId };\n//# sourceMappingURL=createEndpointId.mjs.map\n","import { Cache } from '../../../Cache/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns an endpoint id from cache or `undefined` if not found.\n *\n * @internal\n */\nconst getEndpointId = async (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    const cachedEndpointId = await Cache.getItem(cacheKey);\n    return cachedEndpointId ?? undefined;\n};\n\nexport { getEndpointId };\n//# sourceMappingURL=getEndpointId.mjs.map\n","import { getClientInfo } from '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport '../../../types/errors.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../awsClients/pinpoint/base.mjs';\nimport '../../../awsClients/pinpoint/errorHelpers.mjs';\nimport { updateEndpoint as updateEndpoint$1 } from '../../../awsClients/pinpoint/updateEndpoint.mjs';\nimport { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport { cacheEndpointId } from '../utils/cacheEndpointId.mjs';\nimport { createEndpointId, clearCreatedEndpointId } from '../utils/createEndpointId.mjs';\nimport { getEndpointId } from '../utils/getEndpointId.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst updateEndpoint = async ({ address, appId, category, channelType, credentials, identityId, optOut, region, userAttributes, userId, userProfile, userAgentValue, }) => {\n    const endpointId = await getEndpointId(appId, category);\n    // only generate a new endpoint id if one was not found in cache\n    const createdEndpointId = !endpointId\n        ? createEndpointId(appId, category)\n        : undefined;\n    const { customProperties, demographic, email, location, metrics, name, plan, } = userProfile ?? {};\n    // only automatically populate the endpoint with client info and identity id upon endpoint creation to\n    // avoid overwriting the endpoint with these values every time the endpoint is updated\n    const demographicsFromClientInfo = {};\n    const resolvedUserId = createdEndpointId ? (userId ?? identityId) : userId;\n    if (createdEndpointId) {\n        const clientInfo = getClientInfo();\n        demographicsFromClientInfo.appVersion = clientInfo.appVersion;\n        demographicsFromClientInfo.make = clientInfo.make;\n        demographicsFromClientInfo.model = clientInfo.model;\n        demographicsFromClientInfo.modelVersion = clientInfo.version;\n        demographicsFromClientInfo.platform = clientInfo.platform;\n    }\n    const mergedDemographic = {\n        ...demographicsFromClientInfo,\n        ...demographic,\n    };\n    const attributes = {\n        ...(email && { email: [email] }),\n        ...(name && { name: [name] }),\n        ...(plan && { plan: [plan] }),\n        ...customProperties,\n    };\n    const shouldAddDemographics = createdEndpointId || demographic;\n    const shouldAddAttributes = email || customProperties || name || plan;\n    const shouldAddUser = resolvedUserId || userAttributes;\n    const input = {\n        ApplicationId: appId,\n        EndpointId: endpointId ?? createdEndpointId,\n        EndpointRequest: {\n            RequestId: amplifyUuid(),\n            EffectiveDate: new Date().toISOString(),\n            ChannelType: channelType,\n            Address: address,\n            ...(shouldAddAttributes && { Attributes: attributes }),\n            ...(shouldAddDemographics && {\n                Demographic: {\n                    AppVersion: mergedDemographic.appVersion,\n                    Locale: mergedDemographic.locale,\n                    Make: mergedDemographic.make,\n                    Model: mergedDemographic.model,\n                    ModelVersion: mergedDemographic.modelVersion,\n                    Platform: mergedDemographic.platform,\n                    PlatformVersion: mergedDemographic.platformVersion,\n                    Timezone: mergedDemographic.timezone,\n                },\n            }),\n            ...(location && {\n                Location: {\n                    City: location.city,\n                    Country: location.country,\n                    Latitude: location.latitude,\n                    Longitude: location.longitude,\n                    PostalCode: location.postalCode,\n                    Region: location.region,\n                },\n            }),\n            Metrics: metrics,\n            OptOut: optOut,\n            ...(shouldAddUser && {\n                User: {\n                    UserId: resolvedUserId,\n                    UserAttributes: userAttributes,\n                },\n            }),\n        },\n    };\n    try {\n        await updateEndpoint$1({ credentials, region, userAgentValue }, input);\n        // if we had to create an endpoint id, we need to now cache it\n        if (createdEndpointId) {\n            await cacheEndpointId(appId, category, createdEndpointId);\n        }\n    }\n    finally {\n        // at this point, we completely reset the behavior so even if the update was unsuccessful\n        // we can just start over with a newly created endpoint id\n        if (createdEndpointId) {\n            clearCreatedEndpointId(appId, category);\n        }\n    }\n};\n\nexport { updateEndpoint };\n//# sourceMappingURL=updateEndpoint.mjs.map\n","import { Cache } from '../../../Cache/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Writes an endpoint id to a long-lived cache.\n *\n * @internal\n */\nconst cacheEndpointId = async (appId, category, endpointId) => {\n    const cacheKey = getCacheKey(appId, category);\n    // Set a longer TTL to avoid endpoint id being deleted after the default TTL (3 days)\n    // Also set its priority to the highest to reduce its chance of being deleted when cache is full\n    const ttl = 1000 * 60 * 60 * 24 * 365 * 100; // 100 years\n    const expiration = new Date().getTime() + ttl;\n    return Cache.setItem(cacheKey, endpointId, {\n        expires: expiration,\n        priority: 1,\n    });\n};\n\nexport { cacheEndpointId };\n//# sourceMappingURL=cacheEndpointId.mjs.map\n","import { createAssertionFunction } from '../../errors/createAssertionFunction.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar PinpointValidationErrorCode;\n(function (PinpointValidationErrorCode) {\n    PinpointValidationErrorCode[\"NoAppId\"] = \"NoAppId\";\n})(PinpointValidationErrorCode || (PinpointValidationErrorCode = {}));\nconst pinpointValidationErrorMap = {\n    [PinpointValidationErrorCode.NoAppId]: {\n        message: 'Missing application id.',\n    },\n};\nconst assert = createAssertionFunction(pinpointValidationErrorMap);\n\nexport { PinpointValidationErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { authenticatedHandler } from '../../clients/handlers/authenticated.mjs';\nimport { composeServiceApi } from '../../clients/internal/composeServiceApi.mjs';\nimport { extendedEncodeURIComponent } from '../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs';\nimport { parseMetadata } from '../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../clients/serde/json.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\nimport { defaultConfig, getSharedHeaders } from './base.mjs';\nimport { assert, PinpointValidationErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst putEventsSerializer = ({ ApplicationId, EventsRequest }, endpoint) => {\n    assert(!!ApplicationId, PinpointValidationErrorCode.NoAppId);\n    const headers = getSharedHeaders();\n    const url = new AmplifyUrl(endpoint.url);\n    url.pathname = `v1/apps/${extendedEncodeURIComponent(ApplicationId)}/events`;\n    const body = JSON.stringify(EventsRequest ?? {});\n    return { method: 'POST', headers, url, body };\n};\nconst putEventsDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const { Results } = await parseJsonBody(response);\n        return {\n            EventsResponse: { Results },\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n/**\n * @internal\n */\nconst putEvents = composeServiceApi(authenticatedHandler, putEventsSerializer, putEventsDeserializer, defaultConfig);\n\nexport { putEvents };\n//# sourceMappingURL=putEvents.mjs.map\n","import { ConsoleLogger } from '../../../Logger/ConsoleLogger.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport '../../../types/errors.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../awsClients/pinpoint/base.mjs';\nimport { putEvents } from '../../../awsClients/pinpoint/putEvents.mjs';\nimport { isAppInForeground } from './isAppInForeground.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('PinpointEventBuffer');\nconst RETRYABLE_CODES = [429, 500];\nconst ACCEPTED_CODES = [202];\nclass PinpointEventBuffer {\n    constructor(config) {\n        this._interval = undefined;\n        this._pause = false;\n        this._flush = false;\n        this._buffer = [];\n        this._config = config;\n        this._sendBatch = this._sendBatch.bind(this);\n        this._startLoop();\n    }\n    push(event) {\n        if (this._buffer.length >= this._config.bufferSize) {\n            logger.debug('Exceeded Pinpoint event buffer limits, event dropped.', {\n                eventId: event.eventId,\n            });\n            return;\n        }\n        this._buffer.push({ [event.eventId]: event });\n    }\n    pause() {\n        this._pause = true;\n    }\n    resume() {\n        this._pause = false;\n    }\n    flush() {\n        this._flush = true;\n    }\n    identityHasChanged(identityId) {\n        return this._config.identityId !== identityId;\n    }\n    flushAll() {\n        this._putEvents(this._buffer.splice(0, this._buffer.length));\n    }\n    _startLoop() {\n        if (this._interval) {\n            clearInterval(this._interval);\n        }\n        const { flushInterval } = this._config;\n        this._interval = setInterval(this._sendBatch, flushInterval);\n    }\n    _sendBatch() {\n        const bufferLength = this._buffer.length;\n        if (this._flush && !bufferLength && this._interval) {\n            clearInterval(this._interval);\n        }\n        if (this._pause || !bufferLength || !isAppInForeground()) {\n            return;\n        }\n        const { flushSize } = this._config;\n        const batchSize = Math.min(flushSize, bufferLength);\n        const bufferSubset = this._buffer.splice(0, batchSize);\n        this._putEvents(bufferSubset);\n    }\n    async _putEvents(buffer) {\n        const eventMap = this._bufferToMap(buffer);\n        const batchEventParams = this._generateBatchEventParams(eventMap);\n        try {\n            const { credentials, region, userAgentValue } = this._config;\n            const data = await putEvents({\n                credentials,\n                region,\n                userAgentValue,\n            }, batchEventParams);\n            this._processPutEventsSuccessResponse(data, eventMap);\n        }\n        catch (err) {\n            this._handlePutEventsFailure(err, eventMap);\n        }\n    }\n    _generateBatchEventParams(eventMap) {\n        const batchItem = {};\n        Object.values(eventMap).forEach(item => {\n            const { event, timestamp, endpointId, eventId, session } = item;\n            const { name, attributes, metrics } = event;\n            batchItem[endpointId] = {\n                Endpoint: {\n                    ...batchItem[endpointId]?.Endpoint,\n                },\n                Events: {\n                    ...batchItem[endpointId]?.Events,\n                    [eventId]: {\n                        EventType: name,\n                        Timestamp: new Date(timestamp).toISOString(),\n                        Attributes: attributes,\n                        Metrics: metrics,\n                        Session: session,\n                    },\n                },\n            };\n        });\n        return {\n            ApplicationId: this._config.appId,\n            EventsRequest: {\n                BatchItem: batchItem,\n            },\n        };\n    }\n    _handlePutEventsFailure(err, eventMap) {\n        logger.debug('putEvents call to Pinpoint failed.', err);\n        const statusCode = err.$metadata && err.$metadata.httpStatusCode;\n        if (RETRYABLE_CODES.includes(statusCode)) {\n            const retryableEvents = Object.values(eventMap);\n            this._retry(retryableEvents);\n        }\n    }\n    _processPutEventsSuccessResponse(data, eventMap) {\n        const { Results = {} } = data.EventsResponse ?? {};\n        const retryableEvents = [];\n        Object.entries(Results).forEach(([_, endpointValues]) => {\n            const responses = endpointValues.EventsItemResponse ?? {};\n            Object.entries(responses).forEach(([eventId, eventValues]) => {\n                const eventObject = eventMap[eventId];\n                if (!eventObject) {\n                    return;\n                }\n                const { StatusCode, Message } = eventValues ?? {};\n                if (StatusCode && ACCEPTED_CODES.includes(StatusCode)) {\n                    return;\n                }\n                if (StatusCode && RETRYABLE_CODES.includes(StatusCode)) {\n                    retryableEvents.push(eventObject);\n                    return;\n                }\n                const { name } = eventObject.event;\n                logger.warn('Pinpoint event failed to send.', {\n                    eventId,\n                    name,\n                    message: Message,\n                });\n            });\n        });\n        if (retryableEvents.length) {\n            this._retry(retryableEvents);\n        }\n    }\n    _retry(retryableEvents) {\n        // retryable events that haven't reached the resendLimit\n        const eligibleEvents = [];\n        retryableEvents.forEach((bufferedEvent) => {\n            const { eventId } = bufferedEvent;\n            const { name } = bufferedEvent.event;\n            if (bufferedEvent.resendLimit-- > 0) {\n                logger.debug('Resending event.', {\n                    eventId,\n                    name,\n                    remainingAttempts: bufferedEvent.resendLimit,\n                });\n                eligibleEvents.push({ [eventId]: bufferedEvent });\n                return;\n            }\n            logger.debug('No retry attempts remaining for event.', {\n                eventId,\n                name,\n            });\n        });\n        // add the events to the front of the buffer\n        this._buffer.unshift(...eligibleEvents);\n    }\n    _bufferToMap(buffer) {\n        return buffer.reduce((acc, curVal) => {\n            const [[key, value]] = Object.entries(curVal);\n            acc[key] = value;\n            return acc;\n        }, {});\n    }\n}\n\nexport { PinpointEventBuffer };\n//# sourceMappingURL=PinpointEventBuffer.mjs.map\n","import { PinpointEventBuffer } from './PinpointEventBuffer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Map of buffers by region -> appId\nconst eventBufferMap = {};\n/**\n * Returns a PinpointEventBuffer instance for the specified region & app ID, creating one if it does not yet exist.\n *\n * @internal\n */\nconst getEventBuffer = ({ appId, region, credentials, bufferSize, flushInterval, flushSize, resendLimit, identityId, userAgentValue, }) => {\n    if (eventBufferMap[region]?.[appId]) {\n        const buffer = eventBufferMap[region][appId];\n        /*\n        If the identity has changed flush out the buffer and create a new instance. The old instance will be garbage\n        collected.\n        */\n        if (buffer.identityHasChanged(identityId)) {\n            buffer.flush();\n        }\n        else {\n            return buffer;\n        }\n    }\n    const buffer = new PinpointEventBuffer({\n        appId,\n        bufferSize,\n        credentials,\n        flushInterval,\n        flushSize,\n        identityId,\n        region,\n        resendLimit,\n        userAgentValue,\n    });\n    if (!eventBufferMap[region]) {\n        eventBufferMap[region] = {};\n    }\n    eventBufferMap[region][appId] = buffer;\n    return buffer;\n};\n\nexport { getEventBuffer };\n//# sourceMappingURL=getEventBuffer.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Standard session start & stop event names\nconst SESSION_START_EVENT = '_session.start';\nconst SESSION_STOP_EVENT = '_session.stop';\n\nexport { SESSION_START_EVENT, SESSION_STOP_EVENT };\n//# sourceMappingURL=constants.mjs.map\n","import { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport '../../../Cache/index.mjs';\nimport { resolveEndpointId } from '../utils/resolveEndpointId.mjs';\nimport '../../../utils/sessionListener/index.mjs';\nimport { BUFFER_SIZE, FLUSH_INTERVAL, FLUSH_SIZE, RESEND_LIMIT } from '../utils/constants.mjs';\nimport { getEventBuffer } from '../utils/getEventBuffer.mjs';\nimport { SESSION_STOP_EVENT, SESSION_START_EVENT } from '../../../utils/sessionListener/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nlet session;\n/**\n * @internal\n */\nconst record = async ({ appId, category, channelType, credentials, event, identityId, region, userAgentValue, bufferSize, flushInterval, flushSize, resendLimit, }) => {\n    let eventSession = session;\n    const currentTime = new Date();\n    const timestampISOString = currentTime.toISOString();\n    const eventId = amplifyUuid();\n    // Prepare event buffer if required\n    const buffer = getEventBuffer({\n        appId,\n        region,\n        credentials,\n        bufferSize: bufferSize ?? BUFFER_SIZE,\n        flushInterval: flushInterval ?? FLUSH_INTERVAL,\n        flushSize: flushSize ?? FLUSH_SIZE,\n        resendLimit: resendLimit ?? RESEND_LIMIT,\n        identityId,\n        userAgentValue,\n    });\n    const endpointId = await resolveEndpointId({\n        appId,\n        category,\n        channelType,\n        credentials,\n        identityId,\n        region,\n        userAgentValue,\n    });\n    // Generate session if required\n    if (!eventSession || event.name === SESSION_START_EVENT) {\n        const sessionId = amplifyUuid();\n        session = {\n            Id: sessionId,\n            StartTimestamp: timestampISOString,\n        };\n        eventSession = session;\n    }\n    // Terminate session when required\n    if (session && event.name === SESSION_STOP_EVENT) {\n        eventSession = {\n            ...session,\n            StopTimestamp: timestampISOString,\n            Duration: currentTime.getTime() - new Date(session.StartTimestamp).getTime(),\n        };\n        session = undefined;\n    }\n    // Push event to buffer\n    buffer.push({\n        eventId,\n        endpointId,\n        event,\n        session: eventSession,\n        timestamp: timestampISOString,\n        resendLimit: resendLimit ?? RESEND_LIMIT,\n    });\n};\n\nexport { record };\n//# sourceMappingURL=record.mjs.map\n","import { AmplifyError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass AnalyticsError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AnalyticsError;\n        Object.setPrototypeOf(this, AnalyticsError.prototype);\n    }\n}\n\nexport { AnalyticsError };\n//# sourceMappingURL=AnalyticsError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar AnalyticsValidationErrorCode;\n(function (AnalyticsValidationErrorCode) {\n    AnalyticsValidationErrorCode[\"NoAppId\"] = \"NoAppId\";\n    AnalyticsValidationErrorCode[\"NoCredentials\"] = \"NoCredentials\";\n    AnalyticsValidationErrorCode[\"NoEventName\"] = \"NoEventName\";\n    AnalyticsValidationErrorCode[\"NoRegion\"] = \"NoRegion\";\n    AnalyticsValidationErrorCode[\"InvalidTracker\"] = \"InvalidTracker\";\n    AnalyticsValidationErrorCode[\"UnsupportedPlatform\"] = \"UnsupportedPlatform\";\n    AnalyticsValidationErrorCode[\"NoTrackingId\"] = \"NoTrackingId\";\n    AnalyticsValidationErrorCode[\"InvalidFlushSize\"] = \"InvalidFlushSize\";\n})(AnalyticsValidationErrorCode || (AnalyticsValidationErrorCode = {}));\nconst validationErrorMap = {\n    [AnalyticsValidationErrorCode.NoAppId]: {\n        message: 'Missing application id.',\n    },\n    [AnalyticsValidationErrorCode.NoCredentials]: {\n        message: 'Credentials should not be empty.',\n    },\n    [AnalyticsValidationErrorCode.NoEventName]: {\n        message: 'Events must specify a name.',\n    },\n    [AnalyticsValidationErrorCode.NoRegion]: {\n        message: 'Missing region.',\n    },\n    [AnalyticsValidationErrorCode.InvalidTracker]: {\n        message: 'Invalid tracker type specified.',\n    },\n    [AnalyticsValidationErrorCode.UnsupportedPlatform]: {\n        message: 'Only session tracking is supported on React Native.',\n    },\n    [AnalyticsValidationErrorCode.InvalidFlushSize]: {\n        message: 'Invalid FlushSize, it should be smaller than BufferSize',\n    },\n    [AnalyticsValidationErrorCode.NoTrackingId]: {\n        message: 'A trackingId is required to use Amazon Personalize',\n    },\n};\n\nexport { AnalyticsValidationErrorCode, validationErrorMap };\n//# sourceMappingURL=validation.mjs.map\n","import { AnalyticsError } from './AnalyticsError.mjs';\nimport { validationErrorMap } from './validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction assertValidationError(assertion, name, message) {\n    const { message: defaultMessage, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new AnalyticsError({\n            name,\n            message: message ?? defaultMessage,\n            recoverySuggestion,\n        });\n    }\n}\n\nexport { assertValidationError };\n//# sourceMappingURL=assertValidationError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nlet analyticsEnabled = true;\nconst enableAnalytics = () => {\n    analyticsEnabled = true;\n};\nconst disableAnalytics = () => {\n    analyticsEnabled = false;\n};\n/**\n * Returns the current status of the Analytics category.\n */\nconst isAnalyticsEnabled = () => analyticsEnabled;\n\nexport { disableAnalytics, enableAnalytics, isAnalyticsEnabled };\n//# sourceMappingURL=statusHelpers.mjs.map\n","import { getAmplifyUserAgentObject, Category, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction getAnalyticsUserAgent(action) {\n    return getAmplifyUserAgentObject({\n        category: Category.Analytics,\n        action,\n    });\n}\nfunction getAnalyticsUserAgentString(action) {\n    return getAmplifyUserAgent({\n        category: Category.Analytics,\n        action,\n    });\n}\n\nexport { getAnalyticsUserAgent, getAnalyticsUserAgentString };\n//# sourceMappingURL=userAgent.mjs.map\n","import { Amplify } from '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../../../errors/assertValidationError.mjs';\nimport { AnalyticsValidationErrorCode } from '../../../errors/validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst resolveConfig = () => {\n    const { appId, region, bufferSize, flushSize, flushInterval, resendLimit } = Amplify.getConfig().Analytics?.Pinpoint ?? {};\n    assertValidationError(!!appId, AnalyticsValidationErrorCode.NoAppId);\n    assertValidationError(!!region, AnalyticsValidationErrorCode.NoRegion);\n    return { appId, region, bufferSize, flushSize, flushInterval, resendLimit };\n};\n\nexport { resolveConfig };\n//# sourceMappingURL=resolveConfig.mjs.map\n","import { fetchAuthSession } from '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../../../errors/assertValidationError.mjs';\nimport { AnalyticsValidationErrorCode } from '../../../errors/validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst resolveCredentials = async () => {\n    const { credentials, identityId } = await fetchAuthSession();\n    assertValidationError(!!credentials, AnalyticsValidationErrorCode.NoCredentials);\n    return { credentials, identityId };\n};\n\nexport { resolveCredentials };\n//# sourceMappingURL=resolveCredentials.mjs.map\n","import { ConsoleLogger, Hub } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL, AnalyticsAction } from '@aws-amplify/core/internals/utils';\nimport { record as record$1 } from '@aws-amplify/core/internals/providers/pinpoint';\nimport { assertValidationError } from '../../../errors/assertValidationError.mjs';\nimport { AnalyticsValidationErrorCode } from '../../../errors/validation.mjs';\nimport '../../../utils/eventBuffer/EventBuffer.mjs';\nimport { isAnalyticsEnabled } from '../../../utils/statusHelpers.mjs';\nimport { getAnalyticsUserAgentString } from '../../../utils/userAgent.mjs';\nimport '../../../trackers/EventTracker.mjs';\nimport '../../../trackers/PageViewTracker.mjs';\nimport '../../../trackers/SessionTracker.mjs';\nimport { resolveConfig } from '../utils/resolveConfig.mjs';\nimport { resolveCredentials } from '../utils/resolveCredentials.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('Analytics');\n/**\n * Records an Analytic event to Pinpoint. Events will be buffered and periodically sent to Pinpoint.\n *\n * @param params The input object used to construct the request.\n *\n * @throws validation: {@link AnalyticsValidationErrorCode} - Thrown when the provided parameters or library\n *  configuration is incorrect.\n *\n * @example\n * ```ts\n * // Send an event to Pinpoint\n * record({ name: eventName })\n * ```\n *\n * @example\n * ```ts\n * // Send an event to Pinpoint with metrics & custom attributes\n * record({\n *     name: eventName,\n *     attributes: {\n *         'my-attribute': attributeValue\n *     },\n *     metrics: {\n *         'my-metric': metricValue\n *     }\n * })\n * ```\n */\nconst record = (input) => {\n    const { appId, region, bufferSize, flushSize, flushInterval, resendLimit } = resolveConfig();\n    if (!isAnalyticsEnabled()) {\n        logger.debug('Analytics is disabled, event will not be recorded.');\n        return;\n    }\n    assertValidationError(!!input.name, AnalyticsValidationErrorCode.NoEventName);\n    resolveCredentials()\n        .then(({ credentials, identityId }) => {\n        Hub.dispatch('analytics', { event: 'record', data: input, message: 'Recording Analytics event' }, 'Analytics', AMPLIFY_SYMBOL);\n        record$1({\n            appId,\n            category: 'Analytics',\n            credentials,\n            event: input,\n            identityId,\n            region,\n            userAgentValue: getAnalyticsUserAgentString(AnalyticsAction.Record),\n            bufferSize,\n            flushSize,\n            flushInterval,\n            resendLimit,\n        });\n    })\n        .catch(e => {\n        // An error occured while fetching credentials or persisting the event to the buffer\n        logger.warn('Failed to record event.', e);\n    });\n};\n\nexport { record };\n//# sourceMappingURL=record.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Default buffer constants\nconst BUFFER_SIZE = 1000;\nconst FLUSH_SIZE = 100;\nconst FLUSH_INTERVAL = 5 * 1000; // 5s\nconst RESEND_LIMIT = 5;\n\nexport { BUFFER_SIZE, FLUSH_INTERVAL, FLUSH_SIZE, RESEND_LIMIT };\n//# sourceMappingURL=constants.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { assert } from '../../../errors/errorHelpers.mjs';\nimport { updateEndpoint } from '../apis/updateEndpoint.mjs';\nimport { getEndpointId } from './getEndpointId.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Resolves an endpoint id from cache or prepare via updateEndpoint if one does not already exist,\n * which will generate and cache an endpoint id between calls.\n *\n * @internal\n */\nconst resolveEndpointId = async ({ address, appId, category, channelType, credentials, identityId, region, userAgentValue, }) => {\n    let endpointId = await getEndpointId(appId, category);\n    if (!endpointId) {\n        await updateEndpoint({\n            address,\n            appId,\n            category,\n            channelType,\n            credentials,\n            identityId,\n            region,\n            userAgentValue,\n        });\n        endpointId = await getEndpointId(appId, category);\n    }\n    assert(!!endpointId, AmplifyErrorCode.NoEndpointId);\n    return endpointId;\n};\n\nexport { resolveEndpointId };\n//# sourceMappingURL=resolveEndpointId.mjs.map\n","import { AnalyticsAction } from '@aws-amplify/core/internals/utils';\nimport { updateEndpoint } from '@aws-amplify/core/internals/providers/pinpoint';\nimport '@aws-amplify/core';\nimport '../../../errors/validation.mjs';\nimport '../../../utils/eventBuffer/EventBuffer.mjs';\nimport { getAnalyticsUserAgentString } from '../../../utils/userAgent.mjs';\nimport '../../../trackers/EventTracker.mjs';\nimport '../../../trackers/PageViewTracker.mjs';\nimport '../../../trackers/SessionTracker.mjs';\nimport { resolveConfig } from '../utils/resolveConfig.mjs';\nimport { resolveCredentials } from '../utils/resolveCredentials.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Sends information about a user to Pinpoint. Sending user information allows you to associate a user to their user\n * profile and activities or actions in your application. Activity can be tracked across devices & platforms by using\n * the same `userId`.\n *\n * @param {IdentifyUserInput} params The input object used to construct requests sent to Pinpoint's UpdateEndpoint\n *  API.\n *\n * @throws service: {@link UpdateEndpointException} - Thrown when the underlying Pinpoint service returns an error.\n * @throws validation: {@link AnalyticsValidationErrorCode} - Thrown when the provided parameters or library\n *  configuration is incorrect.\n *\n * @returns A promise that will resolve when the operation is complete.\n *\n * @example\n * ```ts\n * // Identify a user with Pinpoint\n * await identifyUser({\n *     userId,\n *     userProfile: {\n *         email: 'userEmail@example.com'\n *         customProperties: {\n *             phoneNumber: ['555-555-5555'],\n *         },\n *     }\n * });\n * ```\n *\n * @example\n * ```ts\n * // Identify a user with Pinpoint with some additional demographics\n * await identifyUser({\n *     userId,\n *     userProfile: {\n *         email: 'userEmail@example.com'\n *         customProperties: {\n *             phoneNumber: ['555-555-5555'],\n *         },\n *         demographic: {\n *             platform: 'ios',\n *             timezone: 'America/Los_Angeles'\n *         }\n *     }\n * });\n */\nconst identifyUser = async ({ userId, userProfile, options, }) => {\n    const { credentials, identityId } = await resolveCredentials();\n    const { appId, region } = resolveConfig();\n    const { userAttributes } = options ?? {};\n    await updateEndpoint({\n        appId,\n        category: 'Analytics',\n        credentials,\n        identityId,\n        region,\n        userAttributes,\n        userId,\n        userProfile,\n        userAgentValue: getAnalyticsUserAgentString(AnalyticsAction.IdentifyUser),\n    });\n};\n\nexport { identifyUser };\n//# sourceMappingURL=identifyUser.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isBrowser = () => typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nexport { isBrowser };\n//# sourceMappingURL=isBrowser.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\nimport { isBrowser } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_EVENTS = ['click'];\nconst DEFAULT_SELECTOR_PREFIX = 'data-amplify-analytics-';\nconst DEFAULT_EVENT_NAME = 'event'; // Default event name as sent to the analytics provider\nconst logger = new ConsoleLogger('EventTracker');\nclass EventTracker {\n    constructor(eventRecorder, options) {\n        this.options = {};\n        this.trackerActive = false;\n        this.eventRecorder = eventRecorder;\n        this.handleDocEvent = this.handleDocEvent.bind(this);\n        this.configure(eventRecorder, options);\n    }\n    configure(eventRecorder, options) {\n        this.eventRecorder = eventRecorder;\n        // Clean up any existing listeners\n        this.cleanup();\n        // Apply defaults\n        this.options = {\n            attributes: options?.attributes ?? undefined,\n            events: options?.events ?? DEFAULT_EVENTS,\n            selectorPrefix: options?.selectorPrefix ?? DEFAULT_SELECTOR_PREFIX,\n        };\n        // Register event listeners\n        if (isBrowser()) {\n            this.options.events?.forEach(targetEvent => {\n                document.addEventListener(targetEvent, this.handleDocEvent, {\n                    capture: true,\n                });\n            });\n            this.trackerActive = true;\n        }\n    }\n    cleanup() {\n        // No-op if document listener is not active\n        if (!this.trackerActive) {\n            return;\n        }\n        // Clean up event listeners\n        this.options.events?.forEach(targetEvent => {\n            document.removeEventListener(targetEvent, this.handleDocEvent, {\n                capture: true,\n            });\n        });\n    }\n    handleDocEvent(event) {\n        /**\n         * Example DOM element:\n         *\n         * ```\n         * <button\n         *   data-amplify-analytics-on=\"click\"\n         *   data-amplify-analytics-name=\"click\"\n         *   data-amplify-analytics-attrs=\"attr1:attr1_value,attr2:attr2_value\"\n         * />\n         * ```\n         */\n        const triggerSelector = `[${this.options.selectorPrefix}on]`;\n        const attrSelector = `${this.options.selectorPrefix}attrs`;\n        const eventNameSelector = `${this.options.selectorPrefix}name`;\n        const eventSource = event.target;\n        // Validate that the triggering event type is being tracked\n        if (!this.options.events?.includes(event.type)) {\n            return;\n        }\n        if (eventSource instanceof HTMLElement) {\n            const target = eventSource.closest(triggerSelector);\n            if (target) {\n                // Parse event name from the element\n                const eventName = target.getAttribute(eventNameSelector) || DEFAULT_EVENT_NAME;\n                // Parse attributes from the element\n                const elementAttributes = {};\n                const rawElementAttributes = target.getAttribute(attrSelector);\n                rawElementAttributes?.split(/\\s*,\\s*/).forEach(attr => {\n                    const tmp = attr.trim().split(/\\s*:\\s*/);\n                    elementAttributes[tmp[0]] = tmp[1];\n                });\n                // Assemble final list of attributes\n                const attributes = Object.assign({\n                    type: event.type,\n                    target: `${target.localName} with id ${target.id}`,\n                }, this.options.attributes, elementAttributes);\n                logger.debug('Recording automatically tracked DOM event', {\n                    eventName,\n                    attributes,\n                });\n                this.eventRecorder(eventName, attributes);\n            }\n        }\n    }\n}\n\nexport { EventTracker };\n//# sourceMappingURL=EventTracker.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\nimport { isBrowser } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('PageViewTracker');\nconst DEFAULT_EVENT_NAME = 'pageView';\nconst DEFAULT_APP_TYPE = 'singlePage';\nconst DEFAULT_URL_PROVIDER = () => {\n    return window.location.origin + window.location.pathname;\n};\nconst PREV_URL_STORAGE_KEY = 'aws-amplify-analytics-prevUrl';\nclass PageViewTracker {\n    constructor(eventRecorder, options) {\n        this.options = {};\n        this.trackerActive = true;\n        this.eventRecorder = eventRecorder;\n        this.spaTrackingActive = false;\n        this.handleLocationChange = this.handleLocationChange.bind(this);\n        this.configure(eventRecorder, options);\n    }\n    configure(eventRecorder, options) {\n        this.eventRecorder = eventRecorder;\n        // Clean up any existing listeners\n        this.cleanup();\n        // Apply defaults\n        this.options = {\n            appType: options?.appType ?? DEFAULT_APP_TYPE,\n            attributes: options?.attributes ?? undefined,\n            eventName: this.options?.eventName ?? DEFAULT_EVENT_NAME,\n            urlProvider: this.options?.urlProvider ?? DEFAULT_URL_PROVIDER,\n        };\n        // Configure SPA or MPA page view tracking\n        if (isBrowser()) {\n            if (this.options.appType === 'singlePage') {\n                this.setupSPATracking();\n            }\n            else {\n                this.setupMPATracking();\n            }\n            this.trackerActive = true;\n        }\n    }\n    cleanup() {\n        // No-op if document listener is not active\n        if (!this.trackerActive) {\n            return;\n        }\n        // Clean up SPA page view listeners\n        if (this.spaTrackingActive) {\n            window.history.pushState = this.originalPushState;\n            window.history.replaceState = this.originalReplaceState;\n            this.pushStateProxy?.revoke();\n            this.replaceStateProxy?.revoke();\n            window.removeEventListener('popstate', this.handleLocationChange);\n            this.spaTrackingActive = false;\n        }\n    }\n    setupSPATracking() {\n        if (!this.spaTrackingActive) {\n            // Configure proxies on History APIs\n            this.pushStateProxy = Proxy.revocable(window.history.pushState, {\n                apply: (target, thisArg, args) => {\n                    target.apply(thisArg, args);\n                    this.handleLocationChange();\n                },\n            });\n            this.replaceStateProxy = Proxy.revocable(window.history.replaceState, {\n                apply: (target, thisArg, args) => {\n                    target.apply(thisArg, args);\n                    this.handleLocationChange();\n                },\n            });\n            this.originalPushState = window.history.pushState;\n            this.originalReplaceState = window.history.replaceState;\n            window.history.pushState = this.pushStateProxy.proxy;\n            window.history.replaceState = this.replaceStateProxy.proxy;\n            window.addEventListener('popstate', this.handleLocationChange);\n            sessionStorage.removeItem(PREV_URL_STORAGE_KEY);\n            this.spaTrackingActive = true;\n        }\n    }\n    setupMPATracking() {\n        this.handleLocationChange();\n    }\n    handleLocationChange() {\n        const currentUrl = this.options.urlProvider();\n        const eventName = this.options.eventName || DEFAULT_EVENT_NAME;\n        if (this.urlHasChanged()) {\n            sessionStorage.setItem(PREV_URL_STORAGE_KEY, currentUrl);\n            // Assemble attribute list\n            const attributes = Object.assign({\n                url: currentUrl,\n            }, this.options.attributes);\n            logger.debug('Recording automatically tracked page view event', {\n                eventName,\n                attributes,\n            });\n            this.eventRecorder(eventName, attributes);\n        }\n    }\n    urlHasChanged() {\n        const prevUrl = sessionStorage.getItem(PREV_URL_STORAGE_KEY);\n        const currUrl = this.options.urlProvider();\n        return currUrl !== prevUrl;\n    }\n}\n\nexport { PageViewTracker };\n//# sourceMappingURL=PageViewTracker.mjs.map\n","import { isBrowser } from '../isBrowser.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst stateChangeListeners = new Set();\nclass SessionListener {\n    constructor() {\n        this.listenerActive = false;\n        this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n        // Setup state listeners\n        if (isBrowser()) {\n            document.addEventListener('visibilitychange', this.handleVisibilityChange, false);\n            this.listenerActive = true;\n        }\n    }\n    addStateChangeListener(listener, notifyOnAdd = false) {\n        // No-op if document listener is not active\n        if (!this.listenerActive) {\n            return;\n        }\n        stateChangeListeners.add(listener);\n        // Notify new handlers of the current status on add\n        if (notifyOnAdd) {\n            listener(this.getSessionState());\n        }\n    }\n    removeStateChangeListener(handler) {\n        // No-op if document listener is not active\n        if (!this.listenerActive) {\n            return;\n        }\n        stateChangeListeners.delete(handler);\n    }\n    handleVisibilityChange() {\n        this.notifyHandlers();\n    }\n    notifyHandlers() {\n        const sessionState = this.getSessionState();\n        stateChangeListeners.forEach(listener => {\n            listener(sessionState);\n        });\n    }\n    getSessionState() {\n        if (isBrowser() && document.visibilityState !== 'hidden') {\n            return 'started';\n        }\n        // If, for any reason, document is undefined the session will never start\n        return 'ended';\n    }\n}\n\nexport { SessionListener };\n//# sourceMappingURL=SessionListener.mjs.map\n","import { SessionListener } from './SessionListener.mjs';\nexport { SESSION_START_EVENT, SESSION_STOP_EVENT } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst sessionListener = new SessionListener();\n\nexport { sessionListener };\n//# sourceMappingURL=index.mjs.map\n","import { sessionListener, SESSION_START_EVENT, SESSION_STOP_EVENT } from '@aws-amplify/core/internals/utils';\nimport { ConsoleLogger } from '@aws-amplify/core';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('SessionTracker');\nclass SessionTracker {\n    constructor(eventRecorder, options) {\n        this.options = {};\n        this.eventRecorder = eventRecorder;\n        this.sessionTrackingActive = false;\n        this.initialEventSent = false;\n        this.handleStateChange = this.handleStateChange.bind(this);\n        this.configure(eventRecorder, options);\n    }\n    configure(eventRecorder, options) {\n        this.eventRecorder = eventRecorder;\n        // Clean up any existing listeners\n        this.cleanup();\n        // Apply defaults\n        this.options = {\n            attributes: options?.attributes ?? {},\n        };\n        // Setup state listeners\n        if (!this.sessionTrackingActive) {\n            sessionListener.addStateChangeListener(this.handleStateChange, !this.initialEventSent);\n            this.sessionTrackingActive = true;\n        }\n    }\n    cleanup() {\n        if (this.sessionTrackingActive) {\n            sessionListener.removeStateChangeListener(this.handleStateChange);\n        }\n        this.sessionTrackingActive = false;\n    }\n    handleStateChange(state) {\n        if (state === 'started') {\n            this.sessionStarted();\n        }\n        else {\n            this.sessionStopped();\n        }\n    }\n    sessionStarted() {\n        const attributes = this.options.attributes ?? {};\n        logger.debug('Recording automatically tracked page view event', {\n            SESSION_START_EVENT,\n            attributes,\n        });\n        this.eventRecorder(SESSION_START_EVENT, attributes);\n        // NOTE: The initial event will not be re-sent on re-configuration (e.g. to add additional custom attributes)\n        if (!this.initialEventSent) {\n            this.initialEventSent = true;\n        }\n    }\n    sessionStopped() {\n        const attributes = this.options.attributes ?? {};\n        logger.debug('Recording automatically tracked page view event', {\n            SESSION_STOP_EVENT,\n            attributes,\n        });\n        this.eventRecorder(SESSION_STOP_EVENT, attributes);\n    }\n}\n\nexport { SessionTracker };\n//# sourceMappingURL=SessionTracker.mjs.map\n","import { EventTracker } from '../trackers/EventTracker.mjs';\nimport { PageViewTracker } from '../trackers/PageViewTracker.mjs';\nimport { SessionTracker } from '../trackers/SessionTracker.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Updates a provider's trackers as appropriate for the provided auto-track configuration.\n *\n * @remark\n * This utility will mutate the provider's configured trackers via `providerTrackers`.\n */\nconst updateProviderTrackers = (input, providerEventRecorder, providerTrackers) => {\n    let trackerInstance;\n    const trackerType = input.type;\n    const currentTracker = providerTrackers[trackerType];\n    // Check if the tracker was disabled & should be cleaned up\n    if (!input.enable) {\n        if (currentTracker) {\n            currentTracker.cleanup();\n            delete providerTrackers[trackerType];\n        }\n        return;\n    }\n    // Re-configure the existing tracker, or create & configure an instance if it doesn't exist yet\n    if (currentTracker) {\n        currentTracker.configure(providerEventRecorder, input.options);\n        return;\n    }\n    // Create a new tracker instance for the type\n    if (trackerType === 'event') {\n        trackerInstance = new EventTracker(providerEventRecorder, input.options);\n    }\n    else if (trackerType === 'pageView') {\n        trackerInstance = new PageViewTracker(providerEventRecorder, input.options);\n    }\n    else if (trackerType === 'session') {\n        trackerInstance = new SessionTracker(providerEventRecorder, input.options);\n    }\n    if (trackerInstance) {\n        providerTrackers[trackerType] = trackerInstance;\n    }\n};\n\nexport { updateProviderTrackers };\n//# sourceMappingURL=trackerHelpers.mjs.map\n","import '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport '../../../errors/validation.mjs';\nimport '../../../utils/eventBuffer/EventBuffer.mjs';\nimport { updateProviderTrackers } from '../../../utils/trackerHelpers.mjs';\nimport { validateTrackerConfiguration } from '../../../utils/trackerConfigHelpers.mjs';\nimport { record } from './record.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Configured Tracker instances for Pinpoint\nconst configuredTrackers = {};\n// Callback that will emit an appropriate event to Pinpoint when required by the Tracker\nconst emitTrackingEvent = (eventName, attributes) => {\n    record({\n        name: eventName,\n        attributes,\n    });\n};\n/**\n * Configures automatic event tracking for Pinpoint. This API will automatically transmit an analytic event when\n * configured events are detected within your application. This can include: DOM element events (via the `event`\n * tracker), session events (via the `session` tracker), and page view events (via the `pageView` tracker).\n *\n * @remark Only session tracking is currently supported on React Native.\n *\n * @param {ConfigureAutoTrackInput} params The input object to configure auto track behavior.\n *\n * @throws service: {@link UpdateEndpointException} - Thrown when the underlying Pinpoint service returns an error.\n * @throws validation: {@link AnalyticsValidationErrorCode} - Thrown when the provided parameters or library\n *  configuration is incorrect.\n */\nconst configureAutoTrack = (input) => {\n    validateTrackerConfiguration(input);\n    // Initialize or update this provider's trackers\n    updateProviderTrackers(input, emitTrackingEvent, configuredTrackers);\n};\n\nexport { configureAutoTrack };\n//# sourceMappingURL=configureAutoTrack.mjs.map\n","import '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../errors/assertValidationError.mjs';\nimport { AnalyticsValidationErrorCode } from '../errors/validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Validates tracker configuration.\n */\nconst validateTrackerConfiguration = (input) => {\n    assertValidationError(input.type === 'event' ||\n        input.type === 'pageView' ||\n        input.type === 'session', AnalyticsValidationErrorCode.InvalidTracker);\n};\n\nexport { validateTrackerConfiguration };\n//# sourceMappingURL=trackerConfigHelpers.mjs.map\n","import { flushEvents as flushEvents$1 } from '@aws-amplify/core/internals/providers/pinpoint';\nimport { AnalyticsAction } from '@aws-amplify/core/internals/utils';\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { resolveConfig } from '../utils/resolveConfig.mjs';\nimport { resolveCredentials } from '../utils/resolveCredentials.mjs';\nimport '../../../errors/validation.mjs';\nimport '../../../utils/eventBuffer/EventBuffer.mjs';\nimport { getAnalyticsUserAgentString } from '../../../utils/userAgent.mjs';\nimport '../../../trackers/EventTracker.mjs';\nimport '../../../trackers/PageViewTracker.mjs';\nimport '../../../trackers/SessionTracker.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('Analytics');\n/**\n * Flushes all buffered Pinpoint events to the service.\n *\n * @note\n * This API will make a best-effort attempt to flush events from the buffer. Events recorded immediately after invoking\n * this API may not be included in the flush.\n */\nconst flushEvents = () => {\n    const { appId, region, bufferSize, flushSize, flushInterval, resendLimit } = resolveConfig();\n    resolveCredentials()\n        .then(({ credentials, identityId }) => {\n        flushEvents$1({\n            appId,\n            region,\n            credentials,\n            identityId,\n            bufferSize,\n            flushSize,\n            flushInterval,\n            resendLimit,\n            userAgentValue: getAnalyticsUserAgentString(AnalyticsAction.Record),\n        });\n    })\n        .catch(e => {\n        logger.warn('Failed to flush events', e);\n    });\n};\n\nexport { flushEvents };\n//# sourceMappingURL=flushEvents.mjs.map\n","import { getEventBuffer } from '../utils/getEventBuffer.mjs';\nimport { BUFFER_SIZE, FLUSH_INTERVAL, FLUSH_SIZE, RESEND_LIMIT } from '../utils/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst flushEvents = ({ appId, region, credentials, bufferSize, flushInterval, flushSize, resendLimit, identityId, userAgentValue, }) => {\n    getEventBuffer({\n        appId,\n        region,\n        credentials,\n        bufferSize: bufferSize ?? BUFFER_SIZE,\n        flushInterval: flushInterval ?? FLUSH_INTERVAL,\n        flushSize: flushSize ?? FLUSH_SIZE,\n        resendLimit: resendLimit ?? RESEND_LIMIT,\n        identityId,\n        userAgentValue,\n    }).flushAll();\n};\n\nexport { flushEvents };\n//# sourceMappingURL=flushEvents.mjs.map\n","import '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport '../errors/validation.mjs';\nimport '../utils/eventBuffer/EventBuffer.mjs';\nimport { enableAnalytics } from '../utils/statusHelpers.mjs';\nimport '../trackers/EventTracker.mjs';\nimport '../trackers/PageViewTracker.mjs';\nimport '../trackers/SessionTracker.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Enables the Analytics category to permit the transmission of events.\n *\n * @note\n * Analytics is enabled by default. You do not need to call this API unless you have disabled Analytics.\n */\nconst enable = enableAnalytics;\n\nexport { enable };\n//# sourceMappingURL=enable.mjs.map\n","import '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport '../errors/validation.mjs';\nimport '../utils/eventBuffer/EventBuffer.mjs';\nimport { disableAnalytics } from '../utils/statusHelpers.mjs';\nimport '../trackers/EventTracker.mjs';\nimport '../trackers/PageViewTracker.mjs';\nimport '../trackers/SessionTracker.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Disables the Analytics category.\n *\n * @note\n * When Analytics is disabled events will not be buffered or transmitted to your selected service. Any auto-tracking\n * behavior that you have configured via `configureAutoTrack` will not have any effect while Analytics is disabled.\n */\nconst disable = disableAnalytics;\n\nexport { disable };\n//# sourceMappingURL=disable.mjs.map\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__556__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","LogType","LOG_LEVELS","VERBOSE","DEBUG","INFO","WARN","ERROR","NONE","ConsoleLogger","constructor","name","level","_pluggables","_padding","n","_ts","dt","Date","getMinutes","getSeconds","join","getMilliseconds","configure","config","_config","_log","type","msg","loggerLevelName","LOG_LEVEL","window","log","console","bind","error","warn","BIND_ALL_LOG_LEVELS","info","debug","prefix","message","length","slice","plugin","logEvent","timestamp","now","pushLogs","verbose","addPluggable","pluggable","getCategoryName","push","listPluggables","AmplifyError","Error","recoverySuggestion","underlyingError","super","setPrototypeOf","AMPLIFY_SYMBOL","logger","HubClass","listeners","Map","protectedChannels","_remove","channel","listener","holder","set","filter","callback","dispatch","payload","source","ampSymbol","indexOf","capsule","patternInfo","_toListeners","e","listen","listenerName","cb","forEach","Framework","AiAction","AnalyticsAction","ApiAction","AuthAction","DataStoreAction","GeoAction","InAppMessagingAction","InteractionsAction","PredictionsAction","PubSubAction","PushNotificationAction","StorageAction","Category","randomUUID","crypto","getRandomValues","rnds8","Uint8Array","rng","byteToHex","i","toString","amplifyUuid","options","buf","offset","rnds","random","arr","unsafeStringify","AmplifyErrorCode","PlatformNotSupportedError","PlatformNotSupported","KeyValueStorage","storage","setItem","getItem","removeItem","clear","size","index","Array","from","keys","delete","defaultConfig","keyPrefix","capacityInBytes","itemMaxSize","defaultTTL","defaultPriority","warningThreshold","currentSizeKey","getByteLength","str","ret","charCode","charCodeAt","getCurrentTime","getTime","getCurrentSizeKey","createAssertionFunction","errorMap","AssertionError","assertion","additionalContext","CacheErrorCode","assert","NoCacheItem","NullNextNode","NullPreviousNode","StorageCacheCommon","keyValueStorage","sanitizeConfig","getModuleName","getCurrentCacheSize","getStorage","Number","cacheItemOptions","priority","expires","prefixedKey","item","fillCacheItem","byteSize","val","removeCacheItem","JSON","parse","isCacheFull","validKeys","clearInvalidAndGetRemainingKeys","sizeToPop","popOutItems","setCacheItem","cached","isExpired","updateVisitedTime","data","getAllKeys","getAllCacheKeys","text","itemSize","decreaseCurrentSizeInBytes","removeItemError","increaseCurrentSizeInBytes","visitedTime","stringify","amount","setItemErr","spaceItemNeed","cacheThresholdSpace","items","remainedSize","sort","a","b","remainingKeys","omitSizeKey","StorageCache","localStorage","getLocalStorageWithFallback","startsWith","substring","createInstance","Cache","NoEndpointId","Unknown","NetworkError","create","SuppressedError","BLOCK_SIZE","KEY","Uint32Array","INIT","MAX_HASHABLE_LENGTH","Math","pow","RawSha256","state","Int32Array","temp","buffer","bufferLength","bytesHashed","finished","update","position","byteLength","hashBuffer","digest","bitsHashed","bufferView","DataView","byteOffset","undecoratedLength","setUint8","setUint32","floor","out","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","t2","Buffer","input","TextEncoder","encode","convertToBuffer","ArrayBuffer","isView","BYTES_PER_ELEMENT","Sha256","secret","hash","reset","toHash","digestSync","outer","thisArg","_arguments","generator","body","f","y","t","_","label","sent","trys","ops","g","Iterator","next","verb","iterator","v","op","TypeError","done","pop","step","__generator","_a","P","Promise","resolve","reject","fulfilled","rejected","result","then","apply","inner","bufferHash","bufferFromSecret","SHORT_TO_HEX","HEX_TO_SHORT","encodedByte","toLowerCase","cancellableSleep","timeoutMs","abortSignal","aborted","timeoutId","sleepPromiseResolveFn","sleepPromise","setTimeout","addEventListener","cancelSleep","clearTimeout","removeEventListener","addOrIncrementMetadataAttempts","nextHandlerOutput","attempts","$metadata","getSignedHeaders","headers","map","AMZ_DATE_HEADER","TOKEN_HEADER","KEY_TYPE_IDENTIFIER","SHA256_ALGORITHM_IDENTIFIER","getHashedData","sha256","getHashedDataAsHex","bytes","toHex","getCanonicalHeaders","entries","trim","replace","entry","escapeUri","uri","encodeURIComponent","hexEncode","c","toUpperCase","getCanonicalUri","pathname","uriEscapePath","getHashedPayload","isSourceData","isArrayBuffer","arg","getSkewCorrectedDate","systemClockOffset","withMemoization","payloadAccessor","shouldSendBody","method","includes","authenticatedHandler","coreHandler","async","url","cache","withCrossDomainCredentials","resp","fetch","signal","credentials","responseHeaders","statusCode","status","assign","blob","json","middleware","userAgentHeader","userAgentValue","request","headerName","maxAttempts","retryDecider","computeDelay","context","response","attemptsCount","handleTerminalErrorOrResponse","isCredentialsExpiredError","retryable","isCredentialsExpired","delay","region","service","currentSystemClockOffset","signRequestOptions","forceRefresh","signingDate","signingRegion","signingService","signedRequest","signingValues","accessKeyId","secretAccessKey","sessionToken","longDate","shortDate","date","toISOString","getFormattedDates","credentialScope","getSigningValues","host","requestToSign","signature","canonicalRequest","searchParams","keyA","valA","keyB","valB","getCanonicalRequest","stringToSign","hashedRequest","getStringToSign","dateKey","regionKey","serviceKey","getSigningKey","getSignature","credentialEntry","signedHeadersEntry","signatureEntry","signRequest","dateString","getDateHeader","clockTimeInMilliseconds","clockOffsetInMilliseconds","abs","isClockSkewed","getUpdatedSystemClockOffset","composedHandler","composeHandlerRequest","m","resolvedMiddleware","composeServiceApi","transferHandler","serializer","deserializer","resolvedConfig","endpoint","endpointResolver","extendedEncodeURIComponent","parseMetadata","isMetadataBearer","httpStatusCode","requestId","extendedRequestId","cfId","parseJsonError","parseJsonBody","code","rawValue","cleanValue","split","sanitizeErrorCode","__type","Message","output","AmplifyUrl","URL","defaultPartition","id","outputs","dnsSuffix","regionRegex","regions","partitionsInfo","partitions","getDnsSuffix","regex","RegExp","test","DEFAULT_MAX_DELAY_MS","CLOCK_SKEW_ERROR_CODES","THROTTLING_ERROR_CODES","TIMEOUT_ERROR_CODES","isThrottlingError","errorCode","isConnectionError","isServerSideError","version","globalExists","global","windowExists","documentExists","document","processExists","process","keyPrefixMatch","object","find","detectionMap","platform","Expo","detectionMethod","expo","ReactNative","navigator","product","NextJs","Nuxt","__NUXT__","$nuxt","Angular","angularVersionSetInDocument","Boolean","querySelector","angularContentSetInWindow","ng","React","elementKeyPrefixedWithReact","querySelectorAll","some","element","VueJs","Svelte","WebUnknown","NextJsSSR","NuxtSSR","__NUXT_PATHS__","ReactSSR","env","VueJsSSR","AngularSSR","npm_lifecycle_script","SvelteSSR","frameworkCache","frameworkChangeObservers","resetTriggered","detectFramework","detectionEntry","ServerSideUnknown","fcn","resetTimeout","framework","customUserAgentState","BASE_USER_AGENT","sanitizeAmplifyVersion","amplifyVersion","userAgent","isReactNative","observeFrameworkChanges","getAmplifyUserAgent","customUserAgentDetails","category","action","customState","api","additionalDetails","getCustomUserAgent","agentKey","agentValue","errorParser","parsedError","isClockSkewError","attempt","delayFunction","maxDelayMs","jitteredBackoff","updateEndpoint","ApplicationId","EndpointId","EndpointRequest","RequestID","MessageBody","getCacheKey","appId","createdEndpointIds","getEndpointId","cacheKey","address","channelType","identityId","optOut","userAttributes","userId","userProfile","endpointId","createdEndpointId","createEndpointId","customProperties","demographic","email","location","metrics","plan","demographicsFromClientInfo","resolvedUserId","clientInfo","nav","vendor","language","operaMatch","exec","ieMatch","cfMatch","sMatch","awkMatch","anyMatch","getBrowserType","timezone","tzMatch","browserTimezone","make","model","appVersion","browserClientInfo","modelVersion","mergedDemographic","attributes","shouldAddDemographics","shouldAddAttributes","shouldAddUser","RequestId","EffectiveDate","ChannelType","Address","Attributes","Demographic","AppVersion","Locale","locale","Make","Model","ModelVersion","Platform","PlatformVersion","platformVersion","Timezone","Location","City","city","Country","country","Latitude","latitude","Longitude","longitude","PostalCode","postalCode","Region","Metrics","OptOut","User","UserId","UserAttributes","expiration","cacheEndpointId","clearCreatedEndpointId","PinpointValidationErrorCode","NoAppId","putEvents","EventsRequest","Results","EventsResponse","RETRYABLE_CODES","ACCEPTED_CODES","PinpointEventBuffer","_interval","_pause","_flush","_buffer","_sendBatch","_startLoop","event","bufferSize","eventId","pause","resume","flush","identityHasChanged","flushAll","_putEvents","splice","clearInterval","flushInterval","setInterval","flushSize","batchSize","min","bufferSubset","eventMap","_bufferToMap","batchEventParams","_generateBatchEventParams","_processPutEventsSuccessResponse","err","_handlePutEventsFailure","batchItem","values","session","Endpoint","Events","EventType","Timestamp","Session","BatchItem","retryableEvents","_retry","endpointValues","responses","EventsItemResponse","eventValues","eventObject","StatusCode","eligibleEvents","bufferedEvent","resendLimit","remainingAttempts","unshift","reduce","acc","curVal","eventBufferMap","getEventBuffer","SESSION_START_EVENT","SESSION_STOP_EVENT","AnalyticsError","params","AnalyticsValidationErrorCode","validationErrorMap","NoCredentials","NoEventName","NoRegion","InvalidTracker","UnsupportedPlatform","InvalidFlushSize","NoTrackingId","assertValidationError","defaultMessage","analyticsEnabled","getAnalyticsUserAgentString","Analytics","resolveConfig","Amplify","getConfig","Pinpoint","resolveCredentials","fetchAuthSession","Hub","eventSession","currentTime","timestampISOString","resolveEndpointId","sessionId","Id","StartTimestamp","StopTimestamp","Duration","record","Record","catch","identifyUser","IdentifyUser","isBrowser","DEFAULT_EVENTS","EventTracker","eventRecorder","trackerActive","handleDocEvent","cleanup","events","selectorPrefix","targetEvent","capture","triggerSelector","attrSelector","eventNameSelector","eventSource","target","HTMLElement","closest","eventName","getAttribute","elementAttributes","rawElementAttributes","attr","tmp","localName","DEFAULT_URL_PROVIDER","origin","PREV_URL_STORAGE_KEY","PageViewTracker","spaTrackingActive","handleLocationChange","appType","urlProvider","setupSPATracking","setupMPATracking","history","pushState","originalPushState","replaceState","originalReplaceState","pushStateProxy","revoke","replaceStateProxy","Proxy","revocable","args","proxy","sessionStorage","currentUrl","urlHasChanged","prevUrl","stateChangeListeners","Set","sessionListener","listenerActive","handleVisibilityChange","addStateChangeListener","notifyOnAdd","add","getSessionState","removeStateChangeListener","handler","notifyHandlers","sessionState","visibilityState","SessionTracker","sessionTrackingActive","initialEventSent","handleStateChange","sessionStarted","sessionStopped","configuredTrackers","emitTrackingEvent","configureAutoTrack","validateTrackerConfiguration","providerEventRecorder","providerTrackers","trackerInstance","trackerType","currentTracker","enable","updateProviderTrackers","flushEvents","disable"],"sourceRoot":""}