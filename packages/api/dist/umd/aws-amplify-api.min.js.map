{"version":3,"file":"aws-amplify-api.min.js","mappings":"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","sources":["webpack:///webpack/universalModuleDefinition","webpack:///external umd \"aws_amplify_core\"","webpack:///external umd \"graphql\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///./node_modules/@aws-amplify/data-schema-types/dist/esm/client/symbol.mjs","webpack:///./node_modules/tslib/tslib.es6.mjs","webpack:///./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///./node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/dist/esm5/internal/config.js","webpack:///./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///./node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///./node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/resolveOwnerFields.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/stringTransformation.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/selfAwareAsync.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/cancellation.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/APIClient.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/utils.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/getCustomUserAgentDetails.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/custom.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/generateCustomOperationsProperty.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/get.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/list.mjs","webpack:///./node_modules/@smithy/util-base64/dist-es/constants.browser.js","webpack:///./node_modules/@smithy/util-base64/dist-es/fromBase64.browser.js","webpack:///./node_modules/@smithy/util-base64/dist-es/toBase64.browser.js","webpack:///./node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/conversationMessageDeserializers.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/convertItemToConversationMessage.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createListMessagesFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createOnMessageFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/conversationMessageSerializers.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createSendMessageFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/convertItemToConversation.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createCreateConversationFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createGetConversationFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createListConversationsFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createDeleteConversationFunction.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateEnumsProperty.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/indexQuery.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/subscription.mjs","webpack:///./node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///./node_modules/rxjs/dist/esm5/internal/Observable.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/findIndexByFields.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/observeQuery.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/resolvePKFields.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/clientUtils.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/addSchemaToClient.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateModelsProperty.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateConversationsProperty.mjs","webpack:///./node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateGenerationsProperty.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/types/index.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isApiGraphQLProviderConfig.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/types.mjs","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack:///./node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack:///./node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack:///./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack:///./node_modules/rxjs/dist/esm5/internal/operators/catchError.js","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/amplifyUrl/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/version.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/helpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Expo.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/ReactNative.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Next.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Nuxt.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Angular.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/React.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Vue.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Svelte.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detection/Web.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/detectFramework.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/customUserAgent.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Platform/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/AmplifyError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/errors/APIError.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/errors/RestApiError.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/errors/CanceledError.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/errors/validation.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/serde/responseInfo.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/serviceError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/serde/json.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/logger.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/createCancellableOperation.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/constants.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/parseSigningInfo.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/isIamAuthApplicable.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/types/errors.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/isClockSkewError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredBackoff.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/constants.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/convertToBuffer.js","webpack:///./node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/isEmptyData.js","webpack:///./node_modules/@smithy/util-hex-encoding/dist-es/index.js","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/userAgent/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/internal/composeTransferHandler.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/utils/memoization.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/handlers/fetch.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/handlers/authenticated.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/middleware.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/clients/handlers/unauthenticated.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/apis/common/handler.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/resolveHeaders.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/apis/common/publicApis.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/utils/resolveApiUrl.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/errors/assertValidatonError.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/apis/index.mjs","webpack:///./node_modules/@aws-amplify/api-rest/dist/esm/apis/common/internalPost.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/constants.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/constants.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Logger/types.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Logger/ConsoleLogger.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Hub/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/NonRetryableError.mjs","webpack:///./node_modules/uuid/dist/esm-browser/native.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/amplifyUuid/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/isNonRetryableError.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/convert/base64/base64Encoder.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/convert/base64/bytesToString.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/globalHelpers/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/retry.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/types/PubSub.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/Reachability/Reachability.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/isWebWorker.mjs","webpack:///./node_modules/rxjs/dist/esm5/internal/observable/from.js","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/ReachabilityMonitor/index.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/ConnectionStateMonitor.mjs","webpack:///./node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/ReconnectionMonitor.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/appsyncUrl.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/authHeaders.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/index.mjs","webpack:///./node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredExponentialRetry.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSAppSyncRealTimeProvider/index.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/GraphQLApiError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/validation.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/resolveConfig.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/assertValidationError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/resolveLibraryOptions.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/repackageAuthError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/constants.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/createGraphQLResultWithError.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isGraphQLResponseWithErrors.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/graphqlAuth.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/InternalGraphQLAPI.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/GraphQLAPI.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/v6.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/generateClient.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isConfigureEventWithResourceConfig.mjs","webpack:///./dist/esm/API.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSAppSyncEventsProvider/index.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/events/appsyncRequest.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/events/utils.mjs","webpack:///./node_modules/@aws-amplify/api-graphql/dist/esm/internals/events/index.mjs"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aws_amplify_core\"), require(\"graphql\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aws_amplify_api\", [\"aws_amplify_core\", \"graphql\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aws_amplify_api\"] = factory(require(\"aws_amplify_core\"), require(\"graphql\"));\n\telse\n\t\troot[\"aws_amplify_api\"] = factory(root[\"aws_amplify_core\"], root[\"graphql\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__556__, __WEBPACK_EXTERNAL_MODULE__49__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__556__;","module.exports = __WEBPACK_EXTERNAL_MODULE__49__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","const __modelMeta__ = Symbol();\n\nexport { __modelMeta__ };\n//# sourceMappingURL=symbol.mjs.map\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","/**\n * Given an introspection schema model, returns all owner fields.\n *\n * @param model Model from an introspection schema\n * @returns List of owner field names\n */\nfunction resolveOwnerFields(model) {\n    const ownerFields = new Set();\n    for (const attr of model.attributes || []) {\n        if (isAuthAttribute(attr)) {\n            for (const rule of attr.properties.rules) {\n                if (rule.allow === 'owner') {\n                    ownerFields.add(rule.ownerField || 'owner');\n                }\n                else if (rule.allow === 'groups' && rule.groupsField !== undefined) {\n                    // only valid for dynamic group(s)\n                    // static group auth will have an array of predefined groups in the attribute, groups: string[]\n                    // but `groupsField` will be undefined\n                    ownerFields.add(rule.groupsField);\n                }\n            }\n        }\n    }\n    return Array.from(ownerFields);\n}\n/**\n * Type guard that identifies an auth attribute with an attached rules list that\n * specifies an `allow` attribute at a minimum.\n *\n * @param attribute Any object. Ideally a model introspection schema model attribute\n * @returns True if given object is an auth attribute\n */\nfunction isAuthAttribute(attribute) {\n    if (attribute?.type === 'auth') {\n        if (typeof attribute?.properties === 'object') {\n            if (Array.isArray(attribute?.properties?.rules)) {\n                return (attribute?.properties?.rules).every((rule) => !!rule.allow);\n            }\n        }\n    }\n    return false;\n}\n\nexport { resolveOwnerFields };\n//# sourceMappingURL=resolveOwnerFields.mjs.map\n","/**\n * @param s string to capitalize\n * @returns capitalized string\n */\nfunction capitalize(s) {\n    return `${s[0].toUpperCase()}${s.slice(1)}`;\n}\n\nexport { capitalize };\n//# sourceMappingURL=stringTransformation.mjs.map\n","/**\n * Executes an `async` resolver function, providing the `Promise`-to-be-returned as the\n * first argument to the resolver so that the resolver can refer to the `Promise` that\n * external callers will see.\n *\n * ```ts\n * const outer = selfAwareAsync(async inner => {\n *  console.log(outer === inner); // true\n * });\n * ```\n *\n * This utility exists to reduce boilerplate in cases where promise resolving code needs\n * to track or register its \"own\" `Promise` *as seen by the caller* in some way. E.g.,\n * when mapping `Promise` chains for `client.cancel()`.\n *\n * @param resolver\n * @returns\n */\nfunction selfAwareAsync(resolver) {\n    let resolve;\n    let reject;\n    const resultPromise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    resolver(resultPromise)\n        .then((result) => {\n        resolve(result);\n    })\n        .catch((error) => {\n        reject(error);\n    });\n    return resultPromise;\n}\n\nexport { selfAwareAsync };\n//# sourceMappingURL=selfAwareAsync.mjs.map\n","/**\n * A map of cancellable promise \"extensions\".\n *\n * Each entry value must either be a directly `cancel()`-able promise, or must\n * refer to another entry.\n *\n * When cancellation of a promise is requested, cancel\n * will check to see if the promise exists in the map. If it does, it pulls\n * the value and repeats the check. If not, it will perform the underlying\n * cancel operation.\n */\nconst promiseMap = new WeakMap();\nfunction extendCancellability(existingCancellablePromise, newPromiseToRegister) {\n    promiseMap.set(newPromiseToRegister, existingCancellablePromise);\n    return existingCancellablePromise.finally(() => {\n        promiseMap.delete(newPromiseToRegister);\n    });\n}\n/**\n * Wraps the existing `cancel()` method with logic to iteratively search for\n * the corresponding base level promise, if needed, that the core graphql client\n * knows how to cancel.\n *\n * @param client\n */\nfunction upgradeClientCancellation(client) {\n    const innerCancel = client.cancel.bind(client);\n    client.cancel = function (promise, message) {\n        const visited = new Set();\n        let targetPromise = promise;\n        while (targetPromise && promiseMap.has(targetPromise)) {\n            if (visited.has(targetPromise))\n                throw new Error('A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!');\n            visited.add(targetPromise);\n            targetPromise = promiseMap.get(targetPromise);\n        }\n        // call `innerCancel` with `targetPromise!` to defer to existing implementation\n        // on how to handle `null | undefined` or otherwise \"non-cancellable\" objects.\n        return innerCancel(targetPromise, message);\n    };\n}\n\nexport { extendCancellability, upgradeClientCancellation };\n//# sourceMappingURL=cancellation.mjs.map\n","import { resolveOwnerFields } from '../utils/resolveOwnerFields.mjs';\nimport { capitalize } from '../utils/stringTransformation.mjs';\nimport { selfAwareAsync } from '../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from './cancellation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\nconst connectionType = {\n    HAS_ONE: 'HAS_ONE',\n    HAS_MANY: 'HAS_MANY',\n    BELONGS_TO: 'BELONGS_TO',\n};\n// When generating an SK's KeyConditionInput name, string-like types map to String\nconst skGraphQlFieldTypeMap = {\n    ID: 'ID',\n    String: 'String',\n    AWSDate: 'String',\n    AWSTime: 'String',\n    AWSDateTime: 'String',\n    AWSTimestamp: 'Int',\n    AWSEmail: 'String',\n    AWSPhone: 'String',\n    AWSURL: 'String',\n    AWSIPAddress: 'String',\n    AWSJSON: 'String',\n    Boolean: 'Boolean',\n    Int: 'Int',\n    Float: 'Float',\n};\n// move to util\nconst resolvedSkName = (sk) => {\n    if (sk.length === 1) {\n        return sk[0];\n    }\n    else {\n        return sk.reduce((acc, curr, idx) => {\n            if (idx === 0) {\n                return curr;\n            }\n            else {\n                return acc + capitalize(curr);\n            }\n        }, '');\n    }\n};\n/**\n * Crawls a model tree, starting with a given **individual** model instance record, looking\n * for related hasMany children to extract from their `items` containers.\n *\n * E.g., if we have a record like this:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: {\n *     items: [\n *       { name: 'a' }\n *       { name: 'b' }\n *       { name: 'c' }\n *     ]\n *   }\n * }\n * ```\n *\n * And if `children` refers to *an array of another model* (as opposed to a custom type),\n * the `items` will be extracted. We do this because `items` is just the mechanism for nesting\n * child records -- we don't want customers to have to dig the items out in application code.\n * Ultimately, we return this \"flattened\" structure:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: [\n *     { name: 'a' }\n *     { name: 'b' }\n *     { name: 'c' }\n *   ]\n * }\n * ```\n *\n * Notably, an identical record could be the result of a nested custom type that contains an\n * `items` property. This will *not* be flattened, because in that case the `items` property is\n * actually part of the customer's schema. Similarly if a model contains an explicit `items` field.\n *\n * @param modelIntrospection Top-level model introspection schema.\n * @param modelName The name of the model. Can be `undefined`. E.g., for customOperation return types.\n * @param modelRecord The individual \"model instance record\" to normalize.\n */\nconst flattenItems = (modelIntrospection, modelName, modelRecord) => {\n    if (!modelRecord)\n        return null;\n    const mapped = {};\n    for (const [fieldName, value] of Object.entries(modelRecord)) {\n        const fieldDef = modelName\n            ? modelIntrospection.models[modelName]?.fields[fieldName]\n            : undefined;\n        const dvPair = { fieldDef, value };\n        if (isRelatedModelItemsArrayPair(dvPair)) {\n            mapped[fieldName] = dvPair.value.items.map((itemValue) => flattenItems(modelIntrospection, dvPair.fieldDef.type.model, itemValue));\n        }\n        else if (isRelatedModelProperty(fieldDef)) {\n            mapped[fieldName] = flattenItems(modelIntrospection, fieldDef.type.model, value);\n        }\n        else {\n            mapped[fieldName] = value;\n        }\n    }\n    return mapped;\n};\n/**\n * Determines whether the given field definition and associated result value\n * represent a related model array from a HasMany-type relationship.\n *\n * @param dv Pair of field definition and associated result value\n * @returns\n */\nfunction isRelatedModelItemsArrayPair(dv) {\n    return (typeof dv.fieldDef?.type === 'object' &&\n        'model' in dv.fieldDef.type &&\n        typeof dv.fieldDef.type.model === 'string' &&\n        dv.fieldDef.isArray &&\n        Array.isArray(dv.value?.items));\n}\n/**\n * Determines whether the given field definition represents a relationship\n * to another model.\n *\n * @param fieldDef\n * @returns\n */\nfunction isRelatedModelProperty(fieldDef) {\n    return (typeof fieldDef?.type === 'object' &&\n        'model' in fieldDef.type &&\n        typeof fieldDef.type.model === 'string');\n}\n// TODO: this should accept single result to support CRUD methods; create helper for array/list\nfunction initializeModel(client, modelName, result, modelIntrospection, authMode, authToken, context = false) {\n    const introModel = modelIntrospection.models[modelName];\n    const introModelFields = introModel.fields;\n    const modelFields = Object.entries(introModelFields)\n        .filter(([_, field]) => field?.type?.model !== undefined)\n        .map(([fieldName]) => fieldName);\n    return result.map((record) => {\n        if (record === null || record === undefined) {\n            return record;\n        }\n        const initializedRelationshipFields = {};\n        for (const fieldName of modelFields) {\n            const modelField = introModelFields[fieldName];\n            const modelFieldType = modelField?.type;\n            const relatedModelName = modelFieldType.model;\n            const relatedModel = modelIntrospection.models[relatedModelName];\n            const relatedModelPKFieldName = relatedModel.primaryKeyInfo.primaryKeyFieldName;\n            const relatedModelSKFieldNames = relatedModel.primaryKeyInfo.sortKeyFieldNames;\n            const relationType = modelField.association?.connectionType;\n            let connectionFields = [];\n            if (modelField.association &&\n                'associatedWith' in modelField.association) {\n                connectionFields = modelField.association.associatedWith;\n            }\n            const targetNames = [];\n            if (modelField.association && 'targetNames' in modelField.association) {\n                targetNames.push(...modelField.association.targetNames);\n            }\n            switch (relationType) {\n                case connectionType.BELONGS_TO: {\n                    const sortKeyValues = relatedModelSKFieldNames.reduce(\n                    // TODO(Eslint): is this implementation correct?\n                    // eslint-disable-next-line array-callback-return\n                    (acc, curVal) => {\n                        if (record[curVal]) {\n                            return (acc[curVal] = record[curVal]);\n                        }\n                    }, {});\n                    // if get is disabled on the related model\n                    if (client.models[relatedModelName]?.get === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get(contextSpec, {\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get({\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    break;\n                }\n                case connectionType.HAS_ONE:\n                case connectionType.HAS_MANY: {\n                    /**\n                     * If the loader is a HAS_ONE, we just need to attempt to grab the first item\n                     * from the result.\n                     */\n                    const mapResult = relationType === connectionType.HAS_ONE\n                        ? (result) => {\n                            return {\n                                data: result?.data.shift() || null,\n                                errors: result.errors,\n                                extensions: result.extensions,\n                            };\n                        }\n                        : (result) => result;\n                    const parentPk = introModel.primaryKeyInfo.primaryKeyFieldName;\n                    const parentSK = introModel.primaryKeyInfo.sortKeyFieldNames;\n                    // M:N check - TODO: refactor\n                    const relatedModelField = relatedModel.fields[connectionFields[0]];\n                    const relatedModelFieldType = relatedModelField.type;\n                    if (relatedModelFieldType.model) {\n                        let relatedTargetNames = [];\n                        if (relatedModelField.association &&\n                            'targetNames' in relatedModelField.association) {\n                            relatedTargetNames = relatedModelField.association?.targetNames;\n                        }\n                        const hasManyFilter = relatedTargetNames.map((field, idx) => {\n                            if (idx === 0) {\n                                return { [field]: { eq: record[parentPk] } };\n                            }\n                            return { [field]: { eq: record[parentSK[idx - 1]] } };\n                        });\n                        // if list is disabled on the related model\n                        if (client.models[relatedModelName]?.list === undefined) {\n                            break;\n                        }\n                        if (context) {\n                            initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        else {\n                            initializedRelationshipFields[fieldName] = (options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list({\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        break;\n                    }\n                    const hasManyFilter = connectionFields.map((field, idx) => {\n                        if (idx === 0) {\n                            return { [field]: { eq: record[parentPk] } };\n                        }\n                        return { [field]: { eq: record[parentSK[idx - 1]] } };\n                    });\n                    // if list is disabled on the related model\n                    if (client.models[relatedModelName]?.list === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list({\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    break;\n                }\n            }\n        }\n        return { ...record, ...initializedRelationshipFields };\n    });\n}\nconst graphQLOperationsInfo = {\n    CREATE: { operationPrefix: 'create', usePlural: false },\n    GET: { operationPrefix: 'get', usePlural: false },\n    UPDATE: { operationPrefix: 'update', usePlural: false },\n    DELETE: { operationPrefix: 'delete', usePlural: false },\n    LIST: { operationPrefix: 'list', usePlural: true },\n    INDEX_QUERY: { operationPrefix: '', usePlural: false },\n    ONCREATE: { operationPrefix: 'onCreate', usePlural: false },\n    ONUPDATE: { operationPrefix: 'onUpdate', usePlural: false },\n    ONDELETE: { operationPrefix: 'onDelete', usePlural: false },\n    OBSERVEQUERY: { operationPrefix: 'observeQuery', usePlural: false },\n};\nconst SELECTION_SET_WILDCARD = '*';\nconst getDefaultSelectionSetForNonModelWithIR = (nonModelDefinition, modelIntrospection) => {\n    const { fields } = nonModelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        if (typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    return Object.fromEntries(mappedFields);\n};\nconst getDefaultSelectionSetForModelWithIR = (modelDefinition, modelIntrospection) => {\n    const { fields } = modelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string' ||\n            typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    const ownerFields = resolveOwnerFields(modelDefinition).map((field) => [\n        field,\n        FIELD_IR,\n    ]);\n    return Object.fromEntries(mappedFields.concat(ownerFields));\n};\nfunction defaultSelectionSetForModel(modelDefinition) {\n    // fields that are explicitly part of the graphql schema; not\n    // inferred from owner auth rules.\n    const { fields } = modelDefinition;\n    const explicitFields = Object.values(fields)\n        // Default selection set omits model fields\n        .map(({ type, name }) => {\n        if (typeof type === 'string')\n            return name;\n        if (typeof type === 'object') {\n            if (typeof type?.enum === 'string') {\n                return name;\n            }\n            else if (typeof type?.nonModel === 'string') {\n                return `${name}.${SELECTION_SET_WILDCARD}`;\n            }\n        }\n        return undefined;\n    })\n        .filter(Boolean);\n    // fields used for owner auth rules that may or may not also\n    // be explicit on the model.\n    const ownerFields = resolveOwnerFields(modelDefinition);\n    return Array.from(new Set(explicitFields.concat(ownerFields)));\n}\nconst FIELD_IR = '';\n/**\n * Generates nested Custom Selection Set IR from path\n *\n * @param modelDefinitions\n * @param modelName\n * @param selectionSet - array of object paths\n * @example\n * ### Given\n * `selectionSet = ['id', 'comments.post.id']`\n * ### Returns\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n */\nfunction customSelectionSetToIR(modelIntrospection, modelName, selectionSet) {\n    const dotNotationToObject = (path, modelOrNonModelName) => {\n        const [fieldName, ...rest] = path.split('.');\n        const nested = rest[0];\n        const modelOrNonModelDefinition = modelIntrospection.models[modelOrNonModelName] ??\n            modelIntrospection.nonModels[modelOrNonModelName];\n        const modelOrNonModelFields = modelOrNonModelDefinition?.fields;\n        const relatedModel = modelOrNonModelFields?.[fieldName]?.type?.model;\n        const relatedModelDefinition = modelIntrospection.models[relatedModel];\n        const relatedNonModel = modelOrNonModelFields?.[fieldName]?.type?.nonModel;\n        const relatedNonModelDefinition = modelIntrospection.nonModels[relatedNonModel];\n        const isModelOrNonModelOrFieldType = relatedModelDefinition\n            ? 'model'\n            : relatedNonModelDefinition\n                ? 'nonModel'\n                : 'field';\n        if (isModelOrNonModelOrFieldType === 'nonModel') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of custom type ${relatedNonModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                result = {\n                    [fieldName]: getDefaultSelectionSetForNonModelWithIR(relatedNonModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedNonModel),\n                };\n            }\n            return result;\n        }\n        else if (isModelOrNonModelOrFieldType === 'model') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of model ${relatedModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                const nestedRelatedModelDefinition = modelIntrospection.models[relatedModel];\n                result = {\n                    [fieldName]: getDefaultSelectionSetForModelWithIR(nestedRelatedModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedModel),\n                };\n            }\n            if (modelOrNonModelFields[fieldName]?.isArray) {\n                result = {\n                    [fieldName]: {\n                        items: result[fieldName],\n                    },\n                };\n            }\n            return result;\n        }\n        else {\n            const modelField = modelOrNonModelFields?.[fieldName];\n            const nonModelDefinition = modelIntrospection.nonModels[modelOrNonModelName];\n            const nonModelField = nonModelDefinition?.fields?.[fieldName];\n            if (!nonModelDefinition) {\n                const isOwnerField = resolveOwnerFields(modelOrNonModelDefinition).includes(fieldName);\n                if (!modelField && !isOwnerField) {\n                    throw Error(`${fieldName} is not a field of model ${modelOrNonModelName}`);\n                }\n            }\n            else {\n                if (!nonModelField) {\n                    throw Error(`${fieldName} is not a field of custom type ${modelOrNonModelName}`);\n                }\n            }\n            return { [fieldName]: FIELD_IR };\n        }\n    };\n    return selectionSet.reduce((resultObj, path) => deepMergeSelectionSetObjects(dotNotationToObject(path, modelName), resultObj), {});\n}\n/**\n * Stringifies selection set IR\n * * @example\n * ### Given\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n * ### Returns\n * `'id comments { items { post { id } } }'`\n */\nfunction selectionSetIRToString(obj) {\n    const res = [];\n    Object.entries(obj).forEach(([fieldName, value]) => {\n        if (value === FIELD_IR) {\n            res.push(fieldName);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            if (value?.items) {\n                res.push(fieldName, '{', 'items', '{', selectionSetIRToString(value.items), '}', '}');\n            }\n            else {\n                res.push(fieldName, '{', selectionSetIRToString(value), '}');\n            }\n        }\n    });\n    return res.join(' ');\n}\n/**\n * Recursively merges selection set objects from `source` onto `target`.\n *\n * `target` will be updated. `source` will be left alone.\n *\n * @param source The object to merge into target.\n * @param target The object to be mutated.\n */\nfunction deepMergeSelectionSetObjects(source, target) {\n    const isObject = (obj) => obj && typeof obj === 'object';\n    for (const key in source) {\n        // This verification avoids 'Prototype Pollution' issue\n        if (!Object.prototype.hasOwnProperty.call(source, key))\n            continue;\n        if (Object.prototype.hasOwnProperty.call(target, key) &&\n            isObject(target[key])) {\n            deepMergeSelectionSetObjects(source[key], target[key]);\n        }\n        else {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nfunction generateSelectionSet(modelIntrospection, modelName, selectionSet) {\n    const modelDefinition = modelIntrospection.models[modelName];\n    const selSetIr = customSelectionSetToIR(modelIntrospection, modelName, selectionSet ?? defaultSelectionSetForModel(modelDefinition));\n    const selSetString = selectionSetIRToString(selSetIr);\n    return selSetString;\n}\nfunction generateGraphQLDocument(modelIntrospection, modelName, modelOperation, listArgs, indexMeta) {\n    const modelDefinition = modelIntrospection.models[modelName];\n    const { name, pluralName, fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, attributes, } = modelDefinition;\n    // Use pascal case of the model name to generate the operations and the arguments.\n    // This is required to be in sync with the resources generated by the GraphQL transformers.\n    const namePascalCase = name.charAt(0).toUpperCase() + name.slice(1);\n    const pluralNamePascalCase = pluralName.charAt(0).toUpperCase() + pluralName.slice(1);\n    const { operationPrefix, usePlural } = graphQLOperationsInfo[modelOperation];\n    const { selectionSet } = listArgs || {};\n    let graphQLFieldName;\n    let indexQueryArgs;\n    if (operationPrefix) {\n        graphQLFieldName = `${operationPrefix}${usePlural ? pluralNamePascalCase : namePascalCase}`;\n    }\n    else if (indexMeta) {\n        const { queryField, pk, sk = [] } = indexMeta;\n        graphQLFieldName = queryField;\n        /**\n         * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n         *  Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n         * @example\n         * ```\n         * sk1: ModelStringKeyConditionInput\n         * ```\n         *\n         * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n         *  and the type is `Model${modelName}${keyAttributeName}CompositeKeyConditionInput` (nullable)\n         * @example\n         * ```\n         * sk1Sk2: ModelMyModelMyModelByPkAndSk1AndSk2CompositeKeyConditionInput\n         */\n        let skQueryArgs = {};\n        if (sk.length === 1) {\n            const [skField] = sk;\n            const type = (typeof fields[skField].type === 'string'\n                ? fields[skField].type\n                : 'String');\n            const normalizedType = skGraphQlFieldTypeMap[type];\n            skQueryArgs = {\n                [skField]: `Model${normalizedType}KeyConditionInput`,\n            };\n        }\n        else if (sk.length > 1) {\n            const compositeSkArgName = resolvedSkName(sk);\n            const keyName = attributes?.find((attr) => attr?.properties?.queryField === queryField)?.properties?.name;\n            skQueryArgs = {\n                [compositeSkArgName]: `Model${capitalize(modelName)}${capitalize(keyName)}CompositeKeyConditionInput`,\n            };\n        }\n        indexQueryArgs = {\n            [pk]: `${Object.prototype.hasOwnProperty.call(fields[pk].type, 'enum')\n                ? fields[pk].type.enum // AppSync schema sets enum type as the type of the enum fields that's used as PK\n                : fields[pk].type}!`,\n            ...skQueryArgs,\n        };\n    }\n    else {\n        throw new Error('Error generating GraphQL Document - invalid operation name');\n    }\n    let graphQLOperationType;\n    let graphQLSelectionSet;\n    let graphQLArguments;\n    const selectionSetFields = generateSelectionSet(modelIntrospection, modelName, selectionSet);\n    // default PK args for get and list operations\n    // modified below for CPK\n    const getPkArgs = {\n        [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}!`,\n    };\n    const listPkArgs = {};\n    /**\n     * Generate query field args for the SK if it's defined\n     *\n     * **1. Get queries** require each SK field to be present as a separate arg where the type is the field's GraphQL scalar type (non-nullable)\n     * @example\n     * ```\n     * sk1: String!, sk2: Int!\n     * ```\n     *\n     * **2. List queries**\n     *\n     * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n     *      Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n     * @example\n     * ```\n     * sk1: ModelStringKeyConditionInput\n     * ```\n     *\n     * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n     *  and the type is `Model${modelName}PrimaryCompositeKeyConditionInput` (nullable)\n     * @example\n     * ```\n     * sk1Sk2: ModelMyModelPrimaryCompositeKeyConditionInput\n     * ```\n     */\n    const generateSkArgs = (op) => {\n        if (sortKeyFieldNames.length === 0)\n            return {};\n        if (op === 'get') {\n            return sortKeyFieldNames.reduce((acc, fieldName) => {\n                const fieldType = fields[fieldName].type;\n                if (op === 'get') {\n                    acc[fieldName] = `${fieldType}!`; // ! - SK args are non-nullable in Get queries\n                }\n                return acc;\n            }, {});\n        }\n        else {\n            // list SK\n            if (sortKeyFieldNames.length === 1) {\n                // Single SK\n                const [sk] = sortKeyFieldNames;\n                const type = (typeof fields[sk].type === 'string' ? fields[sk].type : 'String');\n                const normalizedType = skGraphQlFieldTypeMap[type];\n                return {\n                    [sk]: `Model${normalizedType}KeyConditionInput`,\n                };\n            }\n            else {\n                // Composite SK\n                const compositeSkArgName = resolvedSkName(sortKeyFieldNames);\n                return {\n                    [compositeSkArgName]: `Model${capitalize(modelName)}PrimaryCompositeKeyConditionInput`,\n                };\n            }\n        }\n    };\n    if (isCustomPrimaryKey) {\n        Object.assign(getPkArgs, generateSkArgs('get'));\n        Object.assign(listPkArgs, {\n            // PK is only included in list query field args in the generated GQL\n            // when explicitly specifying PK with .identifier(['fieldName']) or @primaryKey in the schema definition\n            [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}`, // PK is always a nullable arg for list (no `!` after the type)\n            sortDirection: 'ModelSortDirection',\n        }, generateSkArgs('list'));\n    }\n    switch (modelOperation) {\n        case 'CREATE':\n        case 'UPDATE':\n        case 'DELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    input: `${operationPrefix.charAt(0).toLocaleUpperCase() +\n                        operationPrefix.slice(1)}${namePascalCase}Input!`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'mutation');\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'GET':\n            graphQLArguments ?? (graphQLArguments = getPkArgs);\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'LIST':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...listPkArgs,\n                    // eslint doesn't like the ts-ignore, because it thinks it's unnecessary.\n                    // But TS doesn't like the `filter: ...` because it think it will always be\n                    // overwritten. (it won't be.) so, we need to ignore the TS error and then\n                    // ignore the eslint error on the ts-ignore.\n                    // eslint-disable-next-line\n                    // @ts-ignore\n                    filter: `Model${namePascalCase}FilterInput`,\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'INDEX_QUERY':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...indexQueryArgs,\n                    filter: `Model${namePascalCase}FilterInput`,\n                    sortDirection: 'ModelSortDirection',\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    filter: `ModelSubscription${namePascalCase}FilterInput`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'subscription');\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n            break;\n        case 'OBSERVEQUERY':\n        default:\n            throw new Error('Internal error: Attempted to generate graphql document for observeQuery. Please report this error.');\n    }\n    const graphQLDocument = `${graphQLOperationType}${graphQLArguments\n        ? `(${Object.entries(graphQLArguments).map(([fieldName, type]) => `$${fieldName}: ${type}`)})`\n        : ''} { ${graphQLFieldName}${graphQLArguments\n        ? `(${Object.keys(graphQLArguments).map((fieldName) => `${fieldName}: $${fieldName}`)})`\n        : ''} { ${graphQLSelectionSet} } }`;\n    return graphQLDocument;\n}\nfunction buildGraphQLVariables(modelDefinition, operation, arg, modelIntrospection, indexMeta) {\n    const { fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, } = modelDefinition;\n    const skName = sortKeyFieldNames?.length && resolvedSkName(sortKeyFieldNames);\n    let variables = {};\n    // TODO: process input\n    switch (operation) {\n        case 'CREATE':\n            variables = {\n                input: arg\n                    ? normalizeMutationInput(arg, modelDefinition, modelIntrospection)\n                    : {},\n            };\n            break;\n        case 'UPDATE':\n            // readonly fields are not  updated\n            variables = {\n                input: arg\n                    ? Object.fromEntries(Object.entries(normalizeMutationInput(arg, modelDefinition, modelIntrospection)).filter(([fieldName]) => {\n                        const { isReadOnly } = fields[fieldName];\n                        return !isReadOnly;\n                    }))\n                    : {},\n            };\n            break;\n        case 'GET':\n        case 'DELETE':\n            // only identifiers are sent\n            if (arg) {\n                variables = isCustomPrimaryKey\n                    ? [primaryKeyFieldName, ...sortKeyFieldNames].reduce((acc, fieldName) => {\n                        acc[fieldName] = arg[fieldName];\n                        return acc;\n                    }, {})\n                    : { [primaryKeyFieldName]: arg[primaryKeyFieldName] };\n            }\n            if (operation === 'DELETE') {\n                variables = { input: variables };\n            }\n            break;\n        case 'LIST':\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg && arg[primaryKeyFieldName]) {\n                variables[primaryKeyFieldName] = arg[primaryKeyFieldName];\n            }\n            if (skName && arg && arg[skName]) {\n                variables[skName] = arg[skName];\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        case 'INDEX_QUERY': {\n            const { pk, sk = [] } = indexMeta;\n            const indexQuerySkName = sk?.length && resolvedSkName(sk);\n            variables[pk] = arg[pk];\n            if (indexQuerySkName && arg && arg[indexQuerySkName]) {\n                variables[indexQuerySkName] = arg[indexQuerySkName];\n            }\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        }\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            if (arg?.filter) {\n                variables = { filter: arg.filter };\n            }\n            break;\n        case 'OBSERVEQUERY':\n            throw new Error('Internal error: Attempted to build variables for observeQuery. Please report this error.');\n        default: {\n            const exhaustiveCheck = operation;\n            throw new Error(`Unhandled operation case: ${exhaustiveCheck}`);\n        }\n    }\n    return variables;\n}\n/**\n * Iterates over mutation input values and resolves any model inputs to their corresponding join fields/values\n *\n * @example\n * ### Usage\n * ```ts\n * const result = normalizeMutationInput({ post: post }, model, modelDefinition);\n * ```\n * ### Result\n * ```ts\n * { postId: \"abc123\" }\n * ```\n *\n */\nfunction normalizeMutationInput(mutationInput, model, modelIntrospection) {\n    const { fields } = model;\n    const normalized = {};\n    Object.entries(mutationInput).forEach(([inputFieldName, inputValue]) => {\n        const fieldType = fields[inputFieldName]?.type;\n        const relatedModelName = fieldType?.model;\n        if (relatedModelName) {\n            const association = fields[inputFieldName]?.association;\n            const relatedModelDef = modelIntrospection.models[relatedModelName];\n            const relatedModelPkInfo = relatedModelDef.primaryKeyInfo;\n            if (association?.connectionType === connectionType.HAS_ONE) {\n                const associationHasOne = association;\n                associationHasOne.targetNames.forEach((targetName, idx) => {\n                    const associatedFieldName = associationHasOne.associatedWith[idx];\n                    normalized[targetName] = inputValue[associatedFieldName];\n                });\n            }\n            if (association?.connectionType === connectionType.BELONGS_TO) {\n                const associationBelongsTo = association;\n                associationBelongsTo.targetNames.forEach((targetName, idx) => {\n                    if (idx === 0) {\n                        const associatedFieldName = relatedModelPkInfo.primaryKeyFieldName;\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                    else {\n                        const associatedFieldName = relatedModelPkInfo.sortKeyFieldNames[idx - 1];\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                });\n            }\n        }\n        else {\n            normalized[inputFieldName] = inputValue;\n        }\n    });\n    return normalized;\n}\n/**\n * Produces a parameter object that can contains auth mode/token overrides\n * only if present in either `options` (first) or configured on the `client`\n * as a fallback.\n *\n * @param client Configured client from `generateClient`\n * @param options Args/Options object from call site.\n * @returns\n */\nfunction authModeParams(client, getInternals, options = {}) {\n    const internals = getInternals(client);\n    return {\n        authMode: options.authMode || internals.authMode,\n        authToken: options.authToken || internals.authToken,\n    };\n}\n/**\n * Retrieves custom headers from either the client or request options.\n * @param client V6Client | V6ClientSSRRequest | V6ClientSSRCookies - for extracting client headers\n * @param requestHeaders {@link CustomHeaders} - request headers\n * @returns custom headers as {@link CustomHeaders}\n */\nfunction getCustomHeaders(client, getInternals, requestHeaders) {\n    let headers = getInternals(client).headers || {};\n    // Individual request headers will take precedence over client headers.\n    // We intentionally do *not* merge client and request headers.\n    if (requestHeaders) {\n        headers = requestHeaders;\n    }\n    return headers;\n}\n\nexport { authModeParams, buildGraphQLVariables, customSelectionSetToIR, flattenItems, generateGraphQLDocument, generateSelectionSet, getCustomHeaders, getDefaultSelectionSetForNonModelWithIR, graphQLOperationsInfo, initializeModel, normalizeMutationInput, selectionSetIRToString };\n//# sourceMappingURL=APIClient.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// import { GraphQLFormattedError } from '@aws-amplify/data-schema-types';\n/**\n * Handle errors for list return types (list and index query operations)\n */\nfunction handleListGraphQlError(error) {\n    if (error?.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: [],\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n/**\n * Handle errors for singular return types (create, get, update, delete operations)\n */\nfunction handleSingularGraphQlError(error) {\n    if (error.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: null,\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n\nexport { handleListGraphQlError, handleSingularGraphQlError };\n//# sourceMappingURL=utils.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Symbol used for internal user agent overrides.\n *\n * @internal\n * This symbol is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n * External usage of this symbol is discouraged and may lead to unexpected behavior.\n */\nconst INTERNAL_USER_AGENT_OVERRIDE = Symbol('INTERNAL_USER_AGENT_OVERRIDE');\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n})(AiAction || (AiAction = {}));\nconst getCustomUserAgentDetails = (action) => ({\n    category: 'ai',\n    action,\n});\n/**\n * Creates a user agent override object based on custom details.\n *\n * @internal\n * This function is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n *\n * @param customUserAgentDetails - Optional custom user agent details\n * @returns An object with INTERNAL_USER_AGENT_OVERRIDE symbol as key and customUserAgentDetails as value, or undefined if no details provided\n */\nfunction createUserAgentOverride(customUserAgentDetails) {\n    return customUserAgentDetails\n        ? { [INTERNAL_USER_AGENT_OVERRIDE]: customUserAgentDetails }\n        : undefined;\n}\n\nexport { AiAction, INTERNAL_USER_AGENT_OVERRIDE, createUserAgentOverride, getCustomUserAgentDetails };\n//# sourceMappingURL=getCustomUserAgentDetails.mjs.map\n","import { map } from 'rxjs';\nimport { authModeParams, getCustomHeaders, initializeModel, selectionSetIRToString, getDefaultSelectionSetForNonModelWithIR, generateSelectionSet } from '../APIClient.mjs';\nimport { handleSingularGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\n/**\n * Type guard for checking whether a Custom Operation argument is a contextSpec object\n */\nconst argIsContextSpec = (arg) => {\n    return typeof arg?.token?.value === 'symbol';\n};\n/**\n * Builds an operation function, embedded with all client and context data, that\n * can be attached to a client as a custom query or mutation.\n *\n * If we have this source schema:\n *\n * ```typescript\n * a.schema({\n *   echo: a.query()\n *     .arguments({input: a.string().required()})\n *     .returns(a.string())\n * })\n * ```\n *\n * Our model intro schema will contain an entry like this:\n *\n * ```ts\n * {\n *   queries: {\n *     echo: {\n *       name: \"echo\",\n *       isArray: false,\n *       type: 'String',\n *       isRequired: false,\n *       arguments: {\n *         input: {\n *           name: 'input',\n *           isArray: false,\n *           type: String,\n *           isRequired: true\n *         }\n *       }\n *     }\n *   }\n * }\n * ```\n *\n * The `echo` object is used to build the `echo' method that goes here:\n *\n * ```typescript\n * const client = generateClent()\n * const { data } = await client.queries.echo({input: 'a string'});\n * //                                    ^\n * //                                    |\n * //                                    +-- This one right here.\n * //\n * ```\n *\n *\n * @param client The client to run graphql queries through.\n * @param modelIntrospection The model introspection schema the op comes from.\n * @param operationType The broad category of graphql operation.\n * @param operation The operation definition from the introspection schema.\n * @param useContext Whether the function needs to accept an SSR context.\n * @returns The operation function to attach to query, mutations, etc.\n */\nfunction customOpFactory(client, modelIntrospection, operationType, operation, useContext, getInternals, customUserAgentDetails) {\n    // .arguments() are defined for the custom operation in the schema builder\n    // and are present in the model introspection schema\n    const argsDefined = operation.arguments !== undefined;\n    const op = (...args) => {\n        // options is always the last argument\n        const options = args[args.length - 1];\n        let contextSpec;\n        let arg;\n        if (useContext) {\n            if (argIsContextSpec(args[0])) {\n                contextSpec = args[0];\n            }\n            else {\n                throw new Error(`Invalid first argument passed to ${operation.name}. Expected contextSpec`);\n            }\n        }\n        if (argsDefined) {\n            if (useContext) {\n                arg = args[1];\n            }\n            else {\n                arg = args[0];\n            }\n        }\n        if (operationType === 'subscription') {\n            return _opSubscription(\n            // subscriptions are only enabled on the clientside\n            client, modelIntrospection, operation, getInternals, arg, options, customUserAgentDetails);\n        }\n        return _op(client, modelIntrospection, operationType, operation, getInternals, arg, options, contextSpec, customUserAgentDetails);\n    };\n    return op;\n}\n/**\n * Runtime test and type guard to check whether `o[field]` is a `String`.\n *\n * ```typescript\n * if (hasStringField(o, 'prop')) {\n *   const s = o.prop;\n *   //    ^? const s: string\n * }\n * ```\n *\n * @param o Object to inspect\n * @param field Field to look for\n * @returns Boolean: `true` if the `o[field]` is a `string`\n */\nfunction hasStringField(o, field) {\n    return typeof o[field] === 'string';\n}\nfunction isEnumType(type) {\n    return type instanceof Object && 'enum' in type;\n}\nfunction isInputType(type) {\n    return type instanceof Object && 'input' in type;\n}\n/**\n * @param argDef A single argument definition from a custom operation\n * @returns A string naming the base type including the `!` if the arg is required.\n */\nfunction argumentBaseTypeString({ type, isRequired }) {\n    const requiredFlag = isRequired ? '!' : '';\n    if (isEnumType(type)) {\n        return `${type.enum}${requiredFlag}`;\n    }\n    if (isInputType(type)) {\n        return `${type.input}${requiredFlag}`;\n    }\n    return `${type}${requiredFlag}`;\n}\n/**\n * Generates \"outer\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the top/outer level arguments as a string:\n *\n * ```json\n * \"InputString: String!\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction outerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.entries(operation.arguments)\n        .map(([k, argument]) => {\n        const baseType = argumentBaseTypeString(argument);\n        const finalType = argument.isArray\n            ? `[${baseType}]${argument.isArrayNullable ? '' : '!'}`\n            : baseType;\n        return `$${k}: ${finalType}`;\n    })\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates \"inner\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the inner arguments as a string:\n *\n * ```json\n * \"InputString: $InputString\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction innerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.keys(operation.arguments)\n        .map((k) => `${k}: $${k}`)\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates the selection set string for a custom operation. This is slightly\n * different than the selection set generation for models. If the custom op returns\n * a primitive or enum types, it doesn't require a selection set at all.\n *\n * E.g., the graphql might look like this:\n *\n * ```graphql\n * query MyQuery {\n *   echoString(inputString: \"whatever\")\n * }\n * #                                     ^\n * #                                     |\n * #                                     +-- no selection set\n * ```\n *\n * Non-primitive return type selection set generation will be similar to other\n * model operations.\n *\n * @param modelIntrospection The full code-generated introspection schema.\n * @param operation The operation object from the schema.\n * @returns The selection set as a string.\n */\nfunction operationSelectionSet(modelIntrospection, operation) {\n    if (hasStringField(operation, 'type') ||\n        hasStringField(operation.type, 'enum')) {\n        return '';\n    }\n    else if (hasStringField(operation.type, 'nonModel')) {\n        const nonModel = modelIntrospection.nonModels[operation.type.nonModel];\n        return `{${selectionSetIRToString(getDefaultSelectionSetForNonModelWithIR(nonModel, modelIntrospection))}}`;\n    }\n    else if (hasStringField(operation.type, 'model')) {\n        return `{${generateSelectionSet(modelIntrospection, operation.type.model)}}`;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Maps an arguments objec to graphql variables, removing superfluous args and\n * screaming loudly when required args are missing.\n *\n * @param operation The operation to construct graphql request variables for.\n * @param args The arguments to map variables from.\n * @returns The graphql variables object.\n */\nfunction operationVariables(operation, args = {}) {\n    const variables = {};\n    if (operation.arguments === undefined) {\n        return variables;\n    }\n    for (const argDef of Object.values(operation.arguments)) {\n        if (typeof args[argDef.name] !== 'undefined') {\n            variables[argDef.name] = args[argDef.name];\n        }\n        else if (argDef.isRequired) {\n            // At this point, the variable is both required and missing: We don't need\n            // to continue. The operation is expected to fail.\n            throw new Error(`${operation.name} requires arguments '${argDef.name}'`);\n        }\n    }\n    return variables;\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operationType The high level graphql operation type.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @param context SSR context if relevant.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _op(client, modelIntrospection, operationType, operation, getInternals, args, options, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name: operationName } = operation;\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const outerArgsString = outerArguments(operation);\n        const innerArgsString = innerArguments(operation);\n        const selectionSet = operationSelectionSet(modelIntrospection, operation);\n        const returnTypeModelName = hasStringField(operation.type, 'model')\n            ? operation.type.model\n            : undefined;\n        const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n        const variables = operationVariables(operation, args);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                // TODO: custom selection set. current selection set is default selection set only\n                // custom selection set requires data-schema-type + runtime updates above.\n                const initialized = returnTypeModelName\n                    ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                    : flattenedResult;\n                return {\n                    data: !isArrayResult && Array.isArray(initialized)\n                        ? initialized.shift()\n                        : initialized,\n                    extensions,\n                };\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    // TODO: custom selection set. current selection set is default selection set only\n                    // custom selection set requires data-schema-type + runtime updates above.\n                    const initialized = returnTypeModelName\n                        ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                        : flattenedResult;\n                    return {\n                        data: !isArrayResult && Array.isArray(initialized)\n                            ? initialized.shift()\n                            : initialized,\n                        errors,\n                    };\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _opSubscription(client, modelIntrospection, operation, getInternals, args, options, customUserAgentDetails) {\n    const operationType = 'subscription';\n    const { name: operationName } = operation;\n    const auth = authModeParams(client, getInternals, options);\n    const headers = getCustomHeaders(client, getInternals, options?.headers);\n    const outerArgsString = outerArguments(operation);\n    const innerArgsString = innerArguments(operation);\n    const selectionSet = operationSelectionSet(modelIntrospection, operation);\n    const returnTypeModelName = hasStringField(operation.type, 'model')\n        ? operation.type.model\n        : undefined;\n    const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n    const variables = operationVariables(operation, args);\n    const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n    const observable = client.graphql({\n        ...auth,\n        query,\n        variables,\n        ...userAgentOverride,\n    }, headers);\n    return observable.pipe(map((value) => {\n        const [key] = Object.keys(value.data);\n        const data = value.data[key];\n        const [initialized] = returnTypeModelName\n            ? initializeModel(client, returnTypeModelName, [data], modelIntrospection, auth.authMode, auth.authToken)\n            : [data];\n        return initialized;\n    }));\n}\n\nexport { customOpFactory };\n//# sourceMappingURL=custom.mjs.map\n","import { customOpFactory } from './operations/custom.mjs';\n\nconst operationTypeMap = {\n    queries: 'query',\n    mutations: 'mutation',\n    subscriptions: 'subscription',\n};\nfunction generateCustomOperationsProperty(client, config, operationsType, getInternals) {\n    // some bundlers end up with `Amplify.configure` being called *after* generate client.\n    // if that occurs, we need to *not error* while we wait. handling for late configuration\n    // occurs in `generateClient()`. we do not need to subscribe to Hub events here.\n    if (!config) {\n        return {};\n    }\n    const modelIntrospection = config.modelIntrospection;\n    // model intro schema might be absent if there's not actually a configured GraphQL API\n    if (!modelIntrospection) {\n        return {};\n    }\n    // custom operations will be absent from model intro schema if no custom ops\n    // are present on the source schema.\n    const operations = modelIntrospection[operationsType];\n    if (!operations) {\n        return {};\n    }\n    const ops = {};\n    const useContext = getInternals(client).amplify === null;\n    for (const operation of Object.values(operations)) {\n        ops[operation.name] = customOpFactory(client, modelIntrospection, operationTypeMap[operationsType], operation, useContext, getInternals);\n    }\n    return ops;\n}\nfunction generateCustomMutationsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'mutations', getInternals);\n}\nfunction generateCustomQueriesProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'queries', getInternals);\n}\nfunction generateCustomSubscriptionsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'subscriptions', getInternals);\n}\n\nexport { generateCustomMutationsProperty, generateCustomOperationsProperty, generateCustomQueriesProperty, generateCustomSubscriptionsProperty };\n//# sourceMappingURL=generateCustomOperationsProperty.mjs.map\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleSingularGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\nfunction getFactory(client, modelIntrospection, model, operation, getInternals, useContext = false, customUserAgentDetails) {\n    const getWithContext = (contextSpec, arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, contextSpec, customUserAgentDetails);\n    };\n    const get = (arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, undefined, customUserAgentDetails);\n    };\n    return useContext ? getWithContext : get;\n}\nfunction _get(client, modelIntrospection, model, arg, options, operation, getInternals, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, name, operation, options);\n        const variables = buildGraphQLVariables(model, operation, arg, modelIntrospection);\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                if (flattenedResult === null) {\n                    return { data: null, extensions };\n                }\n                else if (options?.selectionSet) {\n                    return { data: flattenedResult, extensions };\n                }\n                else {\n                    // TODO: refactor to avoid destructuring here\n                    const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                    return { data: initialized, extensions };\n                }\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    if (options?.selectionSet) {\n                        return { data: flattenedResult, errors };\n                    }\n                    else {\n                        // TODO: refactor to avoid destructuring here\n                        const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                        return { data: initialized, errors };\n                    }\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { getFactory };\n//# sourceMappingURL=get.mjs.map\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleListGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\nfunction listFactory(client, modelIntrospection, model, getInternals, context = false, customUserAgentDetails) {\n    const listWithContext = (contextSpec, args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails);\n    };\n    const list = (args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, undefined, customUserAgentDetails);\n    };\n    return context ? listWithContext : list;\n}\nfunction _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, name, 'LIST', args);\n        const variables = buildGraphQLVariables(model, 'LIST', args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = contextSpec\n                ? client.graphql(contextSpec, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data !== undefined) {\n                const [key] = Object.keys(data);\n                if (data[key].items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    // don't init if custom selection set\n                    if (args?.selectionSet) {\n                        return {\n                            data: flattenedResult,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                    else {\n                        const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                        return {\n                            data: initialized,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                }\n                return {\n                    data: data[key],\n                    nextToken: data[key].nextToken,\n                    extensions,\n                };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `data: { listPosts: null }`\n             * 4) actual records `data: { listPosts: items: [{ id: '1', ...etc }] }`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        // don't init if custom selection set\n                        if (args?.selectionSet) {\n                            return {\n                                data: flattenedResult,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                        else {\n                            const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                            // data is full record w/out selection set:\n                            return {\n                                data: initialized,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                    }\n                    return {\n                        data: data[key],\n                        nextToken: data[key]?.nextToken,\n                        errors,\n                    };\n                }\n                else {\n                    // response is of type `data: { getPost: null }`)\n                    return handleListGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { listFactory };\n//# sourceMappingURL=list.mjs.map\n","const alphabetByEncoding = {};\nconst alphabetByValue = new Array(64);\nfor (let i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\n    const char = String.fromCharCode(i + start);\n    alphabetByEncoding[char] = i;\n    alphabetByValue[i] = char;\n}\nfor (let i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\n    const char = String.fromCharCode(i + start);\n    const index = i + 26;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nfor (let i = 0; i < 10; i++) {\n    alphabetByEncoding[i.toString(10)] = i + 52;\n    const char = i.toString(10);\n    const index = i + 52;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nalphabetByEncoding[\"+\"] = 62;\nalphabetByValue[62] = \"+\";\nalphabetByEncoding[\"/\"] = 63;\nalphabetByValue[63] = \"/\";\nconst bitsPerLetter = 6;\nconst bitsPerByte = 8;\nconst maxLetterValue = 0b111111;\nexport { alphabetByEncoding, alphabetByValue, bitsPerLetter, bitsPerByte, maxLetterValue };\n","import { alphabetByEncoding, bitsPerByte, bitsPerLetter } from \"./constants.browser\";\nexport const fromBase64 = (input) => {\n    let totalByteLength = (input.length / 4) * 3;\n    if (input.slice(-2) === \"==\") {\n        totalByteLength -= 2;\n    }\n    else if (input.slice(-1) === \"=\") {\n        totalByteLength--;\n    }\n    const out = new ArrayBuffer(totalByteLength);\n    const dataView = new DataView(out);\n    for (let i = 0; i < input.length; i += 4) {\n        let bits = 0;\n        let bitLength = 0;\n        for (let j = i, limit = i + 3; j <= limit; j++) {\n            if (input[j] !== \"=\") {\n                if (!(input[j] in alphabetByEncoding)) {\n                    throw new TypeError(`Invalid character ${input[j]} in base64 string.`);\n                }\n                bits |= alphabetByEncoding[input[j]] << ((limit - j) * bitsPerLetter);\n                bitLength += bitsPerLetter;\n            }\n            else {\n                bits >>= bitsPerLetter;\n            }\n        }\n        const chunkOffset = (i / 4) * 3;\n        bits >>= bitLength % bitsPerByte;\n        const byteLength = Math.floor(bitLength / bitsPerByte);\n        for (let k = 0; k < byteLength; k++) {\n            const offset = (byteLength - k - 1) * bitsPerByte;\n            dataView.setUint8(chunkOffset + k, (bits & (255 << offset)) >> offset);\n        }\n    }\n    return new Uint8Array(out);\n};\n","import { fromUtf8 } from \"@smithy/util-utf8\";\nimport { alphabetByValue, bitsPerByte, bitsPerLetter, maxLetterValue } from \"./constants.browser\";\nexport function toBase64(_input) {\n    let input;\n    if (typeof _input === \"string\") {\n        input = fromUtf8(_input);\n    }\n    else {\n        input = _input;\n    }\n    const isArrayLike = typeof input === \"object\" && typeof input.length === \"number\";\n    const isUint8Array = typeof input === \"object\" &&\n        typeof input.byteOffset === \"number\" &&\n        typeof input.byteLength === \"number\";\n    if (!isArrayLike && !isUint8Array) {\n        throw new Error(\"@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.\");\n    }\n    let str = \"\";\n    for (let i = 0; i < input.length; i += 3) {\n        let bits = 0;\n        let bitLength = 0;\n        for (let j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\n            bits |= input[j] << ((limit - j - 1) * bitsPerByte);\n            bitLength += bitsPerByte;\n        }\n        const bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\n        bits <<= bitClusterCount * bitsPerLetter - bitLength;\n        for (let k = 1; k <= bitClusterCount; k++) {\n            const offset = (bitClusterCount - k) * bitsPerLetter;\n            str += alphabetByValue[(bits & (maxLetterValue << offset)) >> offset];\n        }\n        str += \"==\".slice(0, 4 - bitClusterCount);\n    }\n    return str;\n}\n","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","import { fromBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst deserializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return deserializeImageBlock(block);\n    }\n    if (block.toolUse) {\n        return deserializeToolUseBlock(block);\n    }\n    if (block.toolResult) {\n        return deserializeToolResultBlock(block);\n    }\n    return removeNullsFromBlock(block);\n});\nconst deserializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: fromBase64(image.source.bytes),\n        },\n    },\n});\nconst deserializeJsonBlock = ({ json }) => ({\n    json: JSON.parse(json),\n});\nconst deserializeToolUseBlock = ({ toolUse }) => ({\n    toolUse: {\n        ...toolUse,\n        input: JSON.parse(toolUse.input),\n    },\n});\nconst deserializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        toolUseId: toolResult.toolUseId,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return deserializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return deserializeJsonBlock(toolResultBlock);\n            }\n            return removeNullsFromBlock(toolResultBlock);\n        }),\n    },\n});\nconst removeNullsFromBlock = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n\nexport { deserializeContent };\n//# sourceMappingURL=conversationMessageDeserializers.mjs.map\n","import { deserializeContent } from './conversationMessageDeserializers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst convertItemToConversationMessage = ({ content, createdAt, id, conversationId, role, }) => ({\n    content: deserializeContent(content),\n    conversationId,\n    createdAt,\n    id,\n    role,\n});\n\nexport { convertItemToConversationMessage };\n//# sourceMappingURL=convertItemToConversationMessage.mjs.map\n","import { listFactory } from '../operations/list.mjs';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createListMessagesFunction = (client, modelIntrospection, conversationId, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationMessageModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListMessages));\n    const { data, nextToken, errors } = await list({\n        ...input,\n        filter: { conversationId: { eq: conversationId } },\n    });\n    return {\n        data: data.map((item) => convertItemToConversationMessage(item)),\n        nextToken,\n        errors,\n    };\n};\n\nexport { createListMessagesFunction };\n//# sourceMappingURL=createListMessagesFunction.mjs.map\n","import { customOpFactory } from '../operations/custom.mjs';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createOnMessageFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => (handler) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const subscribeSchema = conversations[conversationRouteName].message.subscribe;\n    const subscribeOperation = customOpFactory(client, modelIntrospection, 'subscription', subscribeSchema, false, getInternals, getCustomUserAgentDetails(AiAction.OnMessage));\n    return subscribeOperation({ conversationId }).subscribe((data) => {\n        handler(convertItemToConversationMessage(data));\n    });\n};\n\nexport { createOnMessageFunction };\n//# sourceMappingURL=createOnMessageFunction.mjs.map\n","import { toBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst serializeAiContext = (aiContext) => JSON.stringify(aiContext);\nconst serializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return serializeImageBlock(block);\n    }\n    if (block.toolResult) {\n        return serializeToolResultBlock(block);\n    }\n    return block;\n});\nconst serializeToolConfiguration = ({ tools }) => ({\n    tools: Object.entries(tools).map(([name, tool]) => ({\n        toolSpec: {\n            name,\n            description: tool.description,\n            inputSchema: {\n                json: JSON.stringify(tool.inputSchema.json),\n            },\n        },\n    })),\n});\nconst serializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: toBase64(image.source.bytes),\n        },\n    },\n});\nconst serializeJsonBlock = ({ json }) => ({\n    json: JSON.stringify(json),\n});\nconst serializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        ...toolResult,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return serializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return serializeJsonBlock(toolResultBlock);\n            }\n            return toolResultBlock;\n        }),\n    },\n});\n\nexport { serializeAiContext, serializeContent, serializeToolConfiguration };\n//# sourceMappingURL=conversationMessageSerializers.mjs.map\n","import { customOpFactory } from '../operations/custom.mjs';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage.mjs';\nimport { serializeContent, serializeAiContext, serializeToolConfiguration } from './conversationMessageSerializers.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createSendMessageFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => async (input) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const processedInput = typeof input === 'string' ? { content: [{ text: input }] } : input;\n    const { content, aiContext, toolConfiguration } = processedInput;\n    const sendSchema = conversations[conversationRouteName].message.send;\n    const sendOperation = customOpFactory(client, modelIntrospection, 'mutation', sendSchema, false, getInternals, getCustomUserAgentDetails(AiAction.SendMessage));\n    const { data, errors } = await sendOperation({\n        conversationId,\n        content: serializeContent(content),\n        ...(aiContext && { aiContext: serializeAiContext(aiContext) }),\n        ...(toolConfiguration && {\n            toolConfiguration: serializeToolConfiguration(toolConfiguration),\n        }),\n    });\n    return {\n        data: data ? convertItemToConversationMessage(data) : data,\n        errors,\n    };\n};\n\nexport { createSendMessageFunction };\n//# sourceMappingURL=createSendMessageFunction.mjs.map\n","import { createListMessagesFunction } from './createListMessagesFunction.mjs';\nimport { createOnMessageFunction } from './createOnMessageFunction.mjs';\nimport { createSendMessageFunction } from './createSendMessageFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst convertItemToConversation = (client, modelIntrospection, conversationId, conversationCreatedAt, conversationUpdatedAt, conversationRouteName, conversationMessageModel, getInternals, conversationMetadata, conversationName) => {\n    if (!conversationId) {\n        throw new Error(`An error occurred converting a ${conversationRouteName} conversation: Missing ID`);\n    }\n    return {\n        id: conversationId,\n        createdAt: conversationCreatedAt,\n        updatedAt: conversationUpdatedAt,\n        metadata: conversationMetadata,\n        name: conversationName,\n        onMessage: createOnMessageFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        sendMessage: createSendMessageFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        listMessages: createListMessagesFunction(client, modelIntrospection, conversationId, conversationMessageModel, getInternals),\n    };\n};\n\nexport { convertItemToConversation };\n//# sourceMappingURL=convertItemToConversation.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createCreateConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async () => {\n    const get = getFactory(client, modelIntrospection, conversationModel, 'CREATE', getInternals, false, getCustomUserAgentDetails(AiAction.CreateConversation));\n    const { data, errors } = await get();\n    return {\n        data: convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name),\n        errors,\n    };\n};\n\nexport { createCreateConversationFunction };\n//# sourceMappingURL=createCreateConversationFunction.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const get = getFactory(client, modelIntrospection, conversationModel, 'GET', getInternals, false, getCustomUserAgentDetails(AiAction.GetConversation));\n    const { data, errors } = await get({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data.id, data.createdAt, data.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n\nexport { createGetConversationFunction };\n//# sourceMappingURL=createGetConversationFunction.mjs.map\n","import { listFactory } from '../operations/list.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createListConversationsFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListConversations));\n    const { data, nextToken, errors } = await list(input);\n    return {\n        data: data.map((datum) => {\n            return convertItemToConversation(client, modelIntrospection, datum.id, datum.createdAt, datum.updatedAt, conversationRouteName, conversationMessageModel, getInternals, datum?.metadata, datum?.name);\n        }),\n        nextToken,\n        errors,\n    };\n};\n\nexport { createListConversationsFunction };\n//# sourceMappingURL=createListConversationsFunction.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createDeleteConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const deleteOperation = getFactory(client, modelIntrospection, conversationModel, 'DELETE', getInternals, false, getCustomUserAgentDetails(AiAction.DeleteConversation));\n    const { data, errors } = await deleteOperation({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n\nexport { createDeleteConversationFunction };\n//# sourceMappingURL=createDeleteConversationFunction.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst generateEnumsProperty = (graphqlConfig) => {\n    const modelIntrospection = graphqlConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const enums = {};\n    for (const [_, enumData] of Object.entries(modelIntrospection.enums)) {\n        enums[enumData.name] = {\n            values: () => enumData.values,\n        };\n    }\n    return enums;\n};\n\nexport { generateEnumsProperty };\n//# sourceMappingURL=generateEnumsProperty.mjs.map\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleListGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\n\nfunction indexQueryFactory(client, modelIntrospection, model, indexMeta, getInternals, context = false) {\n    const indexQueryWithContext = (contextSpec, args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        }, contextSpec);\n    };\n    const indexQuery = (args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        });\n    };\n    return context ? indexQueryWithContext : indexQuery;\n}\nfunction processGraphQlResponse(modelIntroSchema, modelName, result, selectionSet, modelInitializer) {\n    const { data, extensions } = result;\n    const [key] = Object.keys(data);\n    if (data[key].items) {\n        const flattenedResult = data[key].items.map((value) => flattenItems(modelIntroSchema, modelName, value));\n        return {\n            data: selectionSet ? flattenedResult : modelInitializer(flattenedResult),\n            nextToken: data[key].nextToken,\n            extensions,\n        };\n    }\n    // Index queries are always list queries. No `items`? No flattening needed.\n    return {\n        data: data[key],\n        nextToken: data[key].nextToken,\n        extensions,\n    };\n}\nfunction _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, args, contextSpec) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, name, 'INDEX_QUERY', args, indexMeta);\n        const variables = buildGraphQLVariables(model, 'INDEX_QUERY', args, modelIntrospection, indexMeta);\n        const auth = authModeParams(client, getInternals, args);\n        const modelInitializer = (flattenedResult) => initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n        try {\n            const headers = getCustomHeaders(client, getInternals, args?.headers);\n            const graphQlParams = {\n                ...auth,\n                query,\n                variables,\n            };\n            const requestArgs = [graphQlParams, headers];\n            if (contextSpec !== undefined) {\n                requestArgs.unshift(contextSpec);\n            }\n            const basePromise = client.graphql(...requestArgs);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const response = await extendedPromise;\n            if (response.data !== undefined) {\n                return processGraphQlResponse(modelIntrospection, name, response, args?.selectionSet, modelInitializer);\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value:\n             *   `data: { listByExampleId: null }`\n             * 4) an actual record:\n             *   `data: { listByExampleId: items: [{ id: '1', ...etc } }]`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key]?.items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        return {\n                            data: args?.selectionSet\n                                ? flattenedResult\n                                : modelInitializer(flattenedResult),\n                            nextToken: data[key]?.nextToken,\n                        };\n                    }\n                }\n                // response is of type `data: { listByExampleId: null }`\n                return {\n                    data: data[key],\n                    nextToken: data[key]?.nextToken,\n                };\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { indexQueryFactory };\n//# sourceMappingURL=indexQuery.mjs.map\n","import { map } from 'rxjs';\nimport { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction subscriptionFactory(client, modelIntrospection, model, operation, getInternals) {\n    const { name } = model;\n    const subscription = (args) => {\n        const query = generateGraphQLDocument(modelIntrospection, name, operation, args);\n        const variables = buildGraphQLVariables(model, operation, args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const observable = client.graphql({\n            ...auth,\n            query,\n            variables,\n        }, headers);\n        return observable.pipe(map((value) => {\n            const [key] = Object.keys(value.data);\n            const data = value.data[key];\n            const flattenedResult = flattenItems(modelIntrospection, name, data);\n            if (flattenedResult === null) {\n                return null;\n            }\n            else if (args?.selectionSet) {\n                return flattenedResult;\n            }\n            else {\n                const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken);\n                return initialized;\n            }\n        }));\n    };\n    return subscription;\n}\n\nexport { subscriptionFactory };\n//# sourceMappingURL=subscription.mjs.map\n","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Iterates through a collection to find a matching item and returns the index.\n *\n * @param needle The item to search for\n * @param haystack The collection to search\n * @param keyFields The fields used to indicate a match\n * @returns Index of `needle` in `haystack`, otherwise -1 if not found.\n */\nfunction findIndexByFields(needle, haystack, keyFields) {\n    const searchObject = Object.fromEntries(keyFields.map((fieldName) => [fieldName, needle[fieldName]]));\n    for (let i = 0; i < haystack.length; i++) {\n        if (Object.keys(searchObject).every((k) => searchObject[k] === haystack[i][k])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nexport { findIndexByFields };\n//# sourceMappingURL=findIndexByFields.mjs.map\n","import { Observable } from 'rxjs';\nimport { resolvePKFields } from '../../utils/resolvePKFields.mjs';\nimport { findIndexByFields } from '../../utils/findIndexByFields.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction observeQueryFactory(models, model) {\n    const { name } = model;\n    const observeQuery = (arg) => new Observable((subscriber) => {\n        // what we'll be sending to our subscribers\n        const items = [];\n        // To enqueue subscription messages while we collect our initial\n        // result set.\n        const messageQueue = [];\n        // operation to take when message(s) arrive.\n        // this operation will be swapped out once initial \"sync\" is complete\n        // to immediately ingest messsages.\n        let receiveMessages = (...messages) => {\n            return messageQueue.push(...messages);\n        };\n        // start subscriptions\n        const onCreateSub = models[name].onCreate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'create' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onCreate', error });\n            },\n        });\n        const onUpdateSub = models[name].onUpdate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'update' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onUpdate', error });\n            },\n        });\n        const onDeleteSub = models[name].onDelete(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'delete' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onDelete', error });\n            },\n        });\n        // consumes a list of messages and sends a snapshot\n        function ingestMessages(messages) {\n            for (const message of messages) {\n                const idx = findIndexByFields(message.item, items, pkFields);\n                switch (message.type) {\n                    case 'create':\n                        if (idx < 0)\n                            items.push(message.item);\n                        break;\n                    case 'update':\n                        if (idx >= 0)\n                            items[idx] = message.item;\n                        break;\n                    case 'delete':\n                        if (idx >= 0)\n                            items.splice(idx, 1);\n                        break;\n                    default:\n                        console.error('Unrecognized message in observeQuery.', message);\n                }\n            }\n            subscriber.next({\n                items,\n                isSynced: true,\n            });\n        }\n        const pkFields = resolvePKFields(model);\n        // initial results\n        (async () => {\n            let firstPage = true;\n            let nextToken = null;\n            while (!subscriber.closed && (firstPage || nextToken)) {\n                firstPage = false;\n                const { data: page, errors, nextToken: _nextToken, } = await models[name].list({ ...arg, nextToken });\n                nextToken = _nextToken;\n                items.push(...page);\n                // if there are no more pages and no items we already know about\n                // that need to be merged in from sub, we're \"synced\"\n                const isSynced = messageQueue.length === 0 &&\n                    (nextToken === null || nextToken === undefined);\n                subscriber.next({\n                    items,\n                    isSynced,\n                });\n                if (Array.isArray(errors)) {\n                    for (const error of errors) {\n                        subscriber.error(error);\n                    }\n                }\n            }\n            // play through the queue\n            if (messageQueue.length > 0) {\n                ingestMessages(messageQueue);\n            }\n            // switch the queue to write directly to the items collection\n            receiveMessages = (...messages) => {\n                ingestMessages(messages);\n                return items.length;\n            };\n        })();\n        // when subscriber unsubscribes, tear down internal subs\n        return () => {\n            // 1. tear down internal subs\n            onCreateSub.unsubscribe();\n            onUpdateSub.unsubscribe();\n            onDeleteSub.unsubscribe();\n            // 2. there is no need to explicitly stop paging. instead, we\n            // just check `subscriber.closed` above before fetching each page.\n        };\n    });\n    return observeQuery;\n}\n\nexport { observeQueryFactory };\n//# sourceMappingURL=observeQuery.mjs.map\n","/**\n * Given a SchemaModel from a ModelIntrospectionSchema, returns the primary key\n * as an array of field names.\n *\n * @param model The model object\n * @returns Array of field names\n */\nfunction resolvePKFields(model) {\n    const { primaryKeyFieldName, sortKeyFieldNames } = model.primaryKeyInfo;\n    return [primaryKeyFieldName, ...sortKeyFieldNames];\n}\n\nexport { resolvePKFields };\n//# sourceMappingURL=resolvePKFields.mjs.map\n","import { graphQLOperationsInfo } from './APIClient.mjs';\n\nconst attributeIsSecondaryIndex = (attr) => {\n    return (attr.type === 'key' &&\n        // presence of `name` property distinguishes GSI from primary index\n        attr.properties?.name &&\n        attr.properties?.queryField &&\n        attr.properties?.fields.length > 0);\n};\nconst getSecondaryIndexesFromSchemaModel = (model) => {\n    const idxs = model.attributes\n        ?.filter(attributeIsSecondaryIndex)\n        .map((attr) => {\n        const queryField = attr.properties.queryField;\n        const [pk, ...sk] = attr.properties.fields;\n        return {\n            queryField,\n            pk,\n            sk,\n        };\n    });\n    return idxs || [];\n};\n/**\n * returns graphQLOperationsInfo, but filters out operations that were disabled via model().disableOperations([...])\n */\nconst excludeDisabledOps = (mis, modelName) => {\n    /* Example model attributes in MIS {\n      \"type\": \"model\",\n      \"properties\": {\n        \"subscriptions\": null,\n        \"mutations\": { \"delete\": null }\n        \"timestamps\": null\n      } }*/\n    const modelAttrs = mis.models[modelName].attributes?.find((attr) => attr.type === 'model');\n    const coarseToFineDict = {\n        queries: ['list', 'get', 'observeQuery'],\n        mutations: ['create', 'update', 'delete'],\n        subscriptions: ['onCreate', 'onUpdate', 'onDelete'],\n    };\n    const disabledOps = [];\n    if (!modelAttrs) {\n        return graphQLOperationsInfo;\n    }\n    if (modelAttrs.properties) {\n        for (const [key, value] of Object.entries(modelAttrs.properties)) {\n            // model.properties can contain other values that are not relevant to disabling ops, e.g. timestamps\n            if (!(key in coarseToFineDict)) {\n                continue;\n            }\n            if (value === null) {\n                // coarse-grained disable, e.g. \"subscriptions\": null,\n                disabledOps.push(...coarseToFineDict[key]);\n            }\n            else if (value instanceof Object) {\n                // fine-grained, e.g. \"mutations\": { \"delete\": null }\n                disabledOps.push(...Object.keys(value));\n            }\n        }\n    }\n    // observeQuery only exists on the client side, so can't be explicitly disabled via schema builder.\n    // It's unusable without `list`\n    if (disabledOps.includes('list')) {\n        disabledOps.push('observeQuery');\n    }\n    // graphQLOperationsInfo keys are in caps\n    const disabledOpsUpper = disabledOps.map((op) => op.toUpperCase());\n    const filteredGraphQLOperations = Object.fromEntries(Object.entries(graphQLOperationsInfo).filter(([key]) => !disabledOpsUpper.includes(key)));\n    return filteredGraphQLOperations;\n};\n\nexport { excludeDisabledOps, getSecondaryIndexesFromSchemaModel };\n//# sourceMappingURL=clientUtils.mjs.map\n","import { generateCustomQueriesProperty, generateCustomMutationsProperty, generateCustomSubscriptionsProperty } from './internals/generateCustomOperationsProperty.mjs';\nimport { generateConversationsProperty } from './internals/utils/clientProperties/generateConversationsProperty.mjs';\nimport { generateGenerationsProperty } from './internals/utils/clientProperties/generateGenerationsProperty.mjs';\nimport { generateEnumsProperty } from './internals/utils/clientProperties/generateEnumsProperty.mjs';\nimport { generateModelsProperty } from './internals/utils/clientProperties/generateModelsProperty.mjs';\nimport { upgradeClientCancellation } from './internals/cancellation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction addSchemaToClient(client, apiGraphqlConfig, getInternals) {\n    upgradeClientCancellation(client);\n    client.models = generateModelsProperty(client, apiGraphqlConfig, getInternals);\n    client.enums = generateEnumsProperty(apiGraphqlConfig);\n    client.queries = generateCustomQueriesProperty(client, apiGraphqlConfig, getInternals);\n    client.mutations = generateCustomMutationsProperty(client, apiGraphqlConfig, getInternals);\n    client.subscriptions = generateCustomSubscriptionsProperty(client, apiGraphqlConfig, getInternals);\n    client.conversations = generateConversationsProperty(client, apiGraphqlConfig, getInternals);\n    client.generations = generateGenerationsProperty(client, apiGraphqlConfig, getInternals);\n    return client;\n}\n\nexport { addSchemaToClient };\n//# sourceMappingURL=addSchemaToClient.mjs.map\n","import { listFactory } from '../../operations/list.mjs';\nimport { indexQueryFactory } from '../../operations/indexQuery.mjs';\nimport { getFactory } from '../../operations/get.mjs';\nimport { subscriptionFactory } from '../../operations/subscription.mjs';\nimport { observeQueryFactory } from '../../operations/observeQuery.mjs';\nimport { excludeDisabledOps, getSecondaryIndexesFromSchemaModel } from '../../clientUtils.mjs';\n\nfunction generateModelsProperty(client, apiGraphQLConfig, getInternals) {\n    const models = {};\n    const modelIntrospection = apiGraphQLConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const SUBSCRIPTION_OPS = ['ONCREATE', 'ONUPDATE', 'ONDELETE'];\n    for (const model of Object.values(modelIntrospection.models)) {\n        const { name } = model;\n        models[name] = {};\n        const enabledModelOps = excludeDisabledOps(modelIntrospection, name);\n        Object.entries(enabledModelOps).forEach(([key, { operationPrefix }]) => {\n            const operation = key;\n            if (operation === 'LIST') {\n                models[name][operationPrefix] = listFactory(client, modelIntrospection, model, getInternals);\n            }\n            else if (SUBSCRIPTION_OPS.includes(operation)) {\n                models[name][operationPrefix] = subscriptionFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n            else if (operation === 'OBSERVEQUERY') {\n                models[name][operationPrefix] = observeQueryFactory(models, model);\n            }\n            else {\n                models[name][operationPrefix] = getFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n        });\n        const secondaryIdxs = getSecondaryIndexesFromSchemaModel(model);\n        for (const idx of secondaryIdxs) {\n            models[name][idx.queryField] = indexQueryFactory(client, modelIntrospection, model, idx, getInternals);\n        }\n    }\n    return models;\n}\n\nexport { generateModelsProperty };\n//# sourceMappingURL=generateModelsProperty.mjs.map\n","import { createCreateConversationFunction } from '../../ai/createCreateConversationFunction.mjs';\nimport { createGetConversationFunction } from '../../ai/createGetConversationFunction.mjs';\nimport { createListConversationsFunction } from '../../ai/createListConversationsFunction.mjs';\nimport { createDeleteConversationFunction } from '../../ai/createDeleteConversationFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction generateConversationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // conversations will be absent from model intro schema if no conversation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.conversations) {\n        return {};\n    }\n    const conversations = {};\n    for (const { name, conversation, message, models, nonModels, enums, } of Object.values(modelIntrospection.conversations)) {\n        const conversationModel = models[conversation.modelName];\n        const conversationMessageModel = models[message.modelName];\n        if (!conversationModel || !conversationMessageModel) {\n            return {};\n        }\n        const conversationModelIntrospection = {\n            ...modelIntrospection,\n            models: {\n                ...modelIntrospection.models,\n                ...models,\n            },\n            nonModels: {\n                ...modelIntrospection.nonModels,\n                ...nonModels,\n            },\n            enums: {\n                ...modelIntrospection.enums,\n                ...enums,\n            },\n        };\n        conversations[name] = {\n            create: createCreateConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            get: createGetConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            delete: createDeleteConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            list: createListConversationsFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n        };\n    }\n    return conversations;\n}\n\nexport { generateConversationsProperty };\n//# sourceMappingURL=generateConversationsProperty.mjs.map\n","import { customOpFactory } from '../../operations/custom.mjs';\nimport { getCustomUserAgentDetails, AiAction } from '../../ai/getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction generateGenerationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // generations will be absent from model intro schema if no generation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.generations) {\n        return {};\n    }\n    const generations = {};\n    for (const generation of Object.values(modelIntrospection.generations)) {\n        generations[generation.name] = customOpFactory(client, modelIntrospection, 'query', generation, false, getInternals, getCustomUserAgentDetails(AiAction.Generation));\n    }\n    return generations;\n}\n\nexport { generateGenerationsProperty };\n//# sourceMappingURL=generateGenerationsProperty.mjs.map\n","export { CONTROL_MSG, ConnectionState } from './PubSub.mjs';\n\nvar GraphQLAuthError;\n(function (GraphQLAuthError) {\n    GraphQLAuthError[\"NO_API_KEY\"] = \"No api-key configured\";\n    GraphQLAuthError[\"NO_CURRENT_USER\"] = \"No current user\";\n    GraphQLAuthError[\"NO_CREDENTIALS\"] = \"No credentials\";\n    GraphQLAuthError[\"NO_FEDERATED_JWT\"] = \"No federated jwt\";\n    GraphQLAuthError[\"NO_AUTH_TOKEN\"] = \"No auth token specified\";\n})(GraphQLAuthError || (GraphQLAuthError = {}));\nconst __amplify = Symbol('amplify');\nconst __authMode = Symbol('authMode');\nconst __authToken = Symbol('authToken');\nconst __headers = Symbol('headers');\nfunction getInternals(client) {\n    const c = client;\n    return {\n        amplify: c[__amplify],\n        authMode: c[__authMode],\n        authToken: c[__authToken],\n        headers: c[__headers],\n    };\n}\n\nexport { GraphQLAuthError, __amplify, __authMode, __authToken, __headers, getInternals };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isApiGraphQLConfig(apiGraphQLConfig) {\n    return apiGraphQLConfig !== undefined;\n}\n\nexport { isApiGraphQLConfig };\n//# sourceMappingURL=isApiGraphQLProviderConfig.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nvar Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nvar AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nvar ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nvar AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nvar DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nvar GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nvar InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nvar InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nvar PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nvar PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nvar PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nvar StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n\nexport { AiAction, AnalyticsAction, ApiAction, AuthAction, Category, DataStoreAction, Framework, GeoAction, InAppMessagingAction, InteractionsAction, PredictionsAction, PubSubAction, PushNotificationAction, StorageAction };\n//# sourceMappingURL=types.mjs.map\n","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { operate } from '../util/lift';\nexport function catchError(selector) {\n    return operate(function (source, subscriber) {\n        var innerSub = null;\n        var syncUnsub = false;\n        var handledResult;\n        innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n            handledResult = innerFrom(selector(err, catchError(selector)(source)));\n            if (innerSub) {\n                innerSub.unsubscribe();\n                innerSub = null;\n                handledResult.subscribe(subscriber);\n            }\n            else {\n                syncUnsub = true;\n            }\n        }));\n        if (syncUnsub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            handledResult.subscribe(subscriber);\n        }\n    });\n}\n//# sourceMappingURL=catchError.js.map","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\n\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n//# sourceMappingURL=index.mjs.map\n","// generated by genversion\nconst version = '6.10.2';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst globalExists = () => {\n    return typeof global !== 'undefined';\n};\nconst globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nconst windowExists = () => {\n    return typeof window !== 'undefined';\n};\nconst documentExists = () => {\n    return typeof document !== 'undefined';\n};\nconst processExists = () => {\n    return typeof process !== 'undefined';\n};\nconst keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n\nexport { documentExists, globalExists, globalThisExists, keyPrefixMatch, processExists, windowExists };\n//# sourceMappingURL=helpers.mjs.map\n","import { Framework } from '../types.mjs';\nimport { reactWebDetect, reactSSRDetect } from './React.mjs';\nimport { vueWebDetect, vueSSRDetect } from './Vue.mjs';\nimport { svelteWebDetect, svelteSSRDetect } from './Svelte.mjs';\nimport { nextWebDetect, nextSSRDetect } from './Next.mjs';\nimport { nuxtWebDetect, nuxtSSRDetect } from './Nuxt.mjs';\nimport { angularWebDetect, angularSSRDetect } from './Angular.mjs';\nimport { reactNativeDetect } from './ReactNative.mjs';\nimport { expoDetect } from './Expo.mjs';\nimport { webDetect } from './Web.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nfunction detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n\nexport { detect };\n//# sourceMappingURL=index.mjs.map\n","import { globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with expo 48 / react-native 0.71.3\nfunction expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n\nexport { expoDetect };\n//# sourceMappingURL=Expo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nfunction reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n\nexport { reactNativeDetect };\n//# sourceMappingURL=ReactNative.mjs.map\n","import { windowExists, globalExists, keyPrefixMatch } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with next 13.4 / react 18.2\nfunction nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nfunction nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n\nexport { nextSSRDetect, nextWebDetect };\n//# sourceMappingURL=Next.mjs.map\n","import { windowExists, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with nuxt 2.15 / vue 2.7\nfunction nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nfunction nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n\nexport { nuxtSSRDetect, nuxtWebDetect };\n//# sourceMappingURL=Nuxt.mjs.map\n","import { documentExists, processExists, windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with @angular/core 16.0.0\nfunction angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nfunction angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n\nexport { angularSSRDetect, angularWebDetect };\n//# sourceMappingURL=Angular.mjs.map\n","import { documentExists, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react 18.2 - built using Vite\nfunction reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nfunction reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n\nexport { reactSSRDetect, reactWebDetect };\n//# sourceMappingURL=React.mjs.map\n","import { windowExists, keyPrefixMatch, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with vue 3.3.2\nfunction vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nfunction vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n\nexport { vueSSRDetect, vueWebDetect };\n//# sourceMappingURL=Vue.mjs.map\n","import { windowExists, keyPrefixMatch, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with svelte 3.59\nfunction svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nfunction svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n\nexport { svelteSSRDetect, svelteWebDetect };\n//# sourceMappingURL=Svelte.mjs.map\n","import { windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction webDetect() {\n    return windowExists();\n}\n\nexport { webDetect };\n//# sourceMappingURL=Web.mjs.map\n","import { Framework } from './types.mjs';\nimport { detect } from './detection/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nconst frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nconst detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nconst observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nfunction clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n\nexport { clearCache, detectFramework, frameworkChangeObservers, observeFrameworkChanges };\n//# sourceMappingURL=detectFramework.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nconst setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nconst getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n\nexport { getCustomUserAgent, setCustomUserAgent };\n//# sourceMappingURL=customUserAgent.mjs.map\n","import { Framework } from './types.mjs';\nimport { version } from './version.mjs';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework.mjs';\nimport { getCustomUserAgent } from './customUserAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nconst sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nconst Platform = new PlatformBuilder();\nconst getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nconst getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n\nexport { Platform, getAmplifyUserAgent, getAmplifyUserAgentObject, sanitizeAmplifyVersion };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n\nexport { AmplifyError };\n//# sourceMappingURL=AmplifyError.mjs.map\n","import { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Error class for errors that associated with unsuccessful HTTP responses.\n * It's throw by API category REST API handlers and GraphQL query handlers for now.\n */\nclass ApiError extends AmplifyError {\n    /**\n     * The unwrapped HTTP response causing the given API error.\n     */\n    get response() {\n        return this._response\n            ? replicateApiErrorResponse(this._response)\n            : undefined;\n    }\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = ApiError;\n        Object.setPrototypeOf(this, ApiError.prototype);\n        if (params.response) {\n            this._response = params.response;\n        }\n    }\n}\nconst replicateApiErrorResponse = (response) => ({\n    ...response,\n    headers: { ...response.headers },\n});\n\nexport { ApiError };\n//# sourceMappingURL=APIError.mjs.map\n","import { ApiError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass RestApiError extends ApiError {\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = RestApiError;\n        Object.setPrototypeOf(this, RestApiError.prototype);\n    }\n}\n\nexport { RestApiError };\n//# sourceMappingURL=RestApiError.mjs.map\n","import { RestApiError } from './RestApiError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Internal-only class for CanceledError.\n *\n * @internal\n */\nclass CanceledError extends RestApiError {\n    constructor(params = {}) {\n        super({\n            name: 'CanceledError',\n            message: 'Request is canceled by user',\n            ...params,\n        });\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = CanceledError;\n        Object.setPrototypeOf(this, CanceledError.prototype);\n    }\n}\n/**\n * Check if an error is caused by user calling `cancel()` in REST API.\n *\n * @note This function works **ONLY** for errors thrown by REST API. For GraphQL APIs, use `client.isCancelError(error)`\n *   instead. `client` is generated from  `generateClient()` API from `aws-amplify/api`.\n *\n * @param {unknown} error The unknown exception to be checked.\n * @returns - A boolean indicating if the error was from an upload cancellation\n */\nconst isCancelError = (error) => !!error && error instanceof CanceledError;\n\nexport { CanceledError, isCancelError };\n//# sourceMappingURL=CanceledError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar RestApiValidationErrorCode;\n(function (RestApiValidationErrorCode) {\n    RestApiValidationErrorCode[\"InvalidApiName\"] = \"InvalidApiName\";\n})(RestApiValidationErrorCode || (RestApiValidationErrorCode = {}));\nconst validationErrorMap = {\n    [RestApiValidationErrorCode.InvalidApiName]: {\n        message: 'API name is invalid.',\n        recoverySuggestion: 'Check if the API name matches the one in your configuration or `aws-exports.js`',\n    },\n};\n\nexport { RestApiValidationErrorCode, validationErrorMap };\n//# sourceMappingURL=validation.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n\nexport { parseMetadata };\n//# sourceMappingURL=responseInfo.mjs.map\n","import { parseJsonError } from '@aws-amplify/core/internals/aws-client-utils';\nimport { RestApiError } from '../errors/RestApiError.mjs';\nimport '../errors/validation.mjs';\n\n/**\n * Parses both AWS and non-AWS error responses coming from the users' backend code.\n * * AWS errors generated by the AWS services(e.g. API Gateway, Bedrock). They can be Signature errors,\n *   ClockSkew errors, etc. These responses will be parsed to errors with proper name and message from the AWS\n *   services.\n * * non-AWS errors thrown by the user code. They can contain any headers or body. Users need to access the\n *   error.response to get the headers and body and parse them accordingly. The JS error name and message will\n *   be `UnknownError` and `Unknown error` respectively.\n */\nconst parseRestApiServiceError = async (response) => {\n    if (!response) {\n        // Response is not considered an error.\n        return;\n    }\n    const parsedAwsError = await parseJsonError(stubErrorResponse(response));\n    if (!parsedAwsError) ;\n    else {\n        const bodyText = await response.body?.text();\n        return buildRestApiError(parsedAwsError, {\n            statusCode: response.statusCode,\n            headers: response.headers,\n            body: bodyText,\n        });\n    }\n};\n/**\n * The response object needs to be stub here because the parseAwsJsonError assumes the response body to be valid JSON.\n * Although this is true for AWS services, it is not true for responses from user's code. Once the response body is\n * unwrapped as JSON(and fail), it cannot be read as text again. Therefore, we need to stub the response body here to\n * make sure we can read the error response body as a JSON, and may fall back to read as text if it is not a valid JSON.\n */\nconst stubErrorResponse = (response) => {\n    let bodyTextPromise;\n    const bodyProxy = new Proxy(response.body, {\n        get(target, prop, receiver) {\n            if (prop === 'json') {\n                // For potential AWS errors, error parser will try to parse the body as JSON first.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    try {\n                        return JSON.parse(await bodyTextPromise);\n                    }\n                    catch (error) {\n                        // If response body is not a valid JSON, we stub it to be an empty object and eventually parsed\n                        // as an unknown error\n                        return {};\n                    }\n                };\n            }\n            else if (prop === 'text') {\n                // For non-AWS errors, users can access the body as a string as a fallback.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    return bodyTextPromise;\n                };\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    const responseProxy = new Proxy(response, {\n        get(target, prop, receiver) {\n            if (prop === 'body') {\n                return bodyProxy;\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    return responseProxy;\n};\n/**\n * Utility to create a new RestApiError from a service error.\n */\nconst buildRestApiError = (error, response) => {\n    const restApiError = new RestApiError({\n        name: error?.name,\n        message: error.message,\n        underlyingError: error,\n        response,\n    });\n    // $metadata is only required for backwards compatibility.\n    return Object.assign(restApiError, { $metadata: error.$metadata });\n};\n\nexport { parseRestApiServiceError };\n//# sourceMappingURL=serviceError.mjs.map\n","import { parseMetadata } from './responseInfo.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nconst parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nconst parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n\nexport { parseJsonBody, parseJsonError };\n//# sourceMappingURL=json.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('RestApis');\n\nexport { logger };\n//# sourceMappingURL=logger.mjs.map\n","import { CanceledError } from '../errors/CanceledError.mjs';\nimport '@aws-amplify/core/internals/utils';\nimport '../errors/validation.mjs';\nimport { parseRestApiServiceError } from './serviceError.mjs';\nimport { logger } from './logger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction createCancellableOperation(handler, abortController) {\n    const isInternalPost = (targetHandler) => !!abortController;\n    // For creating a cancellable operation for public REST APIs, we need to create an AbortController\n    // internally. Whereas for internal POST APIs, we need to accept in the AbortController from the\n    // callers.\n    const publicApisAbortController = new AbortController();\n    const publicApisAbortSignal = publicApisAbortController.signal;\n    const internalPostAbortSignal = abortController?.signal;\n    let abortReason;\n    const job = async () => {\n        try {\n            const response = await (isInternalPost(handler)\n                ? handler()\n                : handler(publicApisAbortSignal));\n            if (response.statusCode >= 300) {\n                throw await parseRestApiServiceError(response);\n            }\n            return response;\n        }\n        catch (error) {\n            const abortSignal = internalPostAbortSignal ?? publicApisAbortSignal;\n            const message = abortReason ?? abortSignal.reason;\n            if (error.name === 'AbortError' || abortSignal?.aborted === true) {\n                const canceledError = new CanceledError({\n                    ...(message && { message }),\n                    underlyingError: error,\n                    recoverySuggestion: 'The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously.',\n                });\n                logger.debug(error);\n                throw canceledError;\n            }\n            logger.debug(error);\n            throw error;\n        }\n    };\n    if (isInternalPost()) {\n        return job();\n    }\n    else {\n        const cancel = (abortMessage) => {\n            if (publicApisAbortSignal.aborted === true) {\n                return;\n            }\n            publicApisAbortController.abort(abortMessage);\n            // If abort reason is not supported, set a scoped reasons instead. The reason property inside an\n            // AbortSignal is a readonly property and trying to set it would throw an error.\n            if (abortMessage && publicApisAbortSignal.reason !== abortMessage) {\n                abortReason = abortMessage;\n            }\n        };\n        return { response: job(), cancel };\n    }\n}\n\nexport { createCancellableOperation };\n//# sourceMappingURL=createCancellableOperation.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_REST_IAM_SIGNING_SERVICE = 'execute-api';\nconst DEFAULT_APPSYNC_API_SERVICE = 'appsync-api';\nconst DEFAULT_IAM_SIGNING_REGION = 'us-east-1';\n/**\n * The REST endpoints generated by API Gateway\n * @see {@link https://docs.aws.amazon.com/general/latest/gr/apigateway.html#apigateway_region_data_plane}\n */\nconst APIG_HOSTNAME_PATTERN = /^.+\\.([a-z0-9-]+)\\.([a-z0-9-]+)\\.amazonaws\\.com/;\n\nexport { APIG_HOSTNAME_PATTERN, DEFAULT_APPSYNC_API_SERVICE, DEFAULT_IAM_SIGNING_REGION, DEFAULT_REST_IAM_SIGNING_SERVICE };\n//# sourceMappingURL=constants.mjs.map\n","import { DEFAULT_REST_IAM_SIGNING_SERVICE, DEFAULT_IAM_SIGNING_REGION, APIG_HOSTNAME_PATTERN } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Infer the signing service and region from the given URL, and for REST API only, from the Amplify configuration.\n * It supports raw API Gateway endpoint and AppSync endpoint.\n *\n * @internal\n */\nconst parseSigningInfo = (url, restApiOptions) => {\n    const { service: signingService = DEFAULT_REST_IAM_SIGNING_SERVICE, region: signingRegion = DEFAULT_IAM_SIGNING_REGION, } = restApiOptions?.amplify.getConfig()?.API?.REST?.[restApiOptions?.apiName] ??\n        {};\n    const { hostname } = url;\n    const [, service, region] = APIG_HOSTNAME_PATTERN.exec(hostname) ?? [];\n    if (service === DEFAULT_REST_IAM_SIGNING_SERVICE) {\n        // The configured endpoint is an API Gateway endpoint\n        // @see: https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-call-api.html\n        return {\n            service,\n            region: region ?? signingRegion,\n        };\n    }\n    else if (service === 'appsync-api') {\n        // AppSync endpoint is internally supported because GraphQL operation will send request using POST handler.\n        // example: https://xxxx.appsync-api.us-east-1.amazonaws.com/graphql\n        return {\n            service: 'appsync',\n            region: region ?? signingRegion,\n        };\n    }\n    else {\n        return {\n            service: signingService,\n            region: signingRegion,\n        };\n    }\n};\n\nexport { parseSigningInfo };\n//# sourceMappingURL=parseSigningInfo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Determines if IAM authentication should be applied for a GraphQL request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header, no `x-api-key` header, and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nconst isIamAuthApplicableForGraphQL = ({ headers }, signingServiceInfo) => !headers.authorization && !headers['x-api-key'] && !!signingServiceInfo;\n/**\n * Determines if IAM authentication should be applied for a REST request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nconst isIamAuthApplicableForRest = ({ headers }, signingServiceInfo) => !headers.authorization && !!signingServiceInfo;\n\nexport { isIamAuthApplicableForGraphQL, isIamAuthApplicableForRest };\n//# sourceMappingURL=isIamAuthApplicable.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n\nexport { AmplifyErrorCode };\n//# sourceMappingURL=errors.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nconst isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n\nexport { isClockSkewError };\n//# sourceMappingURL=isClockSkewError.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n\nexport { getRetryDecider };\n//# sourceMappingURL=defaultRetryDecider.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nfunction jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","import '../../../utils/getClientInfo/getClientInfo.mjs';\nimport { jitteredBackoff as jitteredBackoff$1 } from '../../../utils/retry/jitteredBackoff.mjs';\nimport '../../../utils/retry/retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nconst DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\nconst jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoff$1(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_RETRY_ATTEMPTS = 3;\n/**\n * Retry middleware\n */\nconst retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n\nexport { retryMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns signed headers.\n *\n * @param headers `headers` from the request.\n * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers\n * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.\n *\n * @internal\n */\nconst getSignedHeaders = (headers) => Object.keys(headers)\n    .map(key => key.toLowerCase())\n    .sort()\n    .join(';');\n\nexport { getSignedHeaders };\n//# sourceMappingURL=getSignedHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// query params\nconst ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';\nconst AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';\nconst CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';\nconst EXPIRES_QUERY_PARAM = 'X-Amz-Expires';\nconst REGION_SET_PARAM = 'X-Amz-Region-Set';\nconst SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';\nconst SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';\nconst TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';\n// headers\nconst AUTH_HEADER = 'authorization';\nconst HOST_HEADER = 'host';\nconst AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nconst TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\n// identifiers\nconst KEY_TYPE_IDENTIFIER = 'aws4_request';\nconst SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';\nconst SIGNATURE_IDENTIFIER = 'AWS4';\n// preset values\nconst EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\nconst UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';\n\nexport { ALGORITHM_QUERY_PARAM, AMZ_DATE_HEADER, AMZ_DATE_QUERY_PARAM, AUTH_HEADER, CREDENTIAL_QUERY_PARAM, EMPTY_HASH, EXPIRES_QUERY_PARAM, HOST_HEADER, KEY_TYPE_IDENTIFIER, REGION_SET_PARAM, SHA256_ALGORITHM_IDENTIFIER, SIGNATURE_IDENTIFIER, SIGNATURE_QUERY_PARAM, SIGNED_HEADERS_QUERY_PARAM, TOKEN_HEADER, TOKEN_QUERY_PARAM, UNSIGNED_PAYLOAD };\n//# sourceMappingURL=constants.mjs.map\n","/**\n * @internal\n */\nexport var BLOCK_SIZE = 64;\n/**\n * @internal\n */\nexport var DIGEST_LENGTH = 32;\n/**\n * @internal\n */\nexport var KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/**\n * @internal\n */\nexport var INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n];\n/**\n * @internal\n */\nexport var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n//# sourceMappingURL=constants.js.map","import { BLOCK_SIZE, DIGEST_LENGTH, INIT, KEY, MAX_HASHABLE_LENGTH } from \"./constants\";\n/**\n * @internal\n */\nvar RawSha256 = /** @class */ (function () {\n    function RawSha256() {\n        this.state = Int32Array.from(INIT);\n        this.temp = new Int32Array(64);\n        this.buffer = new Uint8Array(64);\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        /**\n         * @internal\n         */\n        this.finished = false;\n    }\n    RawSha256.prototype.update = function (data) {\n        if (this.finished) {\n            throw new Error(\"Attempted to update an already finished hash.\");\n        }\n        var position = 0;\n        var byteLength = data.byteLength;\n        this.bytesHashed += byteLength;\n        if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n            throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n        }\n        while (byteLength > 0) {\n            this.buffer[this.bufferLength++] = data[position++];\n            byteLength--;\n            if (this.bufferLength === BLOCK_SIZE) {\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n        }\n    };\n    RawSha256.prototype.digest = function () {\n        if (!this.finished) {\n            var bitsHashed = this.bytesHashed * 8;\n            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n            var undecoratedLength = this.bufferLength;\n            bufferView.setUint8(this.bufferLength++, 0x80);\n            // Ensure the final block has enough room for the hashed length\n            if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n                for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                    bufferView.setUint8(i, 0);\n                }\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n            for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n            bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n            this.hashBuffer();\n            this.finished = true;\n        }\n        // The value in state is little-endian rather than big-endian, so flip\n        // each word into a new Uint8Array\n        var out = new Uint8Array(DIGEST_LENGTH);\n        for (var i = 0; i < 8; i++) {\n            out[i * 4] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return out;\n    };\n    RawSha256.prototype.hashBuffer = function () {\n        var _a = this, buffer = _a.buffer, state = _a.state;\n        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];\n        for (var i = 0; i < BLOCK_SIZE; i++) {\n            if (i < 16) {\n                this.temp[i] =\n                    ((buffer[i * 4] & 0xff) << 24) |\n                        ((buffer[i * 4 + 1] & 0xff) << 16) |\n                        ((buffer[i * 4 + 2] & 0xff) << 8) |\n                        (buffer[i * 4 + 3] & 0xff);\n            }\n            else {\n                var u = this.temp[i - 2];\n                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\n                u = this.temp[i - 15];\n                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\n                this.temp[i] =\n                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);\n            }\n            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^\n                ((state4 >>> 11) | (state4 << 21)) ^\n                ((state4 >>> 25) | (state4 << 7))) +\n                ((state4 & state5) ^ (~state4 & state6))) |\n                0) +\n                ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) |\n                0;\n            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^\n                ((state0 >>> 13) | (state0 << 19)) ^\n                ((state0 >>> 22) | (state0 << 10))) +\n                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\n                0;\n            state7 = state6;\n            state6 = state5;\n            state5 = state4;\n            state4 = (state3 + t1) | 0;\n            state3 = state2;\n            state2 = state1;\n            state1 = state0;\n            state0 = (t1 + t2) | 0;\n        }\n        state[0] += state0;\n        state[1] += state1;\n        state[2] += state2;\n        state[3] += state3;\n        state[4] += state4;\n        state[5] += state5;\n        state[6] += state6;\n        state[7] += state7;\n    };\n    return RawSha256;\n}());\nexport { RawSha256 };\n//# sourceMappingURL=RawSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromUtf8 as fromUtf8Browser } from \"@smithy/util-utf8\";\n// Quick polyfill\nvar fromUtf8 = typeof Buffer !== \"undefined\" && Buffer.from\n    ? function (input) { return Buffer.from(input, \"utf8\"); }\n    : fromUtf8Browser;\nexport function convertToBuffer(data) {\n    // Already a Uint8, do nothing\n    if (data instanceof Uint8Array)\n        return data;\n    if (typeof data === \"string\") {\n        return fromUtf8(data);\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n    return new Uint8Array(data);\n}\n//# sourceMappingURL=convertToBuffer.js.map","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","import { __awaiter, __generator } from \"tslib\";\nimport { BLOCK_SIZE } from \"./constants\";\nimport { RawSha256 } from \"./RawSha256\";\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nvar Sha256 = /** @class */ (function () {\n    function Sha256(secret) {\n        this.secret = secret;\n        this.hash = new RawSha256();\n        this.reset();\n    }\n    Sha256.prototype.update = function (toHash) {\n        if (isEmptyData(toHash) || this.error) {\n            return;\n        }\n        try {\n            this.hash.update(convertToBuffer(toHash));\n        }\n        catch (e) {\n            this.error = e;\n        }\n    };\n    /* This synchronous method keeps compatibility\n     * with the v2 aws-sdk.\n     */\n    Sha256.prototype.digestSync = function () {\n        if (this.error) {\n            throw this.error;\n        }\n        if (this.outer) {\n            if (!this.outer.finished) {\n                this.outer.update(this.hash.digest());\n            }\n            return this.outer.digest();\n        }\n        return this.hash.digest();\n    };\n    /* The underlying digest method here is synchronous.\n     * To keep the same interface with the other hash functions\n     * the default is to expose this as an async method.\n     * However, it can sometimes be useful to have a sync method.\n     */\n    Sha256.prototype.digest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.digestSync()];\n            });\n        });\n    };\n    Sha256.prototype.reset = function () {\n        this.hash = new RawSha256();\n        if (this.secret) {\n            this.outer = new RawSha256();\n            var inner = bufferFromSecret(this.secret);\n            var outer = new Uint8Array(BLOCK_SIZE);\n            outer.set(inner);\n            for (var i = 0; i < BLOCK_SIZE; i++) {\n                inner[i] ^= 0x36;\n                outer[i] ^= 0x5c;\n            }\n            this.hash.update(inner);\n            this.outer.update(outer);\n            // overwrite the copied key in memory\n            for (var i = 0; i < inner.byteLength; i++) {\n                inner[i] = 0;\n            }\n        }\n    };\n    return Sha256;\n}());\nexport { Sha256 };\nfunction bufferFromSecret(secret) {\n    var input = convertToBuffer(secret);\n    if (input.byteLength > BLOCK_SIZE) {\n        var bufferHash = new RawSha256();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n//# sourceMappingURL=jsSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isEmptyData(data) {\n    if (typeof data === \"string\") {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\n//# sourceMappingURL=isEmptyData.js.map","const SHORT_TO_HEX = {};\nconst HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","import { Sha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@smithy/util-hex-encoding';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: V6 update to different crypto dependency?\n/**\n * Returns the hashed data a `Uint8Array`.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns `Uint8Array` created from the data as input to a hash function.\n */\nconst getHashedData = (key, data) => {\n    const sha256 = new Sha256(key ?? undefined);\n    sha256.update(data);\n    // TODO: V6 flip to async digest\n    const hashedData = sha256.digestSync();\n    return hashedData;\n};\n/**\n * Returns the hashed data as a hex string.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.\n *\n * @internal\n */\nconst getHashedDataAsHex = (key, data) => {\n    const hashedData = getHashedData(key, data);\n    return toHex(hashedData);\n};\n\nexport { getHashedData, getHashedDataAsHex };\n//# sourceMappingURL=dataHashHelpers.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns canonical headers.\n *\n * @param headers Headers from the request.\n * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must\n * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,\n * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values\n * for a multi-value header using commas.\n *\n * @internal\n */\nconst getCanonicalHeaders = (headers) => Object.entries(headers)\n    .map(([key, value]) => ({\n    key: key.toLowerCase(),\n    value: value?.trim().replace(/\\s+/g, ' ') ?? '',\n}))\n    .sort((a, b) => (a.key < b.key ? -1 : 1))\n    .map(entry => `${entry.key}:${entry.value}\\n`)\n    .join('');\n\nexport { getCanonicalHeaders };\n//# sourceMappingURL=getCanonicalHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical query string.\n *\n * @param searchParams `searchParams` from the request url.\n * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,\n * including the space character. Encode names and values separately. If there are empty parameters, append the equals\n * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there\n * is no query string, use an empty string (\"\").\n *\n * @internal\n */\nconst getCanonicalQueryString = (searchParams) => Array.from(searchParams)\n    .sort(([keyA, valA], [keyB, valB]) => {\n    if (keyA === keyB) {\n        return valA < valB ? -1 : 1;\n    }\n    return keyA < keyB ? -1 : 1;\n})\n    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)\n    .join('&');\nconst escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { getCanonicalQueryString };\n//# sourceMappingURL=getCanonicalQueryString.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical uri.\n *\n * @param pathname `pathname` from request url.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark\n * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).\n *\n * @internal\n */\nconst getCanonicalUri = (pathname, uriEscapePath = true) => pathname\n    ? uriEscapePath\n        ? encodeURIComponent(pathname).replace(/%2F/g, '/')\n        : pathname\n    : '/';\n\nexport { getCanonicalUri };\n//# sourceMappingURL=getCanonicalUri.mjs.map\n","import { EMPTY_HASH, UNSIGNED_PAYLOAD } from '../constants.mjs';\nimport { getHashedDataAsHex } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the hashed payload.\n *\n * @param body `body` (payload) from the request.\n * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string\n * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.\n *\n * @internal\n */\nconst getHashedPayload = (body) => {\n    // return precalculated empty hash if body is undefined or null\n    if (body == null) {\n        return EMPTY_HASH;\n    }\n    if (isSourceData(body)) {\n        const hashedData = getHashedDataAsHex(null, body);\n        return hashedData;\n    }\n    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.\n    return UNSIGNED_PAYLOAD;\n};\nconst isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);\nconst isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n\nexport { getHashedPayload };\n//# sourceMappingURL=getHashedPayload.mjs.map\n","import { getSignedHeaders } from './utils/getSignedHeaders.mjs';\nimport { getSigningValues } from './utils/getSigningValues.mjs';\nimport { HOST_HEADER, AMZ_DATE_HEADER, TOKEN_HEADER, AUTH_HEADER, SHA256_ALGORITHM_IDENTIFIER } from './constants.mjs';\nimport { getSignature } from './utils/getSignature.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.\n */\nconst signRequest = (request, options) => {\n    const signingValues = getSigningValues(options);\n    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;\n    // create the request to sign\n    const headers = { ...request.headers };\n    headers[HOST_HEADER] = request.url.host;\n    headers[AMZ_DATE_HEADER] = longDate;\n    if (sessionToken) {\n        headers[TOKEN_HEADER] = sessionToken;\n    }\n    const requestToSign = { ...request, headers };\n    // calculate and add the signature to the request\n    const signature = getSignature(requestToSign, signingValues);\n    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;\n    const signedHeadersEntry = `SignedHeaders=${getSignedHeaders(headers)}`;\n    const signatureEntry = `Signature=${signature}`;\n    headers[AUTH_HEADER] =\n        `${SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;\n    return requestToSign;\n};\n\nexport { signRequest };\n//# sourceMappingURL=signRequest.mjs.map\n","import { getCredentialScope } from './getCredentialScope.mjs';\nimport { getFormattedDates } from './getFormattedDates.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Extracts common values used for signing both requests and urls.\n *\n * @param options `SignRequestOptions` object containing values used to construct the signature.\n * @returns Common `SigningValues` used for signing.\n *\n * @internal\n */\nconst getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {\n    // get properties from credentials\n    const { accessKeyId, secretAccessKey, sessionToken } = credentials;\n    // get formatted dates for signing\n    const { longDate, shortDate } = getFormattedDates(signingDate);\n    // copy header and set signing properties\n    const credentialScope = getCredentialScope(shortDate, signingRegion, signingService);\n    return {\n        accessKeyId,\n        credentialScope,\n        longDate,\n        secretAccessKey,\n        sessionToken,\n        shortDate,\n        signingRegion,\n        signingService,\n        uriEscapePath,\n    };\n};\n\nexport { getSigningValues };\n//# sourceMappingURL=getSigningValues.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns expected date strings to be used in signing.\n *\n * @param date JavaScript `Date` object.\n * @returns `FormattedDates` object containing the following:\n * - longDate: A date string in 'YYYYMMDDThhmmssZ' format\n * - shortDate: A date string in 'YYYYMMDD' format\n *\n * @internal\n */\nconst getFormattedDates = (date) => {\n    const longDate = date.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\n\nexport { getFormattedDates };\n//# sourceMappingURL=getFormattedDates.mjs.map\n","import { KEY_TYPE_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the credential scope which restricts the resulting signature to the specified region and service.\n *\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n *\n * @internal\n */\nconst getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${KEY_TYPE_IDENTIFIER}`;\n\nexport { getCredentialScope };\n//# sourceMappingURL=getCredentialScope.mjs.map\n","import { getHashedDataAsHex } from './dataHashHelpers.mjs';\nimport { getCanonicalRequest } from './getCanonicalRequest.mjs';\nimport { getSigningKey } from './getSigningKey.mjs';\nimport { getStringToSign } from './getStringToSign.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nconst getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = getCanonicalRequest(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = getHashedDataAsHex(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = getStringToSign(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = getHashedDataAsHex(getSigningKey(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\n\nexport { getSignature };\n//# sourceMappingURL=getSignature.mjs.map\n","import { getCanonicalHeaders } from './getCanonicalHeaders.mjs';\nimport { getCanonicalQueryString } from './getCanonicalQueryString.mjs';\nimport { getCanonicalUri } from './getCanonicalUri.mjs';\nimport { getHashedPayload } from './getHashedPayload.mjs';\nimport { getSignedHeaders } from './getSignedHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical request.\n *\n * @param request `HttpRequest` from which to create the canonical request from.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns String created by by concatenating the following strings, separated by newline characters:\n * - HTTPMethod\n * - CanonicalUri\n * - CanonicalQueryString\n * - CanonicalHeaders\n * - SignedHeaders\n * - HashedPayload\n *\n * @internal\n */\nconst getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [\n    method,\n    getCanonicalUri(url.pathname, uriEscapePath),\n    getCanonicalQueryString(url.searchParams),\n    getCanonicalHeaders(headers),\n    getSignedHeaders(headers),\n    getHashedPayload(body),\n].join('\\n');\n\nexport { getCanonicalRequest };\n//# sourceMappingURL=getCanonicalRequest.mjs.map\n","import { SHA256_ALGORITHM_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a string to be signed.\n *\n * @param date Current date in the format 'YYYYMMDDThhmmssZ'.\n * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n * @param hashedRequest Hashed canonical request.\n *\n * @returns A string created by by concatenating the following strings, separated by newline characters:\n * - Algorithm\n * - RequestDateTime\n * - CredentialScope\n * - HashedCanonicalRequest\n *\n * @internal\n */\nconst getStringToSign = (date, credentialScope, hashedRequest) => [SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\\n');\n\nexport { getStringToSign };\n//# sourceMappingURL=getStringToSign.mjs.map\n","import { KEY_TYPE_IDENTIFIER, SIGNATURE_IDENTIFIER } from '../constants.mjs';\nimport { getHashedData } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a signing key to be used for signing requests.\n *\n * @param secretAccessKey AWS secret access key from credentials.\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns `Uint8Array` calculated from its composite parts.\n *\n * @internal\n */\nconst getSigningKey = (secretAccessKey, date, region, service) => {\n    const key = `${SIGNATURE_IDENTIFIER}${secretAccessKey}`;\n    const dateKey = getHashedData(key, date);\n    const regionKey = getHashedData(dateKey, region);\n    const serviceKey = getHashedData(regionKey, service);\n    const signingKey = getHashedData(serviceKey, KEY_TYPE_IDENTIFIER);\n    return signingKey;\n};\n\nexport { getSigningKey };\n//# sourceMappingURL=getSigningKey.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a `Date` that is corrected for clock skew.\n *\n * @param systemClockOffset The offset of the system clock in milliseconds.\n *\n * @returns `Date` representing the current time adjusted by the system clock offset.\n *\n * @internal\n */\nconst getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);\n\nexport { getSkewCorrectedDate };\n//# sourceMappingURL=getSkewCorrectedDate.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nconst userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n\nexport { userAgentMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nconst composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n\nexport { composeTransferHandler };\n//# sourceMappingURL=composeTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nconst withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n\nexport { withMemoization };\n//# sourceMappingURL=memoization.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n\nexport { fetchTransferHandler };\n//# sourceMappingURL=fetch.mjs.map\n","import { retryMiddlewareFactory } from '../middleware/retry/middleware.mjs';\nimport '../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../utils/retry/retry.mjs';\nimport '../../types/errors.mjs';\nimport { signingMiddlewareFactory } from '../middleware/signing/middleware.mjs';\nimport { userAgentMiddlewareFactory } from '../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from './fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst authenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    retryMiddlewareFactory,\n    signingMiddlewareFactory,\n]);\n\nexport { authenticatedHandler };\n//# sourceMappingURL=authenticated.mjs.map\n","import { signRequest } from './signer/signatureV4/signRequest.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getSkewCorrectedDate } from './utils/getSkewCorrectedDate.mjs';\nimport { getUpdatedSystemClockOffset } from './utils/getUpdatedSystemClockOffset.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.\n * This middleware is expected to be placed after retry middleware.\n */\nconst signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {\n    let currentSystemClockOffset;\n    return (next, context) => async function signingMiddleware(request) {\n        currentSystemClockOffset = currentSystemClockOffset ?? 0;\n        const signRequestOptions = {\n            credentials: typeof credentials === 'function'\n                ? await credentials({\n                    forceRefresh: !!context?.isCredentialsExpired,\n                })\n                : credentials,\n            signingDate: getSkewCorrectedDate(currentSystemClockOffset),\n            signingRegion: region,\n            signingService: service,\n            uriEscapePath,\n        };\n        const signedRequest = await signRequest(request, signRequestOptions);\n        const response = await next(signedRequest);\n        // Update system clock offset if response contains date header, regardless of the status code.\n        // non-2xx response will still be returned from next handler instead of thrown, because it's\n        // only thrown by the retry middleware.\n        const dateString = getDateHeader(response);\n        if (dateString) {\n            currentSystemClockOffset = getUpdatedSystemClockOffset(Date.parse(dateString), currentSystemClockOffset);\n        }\n        return response;\n    };\n};\nconst getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];\n\nexport { signingMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","import { isClockSkewed } from './isClockSkewed.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the difference between clock time and the current system time if clock is skewed.\n *\n * @param clockTimeInMilliseconds Clock time in milliseconds.\n * @param currentSystemClockOffset Current system clock offset in milliseconds.\n *\n * @internal\n */\nconst getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {\n    if (isClockSkewed(clockTimeInMilliseconds, currentSystemClockOffset)) {\n        return clockTimeInMilliseconds - Date.now();\n    }\n    return currentSystemClockOffset;\n};\n\nexport { getUpdatedSystemClockOffset };\n//# sourceMappingURL=getUpdatedSystemClockOffset.mjs.map\n","import { getSkewCorrectedDate } from './getSkewCorrectedDate.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10\nconst SKEW_WINDOW = 5 * 60 * 1000;\n/**\n * Checks if the provided date is within the skew window of 5 minutes.\n *\n * @param clockTimeInMilliseconds Time to check for skew in milliseconds.\n * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.\n *\n * @returns True if skewed. False otherwise.\n *\n * @internal\n */\nconst isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs(getSkewCorrectedDate(clockOffsetInMilliseconds).getTime() -\n    clockTimeInMilliseconds) >= SKEW_WINDOW;\n\nexport { isClockSkewed };\n//# sourceMappingURL=isClockSkewed.mjs.map\n","import { retryMiddlewareFactory } from '../middleware/retry/middleware.mjs';\nimport '../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../utils/retry/retry.mjs';\nimport '../../types/errors.mjs';\nimport { userAgentMiddlewareFactory } from '../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from './fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [userAgentMiddlewareFactory, retryMiddlewareFactory]);\n\nexport { unauthenticatedHandler };\n//# sourceMappingURL=unauthenticated.mjs.map\n","import { getRetryDecider, jitteredBackoff, authenticatedHandler, unauthenticatedHandler } from '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../errors/validation.mjs';\nimport { parseRestApiServiceError } from '../../utils/serviceError.mjs';\nimport { logger } from '../../utils/logger.mjs';\nimport { parseSigningInfo } from '../../utils/parseSigningInfo.mjs';\nimport { resolveHeaders } from '../../utils/resolveHeaders.mjs';\n\n/**\n * Make REST API call with best-effort IAM auth.\n * @param amplify Amplify instance to to resolve credentials and tokens. Should use different instance in client-side\n *   and SSR\n * @param options Options accepted from public API options when calling the handlers.\n * @param signingServiceInfo Internal-only options enable IAM auth as well as to to overwrite the IAM signing service\n *   and region. If specified, and NONE of API Key header or Auth header is present, IAM auth will be used.\n * @param iamAuthApplicable Callback function that is used to determine if IAM Auth should be used or not.\n *\n * @internal\n */\nconst transferHandler = async (amplify, options, iamAuthApplicable, signingServiceInfo) => {\n    const { url, method, headers, body, withCredentials, abortSignal } = options;\n    const resolvedBody = body\n        ? body instanceof FormData\n            ? body\n            : JSON.stringify(body ?? '')\n        : undefined;\n    const resolvedHeaders = resolveHeaders(headers, body);\n    const request = {\n        url,\n        headers: resolvedHeaders,\n        method,\n        body: resolvedBody,\n    };\n    const baseOptions = {\n        retryDecider: getRetryDecider(parseRestApiServiceError),\n        computeDelay: jitteredBackoff,\n        withCrossDomainCredentials: withCredentials,\n        abortSignal,\n    };\n    const isIamAuthApplicable = iamAuthApplicable(request, signingServiceInfo);\n    let response;\n    const credentials = await resolveCredentials(amplify);\n    if (isIamAuthApplicable && credentials) {\n        const signingInfoFromUrl = parseSigningInfo(url);\n        const signingService = signingServiceInfo?.service ?? signingInfoFromUrl.service;\n        const signingRegion = signingServiceInfo?.region ?? signingInfoFromUrl.region;\n        response = await authenticatedHandler(request, {\n            ...baseOptions,\n            credentials,\n            region: signingRegion,\n            service: signingService,\n        });\n    }\n    else {\n        response = await unauthenticatedHandler(request, {\n            ...baseOptions,\n        });\n    }\n    // Clean-up un-modeled properties from response.\n    return {\n        statusCode: response.statusCode,\n        headers: response.headers,\n        body: response.body,\n    };\n};\nconst resolveCredentials = async (amplify) => {\n    try {\n        const { credentials } = await amplify.Auth.fetchAuthSession();\n        if (credentials) {\n            return credentials;\n        }\n    }\n    catch (e) {\n        logger.debug('No credentials available, the request will be unsigned.');\n    }\n    return null;\n};\n\nexport { transferHandler };\n//# sourceMappingURL=handler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst resolveHeaders = (headers, body) => {\n    const normalizedHeaders = {};\n    for (const key in headers) {\n        normalizedHeaders[key.toLowerCase()] = headers[key];\n    }\n    if (body) {\n        normalizedHeaders['content-type'] = 'application/json; charset=UTF-8';\n        if (body instanceof FormData) {\n            /**\n             * If body is a FormData we should not allow setting content-type.\n             * It's because runtime HTTP handlers(xhr, fetch, undici, node-fetch,\n             * etc.) will modify the content-type value when setting multipart\n             * boundary.\n             */\n            delete normalizedHeaders['content-type'];\n        }\n    }\n    return normalizedHeaders;\n};\n\nexport { resolveHeaders };\n//# sourceMappingURL=resolveHeaders.mjs.map\n","import { createCancellableOperation } from '../../utils/createCancellableOperation.mjs';\nimport { parseSigningInfo } from '../../utils/parseSigningInfo.mjs';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../errors/validation.mjs';\nimport { resolveApiUrl } from '../../utils/resolveApiUrl.mjs';\nimport { logger } from '../../utils/logger.mjs';\nimport { isIamAuthApplicableForRest } from '../../utils/isIamAuthApplicable.mjs';\nimport { transferHandler } from './handler.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst publicHandler = (amplify, options, method) => createCancellableOperation(async (abortSignal) => {\n    const { apiName, options: apiOptions = {}, path: apiPath } = options;\n    const url = resolveApiUrl(amplify, apiName, apiPath, apiOptions?.queryParams);\n    const libraryConfigHeaders = await amplify.libraryOptions?.API?.REST?.headers?.({\n        apiName,\n    });\n    const { headers: invocationHeaders = {} } = apiOptions;\n    const headers = {\n        // custom headers from invocation options should precede library options\n        ...libraryConfigHeaders,\n        ...invocationHeaders,\n    };\n    const signingServiceInfo = parseSigningInfo(url, {\n        amplify,\n        apiName,\n    });\n    logger.debug(method, url, headers, `IAM signing options: ${JSON.stringify(signingServiceInfo)}`);\n    return transferHandler(amplify, {\n        ...apiOptions,\n        url,\n        method,\n        headers,\n        abortSignal,\n    }, isIamAuthApplicableForRest, signingServiceInfo);\n});\nconst get = (amplify, input) => publicHandler(amplify, input, 'GET');\nconst post = (amplify, input) => publicHandler(amplify, input, 'POST');\nconst put = (amplify, input) => publicHandler(amplify, input, 'PUT');\nconst del = (amplify, input) => publicHandler(amplify, input, 'DELETE');\nconst head = (amplify, input) => publicHandler(amplify, input, 'HEAD');\nconst patch = (amplify, input) => publicHandler(amplify, input, 'PATCH');\n\nexport { del, get, head, patch, post, put };\n//# sourceMappingURL=publicApis.mjs.map\n","import { AmplifyUrl, AmplifyUrlSearchParams } from '@aws-amplify/core/internals/utils';\nimport { RestApiError } from '../errors/RestApiError.mjs';\nimport { assertValidationError } from '../errors/assertValidatonError.mjs';\nimport { RestApiValidationErrorCode, validationErrorMap } from '../errors/validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Resolve the REST API request URL by:\n * 1. Loading the REST API endpoint from the Amplify configuration with corresponding API name.\n * 2. Appending the path to the endpoint.\n * 3. Merge the query parameters from path and the queryParameter argument which is taken from the public REST API\n *   options.\n * 4. Validating the resulting URL string.\n *\n * @internal\n */\nconst resolveApiUrl = (amplify, apiName, path, queryParams) => {\n    const urlStr = amplify.getConfig()?.API?.REST?.[apiName]?.endpoint;\n    assertValidationError(!!urlStr, RestApiValidationErrorCode.InvalidApiName);\n    try {\n        const url = new AmplifyUrl(urlStr + path);\n        if (queryParams) {\n            const mergedQueryParams = new AmplifyUrlSearchParams(url.searchParams);\n            Object.entries(queryParams).forEach(([key, value]) => {\n                mergedQueryParams.set(key, value);\n            });\n            url.search = new AmplifyUrlSearchParams(mergedQueryParams).toString();\n        }\n        return url;\n    }\n    catch (error) {\n        throw new RestApiError({\n            name: RestApiValidationErrorCode.InvalidApiName,\n            ...validationErrorMap[RestApiValidationErrorCode.InvalidApiName],\n            recoverySuggestion: `Please make sure the REST endpoint URL is a valid URL string. Got ${urlStr}`,\n        });\n    }\n};\n\nexport { resolveApiUrl };\n//# sourceMappingURL=resolveApiUrl.mjs.map\n","import { RestApiError } from './RestApiError.mjs';\nimport { validationErrorMap } from './validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction assertValidationError(assertion, name) {\n    const { message, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new RestApiError({ name, message, recoverySuggestion });\n    }\n}\n\nexport { assertValidationError };\n//# sourceMappingURL=assertValidatonError.mjs.map\n","import { Amplify } from '@aws-amplify/core';\nimport { get as get$1, post as post$1, put as put$1, del as del$1, head as head$1, patch as patch$1 } from './common/publicApis.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * GET HTTP request\n * @param {GetInput} input - Input for GET operation\n * @returns {GetOperation} Operation for GET request\n * @throws - {@link RestApiError}\n * @example\n * Send a GET request\n * ```js\n * import { get, isCancelError } from '@aws-amplify/api';\n *\n * const { body } = await get({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     body, // Optional, JSON object or FormData\n *     queryParams, // Optional, A map of query strings\n *   }\n * }).response;\n * const data = await body.json();\n * ```\n * @example\n * Cancel a GET request\n *\n * ```js\n * import { get, isCancelError } from '@aws-amplify/api';\n *\n * const { response, cancel } = get({apiName, path, options});\n * cancel(message);\n * try {\n *   await response;\n * } catch (e) {\n *   if (isCancelError(e)) {\n *    // handle request cancellation\n *   }\n *   //...\n * }\n * ```\n */\nconst get = (input) => get$1(Amplify, input);\n/**\n * POST HTTP request\n * @param {PostInput} input - Input for POST operation\n * @returns {PostOperation} Operation for POST request\n * @throws - {@link RestApiError}\n * @example\n * Send a POST request\n * ```js\n * import { post, isCancelError } from '@aws-amplify/api';\n *\n * const { body } = await post({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     body, // Optional, JSON object or FormData\n *     queryParams, // Optional, A map of query strings\n *   }\n * }).response;\n * const data = await body.json();\n * ```\n * @example\n * Cancel a POST request\n *\n * ```js\n * import { post, isCancelError } from '@aws-amplify/api';\n *\n * const { response, cancel } = post({apiName, path, options});\n * cancel(message);\n * try {\n *   await response;\n * } catch (e) {\n *   if (isCancelError(e)) {\n *    // handle request cancellation\n *   }\n *   //...\n * }\n * ```\n */\nconst post = (input) => post$1(Amplify, input);\n/**\n * PUT HTTP request\n * @param {PutInput} input - Input for PUT operation\n * @returns {PutOperation} Operation for PUT request\n * @throws - {@link RestApiError}\n * @example\n * Send a PUT request\n * ```js\n * import { put, isCancelError } from '@aws-amplify/api';\n *\n * const { body } = await put({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     body, // Optional, JSON object or FormData\n *     queryParams, // Optional, A map of query strings\n *   }\n * }).response;\n * const data = await body.json();\n * ```\n * @example\n * Cancel a PUT request\n * ```js\n * import { put, isCancelError } from '@aws-amplify/api';\n *\n * const { response, cancel } = put({apiName, path, options});\n * cancel(message);\n * try {\n *  await response;\n * } catch (e) {\n *   if (isCancelError(e)) {\n *     // handle request cancellation\n *   }\n * //...\n * }\n * ```\n */\nconst put = (input) => put$1(Amplify, input);\n/**\n * DELETE HTTP request\n * @param {DeleteInput} input - Input for DELETE operation\n * @returns {DeleteOperation} Operation for DELETE request\n * @throws - {@link RestApiError}\n * @example\n * Send a DELETE request\n * ```js\n * import { del } from '@aws-amplify/api';\n *\n * const { statusCode } = await del({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     queryParams, // Optional, A map of query strings\n *   }\n * }).response;\n * ```\n */\nconst del = (input) => del$1(Amplify, input);\n/**\n * HEAD HTTP request\n * @param {HeadInput} input - Input for HEAD operation\n * @returns {HeadOperation} Operation for HEAD request\n * @throws - {@link RestApiError}\n * @example\n * Send a HEAD request\n * ```js\n * import { head, isCancelError } from '@aws-amplify/api';\n *\n * const { headers, statusCode } = await head({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     queryParams, // Optional, A map of query strings\n *   }\n * }),response;\n * ```\n *\n */\nconst head = (input) => head$1(Amplify, input);\n/**\n * PATCH HTTP request\n * @param {PatchInput} input - Input for PATCH operation\n * @returns {PatchOperation} Operation for PATCH request\n * @throws - {@link RestApiError}\n * @example\n * Send a PATCH request\n * ```js\n * import { patch } from '@aws-amplify/api';\n *\n * const { body } = await patch({\n *   apiName,\n *   path,\n *   options: {\n *     headers, // Optional, A map of custom header key/values\n *     body, // Optional, JSON object or FormData\n *     queryParams, // Optional, A map of query strings\n *   }\n * }).response;\n * const data = await body.json();\n * ```\n *\n * @example\n * Cancel a PATCH request\n * ```js\n * import { patch, isCancelError } from '@aws-amplify/api';\n *\n * const { response, cancel } = patch({apiName, path, options});\n * cancel(message);\n * try {\n *  await response;\n * } catch (e) {\n *  if (isCancelError(e)) {\n *   // handle request cancellation\n *  }\n * //...\n * }\n * ```\n */\nconst patch = (input) => patch$1(Amplify, input);\n\nexport { del, get, head, patch, post, put };\n//# sourceMappingURL=index.mjs.map\n","import { createCancellableOperation } from '../../utils/createCancellableOperation.mjs';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../errors/validation.mjs';\nimport '../../utils/logger.mjs';\nimport { isIamAuthApplicableForGraphQL } from '../../utils/isIamAuthApplicable.mjs';\nimport { transferHandler } from './handler.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * This weak map provides functionality to cancel a request given the promise containing the `post` request.\n *\n * 1. For every GraphQL POST request, an abort controller is created and supplied to the request.\n * 2. The promise fulfilled by GraphGL POST request is then mapped to that abort controller.\n * 3. The promise is returned to the external caller.\n * 4. The caller can either wait for the promise to fulfill or call `cancel(promise)` to cancel the request.\n * 5. If `cancel(promise)` is called, then the corresponding abort controller is retrieved from the map below.\n * 6. GraphQL POST request will be rejected with the error message provided during cancel.\n * 7. Caller can check if the error is because of cancelling by calling `isCancelError(error)`.\n */\nconst cancelTokenMap = new WeakMap();\n/**\n * @internal\n *\n * REST POST handler to send GraphQL request to given endpoint. By default, it will use IAM to authorize\n * the request. In some auth modes, the IAM auth has to be disabled. Here's how to set up the request auth correctly:\n * * If auth mode is 'iam', you MUST NOT set 'authorization' header and 'x-api-key' header, since it would disable IAM\n *   auth. You MUST also set 'input.options.signingServiceInfo' option.\n *   * The including 'input.options.signingServiceInfo.service' and 'input.options.signingServiceInfo.region' are\n *     optional. If omitted, the signing service and region will be inferred from url.\n * * If auth mode is 'none', you MUST NOT set 'options.signingServiceInfo' option.\n * * If auth mode is 'apiKey', you MUST set 'x-api-key' custom header.\n * * If auth mode is 'oidc' or 'lambda' or 'userPool', you MUST set 'authorization' header.\n *\n * To make the internal post cancellable, you must also call `updateRequestToBeCancellable()` with the promise from\n * internal post call and the abort controller supplied to the internal post call.\n *\n * @param amplify the AmplifyClassV6 instance - it may be the singleton used on Web, or an instance created within\n * a context created by `runWithAmplifyServerContext`\n * @param postInput an object of {@link InternalPostInput}\n * @param postInput.url The URL that the POST request sends to\n * @param postInput.options Options of the POST request\n * @param postInput.abortController The abort controller used to cancel the POST request\n * @returns a {@link RestApiResponse}\n *\n * @throws an {@link AmplifyError} with `Network Error` as the `message` when the external resource is unreachable due to one\n * of the following reasons:\n *   1. no network connection\n *   2. CORS error\n * @throws a {@link CanceledError} when the ongoing POST request get cancelled\n */\nconst post = (amplify, { url, options, abortController }) => {\n    const controller = abortController ?? new AbortController();\n    const responsePromise = createCancellableOperation(async () => {\n        const response = transferHandler(amplify, {\n            url,\n            method: 'POST',\n            ...options,\n            abortSignal: controller.signal,\n        }, isIamAuthApplicableForGraphQL, options?.signingServiceInfo);\n        return response;\n    }, controller);\n    const responseWithCleanUp = responsePromise.finally(() => {\n        cancelTokenMap.delete(responseWithCleanUp);\n    });\n    return responseWithCleanUp;\n};\n/**\n * Cancels a request given the promise returned by `post`.\n * If the request is already completed, this function does nothing.\n * It MUST be used after `updateRequestToBeCancellable` is called.\n */\nconst cancel = (promise, message) => {\n    const controller = cancelTokenMap.get(promise);\n    if (controller) {\n        controller.abort(message);\n        if (message && controller.signal.reason !== message) {\n            // In runtimes where `AbortSignal.reason` is not supported, we track the reason ourselves.\n            // @ts-expect-error reason is read-only property.\n            controller.signal.reason = message;\n        }\n        return true;\n    }\n    return false;\n};\n/**\n * MUST be used to make a promise including internal `post` API call cancellable.\n */\nconst updateRequestToBeCancellable = (promise, controller) => {\n    cancelTokenMap.set(promise, controller);\n};\n\nexport { cancel, post, updateRequestToBeCancellable };\n//# sourceMappingURL=internalPost.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nconst AWS_CLOUDWATCH_CATEGORY = 'Logging';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nconst NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n\nexport { AWS_CLOUDWATCH_CATEGORY, NO_HUBCALLBACK_PROVIDED_EXCEPTION, USER_AGENT_HEADER };\n//# sourceMappingURL=constants.mjs.map\n","export { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5000;\nconst NON_RETRYABLE_CODES = [400, 401, 403];\nconst NON_RETRYABLE_ERROR_TYPES = [\n    'BadRequestException',\n    'UnauthorizedException',\n];\nconst CONNECTION_STATE_CHANGE = 'ConnectionStateChange';\nvar MESSAGE_TYPES;\n(function (MESSAGE_TYPES) {\n    /**\n     * Client -> Server message.\n     * This message type is the first message after handshake and this will initialize AWS AppSync RealTime communication\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_INIT\"] = \"connection_init\";\n    /**\n     * Server -> Client message\n     * This message type is in case there is an issue with AWS AppSync RealTime when establishing connection\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ERROR\"] = \"connection_error\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_CONNECTION_INIT message\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ACK\"] = \"connection_ack\";\n    /**\n     * Client -> Server message.\n     * This message type is for register subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_START\"] = \"start\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_START message\n     */\n    MESSAGE_TYPES[\"GQL_START_ACK\"] = \"start_ack\";\n    /**\n     * Server -> Client message.\n     * This message type is for subscription message from AWS AppSync RealTime or Events\n     */\n    MESSAGE_TYPES[\"DATA\"] = \"data\";\n    /**\n     * Server -> Client message.\n     * This message type helps the client to know is still receiving messages from AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_KEEP_ALIVE\"] = \"ka\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_STOP\"] = \"stop\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_STOP message\n     */\n    MESSAGE_TYPES[\"GQL_COMPLETE\"] = \"complete\";\n    /**\n     * Server -> Client message.\n     * This message type is for sending error messages from AWS AppSync RealTime to the client\n     */\n    MESSAGE_TYPES[\"GQL_ERROR\"] = \"error\";\n    /**\n     * Client -> Server message.\n     * This message type is for registering subscriptions with Events\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE\"] = \"subscribe\";\n    /**\n     * Client -> Server message.\n     * This message type is for publishing a message with Events\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH\"] = \"publish\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful subscription\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE_ACK\"] = \"subscribe_success\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful publish\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH_ACK\"] = \"publish_success\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"EVENT_STOP\"] = \"unsubscribe\";\n    /**\n     * Server -> Client message.\n     * This is the ack response from AWS AppSync Events to EVENT_STOP message\n     */\n    MESSAGE_TYPES[\"EVENT_COMPLETE\"] = \"unsubscribe_success\";\n})(MESSAGE_TYPES || (MESSAGE_TYPES = {}));\nvar SUBSCRIPTION_STATUS;\n(function (SUBSCRIPTION_STATUS) {\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"PENDING\"] = 0] = \"PENDING\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"CONNECTED\"] = 1] = \"CONNECTED\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"FAILED\"] = 2] = \"FAILED\";\n})(SUBSCRIPTION_STATUS || (SUBSCRIPTION_STATUS = {}));\nvar SOCKET_STATUS;\n(function (SOCKET_STATUS) {\n    SOCKET_STATUS[SOCKET_STATUS[\"CLOSED\"] = 0] = \"CLOSED\";\n    SOCKET_STATUS[SOCKET_STATUS[\"READY\"] = 1] = \"READY\";\n    SOCKET_STATUS[SOCKET_STATUS[\"CONNECTING\"] = 2] = \"CONNECTING\";\n})(SOCKET_STATUS || (SOCKET_STATUS = {}));\nconst AWS_APPSYNC_REALTIME_HEADERS = {\n    accept: 'application/json, text/javascript',\n    'content-encoding': 'amz-1.0',\n    'content-type': 'application/json; charset=UTF-8',\n};\n/**\n * Time in milleseconds to wait for GQL_CONNECTION_INIT message\n */\nconst CONNECTION_INIT_TIMEOUT = 15000;\n/**\n * Time in milleseconds to wait for GQL_START_ACK message\n */\nconst START_ACK_TIMEOUT = 15000;\n/**\n * Default Time in milleseconds to wait for GQL_CONNECTION_KEEP_ALIVE message\n */\nconst DEFAULT_KEEP_ALIVE_TIMEOUT = 5 * 60 * 1000;\n/**\n * Default Time in milleseconds to alert for missed GQL_CONNECTION_KEEP_ALIVE message\n */\nconst DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT = 65 * 1000;\n/**\n * Default delay time in milleseconds between when reconnect is triggered vs when it is attempted\n */\nconst RECONNECT_DELAY = 5 * 1000;\n/**\n * Default interval time in milleseconds between when reconnect is re-attempted\n */\nconst RECONNECT_INTERVAL = 60 * 1000;\n\nexport { AWS_APPSYNC_REALTIME_HEADERS, CONNECTION_INIT_TIMEOUT, CONNECTION_STATE_CHANGE, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT, DEFAULT_KEEP_ALIVE_TIMEOUT, MAX_DELAY_MS, MESSAGE_TYPES, NON_RETRYABLE_CODES, NON_RETRYABLE_ERROR_TYPES, RECONNECT_DELAY, RECONNECT_INTERVAL, SOCKET_STATUS, START_ACK_TIMEOUT, SUBSCRIPTION_STATUS };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n\nexport { LogType };\n//# sourceMappingURL=types.mjs.map\n","import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nclass HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nconst Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nconst HubInternal = new HubClass('internal-hub');\n\nexport { AMPLIFY_SYMBOL, Hub, HubClass, HubInternal };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass NonRetryableError extends Error {\n    constructor() {\n        super(...arguments);\n        this.nonRetryable = true;\n    }\n}\n\nexport { NonRetryableError };\n//# sourceMappingURL=NonRetryableError.mjs.map\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 } from 'uuid';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyUuid = v4;\n\nexport { amplifyUuid };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isNonRetryableError = (obj) => {\n    const key = 'nonRetryable';\n    return obj && obj[key];\n};\n\nexport { isNonRetryableError };\n//# sourceMappingURL=isNonRetryableError.mjs.map\n","import { getBtoa } from '../../globalHelpers/index.mjs';\nimport { bytesToString } from './bytesToString.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst base64Encoder = {\n    /**\n     * Convert input to base64-encoded string\n     * @param input - string to convert to base64\n     * @param options - encoding options that can optionally produce a base64url string\n     * @returns base64-encoded string\n     */\n    convert(input, options = {\n        urlSafe: false,\n        skipPadding: false,\n    }) {\n        const inputStr = typeof input === 'string' ? input : bytesToString(input);\n        let encodedStr = getBtoa()(inputStr);\n        // urlSafe char replacement and skipPadding options conform to the base64url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#section-5\n        if (options.urlSafe) {\n            encodedStr = encodedStr.replace(/\\+/g, '-').replace(/\\//g, '_');\n        }\n        if (options.skipPadding) {\n            encodedStr = encodedStr.replace(/=/g, '');\n        }\n        return encodedStr;\n    },\n};\n\nexport { base64Encoder };\n//# sourceMappingURL=base64Encoder.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction bytesToString(input) {\n    return Array.from(input, byte => String.fromCodePoint(byte)).join('');\n}\n\nexport { bytesToString };\n//# sourceMappingURL=bytesToString.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCrypto = () => {\n    if (typeof window === 'object' && typeof window.crypto === 'object') {\n        return window.crypto;\n    }\n    // Next.js global polyfill\n    if (typeof crypto === 'object') {\n        return crypto;\n    }\n    throw new AmplifyError({\n        name: 'MissingPolyfill',\n        message: 'Cannot resolve the `crypto` function from the environment.',\n    });\n};\nconst getBtoa = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {\n        return window.btoa;\n    }\n    // Next.js global polyfill\n    if (typeof btoa === 'function') {\n        return btoa;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `btoa` function from the environment.',\n    });\n};\nconst getAtob = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.atob === 'function') {\n        return window.atob;\n    }\n    // Next.js global polyfill\n    if (typeof atob === 'function') {\n        return atob;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `atob` function from the environment.',\n    });\n};\n\nexport { getAtob, getBtoa, getCrypto };\n//# sourceMappingURL=index.mjs.map\n","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\nimport { isNonRetryableError } from './isNonRetryableError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('retryUtil');\n/**\n * @private\n * Internal use of Amplify only\n */\nasync function retry(functionToRetry, args, delayFn, onTerminate) {\n    if (typeof functionToRetry !== 'function') {\n        throw Error('functionToRetry must be a function');\n    }\n    // TODO(eslint): remove this linter suppression with refactoring.\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise(async (resolve, reject) => {\n        let attempt = 0;\n        let terminated = false;\n        let timeout;\n        let wakeUp = () => {\n            // no-op\n        }; // will be replaced with a resolver()\n        // used after the loop if terminated while waiting for a timer.\n        let lastError;\n        onTerminate &&\n            onTerminate.then(() => {\n                // signal not to try anymore.\n                terminated = true;\n                // stop sleeping if we're sleeping.\n                clearTimeout(timeout);\n                wakeUp();\n            });\n        // TODO(eslint): remove this linter suppression with refactoring.\n        // eslint-disable-next-line no-unmodified-loop-condition\n        while (!terminated) {\n            attempt++;\n            logger.debug(`${functionToRetry.name} attempt #${attempt} with this vars: ${JSON.stringify(args)}`);\n            try {\n                resolve(await functionToRetry(...args));\n                return;\n            }\n            catch (err) {\n                lastError = err;\n                logger.debug(`error on ${functionToRetry.name}`, err);\n                if (isNonRetryableError(err)) {\n                    logger.debug(`${functionToRetry.name} non retryable error`, err);\n                    reject(err);\n                    return;\n                }\n                const retryIn = delayFn(attempt, args, err);\n                logger.debug(`${functionToRetry.name} retrying in ${retryIn} ms`);\n                // we check `terminated` again here because it could have flipped\n                // in the time it took `functionToRetry` to return.\n                if (retryIn === false || terminated) {\n                    reject(err);\n                    return;\n                }\n                else {\n                    await new Promise(_resolve => {\n                        wakeUp = _resolve; // export wakeUp for onTerminate handling\n                        timeout = setTimeout(wakeUp, retryIn);\n                    });\n                }\n            }\n        }\n        // reached if terminated while waiting for a timer.\n        reject(lastError);\n    });\n}\n\nexport { retry };\n//# sourceMappingURL=retry.mjs.map\n","var CONTROL_MSG;\n(function (CONTROL_MSG) {\n    CONTROL_MSG[\"CONNECTION_CLOSED\"] = \"Connection closed\";\n    CONTROL_MSG[\"CONNECTION_FAILED\"] = \"Connection failed\";\n    CONTROL_MSG[\"REALTIME_SUBSCRIPTION_INIT_ERROR\"] = \"AppSync Realtime subscription init error\";\n    CONTROL_MSG[\"SUBSCRIPTION_ACK\"] = \"Subscription ack\";\n    CONTROL_MSG[\"TIMEOUT_DISCONNECT\"] = \"Timeout disconnect\";\n})(CONTROL_MSG || (CONTROL_MSG = {}));\n/** @enum {string} */\nvar ConnectionState;\n(function (ConnectionState) {\n    /*\n     * The connection is alive and healthy\n     */\n    ConnectionState[\"Connected\"] = \"Connected\";\n    /*\n     * The connection is alive, but the connection is offline\n     */\n    ConnectionState[\"ConnectedPendingNetwork\"] = \"ConnectedPendingNetwork\";\n    /*\n     * The connection has been disconnected while in use\n     */\n    ConnectionState[\"ConnectionDisrupted\"] = \"ConnectionDisrupted\";\n    /*\n     * The connection has been disconnected and the network is offline\n     */\n    ConnectionState[\"ConnectionDisruptedPendingNetwork\"] = \"ConnectionDisruptedPendingNetwork\";\n    /*\n     * The connection is in the process of connecting\n     */\n    ConnectionState[\"Connecting\"] = \"Connecting\";\n    /*\n     * The connection is not in use and is being disconnected\n     */\n    ConnectionState[\"ConnectedPendingDisconnect\"] = \"ConnectedPendingDisconnect\";\n    /*\n     * The connection is not in use and has been disconnected\n     */\n    ConnectionState[\"Disconnected\"] = \"Disconnected\";\n    /*\n     * The connection is alive, but a keep alive message has been missed\n     */\n    ConnectionState[\"ConnectedPendingKeepAlive\"] = \"ConnectedPendingKeepAlive\";\n})(ConnectionState || (ConnectionState = {}));\n\nexport { CONTROL_MSG, ConnectionState };\n//# sourceMappingURL=PubSub.mjs.map\n","import { from, Observable } from 'rxjs';\nimport '../utils/getClientInfo/getClientInfo.mjs';\nimport { isWebWorker } from '../utils/isWebWorker.mjs';\nimport '../utils/retry/retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass Reachability {\n    networkMonitor(_) {\n        const globalObj = isWebWorker()\n            ? self\n            : typeof window !== 'undefined' && window;\n        if (!globalObj) {\n            return from([{ online: true }]);\n        }\n        return new Observable(observer => {\n            observer.next({ online: globalObj.navigator.onLine });\n            const notifyOnline = () => {\n                observer.next({ online: true });\n            };\n            const notifyOffline = () => {\n                observer.next({ online: false });\n            };\n            globalObj.addEventListener('online', notifyOnline);\n            globalObj.addEventListener('offline', notifyOffline);\n            Reachability._observers.push(observer);\n            return () => {\n                globalObj.removeEventListener('online', notifyOnline);\n                globalObj.removeEventListener('offline', notifyOffline);\n                Reachability._observers = Reachability._observers.filter(_observer => _observer !== observer);\n            };\n        });\n    }\n    // expose observers to simulate offline mode for integration testing\n    static _observerOverride(status) {\n        for (const observer of this._observers) {\n            if (observer.closed) {\n                this._observers = this._observers.filter(_observer => _observer !== observer);\n                continue;\n            }\n            observer?.next && observer.next(status);\n        }\n    }\n}\nReachability._observers = [];\n\nexport { Reachability };\n//# sourceMappingURL=Reachability.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isWebWorker = () => {\n    if (typeof self === 'undefined') {\n        return false;\n    }\n    const selfContext = self;\n    return (typeof selfContext.WorkerGlobalScope !== 'undefined' &&\n        self instanceof selfContext.WorkerGlobalScope);\n};\n\nexport { isWebWorker };\n//# sourceMappingURL=isWebWorker.mjs.map\n","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { Reachability } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst ReachabilityMonitor = () => new Reachability().networkMonitor();\n\nexport { ReachabilityMonitor };\n//# sourceMappingURL=index.mjs.map\n","import { Observable, map, filter } from 'rxjs';\nimport { ConnectionState } from '../types/PubSub.mjs';\nimport { ReachabilityMonitor } from './ReachabilityMonitor/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst CONNECTION_CHANGE = {\n    KEEP_ALIVE_MISSED: { keepAliveState: 'unhealthy' },\n    KEEP_ALIVE: { keepAliveState: 'healthy' },\n    CONNECTION_ESTABLISHED: { connectionState: 'connected' },\n    CONNECTION_FAILED: {\n        intendedConnectionState: 'disconnected',\n        connectionState: 'disconnected',\n    },\n    CLOSING_CONNECTION: { intendedConnectionState: 'disconnected' },\n    OPENING_CONNECTION: {\n        intendedConnectionState: 'connected',\n        connectionState: 'connecting',\n    },\n    CLOSED: { connectionState: 'disconnected' },\n    ONLINE: { networkState: 'connected' },\n    OFFLINE: { networkState: 'disconnected' },\n};\nclass ConnectionStateMonitor {\n    constructor() {\n        this._networkMonitoringSubscription = undefined;\n        this._linkedConnectionState = {\n            networkState: 'connected',\n            connectionState: 'disconnected',\n            intendedConnectionState: 'disconnected',\n            keepAliveState: 'healthy',\n        };\n        // Attempt to update the state with the current actual network state\n        this._initialNetworkStateSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n            this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            this._initialNetworkStateSubscription?.unsubscribe();\n        });\n        this._linkedConnectionStateObservable =\n            new Observable(connectionStateObserver => {\n                connectionStateObserver.next(this._linkedConnectionState);\n                this._linkedConnectionStateObserver = connectionStateObserver;\n            });\n    }\n    /**\n     * Turn network state monitoring on if it isn't on already\n     */\n    enableNetworkMonitoring() {\n        // If no initial network state was discovered, stop trying\n        this._initialNetworkStateSubscription?.unsubscribe();\n        // Maintain the network state based on the reachability monitor\n        if (this._networkMonitoringSubscription === undefined) {\n            this._networkMonitoringSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n                this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            });\n        }\n    }\n    /**\n     * Turn network state monitoring off if it isn't off already\n     */\n    disableNetworkMonitoring() {\n        this._networkMonitoringSubscription?.unsubscribe();\n        this._networkMonitoringSubscription = undefined;\n    }\n    /**\n     * Get the observable that allows us to monitor the connection state\n     *\n     * @returns {Observable<ConnectionState>} - The observable that emits ConnectionState updates\n     */\n    get connectionStateObservable() {\n        let previous;\n        // The linked state aggregates state changes to any of the network, connection,\n        // intendedConnection and keepAliveHealth. Some states will change these independent\n        // states without changing the overall connection state.\n        // After translating from linked states to ConnectionState, then remove any duplicates\n        return this._linkedConnectionStateObservable\n            .pipe(map(value => {\n            return this.connectionStatesTranslator(value);\n        }))\n            .pipe(filter(current => {\n            const toInclude = current !== previous;\n            previous = current;\n            return toInclude;\n        }));\n    }\n    /*\n     * Updates local connection state and emits the full state to the observer.\n     */\n    record(statusUpdates) {\n        // Maintain the network monitor\n        if (statusUpdates.intendedConnectionState === 'connected') {\n            this.enableNetworkMonitoring();\n        }\n        else if (statusUpdates.intendedConnectionState === 'disconnected') {\n            this.disableNetworkMonitoring();\n        }\n        // Maintain the socket state\n        const newSocketStatus = {\n            ...this._linkedConnectionState,\n            ...statusUpdates,\n        };\n        this._linkedConnectionState = { ...newSocketStatus };\n        this._linkedConnectionStateObserver?.next(this._linkedConnectionState);\n    }\n    /*\n     * Translate the ConnectionState structure into a specific ConnectionState string literal union\n     */\n    connectionStatesTranslator({ connectionState, networkState, intendedConnectionState, keepAliveState, }) {\n        if (connectionState === 'connected' && networkState === 'disconnected')\n            return ConnectionState.ConnectedPendingNetwork;\n        if (connectionState === 'connected' &&\n            intendedConnectionState === 'disconnected')\n            return ConnectionState.ConnectedPendingDisconnect;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected' &&\n            networkState === 'disconnected')\n            return ConnectionState.ConnectionDisruptedPendingNetwork;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected')\n            return ConnectionState.ConnectionDisrupted;\n        if (connectionState === 'connected' && keepAliveState === 'unhealthy')\n            return ConnectionState.ConnectedPendingKeepAlive;\n        // All remaining states directly correspond to the connection state\n        if (connectionState === 'connecting')\n            return ConnectionState.Connecting;\n        if (connectionState === 'disconnected')\n            return ConnectionState.Disconnected;\n        return ConnectionState.Connected;\n    }\n}\n\nexport { CONNECTION_CHANGE, ConnectionStateMonitor };\n//# sourceMappingURL=ConnectionStateMonitor.mjs.map\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { RECONNECT_INTERVAL, RECONNECT_DELAY } from '../Providers/constants.mjs';\n\nvar ReconnectEvent;\n(function (ReconnectEvent) {\n    ReconnectEvent[\"START_RECONNECT\"] = \"START_RECONNECT\";\n    ReconnectEvent[\"HALT_RECONNECT\"] = \"HALT_RECONNECT\";\n})(ReconnectEvent || (ReconnectEvent = {}));\n/**\n * Captures the reconnect event logic used to determine when to reconnect to PubSub providers.\n *   Reconnect attempts are delayed by 5 seconds to let the interface settle.\n *   Attempting to reconnect only once creates unrecoverable states when the network state isn't\n *   supported by the browser, so this keeps retrying every minute until halted.\n */\nclass ReconnectionMonitor {\n    constructor() {\n        this.reconnectObservers = [];\n    }\n    /**\n     * Add reconnect observer to the list of observers to alert on reconnect\n     */\n    addObserver(reconnectObserver) {\n        this.reconnectObservers.push(reconnectObserver);\n    }\n    /**\n     * Given a reconnect event, start the appropriate behavior\n     */\n    record(event) {\n        if (event === ReconnectEvent.START_RECONNECT) {\n            // If the reconnection hasn't been started\n            if (this.reconnectSetTimeoutId === undefined &&\n                this.reconnectIntervalId === undefined) {\n                this.reconnectSetTimeoutId = setTimeout(() => {\n                    // Reconnect now\n                    this._triggerReconnect();\n                    // Retry reconnect every periodically until it works\n                    this.reconnectIntervalId = setInterval(() => {\n                        this._triggerReconnect();\n                    }, RECONNECT_INTERVAL);\n                }, RECONNECT_DELAY);\n            }\n        }\n        if (event === ReconnectEvent.HALT_RECONNECT) {\n            if (this.reconnectIntervalId) {\n                clearInterval(this.reconnectIntervalId);\n                this.reconnectIntervalId = undefined;\n            }\n            if (this.reconnectSetTimeoutId) {\n                clearTimeout(this.reconnectSetTimeoutId);\n                this.reconnectSetTimeoutId = undefined;\n            }\n        }\n    }\n    /**\n     * Complete all reconnect observers\n     */\n    close() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.complete?.();\n        });\n    }\n    _triggerReconnect() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.next?.();\n        });\n    }\n}\n\nexport { ReconnectEvent, ReconnectionMonitor };\n//# sourceMappingURL=ReconnectionMonitor.mjs.map\n","import { AmplifyUrl, AmplifyUrlSearchParams } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst protocol = 'wss://';\nconst standardDomainPattern = /^https:\\/\\/\\w{26}\\.appsync-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/graphql$/i;\nconst eventDomainPattern = /^https:\\/\\/\\w{26}\\.\\w+-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/event$/i;\nconst customDomainPath = '/realtime';\nconst isCustomDomain = (url) => {\n    return url.match(standardDomainPattern) === null;\n};\nconst isEventDomain = (url) => url.match(eventDomainPattern) !== null;\nconst getRealtimeEndpointUrl = (appSyncGraphqlEndpoint) => {\n    let realtimeEndpoint = appSyncGraphqlEndpoint ?? '';\n    if (isEventDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint\n            .concat(customDomainPath)\n            .replace('ddpg-api', 'grt-gamma')\n            .replace('appsync-api', 'appsync-realtime-api');\n    }\n    else if (isCustomDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint.concat(customDomainPath);\n    }\n    else {\n        realtimeEndpoint = realtimeEndpoint\n            .replace('appsync-api', 'appsync-realtime-api')\n            .replace('gogi-beta', 'grt-beta')\n            .replace('ddpg-api', 'grt-gamma');\n    }\n    realtimeEndpoint = realtimeEndpoint\n        .replace('https://', protocol)\n        .replace('http://', 'ws://');\n    return new AmplifyUrl(realtimeEndpoint);\n};\n/**\n * Strips out `Authorization` header if present\n */\nconst extractNonAuthHeaders = (headers) => {\n    if (!headers) {\n        return {};\n    }\n    if ('Authorization' in headers) {\n        const { Authorization: _, ...nonAuthHeaders } = headers;\n        return nonAuthHeaders;\n    }\n    return headers;\n};\n/**\n *\n * @param headers - http headers\n * @returns uri-encoded query parameters derived from custom headers\n */\nconst queryParamsFromCustomHeaders = (headers) => {\n    const nonAuthHeaders = extractNonAuthHeaders(headers);\n    const params = new AmplifyUrlSearchParams();\n    Object.entries(nonAuthHeaders).forEach(([k, v]) => {\n        params.append(k, v);\n    });\n    return params;\n};\n/**\n * Normalizes AppSync realtime endpoint URL\n *\n * @param appSyncGraphqlEndpoint - AppSync endpointUri from config\n * @param urlParams - URLSearchParams\n * @returns fully resolved string realtime endpoint URL\n */\nconst realtimeUrlWithQueryString = (appSyncGraphqlEndpoint, urlParams) => {\n    const realtimeEndpointUrl = getRealtimeEndpointUrl(appSyncGraphqlEndpoint);\n    // preserves any query params a customer might manually set in the configuration\n    const existingParams = new AmplifyUrlSearchParams(realtimeEndpointUrl.search);\n    for (const [k, v] of urlParams.entries()) {\n        existingParams.append(k, v);\n    }\n    realtimeEndpointUrl.search = existingParams.toString();\n    return realtimeEndpointUrl.toString();\n};\n// TODO: move to separate file?\nconst additionalHeadersFromOptions = async (options) => {\n    const { appSyncGraphqlEndpoint, query, libraryConfigHeaders = () => ({}), additionalHeaders = {}, authToken, } = options;\n    let additionalCustomHeaders = {};\n    const _libraryConfigHeaders = await libraryConfigHeaders();\n    if (typeof additionalHeaders === 'function') {\n        const requestOptions = {\n            url: appSyncGraphqlEndpoint || '',\n            queryString: query || '',\n        };\n        additionalCustomHeaders = await additionalHeaders(requestOptions);\n    }\n    else {\n        additionalCustomHeaders = additionalHeaders;\n    }\n    // if an authorization header is set, have the explicit, operation-level authToken take precedence\n    if (authToken) {\n        additionalCustomHeaders = {\n            ...additionalCustomHeaders,\n            Authorization: authToken,\n        };\n    }\n    return {\n        additionalCustomHeaders,\n        libraryConfigHeaders: _libraryConfigHeaders,\n    };\n};\n\nexport { additionalHeadersFromOptions, getRealtimeEndpointUrl, isCustomDomain, queryParamsFromCustomHeaders, realtimeUrlWithQueryString };\n//# sourceMappingURL=appsyncUrl.mjs.map\n","import { ConsoleLogger, fetchAuthSession } from '@aws-amplify/core';\nimport { signRequest } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { AWS_APPSYNC_REALTIME_HEADERS } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('AWSAppSyncRealTimeProvider Auth');\nconst awsAuthTokenHeader = async ({ host }) => {\n    const session = await fetchAuthSession();\n    return {\n        Authorization: session?.tokens?.accessToken?.toString(),\n        host,\n    };\n};\nconst awsRealTimeApiKeyHeader = async ({ apiKey, host, }) => {\n    const dt = new Date();\n    const dtStr = dt.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        host,\n        'x-amz-date': dtStr,\n        'x-api-key': apiKey,\n    };\n};\nconst awsRealTimeIAMHeader = async ({ payload, canonicalUri, appSyncGraphqlEndpoint, region, }) => {\n    const endpointInfo = {\n        region,\n        service: 'appsync',\n    };\n    const creds = (await fetchAuthSession()).credentials;\n    const request = {\n        url: `${appSyncGraphqlEndpoint}${canonicalUri}`,\n        data: payload,\n        method: 'POST',\n        headers: { ...AWS_APPSYNC_REALTIME_HEADERS },\n    };\n    const signedParams = signRequest({\n        headers: request.headers,\n        method: request.method,\n        url: new AmplifyUrl(request.url),\n        body: request.data,\n    }, {\n        credentials: creds,\n        signingRegion: endpointInfo.region,\n        signingService: endpointInfo.service,\n    });\n    return signedParams.headers;\n};\nconst customAuthHeader = async ({ host, additionalCustomHeaders, }) => {\n    /**\n     * If `additionalHeaders` was provided to the subscription as a function,\n     * the headers that are returned by that function will already have been\n     * provided before this function is called.\n     */\n    if (!additionalCustomHeaders?.Authorization) {\n        throw new Error('No auth token specified');\n    }\n    return {\n        Authorization: additionalCustomHeaders.Authorization,\n        host,\n    };\n};\nconst awsRealTimeHeaderBasedAuth = async ({ apiKey, authenticationType, canonicalUri, appSyncGraphqlEndpoint, region, additionalCustomHeaders, payload, }) => {\n    const headerHandler = {\n        apiKey: awsRealTimeApiKeyHeader,\n        iam: awsRealTimeIAMHeader,\n        oidc: awsAuthTokenHeader,\n        userPool: awsAuthTokenHeader,\n        lambda: customAuthHeader,\n        none: customAuthHeader,\n    };\n    if (!authenticationType || !headerHandler[authenticationType]) {\n        logger.debug(`Authentication type ${authenticationType} not supported`);\n        return undefined;\n    }\n    else {\n        const handler = headerHandler[authenticationType];\n        const host = appSyncGraphqlEndpoint\n            ? new AmplifyUrl(appSyncGraphqlEndpoint).host\n            : undefined;\n        const resolvedApiKey = authenticationType === 'apiKey' ? apiKey : undefined;\n        logger.debug(`Authenticating with ${JSON.stringify(authenticationType)}`);\n        const result = await handler({\n            payload,\n            canonicalUri,\n            appSyncGraphqlEndpoint,\n            apiKey: resolvedApiKey,\n            region,\n            host,\n            additionalCustomHeaders,\n        });\n        return result;\n    }\n};\n\nexport { awsRealTimeHeaderBasedAuth };\n//# sourceMappingURL=authHeaders.mjs.map\n","import { Observable } from 'rxjs';\nimport { GraphQLError } from 'graphql';\nimport { ConsoleLogger, Hub } from '@aws-amplify/core';\nimport { NonRetryableError, amplifyUuid, isNonRetryableError, base64Encoder, jitteredExponentialRetry, AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { ConnectionState, CONTROL_MSG } from '../../types/PubSub.mjs';\nimport { SOCKET_STATUS, DEFAULT_KEEP_ALIVE_TIMEOUT, NON_RETRYABLE_CODES, NON_RETRYABLE_ERROR_TYPES, SUBSCRIPTION_STATUS, START_ACK_TIMEOUT, MESSAGE_TYPES, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT, MAX_DELAY_MS, CONNECTION_INIT_TIMEOUT, CONNECTION_STATE_CHANGE } from '../constants.mjs';\nimport { ConnectionStateMonitor, CONNECTION_CHANGE } from '../../utils/ConnectionStateMonitor.mjs';\nimport { ReconnectionMonitor, ReconnectEvent } from '../../utils/ReconnectionMonitor.mjs';\nimport { additionalHeadersFromOptions, queryParamsFromCustomHeaders, realtimeUrlWithQueryString } from './appsyncUrl.mjs';\nimport { awsRealTimeHeaderBasedAuth } from './authHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst dispatchApiEvent = (payload) => {\n    Hub.dispatch('api', payload, 'PubSub', AMPLIFY_SYMBOL);\n};\nclass AWSWebSocketProvider {\n    constructor(args) {\n        this.subscriptionObserverMap = new Map();\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.keepAliveTimeout = DEFAULT_KEEP_ALIVE_TIMEOUT;\n        this.promiseArray = [];\n        this.connectionStateMonitor = new ConnectionStateMonitor();\n        this.reconnectionMonitor = new ReconnectionMonitor();\n        /**\n         * Open WebSocket connection & perform handshake\n         * Ref: https://docs.aws.amazon.com/appsync/latest/devguide/real-time-websocket-client.html#appsynclong-real-time-websocket-client-implementation-guide-for-graphql-subscriptions\n         *\n         * @param subprotocol -\n         */\n        this._establishConnection = async (awsRealTimeUrl, subprotocol) => {\n            this.logger.debug(`Establishing WebSocket connection to ${awsRealTimeUrl}`);\n            try {\n                await this._openConnection(awsRealTimeUrl, subprotocol);\n                await this._initiateHandshake();\n            }\n            catch (err) {\n                const { errorType, errorCode } = err;\n                if (NON_RETRYABLE_CODES.includes(errorCode) ||\n                    // Event API does not currently return `errorCode`. This may change in the future.\n                    // For now fall back to also checking known non-retryable error types\n                    NON_RETRYABLE_ERROR_TYPES.includes(errorType)) {\n                    throw new NonRetryableError(errorType);\n                }\n                else if (errorType) {\n                    throw new Error(errorType);\n                }\n                else {\n                    throw err;\n                }\n            }\n        };\n        this.logger = new ConsoleLogger(args.providerName);\n        this.wsProtocolName = args.wsProtocolName;\n        this.wsConnectUri = args.connectUri;\n        this.connectionStateMonitorSubscription =\n            this._startConnectionStateMonitoring();\n    }\n    /**\n     * Mark the socket closed and release all active listeners\n     */\n    close() {\n        // Mark the socket closed both in status and the connection monitor\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n        // Turn off the subscription monitor Hub publishing\n        this.connectionStateMonitorSubscription.unsubscribe();\n        // Complete all reconnect observers\n        this.reconnectionMonitor.close();\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                this.awsRealTimeSocket.onclose = (_) => {\n                    this.subscriptionObserverMap = new Map();\n                    this.awsRealTimeSocket = undefined;\n                    resolve();\n                };\n                this.awsRealTimeSocket.onerror = (err) => {\n                    reject(err);\n                };\n                this.awsRealTimeSocket.close();\n            }\n            else {\n                resolve();\n            }\n        });\n    }\n    subscribe(options, customUserAgentDetails) {\n        return new Observable(observer => {\n            if (!options?.appSyncGraphqlEndpoint) {\n                // \tobserver.error({\n                // \t\terrors: [\n                // \t\t\t{\n                // \t\t\t\t...new GraphQLError(\n                // \t\t\t\t\t`Subscribe only available for AWS AppSync endpoint`,\n                // \t\t\t\t),\n                // \t\t\t},\n                // \t\t],\n                // \t});\n                // \tobserver.complete();\n                return;\n            }\n            let subscriptionStartInProgress = false;\n            const subscriptionId = amplifyUuid();\n            const startSubscription = () => {\n                if (!subscriptionStartInProgress) {\n                    subscriptionStartInProgress = true;\n                    this._startSubscriptionWithAWSAppSyncRealTime({\n                        options,\n                        observer,\n                        subscriptionId,\n                        customUserAgentDetails,\n                    })\n                        .catch(err => {\n                        this.logger.debug(`${CONTROL_MSG.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${err}`);\n                        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n                    })\n                        .finally(() => {\n                        subscriptionStartInProgress = false;\n                    });\n                }\n            };\n            // Add an observable to the reconnection list to manage reconnection for this subscription\n            const reconnectSubscription = new Observable(reconnectSubscriptionObserver => {\n                this.reconnectionMonitor.addObserver(reconnectSubscriptionObserver);\n            }).subscribe(() => {\n                startSubscription();\n            });\n            startSubscription();\n            return async () => {\n                await this._cleanupSubscription(subscriptionId, reconnectSubscription);\n            };\n        });\n    }\n    async connect(options) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        await this._connectWebSocket(options);\n    }\n    async publish(options, customUserAgentDetails) {\n        if (this.socketStatus !== SOCKET_STATUS.READY) {\n            throw new Error('Subscription has not been initialized');\n        }\n        return this._publishMessage(options, customUserAgentDetails);\n    }\n    async _connectWebSocket(options) {\n        const { apiKey, appSyncGraphqlEndpoint, authenticationType, region } = options;\n        const { additionalCustomHeaders } = await additionalHeadersFromOptions(options);\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.OPENING_CONNECTION);\n        await this._initializeWebSocketConnection({\n            apiKey,\n            appSyncGraphqlEndpoint,\n            authenticationType,\n            region,\n            additionalCustomHeaders,\n        });\n    }\n    async _publishMessage(options, customUserAgentDetails) {\n        const subscriptionId = amplifyUuid();\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n            publish: true,\n        });\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                const publishListener = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.id === subscriptionId && data.type === 'publish_success') {\n                        this.awsRealTimeSocket &&\n                            this.awsRealTimeSocket.removeEventListener('message', publishListener);\n                        resolve();\n                    }\n                    if (data.erroredEvents && data.erroredEvents.length > 0) ;\n                };\n                this.awsRealTimeSocket.addEventListener('message', publishListener);\n                this.awsRealTimeSocket.addEventListener('close', () => {\n                    reject(new Error('WebSocket is closed'));\n                });\n                //\n                // this.awsRealTimeSocket.addEventListener('error', publishListener);\n                this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n            }\n        });\n    }\n    async _cleanupSubscription(subscriptionId, reconnectSubscription) {\n        // Cleanup reconnection subscription\n        reconnectSubscription?.unsubscribe();\n        // Cleanup after unsubscribing or observer.complete was called after _startSubscriptionWithAWSAppSyncRealTime\n        try {\n            // Waiting that subscription has been connected before trying to unsubscribe\n            await this._waitForSubscriptionToBeConnected(subscriptionId);\n            const { subscriptionState } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            if (!subscriptionState) {\n                // subscription already unsubscribed\n                return;\n            }\n            if (subscriptionState === SUBSCRIPTION_STATUS.CONNECTED) {\n                this._sendUnsubscriptionMessage(subscriptionId);\n            }\n            else {\n                throw new Error('Subscription never connected');\n            }\n        }\n        catch (err) {\n            this.logger.debug(`Error while unsubscribing ${err}`);\n        }\n        finally {\n            this._removeSubscriptionObserver(subscriptionId);\n        }\n    }\n    // Monitor the connection state and pass changes along to Hub\n    _startConnectionStateMonitoring() {\n        return this.connectionStateMonitor.connectionStateObservable.subscribe(connectionState => {\n            dispatchApiEvent({\n                event: CONNECTION_STATE_CHANGE,\n                data: {\n                    provider: this,\n                    connectionState,\n                },\n                message: `Connection state is ${connectionState}`,\n            });\n            this.connectionState = connectionState;\n            // Trigger START_RECONNECT when the connection is disrupted\n            if (connectionState === ConnectionState.ConnectionDisrupted) {\n                this.reconnectionMonitor.record(ReconnectEvent.START_RECONNECT);\n            }\n            // Trigger HALT_RECONNECT to halt reconnection attempts when the state is anything other than\n            // ConnectionDisrupted or Connecting\n            if ([\n                ConnectionState.Connected,\n                ConnectionState.ConnectedPendingDisconnect,\n                ConnectionState.ConnectedPendingKeepAlive,\n                ConnectionState.ConnectedPendingNetwork,\n                ConnectionState.ConnectionDisruptedPendingNetwork,\n                ConnectionState.Disconnected,\n            ].includes(connectionState)) {\n                this.reconnectionMonitor.record(ReconnectEvent.HALT_RECONNECT);\n            }\n        });\n    }\n    async _startSubscriptionWithAWSAppSyncRealTime({ options, observer, subscriptionId, customUserAgentDetails, }) {\n        const { query, variables } = options;\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            startAckTimeoutId: undefined,\n        });\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n        });\n        try {\n            await this._connectWebSocket(options);\n        }\n        catch (err) {\n            this._logStartSubscriptionError(subscriptionId, observer, err);\n            return;\n        }\n        // Potential race condition can occur when unsubscribe is called during _initializeWebSocketConnection.\n        // E.g.unsubscribe gets invoked prior to finishing WebSocket handshake or START_ACK.\n        // Both subscriptionFailedCallback and subscriptionReadyCallback are used to synchronized this.\n        const { subscriptionFailedCallback, subscriptionReadyCallback } = this.subscriptionObserverMap.get(subscriptionId) ?? {};\n        // This must be done before sending the message in order to be listening immediately\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionReadyCallback,\n            subscriptionFailedCallback,\n            startAckTimeoutId: setTimeout(() => {\n                this._timeoutStartSubscriptionAck(subscriptionId);\n            }, START_ACK_TIMEOUT),\n        });\n        if (this.awsRealTimeSocket) {\n            this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n        }\n    }\n    // Log logic for start subscription failures\n    _logStartSubscriptionError(subscriptionId, observer, err) {\n        this.logger.debug({ err });\n        const message = String(err.message ?? '');\n        // Resolving to give the state observer time to propogate the update\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n        // Capture the error only when the network didn't cause disruption\n        if (this.connectionState !== ConnectionState.ConnectionDisruptedPendingNetwork) {\n            // When the error is non-retriable, error out the observable\n            if (isNonRetryableError(err)) {\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`),\n                        },\n                    ],\n                });\n            }\n            else {\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`);\n            }\n            const { subscriptionFailedCallback } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            // Notify concurrent unsubscription\n            if (typeof subscriptionFailedCallback === 'function') {\n                subscriptionFailedCallback();\n            }\n        }\n    }\n    // Waiting that subscription has been connected before trying to unsubscribe\n    async _waitForSubscriptionToBeConnected(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { subscriptionState } = subscriptionObserver;\n            // This in case unsubscribe is invoked before sending start subscription message\n            if (subscriptionState === SUBSCRIPTION_STATUS.PENDING) {\n                return new Promise((resolve, reject) => {\n                    const { observer, subscriptionState: observedSubscriptionState, variables, query, } = subscriptionObserver;\n                    this.subscriptionObserverMap.set(subscriptionId, {\n                        observer,\n                        subscriptionState: observedSubscriptionState,\n                        variables,\n                        query,\n                        subscriptionReadyCallback: resolve,\n                        subscriptionFailedCallback: reject,\n                    });\n                });\n            }\n        }\n    }\n    _sendUnsubscriptionMessage(subscriptionId) {\n        try {\n            if (this.awsRealTimeSocket &&\n                this.awsRealTimeSocket.readyState === WebSocket.OPEN &&\n                this.socketStatus === SOCKET_STATUS.READY) {\n                // Preparing unsubscribe message to stop receiving messages for that subscription\n                const unsubscribeMessage = this._unsubscribeMessage(subscriptionId);\n                const stringToAWSRealTime = JSON.stringify(unsubscribeMessage);\n                this.awsRealTimeSocket.send(stringToAWSRealTime);\n            }\n        }\n        catch (err) {\n            // If GQL_STOP is not sent because of disconnection issue, then there is nothing the client can do\n            this.logger.debug({ err });\n        }\n    }\n    _removeSubscriptionObserver(subscriptionId) {\n        this.subscriptionObserverMap.delete(subscriptionId);\n        // Verifying 1000ms after removing subscription in case there are new subscription unmount/mount\n        setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n    }\n    _closeSocketIfRequired() {\n        if (this.subscriptionObserverMap.size > 0) {\n            // Active subscriptions on the WebSocket\n            return;\n        }\n        if (!this.awsRealTimeSocket) {\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            return;\n        }\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSING_CONNECTION);\n        if (this.awsRealTimeSocket.bufferedAmount > 0) {\n            // Still data on the WebSocket\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n        else {\n            this.logger.debug('closing WebSocket...');\n            if (this.keepAliveTimeoutId) {\n                clearTimeout(this.keepAliveTimeoutId);\n            }\n            if (this.keepAliveAlertTimeoutId) {\n                clearTimeout(this.keepAliveAlertTimeoutId);\n            }\n            const tempSocket = this.awsRealTimeSocket;\n            // Cleaning callbacks to avoid race condition, socket still exists\n            tempSocket.onclose = null;\n            tempSocket.onerror = null;\n            tempSocket.close(1000);\n            this.awsRealTimeSocket = undefined;\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n        }\n    }\n    _handleIncomingSubscriptionMessage(message) {\n        if (typeof message.data !== 'string') {\n            return;\n        }\n        const [isData, data] = this._handleSubscriptionData(message);\n        if (isData)\n            return;\n        const { type, id, payload } = data;\n        const { observer = null, query = '', variables = {}, startAckTimeoutId, subscriptionReadyCallback, subscriptionFailedCallback, } = this.subscriptionObserverMap.get(id) || {};\n        if (type === MESSAGE_TYPES.GQL_START_ACK ||\n            type === MESSAGE_TYPES.EVENT_SUBSCRIBE_ACK) {\n            this.logger.debug(`subscription ready for ${JSON.stringify({ query, variables })}`);\n            if (typeof subscriptionReadyCallback === 'function') {\n                subscriptionReadyCallback();\n            }\n            if (startAckTimeoutId)\n                clearTimeout(startAckTimeoutId);\n            dispatchApiEvent({\n                event: CONTROL_MSG.SUBSCRIPTION_ACK,\n                data: { query, variables },\n                message: 'Connection established for subscription',\n            });\n            const subscriptionState = SUBSCRIPTION_STATUS.CONNECTED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId: undefined,\n                    subscriptionState,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                });\n            }\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_ESTABLISHED);\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE) {\n            if (this.keepAliveTimeoutId)\n                clearTimeout(this.keepAliveTimeoutId);\n            if (this.keepAliveAlertTimeoutId)\n                clearTimeout(this.keepAliveAlertTimeoutId);\n            this.keepAliveTimeoutId = setTimeout(() => {\n                this._errorDisconnect(CONTROL_MSG.TIMEOUT_DISCONNECT);\n            }, this.keepAliveTimeout);\n            this.keepAliveAlertTimeoutId = setTimeout(() => {\n                this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE_MISSED);\n            }, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT);\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE);\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_ERROR) {\n            const subscriptionState = SUBSCRIPTION_STATUS.FAILED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                    subscriptionState,\n                });\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${JSON.stringify(payload ?? data)}`);\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${JSON.stringify(payload ?? data)}`),\n                        },\n                    ],\n                });\n                if (startAckTimeoutId)\n                    clearTimeout(startAckTimeoutId);\n                if (typeof subscriptionFailedCallback === 'function') {\n                    subscriptionFailedCallback();\n                }\n            }\n        }\n    }\n    _errorDisconnect(msg) {\n        this.logger.debug(`Disconnect error: ${msg}`);\n        if (this.awsRealTimeSocket) {\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n            this.awsRealTimeSocket.close();\n        }\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n    }\n    _timeoutStartSubscriptionAck(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { observer, query, variables } = subscriptionObserver;\n            if (!observer) {\n                return;\n            }\n            this.subscriptionObserverMap.set(subscriptionId, {\n                observer,\n                query,\n                variables,\n                subscriptionState: SUBSCRIPTION_STATUS.FAILED,\n            });\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n            this.logger.debug('timeoutStartSubscription', JSON.stringify({ query, variables }));\n        }\n    }\n    _initializeWebSocketConnection({ appSyncGraphqlEndpoint, authenticationType, apiKey, region, additionalCustomHeaders, }) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        // TODO(Eslint): refactor to now use async function as the promise executor\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            this.promiseArray.push({ res: resolve, rej: reject });\n            if (this.socketStatus === SOCKET_STATUS.CLOSED) {\n                try {\n                    this.socketStatus = SOCKET_STATUS.CONNECTING;\n                    // Empty payload on connect\n                    const payloadString = '{}';\n                    const authHeader = await awsRealTimeHeaderBasedAuth({\n                        authenticationType,\n                        payload: payloadString,\n                        canonicalUri: this.wsConnectUri,\n                        apiKey,\n                        appSyncGraphqlEndpoint,\n                        region,\n                        additionalCustomHeaders,\n                    });\n                    const headerString = authHeader ? JSON.stringify(authHeader) : '';\n                    // base64url-encoded string\n                    const encodedHeader = base64Encoder.convert(headerString, {\n                        urlSafe: true,\n                        skipPadding: true,\n                    });\n                    const authTokenSubprotocol = `header-${encodedHeader}`;\n                    const queryParams = queryParamsFromCustomHeaders(additionalCustomHeaders);\n                    const awsRealTimeUrl = realtimeUrlWithQueryString(appSyncGraphqlEndpoint, queryParams);\n                    await this._establishRetryableConnection(awsRealTimeUrl, authTokenSubprotocol);\n                    this.promiseArray.forEach(({ res }) => {\n                        this.logger.debug('Notifying connection successful');\n                        res();\n                    });\n                    this.socketStatus = SOCKET_STATUS.READY;\n                    this.promiseArray = [];\n                }\n                catch (err) {\n                    this.logger.debug('Connection exited with', err);\n                    this.promiseArray.forEach(({ rej }) => {\n                        rej(err);\n                    });\n                    this.promiseArray = [];\n                    if (this.awsRealTimeSocket &&\n                        this.awsRealTimeSocket.readyState === WebSocket.OPEN) {\n                        this.awsRealTimeSocket.close(3001);\n                    }\n                    this.awsRealTimeSocket = undefined;\n                    this.socketStatus = SOCKET_STATUS.CLOSED;\n                }\n            }\n        });\n    }\n    async _establishRetryableConnection(awsRealTimeUrl, subprotocol) {\n        this.logger.debug(`Establishing retryable connection`);\n        await jitteredExponentialRetry(this._establishConnection.bind(this), [awsRealTimeUrl, subprotocol], MAX_DELAY_MS);\n    }\n    async _openConnection(awsRealTimeUrl, subprotocol) {\n        return new Promise((resolve, reject) => {\n            const newSocket = this._getNewWebSocket(awsRealTimeUrl, [\n                this.wsProtocolName,\n                subprotocol,\n            ]);\n            newSocket.onerror = () => {\n                this.logger.debug(`WebSocket connection error`);\n            };\n            newSocket.onclose = () => {\n                reject(new Error('Connection handshake error'));\n            };\n            newSocket.onopen = () => {\n                this.awsRealTimeSocket = newSocket;\n                resolve();\n            };\n        });\n    }\n    _getNewWebSocket(url, protocol) {\n        return new WebSocket(url, protocol);\n    }\n    async _initiateHandshake() {\n        return new Promise((resolve, reject) => {\n            if (!this.awsRealTimeSocket) {\n                reject(new Error('awsRealTimeSocket undefined'));\n                return;\n            }\n            let ackOk = false;\n            this.awsRealTimeSocket.onerror = error => {\n                this.logger.debug(`WebSocket error ${JSON.stringify(error)}`);\n            };\n            this.awsRealTimeSocket.onclose = event => {\n                this.logger.debug(`WebSocket closed ${event.reason}`);\n                reject(new Error(JSON.stringify(event)));\n            };\n            this.awsRealTimeSocket.onmessage = (message) => {\n                if (typeof message.data !== 'string') {\n                    return;\n                }\n                this.logger.debug(`subscription message from AWS AppSyncRealTime: ${message.data} `);\n                const data = JSON.parse(message.data);\n                const { type } = data;\n                const connectionTimeoutMs = this._extractConnectionTimeout(data);\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ACK) {\n                    ackOk = true;\n                    this._registerWebsocketHandlers(connectionTimeoutMs);\n                    resolve('Connected to AWS AppSyncRealTime');\n                    return;\n                }\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ERROR) {\n                    const { errorType, errorCode } = this._extractErrorCodeAndType(data);\n                    // TODO(Eslint): refactor to reject an Error object instead of a plain object\n                    // eslint-disable-next-line prefer-promise-reject-errors\n                    reject({ errorType, errorCode });\n                }\n            };\n            const gqlInit = {\n                type: MESSAGE_TYPES.GQL_CONNECTION_INIT,\n            };\n            this.awsRealTimeSocket.send(JSON.stringify(gqlInit));\n            const checkAckOk = (targetAckOk) => {\n                if (!targetAckOk) {\n                    this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n                    reject(new Error(`Connection timeout: ack from AWSAppSyncRealTime was not received after ${CONNECTION_INIT_TIMEOUT} ms`));\n                }\n            };\n            setTimeout(() => {\n                checkAckOk(ackOk);\n            }, CONNECTION_INIT_TIMEOUT);\n        });\n    }\n    _registerWebsocketHandlers(connectionTimeoutMs) {\n        if (!this.awsRealTimeSocket) {\n            return;\n        }\n        this.keepAliveTimeout = connectionTimeoutMs;\n        this.awsRealTimeSocket.onmessage =\n            this._handleIncomingSubscriptionMessage.bind(this);\n        this.awsRealTimeSocket.onerror = err => {\n            this.logger.debug(err);\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n        this.awsRealTimeSocket.onclose = event => {\n            this.logger.debug(`WebSocket closed ${event.reason}`);\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n    }\n}\n\nexport { AWSWebSocketProvider };\n//# sourceMappingURL=index.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\nimport { jitteredBackoff } from './jitteredBackoff.mjs';\nimport { retry } from './retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nconst jitteredExponentialRetry = (functionToRetry, args, maxDelayMs = MAX_DELAY_MS, onTerminate) => retry(functionToRetry, args, jitteredBackoff(maxDelayMs), onTerminate);\n\nexport { jitteredExponentialRetry };\n//# sourceMappingURL=jitteredExponentialRetry.mjs.map\n","import { USER_AGENT_HEADER, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { MESSAGE_TYPES, DEFAULT_KEEP_ALIVE_TIMEOUT } from '../constants.mjs';\nimport { AWSWebSocketProvider } from '../AWSWebSocketProvider/index.mjs';\nimport { awsRealTimeHeaderBasedAuth } from '../AWSWebSocketProvider/authHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'AWSAppSyncRealTimeProvider';\nconst WS_PROTOCOL_NAME = 'graphql-ws';\nconst CONNECT_URI = '/connect';\nclass AWSAppSyncRealTimeProvider extends AWSWebSocketProvider {\n    constructor() {\n        super({\n            providerName: PROVIDER_NAME,\n            wsProtocolName: WS_PROTOCOL_NAME,\n            connectUri: CONNECT_URI,\n        });\n    }\n    getProviderName() {\n        return PROVIDER_NAME;\n    }\n    subscribe(options, customUserAgentDetails) {\n        return super.subscribe(options, customUserAgentDetails);\n    }\n    async _prepareSubscriptionPayload({ options, subscriptionId, customUserAgentDetails, additionalCustomHeaders, libraryConfigHeaders, }) {\n        const { appSyncGraphqlEndpoint, authenticationType, query, variables, apiKey, region, } = options;\n        const data = {\n            query,\n            variables,\n        };\n        const serializedData = JSON.stringify(data);\n        const headers = {\n            ...(await awsRealTimeHeaderBasedAuth({\n                apiKey,\n                appSyncGraphqlEndpoint,\n                authenticationType,\n                payload: serializedData,\n                canonicalUri: '',\n                region,\n                additionalCustomHeaders,\n            })),\n            ...libraryConfigHeaders,\n            ...additionalCustomHeaders,\n            [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n        };\n        const subscriptionMessage = {\n            id: subscriptionId,\n            payload: {\n                data: serializedData,\n                extensions: {\n                    authorization: {\n                        ...headers,\n                    },\n                },\n            },\n            type: MESSAGE_TYPES.GQL_START,\n        };\n        const serializedSubscriptionMessage = JSON.stringify(subscriptionMessage);\n        return serializedSubscriptionMessage;\n    }\n    _handleSubscriptionData(message) {\n        this.logger.debug(`subscription message from AWS AppSync RealTime: ${message.data}`);\n        const { id = '', payload, type } = JSON.parse(String(message.data));\n        const { observer = null, query = '', variables = {}, } = this.subscriptionObserverMap.get(id) || {};\n        this.logger.debug({ id, observer, query, variables });\n        if (type === MESSAGE_TYPES.DATA && payload && payload.data) {\n            if (observer) {\n                observer.next(payload);\n            }\n            else {\n                this.logger.debug(`observer not found for id: ${id}`);\n            }\n            return [true, { id, type, payload }];\n        }\n        return [false, { id, type, payload }];\n    }\n    _unsubscribeMessage(subscriptionId) {\n        return {\n            id: subscriptionId,\n            type: MESSAGE_TYPES.GQL_STOP,\n        };\n    }\n    _extractConnectionTimeout(data) {\n        const { payload: { connectionTimeoutMs = DEFAULT_KEEP_ALIVE_TIMEOUT } = {}, } = data;\n        return connectionTimeoutMs;\n    }\n    _extractErrorCodeAndType(data) {\n        const { payload: { errors: [{ errorType = '', errorCode = 0 } = {}] = [] } = {}, } = data;\n        return { errorCode, errorType };\n    }\n}\n\nexport { AWSAppSyncRealTimeProvider };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass GraphQLApiError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = GraphQLApiError;\n        Object.setPrototypeOf(this, GraphQLApiError.prototype);\n    }\n}\n\nexport { GraphQLApiError };\n//# sourceMappingURL=GraphQLApiError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar APIValidationErrorCode;\n(function (APIValidationErrorCode) {\n    APIValidationErrorCode[\"NoAuthSession\"] = \"NoAuthSession\";\n    APIValidationErrorCode[\"NoRegion\"] = \"NoRegion\";\n    APIValidationErrorCode[\"NoCustomEndpoint\"] = \"NoCustomEndpoint\";\n})(APIValidationErrorCode || (APIValidationErrorCode = {}));\nconst validationErrorMap = {\n    [APIValidationErrorCode.NoAuthSession]: {\n        message: 'Auth session should not be empty.',\n    },\n    // TODO: re-enable when working in all test environments:\n    // [APIValidationErrorCode.NoEndpoint]: {\n    // \tmessage: 'Missing endpoint',\n    // },\n    [APIValidationErrorCode.NoRegion]: {\n        message: 'Missing region.',\n    },\n    [APIValidationErrorCode.NoCustomEndpoint]: {\n        message: 'Custom endpoint region is present without custom endpoint.',\n    },\n};\n\nexport { APIValidationErrorCode, validationErrorMap };\n//# sourceMappingURL=validation.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from './errors/assertValidationError.mjs';\nimport { APIValidationErrorCode } from './errors/validation.mjs';\nimport 'graphql';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('GraphQLAPI resolveConfig');\n/**\n * @internal\n */\nconst resolveConfig = (amplify) => {\n    const config = amplify.getConfig();\n    if (!config.API?.GraphQL) {\n        logger.warn('The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().');\n    }\n    const { apiKey, customEndpoint, customEndpointRegion, defaultAuthMode, endpoint, region, } = config.API?.GraphQL ?? {};\n    // TODO: re-enable when working in all test environments:\n    // assertValidationError(!!endpoint, APIValidationErrorCode.NoEndpoint);\n    assertValidationError(!(!customEndpoint && customEndpointRegion), APIValidationErrorCode.NoCustomEndpoint);\n    return {\n        apiKey,\n        customEndpoint,\n        customEndpointRegion,\n        defaultAuthMode,\n        endpoint,\n        region,\n    };\n};\n\nexport { resolveConfig };\n//# sourceMappingURL=resolveConfig.mjs.map\n","import { GraphQLApiError } from './GraphQLApiError.mjs';\nimport { validationErrorMap } from './validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction assertValidationError(assertion, name) {\n    const { message, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new GraphQLApiError({ name, message, recoverySuggestion });\n    }\n}\n\nexport { assertValidationError };\n//# sourceMappingURL=assertValidationError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst resolveLibraryOptions = (amplify) => {\n    const headers = amplify.libraryOptions?.API?.GraphQL?.headers;\n    const withCredentials = amplify.libraryOptions?.API?.GraphQL?.withCredentials;\n    return { headers, withCredentials };\n};\n\nexport { resolveLibraryOptions };\n//# sourceMappingURL=resolveLibraryOptions.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Checks to see if the given response or subscription message contains an\n * Unauthorized error. If it does, it changes the error message to include instructions\n * for the app developer.\n */\nfunction repackageUnauthorizedError(content) {\n    if (content.errors && Array.isArray(content.errors)) {\n        content.errors.forEach(e => {\n            if (isUnauthorizedError(e)) {\n                e.message = 'Unauthorized';\n                e.recoverySuggestion =\n                    `If you're calling an Amplify-generated API, make sure ` +\n                        `to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization ` +\n                        `rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')`;\n            }\n        });\n    }\n    return content;\n}\nfunction isUnauthorizedError(error) {\n    // Error pattern corresponding to appsync calls\n    if (error?.originalError?.name?.startsWith('UnauthorizedException')) {\n        return true;\n    }\n    // Error pattern corresponding to appsync subscriptions\n    if (error.message?.startsWith('Connection failed:') &&\n        error.message?.includes('Permission denied')) {\n        return true;\n    }\n    return false;\n}\n\nexport { repackageUnauthorizedError };\n//# sourceMappingURL=repackageAuthError.mjs.map\n","import { GraphQLAuthError } from '../../types/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst NO_API_KEY = {\n    name: 'NoApiKey',\n    // ideal: No API key configured.\n    message: GraphQLAuthError.NO_API_KEY,\n    recoverySuggestion: 'The API request was made with `authMode: \"apiKey\"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.',\n};\nconst NO_VALID_CREDENTIALS = {\n    name: 'NoCredentials',\n    // ideal: No auth credentials available.\n    message: GraphQLAuthError.NO_CREDENTIALS,\n    recoverySuggestion: `The API request was made with \\`authMode: \"iam\"\\` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as \"guest access\", verify if \"Auth.Cognito.allowGuestAccess\" is set to \"true\" in the \\`Amplify.configure()\\` function.`,\n};\nconst NO_VALID_AUTH_TOKEN = {\n    name: 'NoValidAuthTokens',\n    // ideal: No valid JWT auth token provided to make the API request..\n    message: GraphQLAuthError.NO_FEDERATED_JWT,\n    recoverySuggestion: 'If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nconst NO_SIGNED_IN_USER = {\n    name: 'NoSignedUser',\n    // ideal: Couldn't retrieve authentication credentials to make the API request.\n    message: GraphQLAuthError.NO_CURRENT_USER,\n    recoverySuggestion: 'Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nconst NO_AUTH_TOKEN_HEADER = {\n    name: 'NoAuthorizationHeader',\n    // ideal: Authorization header not specified.\n    message: GraphQLAuthError.NO_AUTH_TOKEN,\n    recoverySuggestion: 'The API request was made with `authMode: \"lambda\"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.',\n};\nconst NO_ENDPOINT = {\n    name: 'NoEndpoint',\n    message: 'No GraphQL endpoint configured in `Amplify.configure()`.',\n    recoverySuggestion: 'Review if the GraphQL API endpoint is set in the `Amplify.configure()` function.',\n};\n\nexport { NO_API_KEY, NO_AUTH_TOKEN_HEADER, NO_ENDPOINT, NO_SIGNED_IN_USER, NO_VALID_AUTH_TOKEN, NO_VALID_CREDENTIALS };\n//# sourceMappingURL=constants.mjs.map\n","import { GraphQLError } from 'graphql';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGraphQLResultWithError = (error) => {\n    return {\n        data: {},\n        errors: [new GraphQLError(error.message, null, null, null, null, error)],\n    };\n};\n\nexport { createGraphQLResultWithError };\n//# sourceMappingURL=createGraphQLResultWithError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isGraphQLResponseWithErrors(response) {\n    if (!response) {\n        return false;\n    }\n    const r = response;\n    return Array.isArray(r.errors) && r.errors.length > 0;\n}\n\nexport { isGraphQLResponseWithErrors };\n//# sourceMappingURL=isGraphQLResponseWithErrors.mjs.map\n","import { GraphQLApiError } from '../utils/errors/GraphQLApiError.mjs';\nimport '../utils/errors/validation.mjs';\nimport 'graphql';\nimport { NO_AUTH_TOKEN_HEADER, NO_SIGNED_IN_USER, NO_VALID_AUTH_TOKEN, NO_VALID_CREDENTIALS, NO_API_KEY } from '../utils/errors/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nasync function headerBasedAuth(amplify, authMode, apiKey, additionalHeaders = {}) {\n    let headers = {};\n    switch (authMode) {\n        case 'apiKey':\n            if (!apiKey) {\n                throw new GraphQLApiError(NO_API_KEY);\n            }\n            headers = {\n                'X-Api-Key': apiKey,\n            };\n            break;\n        case 'iam': {\n            const session = await amplify.Auth.fetchAuthSession();\n            if (session.credentials === undefined) {\n                throw new GraphQLApiError(NO_VALID_CREDENTIALS);\n            }\n            break;\n        }\n        case 'oidc':\n        case 'userPool': {\n            let token;\n            try {\n                token = (await amplify.Auth.fetchAuthSession()).tokens?.accessToken.toString();\n            }\n            catch (e) {\n                // fetchAuthSession failed\n                throw new GraphQLApiError({\n                    ...NO_SIGNED_IN_USER,\n                    underlyingError: e,\n                });\n            }\n            // `fetchAuthSession()` succeeded but didn't return `tokens`.\n            // This may happen when unauthenticated access is enabled and there is\n            // no user signed in.\n            if (!token) {\n                throw new GraphQLApiError(NO_VALID_AUTH_TOKEN);\n            }\n            headers = {\n                Authorization: token,\n            };\n            break;\n        }\n        case 'lambda':\n            if (typeof additionalHeaders === 'object' &&\n                !additionalHeaders.Authorization) {\n                throw new GraphQLApiError(NO_AUTH_TOKEN_HEADER);\n            }\n            headers = {\n                Authorization: additionalHeaders.Authorization,\n            };\n            break;\n    }\n    return headers;\n}\n\nexport { headerBasedAuth };\n//# sourceMappingURL=graphqlAuth.mjs.map\n","import { parse, print } from 'graphql';\nimport { catchError } from 'rxjs';\nimport { AmplifyUrl, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { isCancelError } from '@aws-amplify/api-rest';\nimport { post, cancel, updateRequestToBeCancellable } from '@aws-amplify/api-rest/internals';\nimport { AWSAppSyncRealTimeProvider } from '../Providers/AWSAppSyncRealTimeProvider/index.mjs';\nimport { resolveConfig } from '../utils/resolveConfig.mjs';\nimport { resolveLibraryOptions } from '../utils/resolveLibraryOptions.mjs';\nimport { repackageUnauthorizedError } from '../utils/errors/repackageAuthError.mjs';\nimport { NO_ENDPOINT } from '../utils/errors/constants.mjs';\nimport { GraphQLApiError } from '../utils/errors/GraphQLApiError.mjs';\nimport '../utils/errors/validation.mjs';\nimport { createGraphQLResultWithError } from '../utils/errors/createGraphQLResultWithError.mjs';\nimport { isGraphQLResponseWithErrors } from './utils/runtimeTypeGuards/isGraphQLResponseWithErrors.mjs';\nimport { headerBasedAuth } from './graphqlAuth.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\nconst isAmplifyInstance = (amplify) => {\n    return typeof amplify !== 'function';\n};\n/**\n * Export Cloud Logic APIs\n */\nclass InternalGraphQLAPIClass {\n    constructor() {\n        /**\n         * @private\n         */\n        this.appSyncRealTime = new AWSAppSyncRealTimeProvider();\n        this._api = {\n            post,\n            cancelREST: cancel,\n            isCancelErrorREST: isCancelError,\n            updateRequestToBeCancellable,\n        };\n    }\n    getModuleName() {\n        return 'InternalGraphQLAPI';\n    }\n    /**\n     * to get the operation type\n     * @param operation\n     */\n    getGraphqlOperationType(operation) {\n        const doc = parse(operation);\n        const definitions = doc.definitions;\n        const [{ operation: operationType }] = definitions;\n        return operationType;\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, { query: paramQuery, variables = {}, authMode, authToken }, additionalHeaders, customUserAgentDetails) {\n        const query = typeof paramQuery === 'string'\n            ? parse(paramQuery)\n            : parse(print(paramQuery));\n        const [operationDef = {}] = query.definitions.filter(def => def.kind === 'OperationDefinition');\n        const { operation: operationType } = operationDef;\n        const headers = additionalHeaders || {};\n        switch (operationType) {\n            case 'query':\n            case 'mutation': {\n                const abortController = new AbortController();\n                let responsePromise;\n                if (isAmplifyInstance(amplify)) {\n                    responsePromise = this._graphql(amplify, { query, variables, authMode }, headers, abortController, customUserAgentDetails, authToken);\n                }\n                else {\n                    // NOTE: this wrapper function must be await-able so the Amplify server context manager can\n                    // destroy the context only after it completes\n                    const wrapper = async (amplifyInstance) => {\n                        const result = await this._graphql(amplifyInstance, { query, variables, authMode }, headers, abortController, customUserAgentDetails, authToken);\n                        return result;\n                    };\n                    responsePromise = amplify(wrapper);\n                }\n                this._api.updateRequestToBeCancellable(responsePromise, abortController);\n                return responsePromise;\n            }\n            case 'subscription':\n                return this._graphqlSubscribe(amplify, { query, variables, authMode }, headers, customUserAgentDetails, authToken);\n            default:\n                throw new Error(`invalid operation type: ${operationType}`);\n        }\n    }\n    async _graphql(amplify, { query, variables, authMode: explicitAuthMode }, additionalHeaders = {}, abortController, customUserAgentDetails, authToken) {\n        const { apiKey, region, endpoint: appSyncGraphqlEndpoint, customEndpoint, customEndpointRegion, defaultAuthMode, } = resolveConfig(amplify);\n        const initialAuthMode = explicitAuthMode || defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `customHeaders` here are from the Amplify configuration options,\n         * and are for non-AppSync endpoints only. These are *not* the same as\n         * `additionalHeaders`, which are custom headers that are either 1)\n         * included when configuring the API client or 2) passed along with\n         * individual requests.\n         */\n        const { headers: customHeaders, withCredentials } = resolveLibraryOptions(amplify);\n        /**\n         * Client or request-specific custom headers that may or may not be\n         * returned by a function:\n         */\n        let additionalCustomHeaders;\n        if (typeof additionalHeaders === 'function') {\n            const requestOptions = {\n                method: 'POST',\n                url: new AmplifyUrl(customEndpoint || appSyncGraphqlEndpoint || '').toString(),\n                queryString: print(query),\n            };\n            additionalCustomHeaders = await additionalHeaders(requestOptions);\n        }\n        else {\n            additionalCustomHeaders = additionalHeaders;\n        }\n        // if an authorization header is set, have the explicit authToken take precedence\n        if (authToken) {\n            additionalCustomHeaders = {\n                ...additionalCustomHeaders,\n                Authorization: authToken,\n            };\n        }\n        const authHeaders = await headerBasedAuth(amplify, authMode, apiKey, additionalCustomHeaders);\n        const headers = {\n            ...(!customEndpoint && authHeaders),\n            /**\n             * Custom endpoint headers.\n             * If there is both a custom endpoint and custom region present, we get the headers.\n             * If there is a custom endpoint but no region, we return an empty object.\n             * If neither are present, we return an empty object.\n             */\n            ...((customEndpoint && (customEndpointRegion ? authHeaders : {})) || {}),\n            // Custom headers included in Amplify configuration options:\n            ...(customHeaders &&\n                (await customHeaders({\n                    query: print(query),\n                    variables,\n                }))),\n            // Custom headers from individual requests or API client configuration:\n            ...additionalCustomHeaders,\n            // User agent headers:\n            ...(!customEndpoint && {\n                [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n            }),\n        };\n        const body = {\n            query: print(query),\n            variables: variables || null,\n        };\n        let signingServiceInfo;\n        /**\n         * We do not send the signing service info to the REST API under the\n         * following conditions (i.e. it will not sign the request):\n         *   - there is a custom endpoint but no region\n         *   - the auth mode is `none`, or `apiKey`\n         *   - the auth mode is a type other than the types listed below\n         */\n        if ((customEndpoint && !customEndpointRegion) ||\n            (authMode !== 'oidc' &&\n                authMode !== 'userPool' &&\n                authMode !== 'iam' &&\n                authMode !== 'lambda')) {\n            signingServiceInfo = undefined;\n        }\n        else {\n            signingServiceInfo = {\n                service: !customEndpointRegion ? 'appsync' : 'execute-api',\n                region: !customEndpointRegion ? region : customEndpointRegion,\n            };\n        }\n        const endpoint = customEndpoint || appSyncGraphqlEndpoint;\n        if (!endpoint) {\n            throw createGraphQLResultWithError(new GraphQLApiError(NO_ENDPOINT));\n        }\n        let response;\n        try {\n            // \t// // See the inline doc of the REST `post()` API for possible errors to be thrown.\n            // \t// // As these errors are catastrophic they should be caught and handled by GraphQL\n            // \t// // API consumers.\n            const { body: responseBody } = await this._api.post(amplify, {\n                url: new AmplifyUrl(endpoint),\n                options: {\n                    headers,\n                    body,\n                    signingServiceInfo,\n                    withCredentials,\n                },\n                abortController,\n            });\n            response = await responseBody.json();\n        }\n        catch (error) {\n            if (this.isCancelError(error)) {\n                throw error;\n            }\n            response = createGraphQLResultWithError(error);\n        }\n        if (isGraphQLResponseWithErrors(response)) {\n            throw repackageUnauthorizedError(response);\n        }\n        return response;\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param {any} error - Any error\n     * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return this._api.isCancelErrorREST(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns - A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return this._api.cancelREST(request, message);\n    }\n    _graphqlSubscribe(amplify, { query, variables, authMode: explicitAuthMode }, additionalHeaders = {}, customUserAgentDetails, authToken) {\n        const config = resolveConfig(amplify);\n        const initialAuthMode = explicitAuthMode || config?.defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `libraryConfigHeaders` are from the Amplify configuration options,\n         * and will not be overwritten by other custom headers. These are *not*\n         * the same as `additionalHeaders`, which are custom headers that are\n         * either 1)included when configuring the API client or 2) passed along\n         * with individual requests.\n         */\n        const { headers: libraryConfigHeaders } = resolveLibraryOptions(amplify);\n        return this.appSyncRealTime\n            .subscribe({\n            query: print(query),\n            variables,\n            appSyncGraphqlEndpoint: config?.endpoint,\n            region: config?.region,\n            authenticationType: authMode,\n            apiKey: config?.apiKey,\n            additionalHeaders,\n            authToken,\n            libraryConfigHeaders,\n        }, customUserAgentDetails)\n            .pipe(catchError(e => {\n            if (e.errors) {\n                throw repackageUnauthorizedError(e);\n            }\n            throw e;\n        }));\n    }\n}\nconst InternalGraphQLAPI = new InternalGraphQLAPIClass();\n\nexport { InternalGraphQLAPI, InternalGraphQLAPIClass };\n//# sourceMappingURL=InternalGraphQLAPI.mjs.map\n","import { Category, ApiAction } from '@aws-amplify/core/internals/utils';\nimport { INTERNAL_USER_AGENT_OVERRIDE } from '@aws-amplify/data-schema/runtime';\nimport { InternalGraphQLAPIClass } from './internals/InternalGraphQLAPI.mjs';\n\nfunction isGraphQLOptionsWithOverride(options) {\n    return INTERNAL_USER_AGENT_OVERRIDE in options;\n}\nconst graphqlOperation = (query, variables = {}, authToken) => ({\n    query,\n    variables,\n    authToken,\n});\n/**\n * Export Cloud Logic APIs\n */\nclass GraphQLAPIClass extends InternalGraphQLAPIClass {\n    getModuleName() {\n        return 'GraphQLAPI';\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, options, additionalHeaders) {\n        const userAgentDetails = {\n            category: Category.API,\n            action: ApiAction.GraphQl,\n        };\n        if (isGraphQLOptionsWithOverride(options)) {\n            const { [INTERNAL_USER_AGENT_OVERRIDE]: internalUserAgentOverride, ...cleanOptions } = options;\n            return super.graphql(amplify, cleanOptions, additionalHeaders, {\n                ...userAgentDetails,\n                ...internalUserAgentOverride,\n            });\n        }\n        return super.graphql(amplify, options, additionalHeaders, {\n            ...userAgentDetails,\n        });\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param error - Any error\n     * @returns A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return super.isCancelError(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return super.cancel(request, message);\n    }\n}\nconst GraphQLAPI = new GraphQLAPIClass();\n\nexport { GraphQLAPI, GraphQLAPIClass, graphqlOperation };\n//# sourceMappingURL=GraphQLAPI.mjs.map\n","import { GraphQLAPI } from '../GraphQLAPI.mjs';\nimport { getInternals } from '../types/index.mjs';\n\n/**\n * Invokes graphql operations against a graphql service, providing correct input and\n * output types if Amplify-generated graphql from a recent version of the CLI/codegen\n * are used *or* correct typing is provided via the type argument.\n *\n * Amplify-generated \"branded\" graphql queries will look similar to this:\n *\n * ```ts\n *                               //\n *                               // |-- branding\n *                               // v\n * export const getModel = `...` as GeneratedQuery<\n * \tGetModelQueryVariables,\n * \tGetModelQuery\n * >;\n * ```\n *\n * If this branding is not in your generated graphql, update to a newer version of\n * CLI/codegen and regenerate your graphql using `amplify codegen`.\n *\n * ## Using Amplify-generated graphql\n *\n * ```ts\n * import * as queries from './graphql/queries';\n *\n * //\n * //    |-- correctly typed graphql response containing a Widget\n * //    v\n * const queryResult = await graphql({\n * \tquery: queries.getWidget,\n * \tvariables: {\n * \t\tid: \"abc\", // <-- type hinted/enforced\n * \t},\n * });\n *\n * //\n * //    |-- a correctly typed Widget\n * //    v\n * const fetchedWidget = queryResult.data?.getWidget!;\n * ```\n *\n * ## Custom input + result types\n *\n * To provide input types (`variables`) and result types:\n *\n * ```ts\n * type GetById_NameOnly = {\n * \tvariables: {\n * \t\tid: string\n * \t},\n * \tresult: Promise<{\n * \t\tdata: { getWidget: { name: string } }\n * \t}>\n * }\n *\n * //\n * //    |-- type is GetById_NameOnly[\"result\"]\n * //    v\n * const result = graphql<GetById_NameOnly>({\n * \tquery: \"...\",\n * \tvariables: { id: \"abc\" }  // <-- type of GetById_NameOnly[\"variables\"]\n * });\n * ```\n *\n * ## Custom result type only\n *\n * To specify result types only, use a type that is *not* in the `{variables, result}` shape:\n *\n * ```ts\n * type MyResultType = Promise<{\n * \tdata: {\n * \t\tgetWidget: { name: string }\n * \t}\n * }>\n *\n * //\n * //    |-- type is MyResultType\n * //    v\n * const result = graphql<MyResultType>({query: \"...\"});\n * ```\n *\n * @param options\n * @param additionalHeaders\n */\nfunction graphql(options, additionalHeaders) {\n    // inject client-level auth\n    const internals = getInternals(this);\n    options.authMode = options.authMode || internals.authMode;\n    options.authToken = options.authToken || internals.authToken;\n    const headers = additionalHeaders || internals.headers;\n    /**\n     * The correctness of these typings depends on correct string branding or overrides.\n     * Neither of these can actually be validated at runtime. Hence, we don't perform\n     * any validation or type-guarding here.\n     */\n    const result = GraphQLAPI.graphql(\n    // TODO: move V6Client back into this package?\n    internals.amplify, options, headers);\n    return result;\n}\n/**\n * Cancels an inflight request. Only applicable for graphql queries and mutations\n * @param {any} request - request to cancel\n * @returns - A boolean indicating if the request was cancelled\n */\nfunction cancel(promise, message) {\n    return GraphQLAPI.cancel(promise, message);\n}\n/**\n * Checks to see if an error thrown is from an api request cancellation\n * @param {any} error - Any error\n * @returns - A boolean indicating if the error was from an api request cancellation\n */\nfunction isCancelError(error) {\n    return GraphQLAPI.isCancelError(error);\n}\n\nexport { cancel, graphql, isCancelError };\n//# sourceMappingURL=v6.mjs.map\n","import { Hub } from '@aws-amplify/core';\nimport { addSchemaToClient } from '@aws-amplify/data-schema/runtime';\nimport { __amplify, __authMode, __authToken, __headers, getInternals } from '../types/index.mjs';\nimport { isApiGraphQLConfig } from './utils/runtimeTypeGuards/isApiGraphQLProviderConfig.mjs';\nimport { isConfigureEventWithResourceConfig } from './utils/runtimeTypeGuards/isConfigureEventWithResourceConfig.mjs';\nimport { graphql, cancel, isCancelError } from './v6.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n *\n * Creates a client that can be used to make GraphQL requests, using a provided `AmplifyClassV6`\n * compatible context object for config and auth fetching.\n *\n * @param params\n * @returns\n */\nfunction generateClient(params) {\n    const client = {\n        [__amplify]: params.amplify,\n        [__authMode]: params.authMode,\n        [__authToken]: params.authToken,\n        [__headers]: params.headers,\n        graphql,\n        cancel,\n        isCancelError,\n        models: emptyProperty,\n        enums: emptyProperty,\n        queries: emptyProperty,\n        mutations: emptyProperty,\n        subscriptions: emptyProperty,\n    };\n    const apiGraphqlConfig = params.amplify.getConfig().API?.GraphQL;\n    if (isApiGraphQLConfig(apiGraphqlConfig)) {\n        addSchemaToClient(client, apiGraphqlConfig, getInternals);\n    }\n    else {\n        // This happens when the `Amplify.configure()` call gets evaluated after the `generateClient()` call.\n        //\n        // Cause: when the `generateClient()` and the `Amplify.configure()` calls are located in\n        // different source files, script bundlers may randomly arrange their orders in the production\n        // bundle.\n        //\n        // With the current implementation, the `client.models` instance created by `generateClient()`\n        // will be rebuilt on every `Amplify.configure()` call that's provided with a valid GraphQL\n        // provider configuration.\n        //\n        // TODO: revisit, and reverify this approach when enabling multiple clients for multi-endpoints\n        // configuration.\n        generateModelsPropertyOnAmplifyConfigure(client);\n    }\n    return client;\n}\nconst generateModelsPropertyOnAmplifyConfigure = (clientRef) => {\n    Hub.listen('core', coreEvent => {\n        if (!isConfigureEventWithResourceConfig(coreEvent.payload)) {\n            return;\n        }\n        const apiGraphQLConfig = coreEvent.payload.data.API?.GraphQL;\n        if (isApiGraphQLConfig(apiGraphQLConfig)) {\n            addSchemaToClient(clientRef, apiGraphQLConfig, getInternals);\n        }\n    });\n};\nconst emptyProperty = new Proxy({}, {\n    get() {\n        throw new Error('Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.');\n    },\n});\n\nexport { generateClient };\n//# sourceMappingURL=generateClient.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isConfigureEventWithResourceConfig(payload) {\n    return payload.event === 'configure';\n}\n\nexport { isConfigureEventWithResourceConfig };\n//# sourceMappingURL=isConfigureEventWithResourceConfig.mjs.map\n","import { generateClient as generateClient$1 } from '@aws-amplify/api-graphql/internals';\nimport { Amplify } from '@aws-amplify/core';\n\n/**\n * Generates an API client that can work with models or raw GraphQL\n *\n * @returns {@link V6Client}\n * @throws {@link Error} - Throws error when client cannot be generated due to configuration issues.\n */\nfunction generateClient(options = {}) {\n    return generateClient$1({\n        ...options,\n        amplify: Amplify,\n    });\n}\n\nexport { generateClient };\n//# sourceMappingURL=API.mjs.map\n","import { USER_AGENT_HEADER, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { MESSAGE_TYPES, DEFAULT_KEEP_ALIVE_TIMEOUT } from '../constants.mjs';\nimport { AWSWebSocketProvider } from '../AWSWebSocketProvider/index.mjs';\nimport { awsRealTimeHeaderBasedAuth } from '../AWSWebSocketProvider/authHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'AWSAppSyncEventsProvider';\nconst WS_PROTOCOL_NAME = 'aws-appsync-event-ws';\nconst CONNECT_URI = ''; // events does not expect a connect uri\nclass AWSAppSyncEventProvider extends AWSWebSocketProvider {\n    constructor() {\n        super({\n            providerName: PROVIDER_NAME,\n            wsProtocolName: WS_PROTOCOL_NAME,\n            connectUri: CONNECT_URI,\n        });\n    }\n    getProviderName() {\n        return PROVIDER_NAME;\n    }\n    async connect(options) {\n        super.connect(options);\n    }\n    subscribe(options, customUserAgentDetails) {\n        return super.subscribe(options, customUserAgentDetails).pipe();\n    }\n    async publish(options, customUserAgentDetails) {\n        super.publish(options, customUserAgentDetails);\n    }\n    async _prepareSubscriptionPayload({ options, subscriptionId, customUserAgentDetails, additionalCustomHeaders, libraryConfigHeaders, publish, }) {\n        const { appSyncGraphqlEndpoint, authenticationType, query, apiKey, region, } = options;\n        // This will be needed for WS publish\n        // const data = {\n        // \tevents: [variables],\n        // };\n        const serializedData = JSON.stringify({ channel: query });\n        const headers = {\n            ...(await awsRealTimeHeaderBasedAuth({\n                apiKey,\n                appSyncGraphqlEndpoint,\n                authenticationType,\n                payload: serializedData,\n                canonicalUri: '',\n                region,\n                additionalCustomHeaders,\n            })),\n            ...libraryConfigHeaders,\n            ...additionalCustomHeaders,\n            [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n        };\n        // Commented out code will be needed for WS publish\n        const subscriptionMessage = {\n            id: subscriptionId,\n            channel: query,\n            // events: [JSON.stringify(variables)],\n            authorization: {\n                ...headers,\n            },\n            // payload: {\n            // \tevents: serializedData,\n            // \textensions: {\n            // \t\tauthorization: {\n            // \t\t\t...headers,\n            // \t\t},\n            // \t},\n            // },\n            type: publish\n                ? MESSAGE_TYPES.EVENT_PUBLISH\n                : MESSAGE_TYPES.EVENT_SUBSCRIBE,\n        };\n        const serializedSubscriptionMessage = JSON.stringify(subscriptionMessage);\n        return serializedSubscriptionMessage;\n    }\n    _handleSubscriptionData(message) {\n        this.logger.debug(`subscription message from AWS AppSync Events: ${message.data}`);\n        const { id = '', event: payload, type, } = JSON.parse(String(message.data));\n        const { observer = null, query = '', variables = {}, } = this.subscriptionObserverMap.get(id) || {};\n        this.logger.debug({ id, observer, query, variables });\n        if (type === MESSAGE_TYPES.DATA && payload) {\n            const deserializedEvent = JSON.parse(payload);\n            if (observer) {\n                observer.next({ id, type, event: deserializedEvent });\n            }\n            else {\n                this.logger.debug(`observer not found for id: ${id}`);\n            }\n            return [true, { id, type, payload: deserializedEvent }];\n        }\n        return [false, { id, type, payload }];\n    }\n    _unsubscribeMessage(subscriptionId) {\n        return {\n            id: subscriptionId,\n            type: MESSAGE_TYPES.EVENT_STOP,\n        };\n    }\n    _extractConnectionTimeout(data) {\n        const { connectionTimeoutMs = DEFAULT_KEEP_ALIVE_TIMEOUT } = data;\n        return connectionTimeoutMs;\n    }\n    _extractErrorCodeAndType(data) {\n        const { errors: [{ errorType = '', errorCode = 0 } = {}] = [] } = data;\n        return { errorCode, errorType };\n    }\n}\nconst AppSyncEventProvider = new AWSAppSyncEventProvider();\n\nexport { AWSAppSyncEventProvider, AppSyncEventProvider };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyUrl, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { post } from '@aws-amplify/api-rest/internals';\nimport '../../utils/resolveConfig.mjs';\nimport { resolveLibraryOptions } from '../../utils/resolveLibraryOptions.mjs';\nimport { repackageUnauthorizedError } from '../../utils/errors/repackageAuthError.mjs';\nimport { headerBasedAuth } from '../graphqlAuth.mjs';\nimport { isGraphQLResponseWithErrors } from '../utils/runtimeTypeGuards/isGraphQLResponseWithErrors.mjs';\n\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// This is effectively a copy of InternalGraphQLAPI.ts._graphql(...)\n// Our existing unit tests are tightly coupled to the implementation, so i was unable to refactor\n// and extend _graphql() without having to change a bunch of tests as well... which in turn reduces confidence\n// that this feature will _not affect_ GQL behavior.\nasync function appsyncRequest(amplify, options, additionalHeaders = {}, abortController, customUserAgentDetails) {\n    const { region, appSyncGraphqlEndpoint: endpoint, authenticationType: authMode, query, variables, } = options;\n    if (!endpoint) {\n        throw new Error('No endpoint');\n    }\n    const { withCredentials } = resolveLibraryOptions(amplify);\n    const headers = await requestHeaders(amplify, options, additionalHeaders, customUserAgentDetails);\n    const body = {\n        channel: query,\n        events: variables,\n    };\n    const signingServiceInfo = ['apiKey', 'none'].includes(authMode)\n        ? undefined\n        : {\n            service: 'appsync',\n            region,\n        };\n    const { body: responseBody } = await post(amplify, {\n        url: new AmplifyUrl(endpoint),\n        options: {\n            headers,\n            body,\n            signingServiceInfo,\n            withCredentials,\n        },\n        abortController,\n    });\n    const response = await responseBody.json();\n    if (isGraphQLResponseWithErrors(response)) {\n        throw repackageUnauthorizedError(response);\n    }\n    return response;\n}\n/**\n * Computes all the necessary HTTP headers for the request based on:\n * 1. Operation-level header options\n * 2. Amplify.configure custom headers\n * 3. AuthZ headers for explicit auth mode specified for operation ?? default auth mode in config\n *\n * @returns HTTP request headers key/value\n */\nasync function requestHeaders(amplify, options, additionalHeaders, customUserAgentDetails) {\n    const { apiKey, appSyncGraphqlEndpoint: endpoint, authenticationType: authMode, query, variables, authToken, } = options;\n    const { headers: customHeadersFn } = resolveLibraryOptions(amplify);\n    let additionalCustomHeaders;\n    if (typeof additionalHeaders === 'function') {\n        const requestOptions = {\n            method: 'POST',\n            url: new AmplifyUrl(endpoint).toString(),\n            queryString: query,\n        };\n        additionalCustomHeaders = await additionalHeaders(requestOptions);\n    }\n    else {\n        additionalCustomHeaders = additionalHeaders;\n    }\n    // if an authorization header is set, have the operation-level authToken take precedence\n    if (authToken) {\n        additionalCustomHeaders = {\n            ...additionalCustomHeaders,\n            Authorization: authToken,\n        };\n    }\n    const authHeaders = await headerBasedAuth(amplify, authMode, apiKey, additionalCustomHeaders);\n    const customHeaders = customHeadersFn &&\n        (await customHeadersFn({\n            query,\n            variables: variables,\n        }));\n    const headers = {\n        ...authHeaders,\n        // Custom headers included in Amplify configuration options:\n        ...customHeaders,\n        // Custom headers from individual requests or API client configuration:\n        ...additionalCustomHeaders,\n        // User agent headers:\n        [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n    };\n    return headers;\n}\n\nexport { appsyncRequest };\n//# sourceMappingURL=appsyncRequest.mjs.map\n","import { Amplify } from '@aws-amplify/core';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst normalizeAuth = (explicitAuthMode, defaultAuthMode) => {\n    if (!explicitAuthMode) {\n        return defaultAuthMode;\n    }\n    if (explicitAuthMode === 'identityPool') {\n        return 'iam';\n    }\n    return explicitAuthMode;\n};\nconst configure = () => {\n    const config = Amplify.getConfig();\n    const eventsConfig = config.API?.Events;\n    if (!eventsConfig) {\n        throw new Error('Amplify configuration is missing. Have you called Amplify.configure()?');\n    }\n    const configAuthMode = normalizeAuth(eventsConfig.defaultAuthMode, 'apiKey');\n    const options = {\n        appSyncGraphqlEndpoint: eventsConfig.endpoint,\n        region: eventsConfig.region,\n        authenticationType: configAuthMode,\n        apiKey: eventsConfig.apiKey,\n    };\n    return options;\n};\n/**\n * Event API expects and array of JSON strings\n *\n * @param events - JSON-serializable value or an array of values\n * @returns array of JSON strings\n */\nconst serializeEvents = (events) => {\n    if (Array.isArray(events)) {\n        return events.map((ev, idx) => {\n            const eventJson = JSON.stringify(ev);\n            if (eventJson === undefined) {\n                throw new Error(`Event must be a valid JSON value. Received ${ev} at index ${idx}`);\n            }\n            return eventJson;\n        });\n    }\n    const eventJson = JSON.stringify(events);\n    if (eventJson === undefined) {\n        throw new Error(`Event must be a valid JSON value. Received ${events}`);\n    }\n    return [eventJson];\n};\n\nexport { configure, normalizeAuth, serializeEvents };\n//# sourceMappingURL=utils.mjs.map\n","import { Amplify } from '@aws-amplify/core';\nimport { AppSyncEventProvider } from '../../Providers/AWSAppSyncEventsProvider/index.mjs';\nimport { appsyncRequest } from './appsyncRequest.mjs';\nimport { configure, normalizeAuth, serializeEvents } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @experimental API may change in future versions\n *\n * Establish a WebSocket connection to an Events channel\n *\n * @example\n * const channel = await events.connect(\"default/channel\")\n *\n * channel.subscribe({\n *   next: (data) => { console.log(data) },\n *   error: (err) => { console.error(err) },\n * })\n *\n * @example // authMode override\n * const channel = await events.connect(\"default/channel\", { authMode: \"userPool\" })\n *\n * @param channel - channel path; `<namespace>/<channel>`\n * @param options - request overrides: `authMode`, `authToken`\n *\n */\nasync function connect(channel, options) {\n    const providerOptions = configure();\n    providerOptions.authenticationType = normalizeAuth(options?.authMode, providerOptions.authenticationType);\n    await AppSyncEventProvider.connect(providerOptions);\n    let _subscription;\n    const sub = (observer, subOptions) => {\n        const subscribeOptions = { ...providerOptions, query: channel };\n        subscribeOptions.authenticationType = normalizeAuth(subOptions?.authMode, subscribeOptions.authenticationType);\n        _subscription = AppSyncEventProvider\n            .subscribe(subscribeOptions)\n            .subscribe(observer);\n        return _subscription;\n    };\n    const close = () => {\n        _subscription && _subscription.unsubscribe();\n    };\n    return {\n        subscribe: sub,\n        close,\n        // publish: pub,\n    };\n}\n/**\n * @experimental API may change in future versions\n *\n * Publish events to a channel via HTTP request\n *\n * @example\n * await events.post(\"default/channel\", { some: \"event\" })\n *\n * @example // event batching\n * await events.post(\"default/channel\", [{ some: \"event\" }, { some: \"event2\" }])\n *\n * @example // authMode override\n * await events.post(\"default/channel\", { some: \"event\" }, { authMode: \"userPool\" })\n *\n * @param channel - channel path; `<namespace>/<channel>`\n * @param event - JSON-serializable value or an array of values\n * @param options - request overrides: `authMode`, `authToken`\n *\n * @returns void on success\n * @throws on error\n */\nasync function post(channel, event, options) {\n    const providerOptions = configure();\n    providerOptions.authenticationType = normalizeAuth(options?.authMode, providerOptions.authenticationType);\n    // trailing slash required in publish\n    const normalizedChannelName = channel[0] === '/' ? channel : `/${channel}`;\n    const publishOptions = {\n        ...providerOptions,\n        query: normalizedChannelName,\n        variables: serializeEvents(event),\n        authToken: options?.authToken,\n    };\n    const abortController = new AbortController();\n    const res = await appsyncRequest(Amplify, publishOptions, {}, abortController);\n    if (res.failed?.length > 0) {\n        return res.failed;\n    }\n}\n/**\n * @experimental API may change in future versions\n *\n * Close WebSocket connection, disconnect listeners and reconnect observers\n *\n * @example\n * await events.closeAll()\n *\n * @returns void on success\n * @throws on error\n */\nasync function closeAll() {\n    await AppSyncEventProvider.close();\n}\n\nexport { closeAll, connect, post };\n//# sourceMappingURL=index.mjs.map\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__556__","__WEBPACK_EXTERNAL_MODULE__49__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","isFunction","operate","init","source","lift","hasLift","liftedSource","err","error","TypeError","extendStatics","b","setPrototypeOf","__proto__","Array","p","__extends","String","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","_","label","sent","trys","ops","g","Iterator","verb","iterator","n","v","op","pop","length","push","__values","s","m","i","__read","ar","__spreadArray","to","from","pack","arguments","l","slice","concat","__await","SuppressedError","ctorFunc","UnsubscriptionError","errors","instance","Error","stack","message","map","toString","join","name","arrRemove","arr","item","index","indexOf","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","_a","e_2","_b","isArray","_parentage_1","_parentage_1_1","remove","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","add","teardown","_hasParent","_addParent","parent","includes","_removeParent","EMPTY","isSubscription","config","timeoutProvider","setTimeout","handler","timeout","args","_i","delegate","clearTimeout","handle","reportUnhandledError","noop","COMPLETE_NOTIFICATION","createNotification","kind","context","Subscriber","_super","destination","_this","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","Function","bind","fn","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","errorThrown","notification","subscriber","onStoppedNotification","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","project","subscribe","resolveOwnerFields","model","ownerFields","Set","attr","attributes","attribute","type","properties","rules","every","rule","allow","ownerField","groupsField","capitalize","toUpperCase","selfAwareAsync","resolver","resultPromise","res","rej","catch","promiseMap","WeakMap","extendCancellability","existingCancellablePromise","newPromiseToRegister","set","finally","delete","connectionType","HAS_ONE","HAS_MANY","BELONGS_TO","skGraphQlFieldTypeMap","ID","AWSDate","AWSTime","AWSDateTime","AWSTimestamp","AWSEmail","AWSPhone","AWSURL","AWSIPAddress","AWSJSON","Boolean","Int","Float","resolvedSkName","sk","reduce","acc","curr","idx","flattenItems","modelIntrospection","modelName","modelRecord","mapped","fieldName","entries","fieldDef","models","fields","dvPair","dv","items","itemValue","isRelatedModelProperty","initializeModel","client","authMode","authToken","introModel","introModelFields","modelFields","filter","field","record","initializedRelationshipFields","modelField","modelFieldType","relatedModelName","relatedModel","relatedModelPKFieldName","primaryKeyInfo","primaryKeyFieldName","relatedModelSKFieldNames","sortKeyFieldNames","relationType","association","connectionFields","associatedWith","targetNames","sortKeyValues","curVal","contextSpec","options","data","mapResult","shift","extensions","parentPk","parentSK","relatedModelField","relatedTargetNames","hasManyFilter","eq","list","async","extendedBase","and","limit","nextToken","graphQLOperationsInfo","CREATE","operationPrefix","usePlural","GET","UPDATE","DELETE","LIST","INDEX_QUERY","ONCREATE","ONUPDATE","ONDELETE","OBSERVEQUERY","SELECTION_SET_WILDCARD","getDefaultSelectionSetForNonModelWithIR","nonModelDefinition","mappedFields","values","enum","FIELD_IR","nonModel","nonModels","pair","fromEntries","getDefaultSelectionSetForModelWithIR","modelDefinition","customSelectionSetToIR","selectionSet","dotNotationToObject","path","modelOrNonModelName","rest","split","nested","modelOrNonModelDefinition","modelOrNonModelFields","relatedModelDefinition","relatedNonModel","relatedNonModelDefinition","isModelOrNonModelOrFieldType","nestedRelatedModelDefinition","nonModelField","isOwnerField","resultObj","deepMergeSelectionSetObjects","selectionSetIRToString","forEach","target","generateSelectionSet","selSetIr","explicitFields","defaultSelectionSetForModel","generateGraphQLDocument","modelOperation","listArgs","indexMeta","pluralName","isCustomPrimaryKey","namePascalCase","charAt","pluralNamePascalCase","graphQLFieldName","indexQueryArgs","graphQLOperationType","graphQLSelectionSet","graphQLArguments","queryField","pk","skQueryArgs","skField","normalizedType","compositeSkArgName","keyName","find","selectionSetFields","getPkArgs","listPkArgs","generateSkArgs","fieldType","assign","sortDirection","input","toLocaleUpperCase","keys","buildGraphQLVariables","operation","arg","skName","variables","normalizeMutationInput","isReadOnly","indexQuerySkName","mutationInput","normalized","inputFieldName","inputValue","relatedModelPkInfo","associationHasOne","targetName","associatedFieldName","authModeParams","getInternals","internals","getCustomHeaders","requestHeaders","headers","handleListGraphQlError","handleSingularGraphQlError","INTERNAL_USER_AGENT_OVERRIDE","AiAction","getCustomUserAgentDetails","action","category","createUserAgentOverride","customUserAgentDetails","argIsContextSpec","token","customOpFactory","operationType","useContext","argsDefined","operationName","auth","outerArgsString","outerArguments","innerArgsString","innerArguments","operationSelectionSet","returnTypeModelName","hasStringField","query","toLocaleLowerCase","operationVariables","userAgentOverride","graphql","pipe","initialized","_opSubscription","extendedPromise","isArrayResult","flattenedResult","x","_op","k","argument","baseType","isRequired","requiredFlag","isEnumType","isInputType","argumentBaseTypeString","isArrayNullable","argDef","operationTypeMap","queries","mutations","subscriptions","generateCustomOperationsProperty","operationsType","operations","amplify","_get","_list","alphabetByEncoding","alphabetByValue","start","charCodeAt","char","fromCharCode","fromBase64","totalByteLength","out","ArrayBuffer","dataView","DataView","bits","bitLength","j","chunkOffset","byteLength","Math","floor","offset","setUint8","Uint8Array","toBase64","_input","TextEncoder","encode","fromUtf8","isArrayLike","isUint8Array","byteOffset","str","min","bitClusterCount","ceil","deserializeContent","content","block","image","deserializeImageBlock","toolUse","deserializeToolUseBlock","toolResult","deserializeToolResultBlock","removeNullsFromBlock","bytes","JSON","parse","toolUseId","toolResultBlock","json","deserializeJsonBlock","convertItemToConversationMessage","createdAt","id","conversationId","role","createListMessagesFunction","conversationMessageModel","ListMessages","createOnMessageFunction","conversationRouteName","conversations","subscribeSchema","OnMessage","subscribeOperation","serializeAiContext","aiContext","stringify","serializeContent","serializeImageBlock","serializeToolResultBlock","serializeToolConfiguration","tools","tool","toolSpec","description","inputSchema","serializeJsonBlock","createSendMessageFunction","processedInput","text","toolConfiguration","sendSchema","send","sendOperation","SendMessage","convertItemToConversation","conversationCreatedAt","conversationUpdatedAt","conversationMetadata","conversationName","updatedAt","metadata","onMessage","sendMessage","listMessages","createCreateConversationFunction","conversationModel","CreateConversation","createGetConversationFunction","GetConversation","createListConversationsFunction","ListConversations","datum","createDeleteConversationFunction","deleteOperation","DeleteConversation","graphqlConfig","enums","enumData","_indexQuery","modelInitializer","requestArgs","unshift","response","modelIntroSchema","processGraphQlResponse","subscriptionFactory","observable","identity","Observable","_subscribe","operator","isObserver","cb","isRoot","errorContext","_trySubscribe","sink","promiseCtor","getPromiseCtor","fns","prev","toPromise","findIndexByFields","needle","haystack","keyFields","searchObject","observeQueryFactory","messageQueue","receiveMessages","messages","onCreateSub","onCreate","onUpdateSub","onUpdate","onDeleteSub","onDelete","ingestMessages","pkFields","console","isSynced","resolvePKFields","firstPage","page","_nextToken","attributeIsSecondaryIndex","idxs","mis","modelAttrs","coarseToFineDict","disabledOps","disabledOpsUpper","addSchemaToClient","apiGraphqlConfig","innerCancel","cancel","promise","visited","targetPromise","has","apiGraphQLConfig","SUBSCRIPTION_OPS","enabledModelOps","secondaryIdxs","generateCustomSubscriptionsProperty","conversation","conversationModelIntrospection","generateConversationsProperty","generations","generation","Generation","generateGenerationsProperty","GraphQLAuthError","__amplify","__authMode","__authToken","__headers","c","Framework","Category","AnalyticsAction","ApiAction","AuthAction","DataStoreAction","GeoAction","InAppMessagingAction","InteractionsAction","PredictionsAction","PubSubAction","PushNotificationAction","StorageAction","isPromise","isInteropObservable","isAsyncIterable","asyncIterator","createInvalidObservableTypeError","isIterable","readableStreamLikeToAsyncGenerator","readableStream","q","AsyncIterator","a","resume","fulfill","settle","__asyncGenerator","reader","getReader","read","releaseLock","isReadableStreamLike","innerFrom","obs","array","fromAsyncIterable","iterable","iterable_1","iterable_1_1","asyncIterable","asyncIterable_1","asyncIterable_1_1","__asyncValues","catchError","selector","handledResult","innerSub","syncUnsub","AmplifyUrl","URL","AmplifyUrlSearchParams","URLSearchParams","version","globalExists","global","windowExists","window","documentExists","document","processExists","process","keyPrefixMatch","object","prefix","startsWith","detectionMap","platform","Expo","detectionMethod","expo","ReactNative","navigator","product","NextJs","Nuxt","__NUXT__","$nuxt","Angular","angularVersionSetInDocument","querySelector","angularContentSetInWindow","ng","React","elementKeyPrefixedWithReact","querySelectorAll","some","element","VueJs","Svelte","WebUnknown","NextJsSSR","NuxtSSR","__NUXT_PATHS__","ReactSSR","env","VueJsSSR","AngularSSR","npm_lifecycle_script","SvelteSSR","frameworkCache","frameworkChangeObservers","resetTriggered","detectFramework","detectionEntry","ServerSideUnknown","fcn","resetTimeout","framework","delay","customUserAgentState","BASE_USER_AGENT","sanitizeAmplifyVersion","amplifyVersion","replace","userAgent","isReactNative","observeFrameworkChanges","getAmplifyUserAgent","customState","api","additionalDetails","getCustomUserAgent","state","getAmplifyUserAgentObject","agentKey","agentValue","recoverySuggestion","underlyingError","super","ApiError","_response","replicateApiErrorResponse","params","RestApiError","CanceledError","isCancelError","RestApiValidationErrorCode","validationErrorMap","InvalidApiName","parseMetadata","statusCode","isMetadataBearer","$metadata","httpStatusCode","requestId","extendedRequestId","cfId","parseRestApiServiceError","parsedAwsError","output","parseJsonBody","code","rawValue","cleanValue","sanitizeErrorCode","__type","Message","parseJsonError","stubErrorResponse","bodyText","buildRestApiError","bodyTextPromise","bodyProxy","Proxy","receiver","Reflect","restApiError","logger","ConsoleLogger","createCancellableOperation","abortController","isInternalPost","targetHandler","publicApisAbortController","AbortController","publicApisAbortSignal","signal","internalPostAbortSignal","abortReason","job","abortSignal","reason","aborted","canceledError","debug","abortMessage","abort","DEFAULT_REST_IAM_SIGNING_SERVICE","DEFAULT_IAM_SIGNING_REGION","APIG_HOSTNAME_PATTERN","parseSigningInfo","url","restApiOptions","service","signingService","region","signingRegion","getConfig","API","REST","apiName","hostname","exec","isIamAuthApplicableForGraphQL","signingServiceInfo","authorization","isIamAuthApplicableForRest","AmplifyErrorCode","CLOCK_SKEW_ERROR_CODES","THROTTLING_ERROR_CODES","TIMEOUT_ERROR_CODES","isThrottlingError","errorCode","isConnectionError","NetworkError","isServerSideError","jitteredBackoff","maxDelayMs","MAX_DELAY_MS","attempt","random","DEFAULT_MAX_DELAY_MS","delayFunction","retryMiddlewareFactory","maxAttempts","retryDecider","computeDelay","request","attemptsCount","handleTerminalErrorOrResponse","addOrIncrementMetadataAttempts","isCredentialsExpiredError","retryable","isCredentialsExpired","cancellableSleep","timeoutMs","timeoutId","sleepPromiseResolveFn","sleepPromise","addEventListener","cancelSleep","removeEventListener","nextHandlerOutput","attempts","getSignedHeaders","toLowerCase","sort","AMZ_DATE_HEADER","TOKEN_HEADER","KEY_TYPE_IDENTIFIER","SHA256_ALGORITHM_IDENTIFIER","BLOCK_SIZE","KEY","Uint32Array","INIT","MAX_HASHABLE_LENGTH","pow","RawSha256","Int32Array","temp","buffer","bufferLength","bytesHashed","finished","update","position","hashBuffer","digest","bitsHashed","bufferView","undecoratedLength","setUint32","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","t2","Buffer","convertToBuffer","isView","BYTES_PER_ELEMENT","Sha256","secret","hash","reset","toHash","digestSync","outer","inner","bufferHash","bufferFromSecret","SHORT_TO_HEX","HEX_TO_SHORT","encodedByte","getHashedData","sha256","getHashedDataAsHex","toHex","getCanonicalHeaders","trim","entry","escapeUri","uri","encodeURIComponent","hexEncode","getCanonicalUri","pathname","uriEscapePath","getHashedPayload","isSourceData","isArrayBuffer","signRequest","signingValues","credentials","signingDate","Date","accessKeyId","secretAccessKey","sessionToken","longDate","shortDate","date","toISOString","getFormattedDates","credentialScope","getSigningValues","host","requestToSign","signature","canonicalRequest","method","searchParams","keyA","valA","keyB","valB","val","getCanonicalRequest","stringToSign","hashedRequest","getStringToSign","dateKey","regionKey","serviceKey","getSigningKey","getSignature","credentialEntry","signedHeadersEntry","signatureEntry","getSkewCorrectedDate","systemClockOffset","now","userAgentMiddlewareFactory","userAgentHeader","userAgentValue","headerName","composeTransferHandler","coreHandler","middleware","composedHandler","composeHandlerRequest","resolvedMiddleware","withMemoization","payloadAccessor","cached","shouldSendBody","fetchTransferHandler","cache","withCrossDomainCredentials","resp","fetch","responseHeaders","status","blob","authenticatedHandler","currentSystemClockOffset","signRequestOptions","forceRefresh","signedRequest","dateString","getDateHeader","clockTimeInMilliseconds","clockOffsetInMilliseconds","abs","getTime","isClockSkewed","getUpdatedSystemClockOffset","unauthenticatedHandler","transferHandler","iamAuthApplicable","withCredentials","resolvedBody","FormData","resolvedHeaders","normalizedHeaders","resolveHeaders","baseOptions","errorParser","parsedError","isClockSkewError","isIamAuthApplicable","resolveCredentials","signingInfoFromUrl","Auth","fetchAuthSession","publicHandler","apiOptions","apiPath","queryParams","urlStr","endpoint","assertion","assertValidationError","mergedQueryParams","search","resolveApiUrl","libraryConfigHeaders","libraryOptions","invocationHeaders","Amplify","post","put","del","head","patch","cancelTokenMap","controller","responseWithCleanUp","updateRequestToBeCancellable","USER_AGENT_HEADER","NON_RETRYABLE_CODES","NON_RETRYABLE_ERROR_TYPES","CONNECTION_STATE_CHANGE","MESSAGE_TYPES","SUBSCRIPTION_STATUS","SOCKET_STATUS","AWS_APPSYNC_REALTIME_HEADERS","accept","DEFAULT_KEEP_ALIVE_TIMEOUT","LogType","LOG_LEVELS","VERBOSE","DEBUG","INFO","WARN","ERROR","NONE","level","_pluggables","_padding","_ts","dt","getMinutes","getSeconds","getMilliseconds","configure","_config","_log","msg","loggerLevelName","LOG_LEVEL","log","warn","BIND_ALL_LOG_LEVELS","info","plugin","logEvent","timestamp","pushLogs","verbose","addPluggable","pluggable","getCategoryName","listPluggables","AMPLIFY_SYMBOL","HubClass","listeners","Map","protectedChannels","_remove","channel","listener","holder","callback","dispatch","payload","ampSymbol","capsule","patternInfo","_toListeners","listen","listenerName","NonRetryableError","nonRetryable","randomUUID","crypto","getRandomValues","rnds8","rng","byteToHex","amplifyUuid","buf","rnds","unsafeStringify","isNonRetryableError","base64Encoder","convert","urlSafe","skipPadding","inputStr","byte","fromCodePoint","bytesToString","encodedStr","btoa","getBtoa","CONTROL_MSG","ConnectionState","Reachability","networkMonitor","globalObj","self","selfContext","WorkerGlobalScope","isWebWorker","observer","online","onLine","notifyOnline","notifyOffline","_observers","_observer","_observerOverride","ReachabilityMonitor","CONNECTION_CHANGE","KEEP_ALIVE_MISSED","keepAliveState","KEEP_ALIVE","CONNECTION_ESTABLISHED","connectionState","CONNECTION_FAILED","intendedConnectionState","CLOSING_CONNECTION","OPENING_CONNECTION","CLOSED","ONLINE","networkState","OFFLINE","ConnectionStateMonitor","_networkMonitoringSubscription","_linkedConnectionState","_initialNetworkStateSubscription","_linkedConnectionStateObservable","connectionStateObserver","_linkedConnectionStateObserver","enableNetworkMonitoring","disableNetworkMonitoring","connectionStateObservable","previous","connectionStatesTranslator","predicate","current","toInclude","statusUpdates","newSocketStatus","ConnectedPendingNetwork","ConnectedPendingDisconnect","ConnectionDisruptedPendingNetwork","ConnectionDisrupted","ConnectedPendingKeepAlive","Connecting","Disconnected","Connected","ReconnectEvent","ReconnectionMonitor","reconnectObservers","addObserver","reconnectObserver","event","START_RECONNECT","reconnectSetTimeoutId","reconnectIntervalId","_triggerReconnect","setInterval","HALT_RECONNECT","clearInterval","close","standardDomainPattern","eventDomainPattern","customDomainPath","additionalHeadersFromOptions","appSyncGraphqlEndpoint","additionalHeaders","additionalCustomHeaders","_libraryConfigHeaders","requestOptions","queryString","Authorization","awsAuthTokenHeader","session","tokens","accessToken","awsRealTimeApiKeyHeader","apiKey","awsRealTimeIAMHeader","canonicalUri","endpointInfo","creds","customAuthHeader","awsRealTimeHeaderBasedAuth","authenticationType","headerHandler","iam","oidc","userPool","lambda","none","resolvedApiKey","dispatchApiEvent","Hub","AWSWebSocketProvider","subscriptionObserverMap","socketStatus","keepAliveTimeout","promiseArray","connectionStateMonitor","reconnectionMonitor","_establishConnection","awsRealTimeUrl","subprotocol","_openConnection","_initiateHandshake","errorType","providerName","wsProtocolName","wsConnectUri","connectUri","connectionStateMonitorSubscription","_startConnectionStateMonitoring","awsRealTimeSocket","onclose","onerror","subscriptionStartInProgress","subscriptionId","startSubscription","_startSubscriptionWithAWSAppSyncRealTime","REALTIME_SUBSCRIPTION_INIT_ERROR","reconnectSubscription","reconnectSubscriptionObserver","_cleanupSubscription","connect","READY","_connectWebSocket","publish","_publishMessage","_initializeWebSocketConnection","serializedSubscriptionMessage","_prepareSubscriptionPayload","publishListener","erroredEvents","_waitForSubscriptionToBeConnected","subscriptionState","CONNECTED","_sendUnsubscriptionMessage","_removeSubscriptionObserver","provider","PENDING","startAckTimeoutId","_logStartSubscriptionError","subscriptionFailedCallback","subscriptionReadyCallback","_timeoutStartSubscriptionAck","GraphQLError","subscriptionObserver","observedSubscriptionState","readyState","WebSocket","OPEN","unsubscribeMessage","_unsubscribeMessage","stringToAWSRealTime","_closeSocketIfRequired","size","bufferedAmount","keepAliveTimeoutId","keepAliveAlertTimeoutId","tempSocket","_handleIncomingSubscriptionMessage","isData","_handleSubscriptionData","GQL_START_ACK","EVENT_SUBSCRIBE_ACK","SUBSCRIPTION_ACK","GQL_CONNECTION_KEEP_ALIVE","_errorDisconnect","TIMEOUT_DISCONNECT","GQL_ERROR","FAILED","CONNECTING","payloadString","authHeader","headerString","authTokenSubprotocol","nonAuthHeaders","extractNonAuthHeaders","append","queryParamsFromCustomHeaders","urlParams","realtimeEndpointUrl","realtimeEndpoint","match","getRealtimeEndpointUrl","existingParams","realtimeUrlWithQueryString","_establishRetryableConnection","functionToRetry","onTerminate","delayFn","lastError","terminated","wakeUp","retryIn","_resolve","retry","jitteredExponentialRetry","newSocket","_getNewWebSocket","onopen","protocol","ackOk","onmessage","connectionTimeoutMs","_extractConnectionTimeout","GQL_CONNECTION_ACK","_registerWebsocketHandlers","GQL_CONNECTION_ERROR","_extractErrorCodeAndType","gqlInit","GQL_CONNECTION_INIT","checkAckOk","targetAckOk","CONNECTION_CLOSED","PROVIDER_NAME","AWSAppSyncRealTimeProvider","getProviderName","serializedData","subscriptionMessage","GQL_START","DATA","GQL_STOP","GraphQLApiError","APIValidationErrorCode","NoAuthSession","NoRegion","NoCustomEndpoint","resolveConfig","GraphQL","customEndpoint","customEndpointRegion","defaultAuthMode","resolveLibraryOptions","repackageUnauthorizedError","originalError","NO_API_KEY","NO_VALID_CREDENTIALS","NO_CREDENTIALS","NO_VALID_AUTH_TOKEN","NO_FEDERATED_JWT","NO_SIGNED_IN_USER","NO_CURRENT_USER","NO_AUTH_TOKEN_HEADER","NO_AUTH_TOKEN","NO_ENDPOINT","createGraphQLResultWithError","isGraphQLResponseWithErrors","headerBasedAuth","InternalGraphQLAPIClass","appSyncRealTime","_api","cancelREST","isCancelErrorREST","getModuleName","getGraphqlOperationType","definitions","paramQuery","print","operationDef","def","responsePromise","isAmplifyInstance","_graphql","amplifyInstance","_graphqlSubscribe","explicitAuthMode","initialAuthMode","customHeaders","authHeaders","responseBody","GraphQLAPI","userAgentDetails","GraphQl","isGraphQLOptionsWithOverride","internalUserAgentOverride","cleanOptions","generateModelsPropertyOnAmplifyConfigure","clientRef","coreEvent","emptyProperty","generateClient","AppSyncEventProvider","EVENT_PUBLISH","EVENT_SUBSCRIBE","deserializedEvent","EVENT_STOP","normalizeAuth","eventsConfig","Events","configAuthMode","serializeEvents","events","ev","eventJson","providerOptions","_subscription","subOptions","subscribeOptions","normalizedChannelName","publishOptions","customHeadersFn","appsyncRequest","failed","closeAll"],"sourceRoot":""}