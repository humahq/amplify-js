{"version":3,"file":"createTokenValidator.mjs","sources":["../../../src/utils/createTokenValidator.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { isValidCognitoToken } from './isValidCognitoToken';\n/**\n * Creates a validator object for validating methods in a KeyValueStorage.\n */\nexport const createTokenValidator = ({ userPoolId, userPoolClientId: clientId, }) => {\n    return {\n        // validate access, id tokens\n        getItem: async (key, value) => {\n            const tokenType = key.includes('.accessToken')\n                ? 'access'\n                : key.includes('.idToken')\n                    ? 'id'\n                    : null;\n            if (!tokenType)\n                return true;\n            if (!userPoolId || !clientId)\n                return false;\n            return isValidCognitoToken({\n                clientId,\n                userPoolId,\n                tokenType,\n                token: value,\n            });\n        },\n    };\n};\n"],"names":[],"mappings":";;AAAA;AACA;AAEA;AACA;AACA;AACY,MAAC,oBAAoB,GAAG,CAAC,EAAE,UAAU,EAAE,gBAAgB,EAAE,QAAQ,GAAG,KAAK;AACrF,IAAI,OAAO;AACX;AACA,QAAQ,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK,KAAK;AACvC,YAAY,MAAM,SAAS,GAAG,GAAG,CAAC,QAAQ,CAAC,cAAc,CAAC;AAC1D,kBAAkB,QAAQ;AAC1B,kBAAkB,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC;AAC1C,sBAAsB,IAAI;AAC1B,sBAAsB,IAAI,CAAC;AAC3B,YAAY,IAAI,CAAC,SAAS;AAC1B,gBAAgB,OAAO,IAAI,CAAC;AAC5B,YAAY,IAAI,CAAC,UAAU,IAAI,CAAC,QAAQ;AACxC,gBAAgB,OAAO,KAAK,CAAC;AAC7B,YAAY,OAAO,mBAAmB,CAAC;AACvC,gBAAgB,QAAQ;AACxB,gBAAgB,UAAU;AAC1B,gBAAgB,SAAS;AACzB,gBAAgB,KAAK,EAAE,KAAK;AAC5B,aAAa,CAAC,CAAC;AACf,SAAS;AACT,KAAK,CAAC;AACN;;;;"}