(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("aws_amplify", [], factory);
	else if(typeof exports === 'object')
		exports["aws_amplify"] = factory();
	else
		root["aws_amplify"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "../../node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js":
/*!**************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RawSha256: () => (/* binding */ RawSha256)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../../node_modules/@aws-crypto/sha256-js/build/module/constants.js");

/**
 * @internal
 */
var RawSha256 = /** @class */ (function () {
    function RawSha256() {
        this.state = Int32Array.from(_constants__WEBPACK_IMPORTED_MODULE_0__.INIT);
        this.temp = new Int32Array(64);
        this.buffer = new Uint8Array(64);
        this.bufferLength = 0;
        this.bytesHashed = 0;
        /**
         * @internal
         */
        this.finished = false;
    }
    RawSha256.prototype.update = function (data) {
        if (this.finished) {
            throw new Error("Attempted to update an already finished hash.");
        }
        var position = 0;
        var byteLength = data.byteLength;
        this.bytesHashed += byteLength;
        if (this.bytesHashed * 8 > _constants__WEBPACK_IMPORTED_MODULE_0__.MAX_HASHABLE_LENGTH) {
            throw new Error("Cannot hash more than 2^53 - 1 bits");
        }
        while (byteLength > 0) {
            this.buffer[this.bufferLength++] = data[position++];
            byteLength--;
            if (this.bufferLength === _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE) {
                this.hashBuffer();
                this.bufferLength = 0;
            }
        }
    };
    RawSha256.prototype.digest = function () {
        if (!this.finished) {
            var bitsHashed = this.bytesHashed * 8;
            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);
            var undecoratedLength = this.bufferLength;
            bufferView.setUint8(this.bufferLength++, 0x80);
            // Ensure the final block has enough room for the hashed length
            if (undecoratedLength % _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE >= _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE - 8) {
                for (var i = this.bufferLength; i < _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE; i++) {
                    bufferView.setUint8(i, 0);
                }
                this.hashBuffer();
                this.bufferLength = 0;
            }
            for (var i = this.bufferLength; i < _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE - 8; i++) {
                bufferView.setUint8(i, 0);
            }
            bufferView.setUint32(_constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);
            bufferView.setUint32(_constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE - 4, bitsHashed);
            this.hashBuffer();
            this.finished = true;
        }
        // The value in state is little-endian rather than big-endian, so flip
        // each word into a new Uint8Array
        var out = new Uint8Array(_constants__WEBPACK_IMPORTED_MODULE_0__.DIGEST_LENGTH);
        for (var i = 0; i < 8; i++) {
            out[i * 4] = (this.state[i] >>> 24) & 0xff;
            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;
            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;
            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;
        }
        return out;
    };
    RawSha256.prototype.hashBuffer = function () {
        var _a = this, buffer = _a.buffer, state = _a.state;
        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];
        for (var i = 0; i < _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE; i++) {
            if (i < 16) {
                this.temp[i] =
                    ((buffer[i * 4] & 0xff) << 24) |
                        ((buffer[i * 4 + 1] & 0xff) << 16) |
                        ((buffer[i * 4 + 2] & 0xff) << 8) |
                        (buffer[i * 4 + 3] & 0xff);
            }
            else {
                var u = this.temp[i - 2];
                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);
                u = this.temp[i - 15];
                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);
                this.temp[i] =
                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);
            }
            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^
                ((state4 >>> 11) | (state4 << 21)) ^
                ((state4 >>> 25) | (state4 << 7))) +
                ((state4 & state5) ^ (~state4 & state6))) |
                0) +
                ((state7 + ((_constants__WEBPACK_IMPORTED_MODULE_0__.KEY[i] + this.temp[i]) | 0)) | 0)) |
                0;
            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^
                ((state0 >>> 13) | (state0 << 19)) ^
                ((state0 >>> 22) | (state0 << 10))) +
                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |
                0;
            state7 = state6;
            state6 = state5;
            state5 = state4;
            state4 = (state3 + t1) | 0;
            state3 = state2;
            state2 = state1;
            state1 = state0;
            state0 = (t1 + t2) | 0;
        }
        state[0] += state0;
        state[1] += state1;
        state[2] += state2;
        state[3] += state3;
        state[4] += state4;
        state[5] += state5;
        state[6] += state6;
        state[7] += state7;
    };
    return RawSha256;
}());

//# sourceMappingURL=RawSha256.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/sha256-js/build/module/constants.js":
/*!**************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/sha256-js/build/module/constants.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BLOCK_SIZE: () => (/* binding */ BLOCK_SIZE),
/* harmony export */   DIGEST_LENGTH: () => (/* binding */ DIGEST_LENGTH),
/* harmony export */   INIT: () => (/* binding */ INIT),
/* harmony export */   KEY: () => (/* binding */ KEY),
/* harmony export */   MAX_HASHABLE_LENGTH: () => (/* binding */ MAX_HASHABLE_LENGTH)
/* harmony export */ });
/**
 * @internal
 */
var BLOCK_SIZE = 64;
/**
 * @internal
 */
var DIGEST_LENGTH = 32;
/**
 * @internal
 */
var KEY = new Uint32Array([
    0x428a2f98,
    0x71374491,
    0xb5c0fbcf,
    0xe9b5dba5,
    0x3956c25b,
    0x59f111f1,
    0x923f82a4,
    0xab1c5ed5,
    0xd807aa98,
    0x12835b01,
    0x243185be,
    0x550c7dc3,
    0x72be5d74,
    0x80deb1fe,
    0x9bdc06a7,
    0xc19bf174,
    0xe49b69c1,
    0xefbe4786,
    0x0fc19dc6,
    0x240ca1cc,
    0x2de92c6f,
    0x4a7484aa,
    0x5cb0a9dc,
    0x76f988da,
    0x983e5152,
    0xa831c66d,
    0xb00327c8,
    0xbf597fc7,
    0xc6e00bf3,
    0xd5a79147,
    0x06ca6351,
    0x14292967,
    0x27b70a85,
    0x2e1b2138,
    0x4d2c6dfc,
    0x53380d13,
    0x650a7354,
    0x766a0abb,
    0x81c2c92e,
    0x92722c85,
    0xa2bfe8a1,
    0xa81a664b,
    0xc24b8b70,
    0xc76c51a3,
    0xd192e819,
    0xd6990624,
    0xf40e3585,
    0x106aa070,
    0x19a4c116,
    0x1e376c08,
    0x2748774c,
    0x34b0bcb5,
    0x391c0cb3,
    0x4ed8aa4a,
    0x5b9cca4f,
    0x682e6ff3,
    0x748f82ee,
    0x78a5636f,
    0x84c87814,
    0x8cc70208,
    0x90befffa,
    0xa4506ceb,
    0xbef9a3f7,
    0xc67178f2
]);
/**
 * @internal
 */
var INIT = [
    0x6a09e667,
    0xbb67ae85,
    0x3c6ef372,
    0xa54ff53a,
    0x510e527f,
    0x9b05688c,
    0x1f83d9ab,
    0x5be0cd19
];
/**
 * @internal
 */
var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;
//# sourceMappingURL=constants.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js":
/*!**********************************************************************!*\
  !*** ../../node_modules/@aws-crypto/sha256-js/build/module/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Sha256: () => (/* reexport safe */ _jsSha256__WEBPACK_IMPORTED_MODULE_0__.Sha256)
/* harmony export */ });
/* harmony import */ var _jsSha256__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jsSha256 */ "../../node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js");

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js":
/*!*************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Sha256: () => (/* binding */ Sha256)
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tslib */ "../../node_modules/tslib/tslib.es6.mjs");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "../../node_modules/@aws-crypto/sha256-js/build/module/constants.js");
/* harmony import */ var _RawSha256__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RawSha256 */ "../../node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js");
/* harmony import */ var _aws_crypto_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-crypto/util */ "../../node_modules/@aws-crypto/util/build/module/index.js");




var Sha256 = /** @class */ (function () {
    function Sha256(secret) {
        this.secret = secret;
        this.hash = new _RawSha256__WEBPACK_IMPORTED_MODULE_1__.RawSha256();
        this.reset();
    }
    Sha256.prototype.update = function (toHash) {
        if ((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_2__.isEmptyData)(toHash) || this.error) {
            return;
        }
        try {
            this.hash.update((0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_2__.convertToBuffer)(toHash));
        }
        catch (e) {
            this.error = e;
        }
    };
    /* This synchronous method keeps compatibility
     * with the v2 aws-sdk.
     */
    Sha256.prototype.digestSync = function () {
        if (this.error) {
            throw this.error;
        }
        if (this.outer) {
            if (!this.outer.finished) {
                this.outer.update(this.hash.digest());
            }
            return this.outer.digest();
        }
        return this.hash.digest();
    };
    /* The underlying digest method here is synchronous.
     * To keep the same interface with the other hash functions
     * the default is to expose this as an async method.
     * However, it can sometimes be useful to have a sync method.
     */
    Sha256.prototype.digest = function () {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this, void 0, void 0, function () {
            return (0,tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this, function (_a) {
                return [2 /*return*/, this.digestSync()];
            });
        });
    };
    Sha256.prototype.reset = function () {
        this.hash = new _RawSha256__WEBPACK_IMPORTED_MODULE_1__.RawSha256();
        if (this.secret) {
            this.outer = new _RawSha256__WEBPACK_IMPORTED_MODULE_1__.RawSha256();
            var inner = bufferFromSecret(this.secret);
            var outer = new Uint8Array(_constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE);
            outer.set(inner);
            for (var i = 0; i < _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE; i++) {
                inner[i] ^= 0x36;
                outer[i] ^= 0x5c;
            }
            this.hash.update(inner);
            this.outer.update(outer);
            // overwrite the copied key in memory
            for (var i = 0; i < inner.byteLength; i++) {
                inner[i] = 0;
            }
        }
    };
    return Sha256;
}());

function bufferFromSecret(secret) {
    var input = (0,_aws_crypto_util__WEBPACK_IMPORTED_MODULE_2__.convertToBuffer)(secret);
    if (input.byteLength > _constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE) {
        var bufferHash = new _RawSha256__WEBPACK_IMPORTED_MODULE_1__.RawSha256();
        bufferHash.update(input);
        input = bufferHash.digest();
    }
    var buffer = new Uint8Array(_constants__WEBPACK_IMPORTED_MODULE_0__.BLOCK_SIZE);
    buffer.set(input);
    return buffer;
}
//# sourceMappingURL=jsSha256.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/build/module/convertToBuffer.js":
/*!***************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/build/module/convertToBuffer.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToBuffer: () => (/* binding */ convertToBuffer)
/* harmony export */ });
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-utf8 */ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0

// Quick polyfill
var fromUtf8 = typeof Buffer !== "undefined" && Buffer.from
    ? function (input) { return Buffer.from(input, "utf8"); }
    : _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8;
function convertToBuffer(data) {
    // Already a Uint8, do nothing
    if (data instanceof Uint8Array)
        return data;
    if (typeof data === "string") {
        return fromUtf8(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
}
//# sourceMappingURL=convertToBuffer.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/build/module/index.js":
/*!*****************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/build/module/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToBuffer: () => (/* reexport safe */ _convertToBuffer__WEBPACK_IMPORTED_MODULE_0__.convertToBuffer),
/* harmony export */   isEmptyData: () => (/* reexport safe */ _isEmptyData__WEBPACK_IMPORTED_MODULE_1__.isEmptyData),
/* harmony export */   numToUint8: () => (/* reexport safe */ _numToUint8__WEBPACK_IMPORTED_MODULE_2__.numToUint8),
/* harmony export */   uint32ArrayFrom: () => (/* reexport safe */ _uint32ArrayFrom__WEBPACK_IMPORTED_MODULE_3__.uint32ArrayFrom)
/* harmony export */ });
/* harmony import */ var _convertToBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./convertToBuffer */ "../../node_modules/@aws-crypto/util/build/module/convertToBuffer.js");
/* harmony import */ var _isEmptyData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isEmptyData */ "../../node_modules/@aws-crypto/util/build/module/isEmptyData.js");
/* harmony import */ var _numToUint8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./numToUint8 */ "../../node_modules/@aws-crypto/util/build/module/numToUint8.js");
/* harmony import */ var _uint32ArrayFrom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uint32ArrayFrom */ "../../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js");
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0




//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/build/module/isEmptyData.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/build/module/isEmptyData.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isEmptyData: () => (/* binding */ isEmptyData)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function isEmptyData(data) {
    if (typeof data === "string") {
        return data.length === 0;
    }
    return data.byteLength === 0;
}
//# sourceMappingURL=isEmptyData.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/build/module/numToUint8.js":
/*!**********************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/build/module/numToUint8.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   numToUint8: () => (/* binding */ numToUint8)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function numToUint8(num) {
    return new Uint8Array([
        (num & 0xff000000) >> 24,
        (num & 0x00ff0000) >> 16,
        (num & 0x0000ff00) >> 8,
        num & 0x000000ff,
    ]);
}
//# sourceMappingURL=numToUint8.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js":
/*!***************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/build/module/uint32ArrayFrom.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uint32ArrayFrom: () => (/* binding */ uint32ArrayFrom)
/* harmony export */ });
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// IE 11 does not support Array.from, so we do it manually
function uint32ArrayFrom(a_lookUpTable) {
    if (!Uint32Array.from) {
        var return_array = new Uint32Array(a_lookUpTable.length);
        var a_index = 0;
        while (a_index < a_lookUpTable.length) {
            return_array[a_index] = a_lookUpTable[a_index];
            a_index += 1;
        }
        return return_array;
    }
    return Uint32Array.from(a_lookUpTable);
}
//# sourceMappingURL=uint32ArrayFrom.js.map

/***/ }),

/***/ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js":
/*!******************************************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* binding */ fromUtf8)
/* harmony export */ });
const fromUtf8 = (input) => new TextEncoder().encode(input);


/***/ }),

/***/ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js":
/*!*******************************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* reexport safe */ _fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8),
/* harmony export */   toUint8Array: () => (/* reexport safe */ _toUint8Array__WEBPACK_IMPORTED_MODULE_1__.toUint8Array),
/* harmony export */   toUtf8: () => (/* reexport safe */ _toUtf8__WEBPACK_IMPORTED_MODULE_2__.toUtf8)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js");
/* harmony import */ var _toUint8Array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toUint8Array */ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js");
/* harmony import */ var _toUtf8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toUtf8 */ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js");





/***/ }),

/***/ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js":
/*!**************************************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUint8Array: () => (/* binding */ toUint8Array)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js");

const toUint8Array = (data) => {
    if (typeof data === "string") {
        return (0,_fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8)(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
};


/***/ }),

/***/ "../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js":
/*!****************************************************************************************************!*\
  !*** ../../node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUtf8: () => (/* binding */ toUtf8)
/* harmony export */ });
const toUtf8 = (input) => {
    if (typeof input === "string") {
        return input;
    }
    if (typeof input !== "object" || typeof input.byteOffset !== "number" || typeof input.byteLength !== "number") {
        throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");
    }
    return new TextDecoder("utf-8").decode(input);
};


/***/ }),

/***/ "../../node_modules/@smithy/md5-js/dist-es/constants.js":
/*!**************************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/dist-es/constants.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BLOCK_SIZE: () => (/* binding */ BLOCK_SIZE),
/* harmony export */   DIGEST_LENGTH: () => (/* binding */ DIGEST_LENGTH),
/* harmony export */   INIT: () => (/* binding */ INIT)
/* harmony export */ });
const BLOCK_SIZE = 64;
const DIGEST_LENGTH = 16;
const INIT = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476];


/***/ }),

/***/ "../../node_modules/@smithy/md5-js/dist-es/index.js":
/*!**********************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/dist-es/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Md5: () => (/* binding */ Md5)
/* harmony export */ });
/* harmony import */ var _smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/util-utf8 */ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "../../node_modules/@smithy/md5-js/dist-es/constants.js");


class Md5 {
    constructor() {
        this.reset();
    }
    update(sourceData) {
        if (isEmptyData(sourceData)) {
            return;
        }
        else if (this.finished) {
            throw new Error("Attempted to update an already finished hash.");
        }
        const data = convertToBuffer(sourceData);
        let position = 0;
        let { byteLength } = data;
        this.bytesHashed += byteLength;
        while (byteLength > 0) {
            this.buffer.setUint8(this.bufferLength++, data[position++]);
            byteLength--;
            if (this.bufferLength === _constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE) {
                this.hashBuffer();
                this.bufferLength = 0;
            }
        }
    }
    async digest() {
        if (!this.finished) {
            const { buffer, bufferLength: undecoratedLength, bytesHashed } = this;
            const bitsHashed = bytesHashed * 8;
            buffer.setUint8(this.bufferLength++, 0b10000000);
            if (undecoratedLength % _constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE >= _constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE - 8) {
                for (let i = this.bufferLength; i < _constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE; i++) {
                    buffer.setUint8(i, 0);
                }
                this.hashBuffer();
                this.bufferLength = 0;
            }
            for (let i = this.bufferLength; i < _constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE - 8; i++) {
                buffer.setUint8(i, 0);
            }
            buffer.setUint32(_constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE - 8, bitsHashed >>> 0, true);
            buffer.setUint32(_constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE - 4, Math.floor(bitsHashed / 0x100000000), true);
            this.hashBuffer();
            this.finished = true;
        }
        const out = new DataView(new ArrayBuffer(_constants__WEBPACK_IMPORTED_MODULE_1__.DIGEST_LENGTH));
        for (let i = 0; i < 4; i++) {
            out.setUint32(i * 4, this.state[i], true);
        }
        return new Uint8Array(out.buffer, out.byteOffset, out.byteLength);
    }
    hashBuffer() {
        const { buffer, state } = this;
        let a = state[0], b = state[1], c = state[2], d = state[3];
        a = ff(a, b, c, d, buffer.getUint32(0, true), 7, 0xd76aa478);
        d = ff(d, a, b, c, buffer.getUint32(4, true), 12, 0xe8c7b756);
        c = ff(c, d, a, b, buffer.getUint32(8, true), 17, 0x242070db);
        b = ff(b, c, d, a, buffer.getUint32(12, true), 22, 0xc1bdceee);
        a = ff(a, b, c, d, buffer.getUint32(16, true), 7, 0xf57c0faf);
        d = ff(d, a, b, c, buffer.getUint32(20, true), 12, 0x4787c62a);
        c = ff(c, d, a, b, buffer.getUint32(24, true), 17, 0xa8304613);
        b = ff(b, c, d, a, buffer.getUint32(28, true), 22, 0xfd469501);
        a = ff(a, b, c, d, buffer.getUint32(32, true), 7, 0x698098d8);
        d = ff(d, a, b, c, buffer.getUint32(36, true), 12, 0x8b44f7af);
        c = ff(c, d, a, b, buffer.getUint32(40, true), 17, 0xffff5bb1);
        b = ff(b, c, d, a, buffer.getUint32(44, true), 22, 0x895cd7be);
        a = ff(a, b, c, d, buffer.getUint32(48, true), 7, 0x6b901122);
        d = ff(d, a, b, c, buffer.getUint32(52, true), 12, 0xfd987193);
        c = ff(c, d, a, b, buffer.getUint32(56, true), 17, 0xa679438e);
        b = ff(b, c, d, a, buffer.getUint32(60, true), 22, 0x49b40821);
        a = gg(a, b, c, d, buffer.getUint32(4, true), 5, 0xf61e2562);
        d = gg(d, a, b, c, buffer.getUint32(24, true), 9, 0xc040b340);
        c = gg(c, d, a, b, buffer.getUint32(44, true), 14, 0x265e5a51);
        b = gg(b, c, d, a, buffer.getUint32(0, true), 20, 0xe9b6c7aa);
        a = gg(a, b, c, d, buffer.getUint32(20, true), 5, 0xd62f105d);
        d = gg(d, a, b, c, buffer.getUint32(40, true), 9, 0x02441453);
        c = gg(c, d, a, b, buffer.getUint32(60, true), 14, 0xd8a1e681);
        b = gg(b, c, d, a, buffer.getUint32(16, true), 20, 0xe7d3fbc8);
        a = gg(a, b, c, d, buffer.getUint32(36, true), 5, 0x21e1cde6);
        d = gg(d, a, b, c, buffer.getUint32(56, true), 9, 0xc33707d6);
        c = gg(c, d, a, b, buffer.getUint32(12, true), 14, 0xf4d50d87);
        b = gg(b, c, d, a, buffer.getUint32(32, true), 20, 0x455a14ed);
        a = gg(a, b, c, d, buffer.getUint32(52, true), 5, 0xa9e3e905);
        d = gg(d, a, b, c, buffer.getUint32(8, true), 9, 0xfcefa3f8);
        c = gg(c, d, a, b, buffer.getUint32(28, true), 14, 0x676f02d9);
        b = gg(b, c, d, a, buffer.getUint32(48, true), 20, 0x8d2a4c8a);
        a = hh(a, b, c, d, buffer.getUint32(20, true), 4, 0xfffa3942);
        d = hh(d, a, b, c, buffer.getUint32(32, true), 11, 0x8771f681);
        c = hh(c, d, a, b, buffer.getUint32(44, true), 16, 0x6d9d6122);
        b = hh(b, c, d, a, buffer.getUint32(56, true), 23, 0xfde5380c);
        a = hh(a, b, c, d, buffer.getUint32(4, true), 4, 0xa4beea44);
        d = hh(d, a, b, c, buffer.getUint32(16, true), 11, 0x4bdecfa9);
        c = hh(c, d, a, b, buffer.getUint32(28, true), 16, 0xf6bb4b60);
        b = hh(b, c, d, a, buffer.getUint32(40, true), 23, 0xbebfbc70);
        a = hh(a, b, c, d, buffer.getUint32(52, true), 4, 0x289b7ec6);
        d = hh(d, a, b, c, buffer.getUint32(0, true), 11, 0xeaa127fa);
        c = hh(c, d, a, b, buffer.getUint32(12, true), 16, 0xd4ef3085);
        b = hh(b, c, d, a, buffer.getUint32(24, true), 23, 0x04881d05);
        a = hh(a, b, c, d, buffer.getUint32(36, true), 4, 0xd9d4d039);
        d = hh(d, a, b, c, buffer.getUint32(48, true), 11, 0xe6db99e5);
        c = hh(c, d, a, b, buffer.getUint32(60, true), 16, 0x1fa27cf8);
        b = hh(b, c, d, a, buffer.getUint32(8, true), 23, 0xc4ac5665);
        a = ii(a, b, c, d, buffer.getUint32(0, true), 6, 0xf4292244);
        d = ii(d, a, b, c, buffer.getUint32(28, true), 10, 0x432aff97);
        c = ii(c, d, a, b, buffer.getUint32(56, true), 15, 0xab9423a7);
        b = ii(b, c, d, a, buffer.getUint32(20, true), 21, 0xfc93a039);
        a = ii(a, b, c, d, buffer.getUint32(48, true), 6, 0x655b59c3);
        d = ii(d, a, b, c, buffer.getUint32(12, true), 10, 0x8f0ccc92);
        c = ii(c, d, a, b, buffer.getUint32(40, true), 15, 0xffeff47d);
        b = ii(b, c, d, a, buffer.getUint32(4, true), 21, 0x85845dd1);
        a = ii(a, b, c, d, buffer.getUint32(32, true), 6, 0x6fa87e4f);
        d = ii(d, a, b, c, buffer.getUint32(60, true), 10, 0xfe2ce6e0);
        c = ii(c, d, a, b, buffer.getUint32(24, true), 15, 0xa3014314);
        b = ii(b, c, d, a, buffer.getUint32(52, true), 21, 0x4e0811a1);
        a = ii(a, b, c, d, buffer.getUint32(16, true), 6, 0xf7537e82);
        d = ii(d, a, b, c, buffer.getUint32(44, true), 10, 0xbd3af235);
        c = ii(c, d, a, b, buffer.getUint32(8, true), 15, 0x2ad7d2bb);
        b = ii(b, c, d, a, buffer.getUint32(36, true), 21, 0xeb86d391);
        state[0] = (a + state[0]) & 0xffffffff;
        state[1] = (b + state[1]) & 0xffffffff;
        state[2] = (c + state[2]) & 0xffffffff;
        state[3] = (d + state[3]) & 0xffffffff;
    }
    reset() {
        this.state = Uint32Array.from(_constants__WEBPACK_IMPORTED_MODULE_1__.INIT);
        this.buffer = new DataView(new ArrayBuffer(_constants__WEBPACK_IMPORTED_MODULE_1__.BLOCK_SIZE));
        this.bufferLength = 0;
        this.bytesHashed = 0;
        this.finished = false;
    }
}
function cmn(q, a, b, x, s, t) {
    a = (((a + q) & 0xffffffff) + ((x + t) & 0xffffffff)) & 0xffffffff;
    return (((a << s) | (a >>> (32 - s))) + b) & 0xffffffff;
}
function ff(a, b, c, d, x, s, t) {
    return cmn((b & c) | (~b & d), a, b, x, s, t);
}
function gg(a, b, c, d, x, s, t) {
    return cmn((b & d) | (c & ~d), a, b, x, s, t);
}
function hh(a, b, c, d, x, s, t) {
    return cmn(b ^ c ^ d, a, b, x, s, t);
}
function ii(a, b, c, d, x, s, t) {
    return cmn(c ^ (b | ~d), a, b, x, s, t);
}
function isEmptyData(data) {
    if (typeof data === "string") {
        return data.length === 0;
    }
    return data.byteLength === 0;
}
function convertToBuffer(data) {
    if (typeof data === "string") {
        return (0,_smithy_util_utf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8)(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
}


/***/ }),

/***/ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js":
/*!****************************************************************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* binding */ fromUtf8)
/* harmony export */ });
const fromUtf8 = (input) => new TextEncoder().encode(input);


/***/ }),

/***/ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/index.js":
/*!*****************************************************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/index.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromUtf8: () => (/* reexport safe */ _fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8),
/* harmony export */   toUint8Array: () => (/* reexport safe */ _toUint8Array__WEBPACK_IMPORTED_MODULE_1__.toUint8Array),
/* harmony export */   toUtf8: () => (/* reexport safe */ _toUtf8__WEBPACK_IMPORTED_MODULE_2__.toUtf8)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js");
/* harmony import */ var _toUint8Array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toUint8Array */ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js");
/* harmony import */ var _toUtf8__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toUtf8 */ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js");





/***/ }),

/***/ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js":
/*!************************************************************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUint8Array.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUint8Array: () => (/* binding */ toUint8Array)
/* harmony export */ });
/* harmony import */ var _fromUtf8__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fromUtf8 */ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js");

const toUint8Array = (data) => {
    if (typeof data === "string") {
        return (0,_fromUtf8__WEBPACK_IMPORTED_MODULE_0__.fromUtf8)(data);
    }
    if (ArrayBuffer.isView(data)) {
        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);
    }
    return new Uint8Array(data);
};


/***/ }),

/***/ "../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js":
/*!**************************************************************************************************!*\
  !*** ../../node_modules/@smithy/md5-js/node_modules/@smithy/util-utf8/dist-es/toUtf8.browser.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toUtf8: () => (/* binding */ toUtf8)
/* harmony export */ });
const toUtf8 = (input) => {
    if (typeof input === "string") {
        return input;
    }
    if (typeof input !== "object" || typeof input.byteOffset !== "number" || typeof input.byteLength !== "number") {
        throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");
    }
    return new TextDecoder("utf-8").decode(input);
};


/***/ }),

/***/ "../../node_modules/crc-32/crc32.js":
/*!******************************************!*\
  !*** ../../node_modules/crc-32/crc32.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {

/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */
/* vim: set ts=2: */
/*exported CRC32 */
var CRC32;
(function (factory) {
	/*jshint ignore:start */
	/*eslint-disable */
	if(typeof DO_NOT_EXPORT_CRC === 'undefined') {
		if(true) {
			factory(exports);
		} else {}
	} else {
		factory(CRC32 = {});
	}
	/*eslint-enable */
	/*jshint ignore:end */
}(function(CRC32) {
CRC32.version = '1.2.2';
/*global Int32Array */
function signed_crc_table() {
	var c = 0, table = new Array(256);

	for(var n =0; n != 256; ++n){
		c = n;
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		table[n] = c;
	}

	return typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;
}

var T0 = signed_crc_table();
function slice_by_16_tables(T) {
	var c = 0, v = 0, n = 0, table = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;

	for(n = 0; n != 256; ++n) table[n] = T[n];
	for(n = 0; n != 256; ++n) {
		v = T[n];
		for(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];
	}
	var out = [];
	for(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);
	return out;
}
var TT = slice_by_16_tables(T0);
var T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];
var T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];
var Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];
function crc32_bstr(bstr, seed) {
	var C = seed ^ -1;
	for(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];
	return ~C;
}

function crc32_buf(B, seed) {
	var C = seed ^ -1, L = B.length - 15, i = 0;
	for(; i < L;) C =
		Tf[B[i++] ^ (C & 255)] ^
		Te[B[i++] ^ ((C >> 8) & 255)] ^
		Td[B[i++] ^ ((C >> 16) & 255)] ^
		Tc[B[i++] ^ (C >>> 24)] ^
		Tb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^
		T7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^
		T3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];
	L += 15;
	while(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];
	return ~C;
}

function crc32_str(str, seed) {
	var C = seed ^ -1;
	for(var i = 0, L = str.length, c = 0, d = 0; i < L;) {
		c = str.charCodeAt(i++);
		if(c < 0x80) {
			C = (C>>>8) ^ T0[(C^c)&0xFF];
		} else if(c < 0x800) {
			C = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];
		} else if(c >= 0xD800 && c < 0xE000) {
			c = (c&1023)+64; d = str.charCodeAt(i++)&1023;
			C = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];
		} else {
			C = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];
		}
	}
	return ~C;
}
CRC32.table = T0;
// $FlowIgnore
CRC32.bstr = crc32_bstr;
// $FlowIgnore
CRC32.buf = crc32_buf;
// $FlowIgnore
CRC32.str = crc32_str;
}));


/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/native.js":
/*!**********************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/native.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  randomUUID
});

/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/regex.js":
/*!*********************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/regex.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/rng.js":
/*!*******************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/rng.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ rng)
/* harmony export */ });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/stringify.js":
/*!*************************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)
/* harmony export */ });
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "../../node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);

/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/v4.js":
/*!******************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/v4.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ "../../node_modules/uuid/dist/esm-browser/native.js");
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ "../../node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ "../../node_modules/uuid/dist/esm-browser/stringify.js");




function v4(options, buf, offset) {
  if (_native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID && !buf && !options) {
    return _native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID();
  }

  options = options || {};
  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);

/***/ }),

/***/ "../../node_modules/uuid/dist/esm-browser/validate.js":
/*!************************************************************!*\
  !*** ../../node_modules/uuid/dist/esm-browser/validate.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "../../node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);

/***/ }),

/***/ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js":
/*!***********************************************************************!*\
  !*** ../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromHex: () => (/* binding */ fromHex),
/* harmony export */   toHex: () => (/* binding */ toHex)
/* harmony export */ });
const SHORT_TO_HEX = {};
const HEX_TO_SHORT = {};
for (let i = 0; i < 256; i++) {
    let encodedByte = i.toString(16).toLowerCase();
    if (encodedByte.length === 1) {
        encodedByte = `0${encodedByte}`;
    }
    SHORT_TO_HEX[i] = encodedByte;
    HEX_TO_SHORT[encodedByte] = i;
}
function fromHex(encoded) {
    if (encoded.length % 2 !== 0) {
        throw new Error("Hex encoded strings must have an even number length");
    }
    const out = new Uint8Array(encoded.length / 2);
    for (let i = 0; i < encoded.length; i += 2) {
        const encodedByte = encoded.slice(i, i + 2).toLowerCase();
        if (encodedByte in HEX_TO_SHORT) {
            out[i / 2] = HEX_TO_SHORT[encodedByte];
        }
        else {
            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);
        }
    }
    return out;
}
function toHex(bytes) {
    let out = "";
    for (let i = 0; i < bytes.byteLength; i++) {
        out += SHORT_TO_HEX[bytes[i]];
    }
    return out;
}


/***/ }),

/***/ "?1964":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?85fe":
/*!*********************************!*\
  !*** fast-xml-parser (ignored) ***!
  \*********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?cd36":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?16bd":
/*!*********************************!*\
  !*** fast-xml-parser (ignored) ***!
  \*********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?83be":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?12d1":
/*!*********************************!*\
  !*** fast-xml-parser (ignored) ***!
  \*********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?e333":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?3e26":
/*!*********************************!*\
  !*** fast-xml-parser (ignored) ***!
  \*********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?9c0a":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?98bf":
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?a576":
/*!*********************************!*\
  !*** fast-xml-parser (ignored) ***!
  \*********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "../../node_modules/js-cookie/dist/js.cookie.mjs":
/*!*******************************************************!*\
  !*** ../../node_modules/js-cookie/dist/js.cookie.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ api)
/* harmony export */ });
/*! js-cookie v3.0.5 | MIT */
/* eslint-disable no-var */
function assign (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];
    for (var key in source) {
      target[key] = source[key];
    }
  }
  return target
}
/* eslint-enable no-var */

/* eslint-disable no-var */
var defaultConverter = {
  read: function (value) {
    if (value[0] === '"') {
      value = value.slice(1, -1);
    }
    return value.replace(/(%[\dA-F]{2})+/gi, decodeURIComponent)
  },
  write: function (value) {
    return encodeURIComponent(value).replace(
      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,
      decodeURIComponent
    )
  }
};
/* eslint-enable no-var */

/* eslint-disable no-var */

function init (converter, defaultAttributes) {
  function set (name, value, attributes) {
    if (typeof document === 'undefined') {
      return
    }

    attributes = assign({}, defaultAttributes, attributes);

    if (typeof attributes.expires === 'number') {
      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);
    }
    if (attributes.expires) {
      attributes.expires = attributes.expires.toUTCString();
    }

    name = encodeURIComponent(name)
      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)
      .replace(/[()]/g, escape);

    var stringifiedAttributes = '';
    for (var attributeName in attributes) {
      if (!attributes[attributeName]) {
        continue
      }

      stringifiedAttributes += '; ' + attributeName;

      if (attributes[attributeName] === true) {
        continue
      }

      // Considers RFC 6265 section 5.2:
      // ...
      // 3.  If the remaining unparsed-attributes contains a %x3B (";")
      //     character:
      // Consume the characters of the unparsed-attributes up to,
      // not including, the first %x3B (";") character.
      // ...
      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
    }

    return (document.cookie =
      name + '=' + converter.write(value, name) + stringifiedAttributes)
  }

  function get (name) {
    if (typeof document === 'undefined' || (arguments.length && !name)) {
      return
    }

    // To prevent the for loop in the first place assign an empty array
    // in case there are no cookies at all.
    var cookies = document.cookie ? document.cookie.split('; ') : [];
    var jar = {};
    for (var i = 0; i < cookies.length; i++) {
      var parts = cookies[i].split('=');
      var value = parts.slice(1).join('=');

      try {
        var found = decodeURIComponent(parts[0]);
        jar[found] = converter.read(value, found);

        if (name === found) {
          break
        }
      } catch (e) {}
    }

    return name ? jar[name] : jar
  }

  return Object.create(
    {
      set,
      get,
      remove: function (name, attributes) {
        set(
          name,
          '',
          assign({}, attributes, {
            expires: -1
          })
        );
      },
      withAttributes: function (attributes) {
        return init(this.converter, assign({}, this.attributes, attributes))
      },
      withConverter: function (converter) {
        return init(assign({}, this.converter, converter), this.attributes)
      }
    },
    {
      attributes: { value: Object.freeze(defaultAttributes) },
      converter: { value: Object.freeze(converter) }
    }
  )
}

var api = init(defaultConverter, { path: '/' });
/* eslint-enable no-var */




/***/ }),

/***/ "../../node_modules/tslib/tslib.es6.mjs":
/*!**********************************************!*\
  !*** ../../node_modules/tslib/tslib.es6.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __addDisposableResource: () => (/* binding */ __addDisposableResource),
/* harmony export */   __assign: () => (/* binding */ __assign),
/* harmony export */   __asyncDelegator: () => (/* binding */ __asyncDelegator),
/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),
/* harmony export */   __asyncValues: () => (/* binding */ __asyncValues),
/* harmony export */   __await: () => (/* binding */ __await),
/* harmony export */   __awaiter: () => (/* binding */ __awaiter),
/* harmony export */   __classPrivateFieldGet: () => (/* binding */ __classPrivateFieldGet),
/* harmony export */   __classPrivateFieldIn: () => (/* binding */ __classPrivateFieldIn),
/* harmony export */   __classPrivateFieldSet: () => (/* binding */ __classPrivateFieldSet),
/* harmony export */   __createBinding: () => (/* binding */ __createBinding),
/* harmony export */   __decorate: () => (/* binding */ __decorate),
/* harmony export */   __disposeResources: () => (/* binding */ __disposeResources),
/* harmony export */   __esDecorate: () => (/* binding */ __esDecorate),
/* harmony export */   __exportStar: () => (/* binding */ __exportStar),
/* harmony export */   __extends: () => (/* binding */ __extends),
/* harmony export */   __generator: () => (/* binding */ __generator),
/* harmony export */   __importDefault: () => (/* binding */ __importDefault),
/* harmony export */   __importStar: () => (/* binding */ __importStar),
/* harmony export */   __makeTemplateObject: () => (/* binding */ __makeTemplateObject),
/* harmony export */   __metadata: () => (/* binding */ __metadata),
/* harmony export */   __param: () => (/* binding */ __param),
/* harmony export */   __propKey: () => (/* binding */ __propKey),
/* harmony export */   __read: () => (/* binding */ __read),
/* harmony export */   __rest: () => (/* binding */ __rest),
/* harmony export */   __runInitializers: () => (/* binding */ __runInitializers),
/* harmony export */   __setFunctionName: () => (/* binding */ __setFunctionName),
/* harmony export */   __spread: () => (/* binding */ __spread),
/* harmony export */   __spreadArray: () => (/* binding */ __spreadArray),
/* harmony export */   __spreadArrays: () => (/* binding */ __spreadArrays),
/* harmony export */   __values: () => (/* binding */ __values),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */

var extendStatics = function(d, b) {
  extendStatics = Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
  return extendStatics(d, b);
};

function __extends(d, b) {
  if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
  extendStatics(d, b);
  function __() { this.constructor = d; }
  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
  __assign = Object.assign || function __assign(t) {
      for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
      return t;
  }
  return __assign.apply(this, arguments);
}

function __rest(s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
      t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
              t[p[i]] = s[p[i]];
      }
  return t;
}

function __decorate(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
  return function (target, key) { decorator(target, key, paramIndex); }
}

function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
  function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
  var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
  var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
  var _, done = false;
  for (var i = decorators.length - 1; i >= 0; i--) {
      var context = {};
      for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
      for (var p in contextIn.access) context.access[p] = contextIn.access[p];
      context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
      var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
      if (kind === "accessor") {
          if (result === void 0) continue;
          if (result === null || typeof result !== "object") throw new TypeError("Object expected");
          if (_ = accept(result.get)) descriptor.get = _;
          if (_ = accept(result.set)) descriptor.set = _;
          if (_ = accept(result.init)) initializers.unshift(_);
      }
      else if (_ = accept(result)) {
          if (kind === "field") initializers.unshift(_);
          else descriptor[key] = _;
      }
  }
  if (target) Object.defineProperty(target, contextIn.name, descriptor);
  done = true;
};

function __runInitializers(thisArg, initializers, value) {
  var useValue = arguments.length > 2;
  for (var i = 0; i < initializers.length; i++) {
      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
  }
  return useValue ? value : void 0;
};

function __propKey(x) {
  return typeof x === "symbol" ? x : "".concat(x);
};

function __setFunctionName(f, name, prefix) {
  if (typeof name === "symbol") name = name.description ? "[".concat(name.description, "]") : "";
  return Object.defineProperty(f, "name", { configurable: true, value: prefix ? "".concat(prefix, " ", name) : name });
};

function __metadata(metadataKey, metadataValue) {
  if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
  return new (P || (P = Promise))(function (resolve, reject) {
      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
      function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}

function __generator(thisArg, body) {
  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
  return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
  function verb(n) { return function (v) { return step([n, v]); }; }
  function step(op) {
      if (f) throw new TypeError("Generator is already executing.");
      while (g && (g = 0, op[0] && (_ = 0)), _) try {
          if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
          if (y = 0, t) op = [op[0] & 2, t.value];
          switch (op[0]) {
              case 0: case 1: t = op; break;
              case 4: _.label++; return { value: op[1], done: false };
              case 5: _.label++; y = op[1]; op = [0]; continue;
              case 7: op = _.ops.pop(); _.trys.pop(); continue;
              default:
                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                  if (t[2]) _.ops.pop();
                  _.trys.pop(); continue;
          }
          op = body.call(thisArg, _);
      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
  }
}

var __createBinding = Object.create ? (function(o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
  }
  Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});

function __exportStar(m, o) {
  for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);
}

function __values(o) {
  var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
  if (m) return m.call(o);
  if (o && typeof o.length === "number") return {
      next: function () {
          if (o && i >= o.length) o = void 0;
          return { value: o && o[i++], done: !o };
      }
  };
  throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m) return o;
  var i = m.call(o), r, ar = [], e;
  try {
      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
  }
  catch (error) { e = { error: error }; }
  finally {
      try {
          if (r && !r.done && (m = i["return"])) m.call(i);
      }
      finally { if (e) throw e.error; }
  }
  return ar;
}

/** @deprecated */
function __spread() {
  for (var ar = [], i = 0; i < arguments.length; i++)
      ar = ar.concat(__read(arguments[i]));
  return ar;
}

/** @deprecated */
function __spreadArrays() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
          r[k] = a[j];
  return r;
}

function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
      if (ar || !(i in from)) {
          if (!ar) ar = Array.prototype.slice.call(from, 0, i);
          ar[i] = from[i];
      }
  }
  return to.concat(ar || Array.prototype.slice.call(from));
}

function __await(v) {
  return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var g = generator.apply(thisArg, _arguments || []), i, q = [];
  return i = Object.create((typeof AsyncIterator === "function" ? AsyncIterator : Object).prototype), verb("next"), verb("throw"), verb("return", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;
  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }
  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }
  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
  function fulfill(value) { resume("next", value); }
  function reject(value) { resume("throw", value); }
  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
  var i, p;
  return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
  if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
  var m = o[Symbol.asyncIterator], i;
  return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
  if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
  return cooked;
};

var __setModuleDefault = Object.create ? (function(o, v) {
  Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
  o["default"] = v;
};

function __importStar(mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
}

function __importDefault(mod) {
  return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, state, kind, f) {
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
}

function __classPrivateFieldIn(state, receiver) {
  if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function")) throw new TypeError("Cannot use 'in' operator on non-object");
  return typeof state === "function" ? receiver === state : state.has(receiver);
}

function __addDisposableResource(env, value, async) {
  if (value !== null && value !== void 0) {
    if (typeof value !== "object" && typeof value !== "function") throw new TypeError("Object expected.");
    var dispose, inner;
    if (async) {
      if (!Symbol.asyncDispose) throw new TypeError("Symbol.asyncDispose is not defined.");
      dispose = value[Symbol.asyncDispose];
    }
    if (dispose === void 0) {
      if (!Symbol.dispose) throw new TypeError("Symbol.dispose is not defined.");
      dispose = value[Symbol.dispose];
      if (async) inner = dispose;
    }
    if (typeof dispose !== "function") throw new TypeError("Object not disposable.");
    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };
    env.stack.push({ value: value, dispose: dispose, async: async });
  }
  else if (async) {
    env.stack.push({ async: true });
  }
  return value;
}

var _SuppressedError = typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
  var e = new Error(message);
  return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

function __disposeResources(env) {
  function fail(e) {
    env.error = env.hasError ? new _SuppressedError(e, env.error, "An error was suppressed during disposal.") : e;
    env.hasError = true;
  }
  var r, s = 0;
  function next() {
    while (r = env.stack.pop()) {
      try {
        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);
        if (r.dispose) {
          var result = r.dispose.call(r.value);
          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });
        }
        else s |= 1;
      }
      catch (e) {
        fail(e);
      }
    }
    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();
    if (env.hasError) throw env.error;
  }
  return next();
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  __extends,
  __assign,
  __rest,
  __decorate,
  __param,
  __metadata,
  __awaiter,
  __generator,
  __createBinding,
  __exportStar,
  __values,
  __read,
  __spread,
  __spreadArrays,
  __spreadArray,
  __await,
  __asyncGenerator,
  __asyncDelegator,
  __asyncValues,
  __makeTemplateObject,
  __importStar,
  __importDefault,
  __classPrivateFieldGet,
  __classPrivateFieldSet,
  __classPrivateFieldIn,
  __addDisposableResource,
  __disposeResources,
});


/***/ }),

/***/ "../auth/dist/esm/Errors.mjs":
/*!***********************************!*\
  !*** ../auth/dist/esm/Errors.mjs ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthError: () => (/* binding */ AuthError),
/* harmony export */   NoUserPoolError: () => (/* binding */ NoUserPoolError),
/* harmony export */   authErrorMessages: () => (/* binding */ authErrorMessages)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// TODO: delete this module when the Auth class is removed.
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('AuthError');
class AuthError extends Error {
    constructor(type) {
        const { message, log } = authErrorMessages[type];
        super(message);
        // Hack for making the custom error class work when transpiled to es5
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = AuthError;
        Object.setPrototypeOf(this, AuthError.prototype);
        this.name = 'AuthError';
        this.log = log || message;
        logger.error(this.log);
    }
}
class NoUserPoolError extends AuthError {
    constructor(type) {
        super(type);
        // Hack for making the custom error class work when transpiled to es5
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = NoUserPoolError;
        Object.setPrototypeOf(this, NoUserPoolError.prototype);
        this.name = 'NoUserPoolError';
    }
}
const authErrorMessages = {
    oauthSignInError: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.OAUTH_ERROR,
        log: 'Make sure Cognito Hosted UI has been configured correctly',
    },
    noConfig: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.DEFAULT_MSG,
        log: `
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `,
    },
    missingAuthConfig: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.DEFAULT_MSG,
        log: `
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `,
    },
    emptyUsername: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.EMPTY_USERNAME,
    },
    // TODO: should include a list of valid sign-in types
    invalidUsername: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.INVALID_USERNAME,
    },
    emptyPassword: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.EMPTY_PASSWORD,
    },
    emptyCode: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.EMPTY_CODE,
    },
    signUpError: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.SIGN_UP_ERROR,
        log: 'The first parameter should either be non-null string or object',
    },
    noMFA: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.NO_MFA,
    },
    invalidMFA: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.INVALID_MFA,
    },
    emptyChallengeResponse: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.EMPTY_CHALLENGE,
    },
    noUserSession: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.NO_USER_SESSION,
    },
    deviceConfig: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.DEVICE_CONFIG,
    },
    networkError: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.NETWORK_ERROR,
    },
    autoSignInError: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.AUTOSIGNIN_ERROR,
    },
    default: {
        message: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorStrings.DEFAULT_MSG,
    },
};


//# sourceMappingURL=Errors.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/apis/associateWebAuthnCredential.mjs":
/*!********************************************************************!*\
  !*** ../auth/dist/esm/client/apis/associateWebAuthnCredential.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   associateWebAuthnCredential: () => (/* binding */ associateWebAuthnCredential)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../providers/cognito/utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_passkey_registerPasskey_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/passkey/registerPasskey.mjs */ "../auth/dist/esm/client/utils/passkey/registerPasskey.mjs");
/* harmony import */ var _utils_passkey_types_shared_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/passkey/types/shared.mjs */ "../auth/dist/esm/client/utils/passkey/types/shared.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createStartWebAuthnRegistrationClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/factories/serviceClients/cognitoIdentityProvider/createStartWebAuthnRegistrationClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createStartWebAuthnRegistrationClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createCompleteWebAuthnRegistrationClient_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../foundation/factories/serviceClients/cognitoIdentityProvider/createCompleteWebAuthnRegistrationClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createCompleteWebAuthnRegistrationClient.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Registers a new passkey for an authenticated user
 *
 * @returns Promise<void>
 * @throws - {@link PasskeyError}:
 * - Thrown when intermediate state is invalid
 * @throws - {@link AuthError}:
 * - Thrown when user is unauthenticated
 * @throws - {@link StartWebAuthnRegistrationException}
 * - Thrown due to a service error retrieving WebAuthn registration options
 * @throws - {@link CompleteWebAuthnRegistrationException}
 * - Thrown due to a service error when verifying WebAuthn registration result
 */
async function associateWebAuthnCredential() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();
    (0,_providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const startWebAuthnRegistration = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createStartWebAuthnRegistrationClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createStartWebAuthnRegistrationClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { CredentialCreationOptions: credentialCreationOptions } = await startWebAuthnRegistration({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.StartWebAuthnRegistration),
    }, {
        AccessToken: tokens.accessToken.toString(),
    });
    (0,_utils_passkey_types_shared_mjs__WEBPACK_IMPORTED_MODULE_9__.assertValidCredentialCreationOptions)(credentialCreationOptions);
    const cred = await (0,_utils_passkey_registerPasskey_mjs__WEBPACK_IMPORTED_MODULE_10__.registerPasskey)(credentialCreationOptions);
    const completeWebAuthnRegistration = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createCompleteWebAuthnRegistrationClient_mjs__WEBPACK_IMPORTED_MODULE_11__.createCompleteWebAuthnRegistrationClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await completeWebAuthnRegistration({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.CompleteWebAuthnRegistration),
    }, {
        AccessToken: tokens.accessToken.toString(),
        Credential: cred,
    });
}


//# sourceMappingURL=associateWebAuthnCredential.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/apis/deleteWebAuthnCredential.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/client/apis/deleteWebAuthnCredential.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteWebAuthnCredential: () => (/* binding */ deleteWebAuthnCredential)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _foundation_apis_deleteWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/apis/deleteWebAuthnCredential.mjs */ "../auth/dist/esm/foundation/apis/deleteWebAuthnCredential.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Delete a registered credential for an authenticated user by credentialId
 * @param {DeleteWebAuthnCredentialInput} input The delete input parameters including the credentialId
 * @returns Promise<void>
 * @throws - {@link AuthError}:
 * - Thrown when user is unauthenticated
 * @throws - {@link DeleteWebAuthnCredentialException}
 * - Thrown due to a service error when deleting a WebAuthn credential
 */
async function deleteWebAuthnCredential(input) {
    return (0,_foundation_apis_deleteWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_0__.deleteWebAuthnCredential)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=deleteWebAuthnCredential.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/apis/listWebAuthnCredentials.mjs":
/*!****************************************************************!*\
  !*** ../auth/dist/esm/client/apis/listWebAuthnCredentials.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listWebAuthnCredentials: () => (/* binding */ listWebAuthnCredentials)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _foundation_apis_listWebAuthnCredentials_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/apis/listWebAuthnCredentials.mjs */ "../auth/dist/esm/foundation/apis/listWebAuthnCredentials.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Lists registered credentials for an authenticated user
 *
 * @param {ListWebAuthnCredentialsInput} input The list input parameters including page size and next token.
 * @returns Promise<ListWebAuthnCredentialsOutput>
 * @throws - {@link AuthError}:
 * - Thrown when user is unauthenticated
 * @throws - {@link ListWebAuthnCredentialsException}
 * - Thrown due to a service error when listing WebAuthn credentials
 */
async function listWebAuthnCredentials(input) {
    return (0,_foundation_apis_listWebAuthnCredentials_mjs__WEBPACK_IMPORTED_MODULE_0__.listWebAuthnCredentials)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=listWebAuthnCredentials.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/shared/handlePasswordSRP.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/client/flows/shared/handlePasswordSRP.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handlePasswordSRP: () => (/* binding */ handlePasswordSRP)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/cognito/utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _providers_cognito_utils_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../providers/cognito/utils/srp/getAuthenticationHelper.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getAuthenticationHelper.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../providers/cognito/utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Handles the Password SRP (Secure Remote Password) authentication flow.
 * This function can be used with both USER_SRP_AUTH and USER_AUTH flows.
 *
 * @param {Object} params - The parameters for the Password SRP authentication
 * @param {string} params.username - The username for authentication
 * @param {string} params.password - The user's password
 * @param {ClientMetadata} [params.clientMetadata] - Optional metadata to be sent with auth requests
 * @param {CognitoUserPoolConfig} params.config - Cognito User Pool configuration
 * @param {AuthTokenOrchestrator} params.tokenOrchestrator - Token orchestrator for managing auth tokens
 * @param {AuthFlowType} params.authFlow - The type of authentication flow ('USER_SRP_AUTH' or 'USER_AUTH')
 * @param {AuthFactorType} [params.preferredChallenge] - Optional preferred challenge type when using USER_AUTH flow
 *
 * @returns {Promise<RespondToAuthChallengeCommandOutput>} The authentication response
 */
async function handlePasswordSRP({ username, password, clientMetadata, config, tokenOrchestrator, authFlow, preferredChallenge, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const userPoolName = userPoolId?.split('_')[1] || '';
    const authenticationHelper = await (0,_providers_cognito_utils_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_1__.getAuthenticationHelper)(userPoolName);
    const authParameters = {
        USERNAME: username,
        SRP_A: authenticationHelper.A.toString(16),
    };
    if (authFlow === 'USER_AUTH' && preferredChallenge) {
        authParameters.PREFERRED_CHALLENGE = preferredChallenge;
    }
    const UserContextData = (0,_providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_2__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        AuthFlow: authFlow,
        AuthParameters: authParameters,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_3__.createInitiateAuthClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const resp = await initiateAuth({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.AuthAction.SignIn),
    }, jsonReq);
    const { ChallengeParameters: challengeParameters, Session: session } = resp;
    const activeUsername = challengeParameters?.USERNAME ?? username;
    (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.setActiveSignInUsername)(activeUsername);
    if (resp.ChallengeName === 'PASSWORD_VERIFIER') {
        return (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.retryOnResourceNotFoundException)(_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.handlePasswordVerifierChallenge, [
            password,
            challengeParameters,
            clientMetadata,
            session,
            authenticationHelper,
            config,
            tokenOrchestrator,
        ], activeUsername, tokenOrchestrator);
    }
    return resp;
}


//# sourceMappingURL=handlePasswordSRP.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/userAuth/handleSelectChallenge.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/client/flows/userAuth/handleSelectChallenge.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initiateSelectedChallenge: () => (/* binding */ initiateSelectedChallenge)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Handles the SELECT_CHALLENGE response for authentication.
 * Initiates the selected authentication challenge based on user choice.
 *
 * @param {Object} params - The parameters for handling the selected challenge
 * @param {string} params.username - The username for authentication
 * @param {string} params.session - The current authentication session token
 * @param {string} params.selectedChallenge - The challenge type selected by the user
 * @param {CognitoUserPoolConfig} params.config - Cognito User Pool configuration
 * @param {ClientMetadata} [params.clientMetadata] - Optional metadata to be sent with auth requests
 *
 * @returns {Promise<RespondToAuthChallengeCommandOutput>} The challenge response
 */
async function initiateSelectedChallenge({ username, session, selectedChallenge, config, clientMetadata, }) {
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_0__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_1__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: config.userPoolEndpoint,
        }),
    });
    return respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_2__.getRegionFromUserPoolId)(config.userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_3__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__.AuthAction.ConfirmSignIn),
    }, {
        ChallengeName: 'SELECT_CHALLENGE',
        ChallengeResponses: {
            USERNAME: username,
            ANSWER: selectedChallenge,
        },
        ClientId: config.userPoolClientId,
        Session: session,
        ClientMetadata: clientMetadata,
    });
}


//# sourceMappingURL=handleSelectChallenge.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPassword.mjs":
/*!************************************************************************************!*\
  !*** ../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPassword.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleSelectChallengeWithPassword: () => (/* binding */ handleSelectChallengeWithPassword)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../providers/cognito/utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../providers/cognito/utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Handles the SELECT_CHALLENGE response specifically for Password authentication.
 * This function combines the SELECT_CHALLENGE flow with standard password authentication.
 *
 * @param {string} username - The username for authentication
 * @param {string} password - The user's password
 * @param {ClientMetadata} [clientMetadata] - Optional metadata to be sent with auth requests
 * @param {CognitoUserPoolConfig} config - Cognito User Pool configuration
 * @param {string} session - The current authentication session token
 *
 * @returns {Promise<RespondToAuthChallengeCommandOutput>} The challenge response
 */
async function handleSelectChallengeWithPassword(username, password, clientMetadata, config, session) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const authParameters = {
        ANSWER: 'PASSWORD',
        USERNAME: username,
        PASSWORD: password,
    };
    const userContextData = (0,_providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
    }, {
        ChallengeName: 'SELECT_CHALLENGE',
        ChallengeResponses: authParameters,
        ClientId: userPoolClientId,
        ClientMetadata: clientMetadata,
        Session: session,
        UserContextData: userContextData,
    });
    const activeUsername = response.ChallengeParameters?.USERNAME ?? username;
    (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.setActiveSignInUsername)(activeUsername);
    return response;
}


//# sourceMappingURL=handleSelectChallengeWithPassword.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPasswordSRP.mjs":
/*!***************************************************************************************!*\
  !*** ../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPasswordSRP.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleSelectChallengeWithPasswordSRP: () => (/* binding */ handleSelectChallengeWithPasswordSRP)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _providers_cognito_utils_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../providers/cognito/utils/srp/getAuthenticationHelper.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getAuthenticationHelper.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/cognito/utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../providers/cognito/utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Handles the SELECT_CHALLENGE response specifically for Password SRP authentication.
 * This function combines the SELECT_CHALLENGE flow with Password SRP protocol.
 *
 * @param {string} username - The username for authentication
 * @param {string} password - The user's password
 * @param {ClientMetadata} [clientMetadata] - Optional metadata to be sent with auth requests
 * @param {CognitoUserPoolConfig} config - Cognito User Pool configuration
 * @param {string} session - The current authentication session token
 * @param {AuthTokenOrchestrator} tokenOrchestrator - Token orchestrator for managing auth tokens
 *
 * @returns {Promise<RespondToAuthChallengeCommandOutput>} The challenge response
 */
async function handleSelectChallengeWithPasswordSRP(username, password, clientMetadata, config, session, tokenOrchestrator) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const userPoolName = userPoolId.split('_')[1] || '';
    const authenticationHelper = await (0,_providers_cognito_utils_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_1__.getAuthenticationHelper)(userPoolName);
    const authParameters = {
        ANSWER: 'PASSWORD_SRP',
        USERNAME: username,
        SRP_A: authenticationHelper.A.toString(16),
    };
    const userContextData = (0,_providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_2__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_3__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.AuthAction.ConfirmSignIn),
    }, {
        ChallengeName: 'SELECT_CHALLENGE',
        ChallengeResponses: authParameters,
        ClientId: userPoolClientId,
        ClientMetadata: clientMetadata,
        Session: session,
        UserContextData: userContextData,
    });
    const activeUsername = response.ChallengeParameters?.USERNAME ?? username;
    (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.setActiveSignInUsername)(activeUsername);
    if (response.ChallengeName === 'PASSWORD_VERIFIER') {
        return (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.retryOnResourceNotFoundException)(_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.handlePasswordVerifierChallenge, [
            password,
            response.ChallengeParameters,
            clientMetadata,
            response.Session,
            authenticationHelper,
            config,
            tokenOrchestrator,
        ], activeUsername, tokenOrchestrator);
    }
    return response;
}


//# sourceMappingURL=handleSelectChallengeWithPasswordSRP.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/userAuth/handleUserAuthFlow.mjs":
/*!*********************************************************************!*\
  !*** ../auth/dist/esm/client/flows/userAuth/handleUserAuthFlow.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleUserAuthFlow: () => (/* binding */ handleUserAuthFlow)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../providers/cognito/utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _shared_handlePasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/handlePasswordSRP.mjs */ "../auth/dist/esm/client/flows/shared/handlePasswordSRP.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../providers/cognito/utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");


















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Handles user authentication flow with configurable challenge preferences.
 * Supports AuthFactorType challenges through the USER_AUTH flow.
 *
 * @param {HandleUserAuthFlowInput} params - Authentication flow parameters
 * @param {string} params.username - The username for authentication
 * @param {Record<string, string>} [params.clientMetadata] - Optional metadata to pass to authentication service
 * @param {CognitoUserPoolConfig} params.config - Cognito User Pool configuration
 * @param {AuthTokenOrchestrator} params.tokenOrchestrator - Manages authentication tokens and device tracking
 * @param {AuthFactorType} [params.preferredChallenge] - Optional preferred authentication method
 * @param {string} [params.password] - Required when preferredChallenge is 'PASSWORD' or 'PASSWORD_SRP'
 *
 * @returns {Promise<InitiateAuthCommandOutput>} The authentication response from Cognito
 */
async function handleUserAuthFlow({ username, clientMetadata, config, tokenOrchestrator, preferredChallenge, password, session, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const UserContextData = (0,_providers_cognito_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const authParameters = { USERNAME: username };
    if (preferredChallenge) {
        if (preferredChallenge === 'PASSWORD_SRP') {
            (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_1__.assertValidationError)(!!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthValidationErrorCode.EmptySignInPassword);
            return (0,_shared_handlePasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_3__.handlePasswordSRP)({
                username,
                password,
                clientMetadata,
                config,
                tokenOrchestrator,
                authFlow: 'USER_AUTH',
                preferredChallenge,
            });
        }
        if (preferredChallenge === 'PASSWORD') {
            (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_1__.assertValidationError)(!!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthValidationErrorCode.EmptySignInPassword);
            authParameters.PASSWORD = password;
        }
        authParameters.PREFERRED_CHALLENGE = preferredChallenge;
    }
    const jsonReq = {
        AuthFlow: 'USER_AUTH',
        AuthParameters: authParameters,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    if (session) {
        jsonReq.Session = session;
    }
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createInitiateAuthClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await initiateAuth({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.SignIn),
    }, jsonReq);
    // Set the active username immediately after successful authentication attempt
    // If a user starts a new sign-in while another sign-in is incomplete,
    // this ensures we're tracking the correct user for subsequent auth challenges.
    (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__.setActiveSignInUsername)(username);
    return response;
}


//# sourceMappingURL=handleUserAuthFlow.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/flows/userAuth/handleWebAuthnSignInResult.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/client/flows/userAuth/handleWebAuthnSignInResult.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleWebAuthnSignInResult: () => (/* binding */ handleWebAuthnSignInResult)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _providers_cognito_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../providers/cognito/tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _providers_cognito_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../providers/cognito/utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");
/* harmony import */ var _providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../providers/cognito/utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_passkey_errors_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/passkey/errors.mjs */ "../auth/dist/esm/client/utils/passkey/errors.mjs");
/* harmony import */ var _utils_passkey_getPasskey_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/passkey/getPasskey.mjs */ "../auth/dist/esm/client/utils/passkey/getPasskey.mjs");






















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
async function handleWebAuthnSignInResult(challengeParameters) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { username, signInSession, signInDetails, challengeName } = _utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_2__.signInStore.getState();
    if (challengeName !== 'WEB_AUTHN' || !username) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthError({
            name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthErrorCodes.SignInException,
            message: 'Unable to proceed due to invalid sign in state.',
        });
    }
    const { CREDENTIAL_REQUEST_OPTIONS: credentialRequestOptions } = challengeParameters;
    (0,_utils_passkey_errors_mjs__WEBPACK_IMPORTED_MODULE_5__.assertPasskeyError)(!!credentialRequestOptions, _utils_passkey_errors_mjs__WEBPACK_IMPORTED_MODULE_5__.PasskeyErrorCode.InvalidPasskeyAuthenticationOptions);
    const cred = await (0,_utils_passkey_getPasskey_mjs__WEBPACK_IMPORTED_MODULE_6__.getPasskey)(JSON.parse(credentialRequestOptions));
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_7__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_8__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: authConfig.userPoolEndpoint,
        }),
    });
    const { ChallengeName: nextChallengeName, ChallengeParameters: nextChallengeParameters, AuthenticationResult: authenticationResult, Session: nextSession, } = await respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_9__.getRegionFromUserPoolId)(authConfig.userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_10__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_11__.AuthAction.ConfirmSignIn),
    }, {
        ChallengeName: 'WEB_AUTHN',
        ChallengeResponses: {
            USERNAME: username,
            CREDENTIAL: JSON.stringify(cred),
        },
        ClientId: authConfig.userPoolClientId,
        Session: signInSession,
    });
    (0,_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_2__.setActiveSignInState)({
        signInSession: nextSession,
        username,
        challengeName: nextChallengeName,
        signInDetails,
    });
    if (authenticationResult) {
        await (0,_providers_cognito_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_12__.cacheCognitoTokens)({
            ...authenticationResult,
            username,
            NewDeviceMetadata: await (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__.getNewDeviceMetadata)({
                userPoolId: authConfig.userPoolId,
                userPoolEndpoint: authConfig.userPoolEndpoint,
                newDeviceMetadata: authenticationResult.NewDeviceMetadata,
                accessToken: authenticationResult.AccessToken,
            }),
            signInDetails,
        });
        (0,_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_2__.cleanActiveSignInState)();
        await (0,_providers_cognito_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_14__.dispatchSignedInHubEvent)();
        return {
            isSignedIn: true,
            nextStep: { signInStep: 'DONE' },
        };
    }
    if (nextChallengeName === 'WEB_AUTHN') {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthError({
            name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthErrorCodes.SignInException,
            message: 'Sequential WEB_AUTHN challenges returned from underlying service cannot be handled.',
        });
    }
    return (0,_providers_cognito_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__.getSignInResult)({
        challengeName: nextChallengeName,
        challengeParameters: nextChallengeParameters,
    });
}


//# sourceMappingURL=handleWebAuthnSignInResult.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/errors.mjs":
/*!********************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/errors.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PasskeyError: () => (/* binding */ PasskeyError),
/* harmony export */   PasskeyErrorCode: () => (/* binding */ PasskeyErrorCode),
/* harmony export */   assertPasskeyError: () => (/* binding */ assertPasskeyError),
/* harmony export */   handlePasskeyAuthenticationError: () => (/* binding */ handlePasskeyAuthenticationError),
/* harmony export */   handlePasskeyRegistrationError: () => (/* binding */ handlePasskeyRegistrationError)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/AmplifyError.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/createAssertionFunction.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/types/errors.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class PasskeyError extends _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyError {
    constructor(params) {
        super(params);
        // Hack for making the custom error class work when transpiled to es5
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = PasskeyError;
        Object.setPrototypeOf(this, PasskeyError.prototype);
    }
}
var PasskeyErrorCode;
(function (PasskeyErrorCode) {
    // not supported
    PasskeyErrorCode["PasskeyNotSupported"] = "PasskeyNotSupported";
    // duplicate passkey
    PasskeyErrorCode["PasskeyAlreadyExists"] = "PasskeyAlreadyExists";
    // misconfigurations
    PasskeyErrorCode["InvalidPasskeyRegistrationOptions"] = "InvalidPasskeyRegistrationOptions";
    PasskeyErrorCode["InvalidPasskeyAuthenticationOptions"] = "InvalidPasskeyAuthenticationOptions";
    PasskeyErrorCode["RelyingPartyMismatch"] = "RelyingPartyMismatch";
    // failed credential creation / retrieval
    PasskeyErrorCode["PasskeyRegistrationFailed"] = "PasskeyRegistrationFailed";
    PasskeyErrorCode["PasskeyRetrievalFailed"] = "PasskeyRetrievalFailed";
    // cancel / aborts
    PasskeyErrorCode["PasskeyRegistrationCanceled"] = "PasskeyRegistrationCanceled";
    PasskeyErrorCode["PasskeyAuthenticationCanceled"] = "PasskeyAuthenticationCanceled";
    PasskeyErrorCode["PasskeyOperationAborted"] = "PasskeyOperationAborted";
})(PasskeyErrorCode || (PasskeyErrorCode = {}));
const notSupportedRecoverySuggestion = 'Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.';
const abortOrCancelRecoverySuggestion = 'User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.';
const misconfigurationRecoverySuggestion = 'Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.';
const passkeyErrorMap = {
    [PasskeyErrorCode.PasskeyNotSupported]: {
        message: 'Passkeys may not be supported on this device.',
        recoverySuggestion: notSupportedRecoverySuggestion,
    },
    [PasskeyErrorCode.InvalidPasskeyRegistrationOptions]: {
        message: 'Invalid passkey registration options.',
        recoverySuggestion: misconfigurationRecoverySuggestion,
    },
    [PasskeyErrorCode.InvalidPasskeyAuthenticationOptions]: {
        message: 'Invalid passkey authentication options.',
        recoverySuggestion: misconfigurationRecoverySuggestion,
    },
    [PasskeyErrorCode.PasskeyRegistrationFailed]: {
        message: 'Device failed to create passkey.',
        recoverySuggestion: notSupportedRecoverySuggestion,
    },
    [PasskeyErrorCode.PasskeyRetrievalFailed]: {
        message: 'Device failed to retrieve passkey.',
        recoverySuggestion: 'Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP.',
    },
    [PasskeyErrorCode.PasskeyAlreadyExists]: {
        message: 'Passkey already exists in authenticator.',
        recoverySuggestion: 'Proceed with existing passkey or try again after deleting the credential.',
    },
    [PasskeyErrorCode.PasskeyRegistrationCanceled]: {
        message: 'Passkey registration ceremony has been canceled.',
        recoverySuggestion: abortOrCancelRecoverySuggestion,
    },
    [PasskeyErrorCode.PasskeyAuthenticationCanceled]: {
        message: 'Passkey authentication ceremony has been canceled.',
        recoverySuggestion: abortOrCancelRecoverySuggestion,
    },
    [PasskeyErrorCode.PasskeyOperationAborted]: {
        message: 'Passkey operation has been aborted.',
        recoverySuggestion: abortOrCancelRecoverySuggestion,
    },
    [PasskeyErrorCode.RelyingPartyMismatch]: {
        message: 'Relying party does not match current domain.',
        recoverySuggestion: 'Ensure relying party identifier matches current domain.',
    },
};
const assertPasskeyError = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.createAssertionFunction)(passkeyErrorMap, PasskeyError);
/**
 * Handle Passkey Authentication Errors
 * https://w3c.github.io/webauthn/#sctn-get-request-exceptions
 *
 * @param err unknown
 * @returns PasskeyError
 */
const handlePasskeyAuthenticationError = (err) => {
    if (err instanceof PasskeyError) {
        return err;
    }
    if (err instanceof Error) {
        if (err.name === 'NotAllowedError') {
            const { message, recoverySuggestion } = passkeyErrorMap[PasskeyErrorCode.PasskeyAuthenticationCanceled];
            return new PasskeyError({
                name: PasskeyErrorCode.PasskeyAuthenticationCanceled,
                message,
                recoverySuggestion,
                underlyingError: err,
            });
        }
    }
    return handlePasskeyError(err);
};
/**
 * Handle Passkey Registration Errors
 * https://w3c.github.io/webauthn/#sctn-create-request-exceptions
 *
 * @param err unknown
 * @returns PasskeyError
 */
const handlePasskeyRegistrationError = (err) => {
    if (err instanceof PasskeyError) {
        return err;
    }
    if (err instanceof Error) {
        // Duplicate Passkey
        if (err.name === 'InvalidStateError') {
            const { message, recoverySuggestion } = passkeyErrorMap[PasskeyErrorCode.PasskeyAlreadyExists];
            return new PasskeyError({
                name: PasskeyErrorCode.PasskeyAlreadyExists,
                message,
                recoverySuggestion,
                underlyingError: err,
            });
        }
        // User Cancels Ceremony / Generic Catch All
        if (err.name === 'NotAllowedError') {
            const { message, recoverySuggestion } = passkeyErrorMap[PasskeyErrorCode.PasskeyRegistrationCanceled];
            return new PasskeyError({
                name: PasskeyErrorCode.PasskeyRegistrationCanceled,
                message,
                recoverySuggestion,
                underlyingError: err,
            });
        }
    }
    return handlePasskeyError(err);
};
/**
 * Handles Overlapping Passkey Errors Between Registration & Authentication
 * https://w3c.github.io/webauthn/#sctn-create-request-exceptions
 * https://w3c.github.io/webauthn/#sctn-get-request-exceptions
 *
 * @param err unknown
 * @returns PasskeyError
 */
const handlePasskeyError = (err) => {
    if (err instanceof Error) {
        // Passkey Operation Aborted
        if (err.name === 'AbortError') {
            const { message, recoverySuggestion } = passkeyErrorMap[PasskeyErrorCode.PasskeyOperationAborted];
            return new PasskeyError({
                name: PasskeyErrorCode.PasskeyOperationAborted,
                message,
                recoverySuggestion,
                underlyingError: err,
            });
        }
        // Relying Party / Domain Mismatch
        if (err.name === 'SecurityError') {
            const { message, recoverySuggestion } = passkeyErrorMap[PasskeyErrorCode.RelyingPartyMismatch];
            return new PasskeyError({
                name: PasskeyErrorCode.RelyingPartyMismatch,
                message,
                recoverySuggestion,
                underlyingError: err,
            });
        }
    }
    return new PasskeyError({
        name: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyErrorCode.Unknown,
        message: 'An unknown error has occurred.',
        underlyingError: err,
    });
};


//# sourceMappingURL=errors.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/getIsPasskeySupported.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/getIsPasskeySupported.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getIsPasskeySupported: () => (/* binding */ getIsPasskeySupported)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/isBrowser.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Determines if passkey is supported in current context
 * Will return false if executed in non-secure context
 * @returns boolean
 */
const getIsPasskeySupported = () => {
    return ((0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() &&
        window.isSecureContext &&
        'credentials' in navigator &&
        typeof window.PublicKeyCredential === 'function');
};


//# sourceMappingURL=getIsPasskeySupported.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/getPasskey.mjs":
/*!************************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/getPasskey.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPasskey: () => (/* binding */ getPasskey)
/* harmony export */ });
/* harmony import */ var _errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.mjs */ "../auth/dist/esm/client/utils/passkey/errors.mjs");
/* harmony import */ var _getIsPasskeySupported_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getIsPasskeySupported.mjs */ "../auth/dist/esm/client/utils/passkey/getIsPasskeySupported.mjs");
/* harmony import */ var _serde_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serde.mjs */ "../auth/dist/esm/client/utils/passkey/serde.mjs");
/* harmony import */ var _types_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/index.mjs */ "../auth/dist/esm/client/utils/passkey/types/index.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getPasskey = async (input) => {
    try {
        const isPasskeySupported = (0,_getIsPasskeySupported_mjs__WEBPACK_IMPORTED_MODULE_0__.getIsPasskeySupported)();
        (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.assertPasskeyError)(isPasskeySupported, _errors_mjs__WEBPACK_IMPORTED_MODULE_1__.PasskeyErrorCode.PasskeyNotSupported);
        const passkeyGetOptions = (0,_serde_mjs__WEBPACK_IMPORTED_MODULE_2__.deserializeJsonToPkcGetOptions)(input);
        const credential = await navigator.credentials.get({
            publicKey: passkeyGetOptions,
        });
        (0,_types_index_mjs__WEBPACK_IMPORTED_MODULE_3__.assertCredentialIsPkcWithAuthenticatorAssertionResponse)(credential);
        return (0,_serde_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePkcWithAssertionToJson)(credential);
    }
    catch (err) {
        throw (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.handlePasskeyAuthenticationError)(err);
    }
};


//# sourceMappingURL=getPasskey.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/registerPasskey.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/registerPasskey.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   registerPasskey: () => (/* binding */ registerPasskey)
/* harmony export */ });
/* harmony import */ var _types_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/index.mjs */ "../auth/dist/esm/client/utils/passkey/types/index.mjs");
/* harmony import */ var _serde_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serde.mjs */ "../auth/dist/esm/client/utils/passkey/serde.mjs");
/* harmony import */ var _errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.mjs */ "../auth/dist/esm/client/utils/passkey/errors.mjs");
/* harmony import */ var _getIsPasskeySupported_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getIsPasskeySupported.mjs */ "../auth/dist/esm/client/utils/passkey/getIsPasskeySupported.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Registers a new passkey for user
 * @param input - PasskeyCreateOptionsJson
 * @returns serialized PasskeyCreateResult
 */
const registerPasskey = async (input) => {
    try {
        const isPasskeySupported = (0,_getIsPasskeySupported_mjs__WEBPACK_IMPORTED_MODULE_0__.getIsPasskeySupported)();
        (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.assertPasskeyError)(isPasskeySupported, _errors_mjs__WEBPACK_IMPORTED_MODULE_1__.PasskeyErrorCode.PasskeyNotSupported);
        const passkeyCreationOptions = (0,_serde_mjs__WEBPACK_IMPORTED_MODULE_2__.deserializeJsonToPkcCreationOptions)(input);
        const credential = await navigator.credentials.create({
            publicKey: passkeyCreationOptions,
        });
        (0,_types_index_mjs__WEBPACK_IMPORTED_MODULE_3__.assertCredentialIsPkcWithAuthenticatorAttestationResponse)(credential);
        return (0,_serde_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePkcWithAttestationToJson)(credential);
    }
    catch (err) {
        throw (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.handlePasskeyRegistrationError)(err);
    }
};


//# sourceMappingURL=registerPasskey.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/serde.mjs":
/*!*******************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/serde.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deserializeJsonToPkcCreationOptions: () => (/* binding */ deserializeJsonToPkcCreationOptions),
/* harmony export */   deserializeJsonToPkcGetOptions: () => (/* binding */ deserializeJsonToPkcGetOptions),
/* harmony export */   serializePkcWithAssertionToJson: () => (/* binding */ serializePkcWithAssertionToJson),
/* harmony export */   serializePkcWithAttestationToJson: () => (/* binding */ serializePkcWithAttestationToJson)
/* harmony export */ });
/* harmony import */ var _foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/convert/base64url/convertArrayBufferToBase64Url.mjs */ "../auth/dist/esm/foundation/convert/base64url/convertArrayBufferToBase64Url.mjs");
/* harmony import */ var _foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../foundation/convert/base64url/convertBase64UrlToArrayBuffer.mjs */ "../auth/dist/esm/foundation/convert/base64url/convertBase64UrlToArrayBuffer.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Deserializes Public Key Credential Creation Options JSON
 * @param input PasskeyCreateOptionsJson
 * @returns PublicKeyCredentialCreationOptions
 */
const deserializeJsonToPkcCreationOptions = (input) => {
    const userIdBuffer = (0,_foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.convertBase64UrlToArrayBuffer)(input.user.id);
    const challengeBuffer = (0,_foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.convertBase64UrlToArrayBuffer)(input.challenge);
    const excludeCredentialsWithBuffer = (input.excludeCredentials || []).map(excludeCred => ({
        ...excludeCred,
        id: (0,_foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.convertBase64UrlToArrayBuffer)(excludeCred.id),
    }));
    return {
        ...input,
        excludeCredentials: excludeCredentialsWithBuffer,
        challenge: challengeBuffer,
        user: {
            ...input.user,
            id: userIdBuffer,
        },
    };
};
/**
 * Serializes a Public Key Credential With Attestation to JSON
 * @param input PasskeyCreateResult
 * @returns PasskeyCreateResultJson
 */
const serializePkcWithAttestationToJson = (input) => {
    const response = {
        clientDataJSON: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.clientDataJSON),
        attestationObject: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.attestationObject),
        transports: input.response.getTransports(),
        publicKeyAlgorithm: input.response.getPublicKeyAlgorithm(),
        authenticatorData: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.getAuthenticatorData()),
    };
    const publicKey = input.response.getPublicKey();
    if (publicKey) {
        response.publicKey = (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(publicKey);
    }
    const resultJson = {
        type: input.type,
        id: input.id,
        rawId: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.rawId),
        clientExtensionResults: input.getClientExtensionResults(),
        response,
    };
    if (input.authenticatorAttachment) {
        resultJson.authenticatorAttachment = input.authenticatorAttachment;
    }
    return resultJson;
};
/**
 * Deserializes Public Key Credential Get Options JSON
 * @param input PasskeyGetOptionsJson
 * @returns PublicKeyCredentialRequestOptions
 */
const deserializeJsonToPkcGetOptions = (input) => {
    const challengeBuffer = (0,_foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.convertBase64UrlToArrayBuffer)(input.challenge);
    const allowedCredentialsWithBuffer = (input.allowCredentials || []).map(allowedCred => ({
        ...allowedCred,
        id: (0,_foundation_convert_base64url_convertBase64UrlToArrayBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.convertBase64UrlToArrayBuffer)(allowedCred.id),
    }));
    return {
        ...input,
        challenge: challengeBuffer,
        allowCredentials: allowedCredentialsWithBuffer,
    };
};
/**
 * Serializes a Public Key Credential With Attestation to JSON
 * @param input PasskeyGetResult
 * @returns PasskeyGetResultJson
 */
const serializePkcWithAssertionToJson = (input) => {
    const response = {
        clientDataJSON: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.clientDataJSON),
        authenticatorData: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.authenticatorData),
        signature: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.signature),
    };
    if (input.response.userHandle) {
        response.userHandle = (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.response.userHandle);
    }
    const resultJson = {
        id: input.id,
        rawId: (0,_foundation_convert_base64url_convertArrayBufferToBase64Url_mjs__WEBPACK_IMPORTED_MODULE_1__.convertArrayBufferToBase64Url)(input.rawId),
        type: input.type,
        clientExtensionResults: input.getClientExtensionResults(),
        response,
    };
    if (input.authenticatorAttachment) {
        resultJson.authenticatorAttachment = input.authenticatorAttachment;
    }
    return resultJson;
};


//# sourceMappingURL=serde.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/types/index.mjs":
/*!*************************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/types/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertCredentialIsPkcWithAuthenticatorAssertionResponse: () => (/* binding */ assertCredentialIsPkcWithAuthenticatorAssertionResponse),
/* harmony export */   assertCredentialIsPkcWithAuthenticatorAttestationResponse: () => (/* binding */ assertCredentialIsPkcWithAuthenticatorAttestationResponse),
/* harmony export */   assertValidCredentialCreationOptions: () => (/* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidCredentialCreationOptions)
/* harmony export */ });
/* harmony import */ var _errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.mjs */ "../auth/dist/esm/client/utils/passkey/errors.mjs");
/* harmony import */ var _shared_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shared.mjs */ "../auth/dist/esm/client/utils/passkey/types/shared.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertCredentialIsPkcWithAuthenticatorAttestationResponse(credential) {
    (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.assertPasskeyError)(credential &&
        credential instanceof PublicKeyCredential &&
        credential.response instanceof AuthenticatorAttestationResponse, _errors_mjs__WEBPACK_IMPORTED_MODULE_1__.PasskeyErrorCode.PasskeyRegistrationFailed);
}
function assertCredentialIsPkcWithAuthenticatorAssertionResponse(credential) {
    (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.assertPasskeyError)(credential &&
        credential instanceof PublicKeyCredential &&
        credential.response instanceof AuthenticatorAssertionResponse, _errors_mjs__WEBPACK_IMPORTED_MODULE_1__.PasskeyErrorCode.PasskeyRetrievalFailed);
}


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/passkey/types/shared.mjs":
/*!**************************************************************!*\
  !*** ../auth/dist/esm/client/utils/passkey/types/shared.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertValidCredentialCreationOptions: () => (/* binding */ assertValidCredentialCreationOptions)
/* harmony export */ });
/* harmony import */ var _errors_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.mjs */ "../auth/dist/esm/client/utils/passkey/errors.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertValidCredentialCreationOptions(credentialCreationOptions) {
    (0,_errors_mjs__WEBPACK_IMPORTED_MODULE_0__.assertPasskeyError)([
        !!credentialCreationOptions,
        !!credentialCreationOptions?.challenge,
        !!credentialCreationOptions?.user,
        !!credentialCreationOptions?.rp,
        !!credentialCreationOptions?.pubKeyCredParams,
    ].every(Boolean), _errors_mjs__WEBPACK_IMPORTED_MODULE_0__.PasskeyErrorCode.InvalidPasskeyRegistrationOptions);
}


//# sourceMappingURL=shared.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/store/autoSignInStore.mjs":
/*!***************************************************************!*\
  !*** ../auth/dist/esm/client/utils/store/autoSignInStore.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoSignInStore: () => (/* binding */ autoSignInStore)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function defaultState() {
    return {
        active: false,
    };
}
const autoSignInReducer = (state, action) => {
    switch (action.type) {
        case 'SET_USERNAME':
            return {
                ...state,
                username: action.value,
            };
        case 'SET_SESSION':
            return {
                ...state,
                session: action.value,
            };
        case 'START':
            return {
                ...state,
                active: true,
            };
        case 'RESET':
            return defaultState();
        default:
            return state;
    }
};
const createAutoSignInStore = (reducer) => {
    let currentState = reducer(defaultState(), { type: 'RESET' });
    return {
        getState: () => currentState,
        dispatch: action => {
            currentState = reducer(currentState, action);
        },
    };
};
const autoSignInStore = createAutoSignInStore(autoSignInReducer);


//# sourceMappingURL=autoSignInStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/client/utils/store/signInStore.mjs":
/*!***********************************************************!*\
  !*** ../auth/dist/esm/client/utils/store/signInStore.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cleanActiveSignInState: () => (/* binding */ cleanActiveSignInState),
/* harmony export */   setActiveSignInState: () => (/* binding */ setActiveSignInState),
/* harmony export */   signInStore: () => (/* binding */ signInStore)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const signInReducer = (state, action) => {
    switch (action.type) {
        case 'SET_SIGN_IN_SESSION':
            return {
                ...state,
                signInSession: action.value,
            };
        case 'SET_SIGN_IN_STATE':
            return {
                ...action.value,
            };
        case 'SET_CHALLENGE_NAME':
            return {
                ...state,
                challengeName: action.value,
            };
        case 'SET_USERNAME':
            return {
                ...state,
                username: action.value,
            };
        case 'SET_INITIAL_STATE':
            return defaultState();
        default:
            return state;
    }
};
function defaultState() {
    return {
        username: undefined,
        challengeName: undefined,
        signInSession: undefined,
    };
}
const createStore = reducer => {
    let currentState = reducer(defaultState(), { type: 'SET_INITIAL_STATE' });
    return {
        getState: () => currentState,
        dispatch: action => {
            currentState = reducer(currentState, action);
        },
    };
};
const signInStore = createStore(signInReducer);
function setActiveSignInState(state) {
    signInStore.dispatch({
        type: 'SET_SIGN_IN_STATE',
        value: state,
    });
}
function cleanActiveSignInState() {
    signInStore.dispatch({ type: 'SET_INITIAL_STATE' });
}


//# sourceMappingURL=signInStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/common/AuthErrorStrings.mjs":
/*!****************************************************!*\
  !*** ../auth/dist/esm/common/AuthErrorStrings.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthErrorCodes: () => (/* binding */ AuthErrorCodes),
/* harmony export */   AuthErrorStrings: () => (/* binding */ AuthErrorStrings),
/* harmony export */   validationErrorMap: () => (/* binding */ validationErrorMap)
/* harmony export */ });
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const validationErrorMap = {
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyChallengeResponse]: {
        message: 'challengeResponse is required to confirmSignIn',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmResetPasswordUsername]: {
        message: 'username is required to confirmResetPassword',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmSignUpCode]: {
        message: 'code is required to confirmSignUp',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmSignUpUsername]: {
        message: 'username is required to confirmSignUp',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode]: {
        message: 'confirmationCode is required to confirmResetPassword',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword]: {
        message: 'newPassword is required to confirmResetPassword',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyResendSignUpCodeUsername]: {
        message: 'username is required to confirmSignUp',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyResetPasswordUsername]: {
        message: 'username is required to resetPassword',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptySignInPassword]: {
        message: 'password is required to signIn',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptySignInUsername]: {
        message: 'username is required to signIn',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptySignUpPassword]: {
        message: 'password is required to signUp',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptySignUpUsername]: {
        message: 'username is required to signUp',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.CustomAuthSignInPassword]: {
        message: 'A password is not needed when signing in with CUSTOM_WITHOUT_SRP',
        recoverySuggestion: 'Do not include a password in your signIn call.',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.IncorrectMFAMethod]: {
        message: 'Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL',
        recoverySuggestion: 'Try to pass SMS, TOTP, or EMAIL as the challengeResponse',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyVerifyTOTPSetupCode]: {
        message: 'code is required to verifyTotpSetup',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyUpdatePassword]: {
        message: 'oldPassword and newPassword are required to changePassword',
    },
    [_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthValidationErrorCode.EmptyConfirmUserAttributeCode]: {
        message: 'confirmation code is required to confirmUserAttribute',
    },
};
// TODO: delete this code when the Auth class is removed.
var AuthErrorStrings;
(function (AuthErrorStrings) {
    AuthErrorStrings["DEFAULT_MSG"] = "Authentication Error";
    AuthErrorStrings["EMPTY_EMAIL"] = "Email cannot be empty";
    AuthErrorStrings["EMPTY_PHONE"] = "Phone number cannot be empty";
    AuthErrorStrings["EMPTY_USERNAME"] = "Username cannot be empty";
    AuthErrorStrings["INVALID_USERNAME"] = "The username should either be a string or one of the sign in types";
    AuthErrorStrings["EMPTY_PASSWORD"] = "Password cannot be empty";
    AuthErrorStrings["EMPTY_CODE"] = "Confirmation code cannot be empty";
    AuthErrorStrings["SIGN_UP_ERROR"] = "Error creating account";
    AuthErrorStrings["NO_MFA"] = "No valid MFA method provided";
    AuthErrorStrings["INVALID_MFA"] = "Invalid MFA type";
    AuthErrorStrings["EMPTY_CHALLENGE"] = "Challenge response cannot be empty";
    AuthErrorStrings["NO_USER_SESSION"] = "Failed to get the session because the user is empty";
    AuthErrorStrings["NETWORK_ERROR"] = "Network Error";
    AuthErrorStrings["DEVICE_CONFIG"] = "Device tracking has not been configured in this User Pool";
    AuthErrorStrings["AUTOSIGNIN_ERROR"] = "Please use your credentials to sign in";
    AuthErrorStrings["OAUTH_ERROR"] = "Couldn't finish OAuth flow, check your User Pool HostedUI settings";
})(AuthErrorStrings || (AuthErrorStrings = {}));
var AuthErrorCodes;
(function (AuthErrorCodes) {
    AuthErrorCodes["SignInException"] = "SignInException";
    AuthErrorCodes["OAuthSignInError"] = "OAuthSignInException";
})(AuthErrorCodes || (AuthErrorCodes = {}));


//# sourceMappingURL=AuthErrorStrings.mjs.map


/***/ }),

/***/ "../auth/dist/esm/errors/AuthError.mjs":
/*!*********************************************!*\
  !*** ../auth/dist/esm/errors/AuthError.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthError: () => (/* binding */ AuthError)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/AmplifyError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class AuthError extends _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyError {
    constructor(params) {
        super(params);
        // Hack for making the custom error class work when transpiled to es5
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = AuthError;
        Object.setPrototypeOf(this, AuthError.prototype);
    }
}


//# sourceMappingURL=AuthError.mjs.map


/***/ }),

/***/ "../auth/dist/esm/errors/constants.mjs":
/*!*********************************************!*\
  !*** ../auth/dist/esm/errors/constants.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AUTO_SIGN_IN_EXCEPTION: () => (/* binding */ AUTO_SIGN_IN_EXCEPTION),
/* harmony export */   DEVICE_METADATA_NOT_FOUND_EXCEPTION: () => (/* binding */ DEVICE_METADATA_NOT_FOUND_EXCEPTION),
/* harmony export */   INVALID_APP_SCHEME_EXCEPTION: () => (/* binding */ INVALID_APP_SCHEME_EXCEPTION),
/* harmony export */   INVALID_ORIGIN_EXCEPTION: () => (/* binding */ INVALID_ORIGIN_EXCEPTION),
/* harmony export */   INVALID_PREFERRED_REDIRECT_EXCEPTION: () => (/* binding */ INVALID_PREFERRED_REDIRECT_EXCEPTION),
/* harmony export */   INVALID_REDIRECT_EXCEPTION: () => (/* binding */ INVALID_REDIRECT_EXCEPTION),
/* harmony export */   OAUTH_SIGNOUT_EXCEPTION: () => (/* binding */ OAUTH_SIGNOUT_EXCEPTION),
/* harmony export */   TOKEN_REFRESH_EXCEPTION: () => (/* binding */ TOKEN_REFRESH_EXCEPTION),
/* harmony export */   UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION: () => (/* binding */ UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION),
/* harmony export */   USER_ALREADY_AUTHENTICATED_EXCEPTION: () => (/* binding */ USER_ALREADY_AUTHENTICATED_EXCEPTION),
/* harmony export */   USER_UNAUTHENTICATED_EXCEPTION: () => (/* binding */ USER_UNAUTHENTICATED_EXCEPTION),
/* harmony export */   invalidAppSchemeException: () => (/* binding */ invalidAppSchemeException),
/* harmony export */   invalidOriginException: () => (/* binding */ invalidOriginException),
/* harmony export */   invalidPreferredRedirectUrlException: () => (/* binding */ invalidPreferredRedirectUrlException),
/* harmony export */   invalidRedirectException: () => (/* binding */ invalidRedirectException)
/* harmony export */ });
/* harmony import */ var _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const USER_UNAUTHENTICATED_EXCEPTION = 'UserUnAuthenticatedException';
const USER_ALREADY_AUTHENTICATED_EXCEPTION = 'UserAlreadyAuthenticatedException';
const DEVICE_METADATA_NOT_FOUND_EXCEPTION = 'DeviceMetadataNotFoundException';
const AUTO_SIGN_IN_EXCEPTION = 'AutoSignInException';
const INVALID_REDIRECT_EXCEPTION = 'InvalidRedirectException';
const INVALID_APP_SCHEME_EXCEPTION = 'InvalidAppSchemeException';
const INVALID_PREFERRED_REDIRECT_EXCEPTION = 'InvalidPreferredRedirectUrlException';
const invalidRedirectException = new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: INVALID_REDIRECT_EXCEPTION,
    message: 'signInRedirect or signOutRedirect had an invalid format or was not found.',
    recoverySuggestion: 'Please make sure the signIn/Out redirect in your oauth config is valid.',
});
const invalidAppSchemeException = new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: INVALID_APP_SCHEME_EXCEPTION,
    message: 'A valid non-http app scheme was not found in the config.',
    recoverySuggestion: 'Please make sure a valid custom app scheme is present in the config.',
});
const invalidPreferredRedirectUrlException = new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: INVALID_PREFERRED_REDIRECT_EXCEPTION,
    message: 'The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.',
    recoverySuggestion: 'Please make sure a matching preferredRedirectUrl is provided.',
});
const INVALID_ORIGIN_EXCEPTION = 'InvalidOriginException';
const invalidOriginException = new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: INVALID_ORIGIN_EXCEPTION,
    message: 'redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin',
    recoverySuggestion: 'Please call signInWithRedirect from the same origin.',
});
const OAUTH_SIGNOUT_EXCEPTION = 'OAuthSignOutException';
const TOKEN_REFRESH_EXCEPTION = 'TokenRefreshException';
const UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION = 'UnexpectedSignInInterruptionException';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../auth/dist/esm/errors/types/validation.mjs":
/*!****************************************************!*\
  !*** ../auth/dist/esm/errors/types/validation.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthValidationErrorCode: () => (/* binding */ AuthValidationErrorCode)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var AuthValidationErrorCode;
(function (AuthValidationErrorCode) {
    AuthValidationErrorCode["EmptySignInUsername"] = "EmptySignInUsername";
    AuthValidationErrorCode["EmptySignInPassword"] = "EmptySignInPassword";
    AuthValidationErrorCode["CustomAuthSignInPassword"] = "CustomAuthSignInPassword";
    AuthValidationErrorCode["EmptySignUpUsername"] = "EmptySignUpUsername";
    AuthValidationErrorCode["EmptySignUpPassword"] = "EmptySignUpPassword";
    AuthValidationErrorCode["EmptyConfirmSignUpUsername"] = "EmptyConfirmSignUpUsername";
    AuthValidationErrorCode["EmptyConfirmSignUpCode"] = "EmptyConfirmSignUpCode";
    AuthValidationErrorCode["EmptyResendSignUpCodeUsername"] = "EmptyresendSignUpCodeUsername";
    AuthValidationErrorCode["EmptyChallengeResponse"] = "EmptyChallengeResponse";
    AuthValidationErrorCode["EmptyConfirmResetPasswordUsername"] = "EmptyConfirmResetPasswordUsername";
    AuthValidationErrorCode["EmptyConfirmResetPasswordNewPassword"] = "EmptyConfirmResetPasswordNewPassword";
    AuthValidationErrorCode["EmptyConfirmResetPasswordConfirmationCode"] = "EmptyConfirmResetPasswordConfirmationCode";
    AuthValidationErrorCode["EmptyResetPasswordUsername"] = "EmptyResetPasswordUsername";
    AuthValidationErrorCode["EmptyVerifyTOTPSetupCode"] = "EmptyVerifyTOTPSetupCode";
    AuthValidationErrorCode["EmptyConfirmUserAttributeCode"] = "EmptyConfirmUserAttributeCode";
    AuthValidationErrorCode["IncorrectMFAMethod"] = "IncorrectMFAMethod";
    AuthValidationErrorCode["EmptyUpdatePassword"] = "EmptyUpdatePassword";
})(AuthValidationErrorCode || (AuthValidationErrorCode = {}));


//# sourceMappingURL=validation.mjs.map


/***/ }),

/***/ "../auth/dist/esm/errors/utils/assertServiceError.mjs":
/*!************************************************************!*\
  !*** ../auth/dist/esm/errors/utils/assertServiceError.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertServiceError: () => (/* binding */ assertServiceError)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertServiceError(error) {
    if (!error ||
        error.name === 'Error' ||
        error instanceof TypeError) {
        throw new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.AmplifyErrorCode.Unknown,
            message: 'An unknown error has occurred.',
            underlyingError: error,
        });
    }
}


//# sourceMappingURL=assertServiceError.mjs.map


/***/ }),

/***/ "../auth/dist/esm/errors/utils/assertValidationError.mjs":
/*!***************************************************************!*\
  !*** ../auth/dist/esm/errors/utils/assertValidationError.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertValidationError: () => (/* binding */ assertValidationError)
/* harmony export */ });
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertValidationError(assertion, name) {
    const { message, recoverySuggestion } = _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_0__.validationErrorMap[name];
    if (!assertion) {
        throw new _AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthError({ name, message, recoverySuggestion });
    }
}


//# sourceMappingURL=assertValidationError.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/apis/deleteWebAuthnCredential.mjs":
/*!*********************************************************************!*\
  !*** ../auth/dist/esm/foundation/apis/deleteWebAuthnCredential.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteWebAuthnCredential: () => (/* binding */ deleteWebAuthnCredential)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../providers/cognito/utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _factories_serviceClients_cognitoIdentityProvider_createDeleteWebAuthnCredentialClient_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../factories/serviceClients/cognitoIdentityProvider/createDeleteWebAuthnCredentialClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteWebAuthnCredentialClient.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
async function deleteWebAuthnCredential(amplify, input) {
    const authConfig = amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await amplify.Auth.fetchAuthSession();
    (0,_providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__.assertAuthTokens)(tokens);
    const deleteWebAuthnCredentialResult = (0,_factories_serviceClients_cognitoIdentityProvider_createDeleteWebAuthnCredentialClient_mjs__WEBPACK_IMPORTED_MODULE_2__.createDeleteWebAuthnCredentialClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_3__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await deleteWebAuthnCredentialResult({
        region: (0,_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_5__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_6__.AuthAction.DeleteWebAuthnCredential),
    }, {
        AccessToken: tokens.accessToken.toString(),
        CredentialId: input.credentialId,
    });
}


//# sourceMappingURL=deleteWebAuthnCredential.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/apis/listWebAuthnCredentials.mjs":
/*!********************************************************************!*\
  !*** ../auth/dist/esm/foundation/apis/listWebAuthnCredentials.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listWebAuthnCredentials: () => (/* binding */ listWebAuthnCredentials)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../providers/cognito/utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _factories_serviceClients_cognitoIdentityProvider_createListWebAuthnCredentialsClient_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../factories/serviceClients/cognitoIdentityProvider/createListWebAuthnCredentialsClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListWebAuthnCredentialsClient.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
async function listWebAuthnCredentials(amplify, input) {
    const authConfig = amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await amplify.Auth.fetchAuthSession();
    (0,_providers_cognito_utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__.assertAuthTokens)(tokens);
    const listWebAuthnCredentialsResult = (0,_factories_serviceClients_cognitoIdentityProvider_createListWebAuthnCredentialsClient_mjs__WEBPACK_IMPORTED_MODULE_2__.createListWebAuthnCredentialsClient)({
        endpointResolver: (0,_providers_cognito_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_3__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { Credentials: commandCredentials = [], NextToken: nextToken } = await listWebAuthnCredentialsResult({
        region: (0,_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_5__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_6__.AuthAction.ListWebAuthnCredentials),
    }, {
        AccessToken: tokens.accessToken.toString(),
        MaxResults: input?.pageSize,
        NextToken: input?.nextToken,
    });
    const credentials = commandCredentials.map(item => ({
        credentialId: item.CredentialId,
        friendlyCredentialName: item.FriendlyCredentialName,
        relyingPartyId: item.RelyingPartyId,
        authenticatorAttachment: item.AuthenticatorAttachment,
        authenticatorTransports: item.AuthenticatorTransports,
        createdAt: item.CreatedAt ? new Date(item.CreatedAt * 1000) : undefined,
    }));
    return {
        credentials,
        nextToken,
    };
}


//# sourceMappingURL=listWebAuthnCredentials.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/cognitoUserPoolEndpointResolver.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/foundation/cognitoUserPoolEndpointResolver.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoUserPoolEndpointResolver: () => (/* binding */ cognitoUserPoolEndpointResolver)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/endpoints/getDnsSuffix.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/constants.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const cognitoUserPoolEndpointResolver = ({ region, }) => ({
    url: new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(`https://${_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.COGNITO_IDP_SERVICE_NAME}.${region}.${(0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_2__.getDnsSuffix)(region)}`),
});


//# sourceMappingURL=cognitoUserPoolEndpointResolver.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/constants.mjs":
/*!*************************************************!*\
  !*** ../auth/dist/esm/foundation/constants.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   COGNITO_IDP_SERVICE_NAME: () => (/* binding */ COGNITO_IDP_SERVICE_NAME)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * The service name used to sign requests if the API requires authentication.
 */
const COGNITO_IDP_SERVICE_NAME = 'cognito-idp';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/convert/base64url/convertArrayBufferToBase64Url.mjs":
/*!***************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/convert/base64url/convertArrayBufferToBase64Url.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertArrayBufferToBase64Url: () => (/* binding */ convertArrayBufferToBase64Url)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// https://datatracker.ietf.org/doc/html/rfc4648#page-7
/**
 * Converts an ArrayBuffer to a base64url encoded string
 * @param buffer - the ArrayBuffer instance of a Uint8Array
 * @returns string - a base64url encoded string
 */
const convertArrayBufferToBase64Url = (buffer) => {
    return _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.base64Encoder.convert(new Uint8Array(buffer), {
        urlSafe: true,
        skipPadding: true,
    });
};


//# sourceMappingURL=convertArrayBufferToBase64Url.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/convert/base64url/convertBase64UrlToArrayBuffer.mjs":
/*!***************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/convert/base64url/convertBase64UrlToArrayBuffer.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertBase64UrlToArrayBuffer: () => (/* binding */ convertBase64UrlToArrayBuffer)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Decoder.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Converts a base64url encoded string to an ArrayBuffer
 * @param base64url - a base64url encoded string
 * @returns ArrayBuffer
 */
const convertBase64UrlToArrayBuffer = (base64url) => {
    return Uint8Array.from(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.base64Decoder.convert(base64url, { urlSafe: true }), x => x.charCodeAt(0)).buffer;
};


//# sourceMappingURL=convertBase64UrlToArrayBuffer.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs":
/*!**************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_SERVICE_CLIENT_API_CONFIG: () => (/* binding */ DEFAULT_SERVICE_CLIENT_API_CONFIG)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants.mjs */ "../auth/dist/esm/foundation/constants.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const DEFAULT_SERVICE_CLIENT_API_CONFIG = {
    service: _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.COGNITO_IDP_SERVICE_NAME,
    retryDecider: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.getRetryDecider)(_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_2__.parseJsonError),
    computeDelay: _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__.jitteredBackoff,
    userAgentValue: (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__.getAmplifyUserAgent)(),
    cache: 'no-store',
};


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAssociateSoftwareTokenClient: () => (/* binding */ createAssociateSoftwareTokenClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createAssociateSoftwareTokenClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('AssociateSoftwareToken'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createAssociateSoftwareTokenClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createChangePasswordClient.mjs":
/*!*******************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createChangePasswordClient.mjs ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createChangePasswordClient: () => (/* binding */ createChangePasswordClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createChangePasswordClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ChangePassword'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createChangePasswordClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createCompleteWebAuthnRegistrationClient.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createCompleteWebAuthnRegistrationClient.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createCompleteWebAuthnRegistrationClient: () => (/* binding */ createCompleteWebAuthnRegistrationClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createCompleteWebAuthnRegistrationClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('CompleteWebAuthnRegistration'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createCompleteWebAuthnRegistrationClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmDeviceClient.mjs":
/*!******************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmDeviceClient.mjs ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConfirmDeviceClient: () => (/* binding */ createConfirmDeviceClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createConfirmDeviceClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ConfirmDevice'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createConfirmDeviceClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmForgotPasswordClient.mjs":
/*!**************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmForgotPasswordClient.mjs ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConfirmForgotPasswordClient: () => (/* binding */ createConfirmForgotPasswordClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createConfirmForgotPasswordClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ConfirmForgotPassword'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createConfirmForgotPasswordClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmSignUpClient.mjs":
/*!******************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmSignUpClient.mjs ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConfirmSignUpClient: () => (/* binding */ createConfirmSignUpClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createConfirmSignUpClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ConfirmSignUp'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createConfirmSignUpClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserAttributesClient.mjs":
/*!*************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserAttributesClient.mjs ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDeleteUserAttributesClient: () => (/* binding */ createDeleteUserAttributesClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createDeleteUserAttributesClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('DeleteUserAttributes'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createDeleteUserAttributesClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserClient.mjs":
/*!***************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserClient.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDeleteUserClient: () => (/* binding */ createDeleteUserClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createEmptyResponseDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createEmptyResponseDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createEmptyResponseDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createDeleteUserClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('DeleteUser'), (0,_shared_serde_createEmptyResponseDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createEmptyResponseDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createDeleteUserClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteWebAuthnCredentialClient.mjs":
/*!*****************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteWebAuthnCredentialClient.mjs ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDeleteWebAuthnCredentialClient: () => (/* binding */ createDeleteWebAuthnCredentialClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createDeleteWebAuthnCredentialClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('DeleteWebAuthnCredential'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createDeleteWebAuthnCredentialClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgetDeviceClient.mjs":
/*!*****************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgetDeviceClient.mjs ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createForgetDeviceClient: () => (/* binding */ createForgetDeviceClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createEmptyResponseDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createEmptyResponseDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createEmptyResponseDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createForgetDeviceClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ForgetDevice'), (0,_shared_serde_createEmptyResponseDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createEmptyResponseDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createForgetDeviceClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgotPasswordClient.mjs":
/*!*******************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgotPasswordClient.mjs ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createForgotPasswordClient: () => (/* binding */ createForgotPasswordClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createForgotPasswordClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ForgotPassword'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createForgotPasswordClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserAttributeVerificationCodeClient.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserAttributeVerificationCodeClient.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetUserAttributeVerificationCodeClient: () => (/* binding */ createGetUserAttributeVerificationCodeClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createGetUserAttributeVerificationCodeClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('GetUserAttributeVerificationCode'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createGetUserAttributeVerificationCodeClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs":
/*!************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetUserClient: () => (/* binding */ createGetUserClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createGetUserClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('GetUser'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createGetUserClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGlobalSignOutClient.mjs":
/*!******************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGlobalSignOutClient.mjs ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGlobalSignOutClient: () => (/* binding */ createGlobalSignOutClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createGlobalSignOutClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('GlobalSignOut'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createGlobalSignOutClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs":
/*!*****************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createInitiateAuthClient: () => (/* binding */ createInitiateAuthClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createInitiateAuthClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('InitiateAuth'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createInitiateAuthClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListDevicesClient.mjs":
/*!****************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListDevicesClient.mjs ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createListDevicesClient: () => (/* binding */ createListDevicesClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createListDevicesClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ListDevices'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createListDevicesClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListWebAuthnCredentialsClient.mjs":
/*!****************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListWebAuthnCredentialsClient.mjs ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createListWebAuthnCredentialsClient: () => (/* binding */ createListWebAuthnCredentialsClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createListWebAuthnCredentialsClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ListWebAuthnCredentials'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createListWebAuthnCredentialsClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createResendConfirmationCodeClient.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createResendConfirmationCodeClient.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createResendConfirmationCodeClient: () => (/* binding */ createResendConfirmationCodeClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createResendConfirmationCodeClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('ResendConfirmationCode'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createResendConfirmationCodeClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createRespondToAuthChallengeClient: () => (/* binding */ createRespondToAuthChallengeClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createRespondToAuthChallengeClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('RespondToAuthChallenge'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createRespondToAuthChallengeClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRevokeTokenClient.mjs":
/*!****************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRevokeTokenClient.mjs ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createRevokeTokenClient: () => (/* binding */ createRevokeTokenClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createRevokeTokenClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('RevokeToken'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createRevokeTokenClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSetUserMFAPreferenceClient.mjs":
/*!*************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSetUserMFAPreferenceClient.mjs ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSetUserMFAPreferenceClient: () => (/* binding */ createSetUserMFAPreferenceClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createSetUserMFAPreferenceClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('SetUserMFAPreference'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createSetUserMFAPreferenceClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.mjs":
/*!***********************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.mjs ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSignUpClient: () => (/* binding */ createSignUpClient),
/* harmony export */   createSignUpClientDeserializer: () => (/* binding */ createSignUpClientDeserializer)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _providers_cognito_types_errors_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../providers/cognito/types/errors.mjs */ "../auth/dist/esm/providers/cognito/types/errors.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");











// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createSignUpClientDeserializer = () => async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.parseJsonError)(response);
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__.assertServiceError)(error);
        if (
        // Missing Password Error
        // 1 validation error detected: Value at 'password'failed to satisfy constraint: Member must not be null
        error.name === _providers_cognito_types_errors_mjs__WEBPACK_IMPORTED_MODULE_2__.SignUpException.InvalidParameterException &&
            /'password'/.test(error.message) &&
            /Member must not be null/.test(error.message)) {
            const name = _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignUpPassword;
            const { message, recoverySuggestion } = _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_4__.validationErrorMap[name];
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__.AuthError({
                name,
                message,
                recoverySuggestion,
            });
        }
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__.AuthError({ name: error.name, message: error.message });
    }
    return (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.parseJsonBody)(response);
};
const createSignUpClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_6__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_7__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_8__.createUserPoolSerializer)('SignUp'), createSignUpClientDeserializer(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createSignUpClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createStartWebAuthnRegistrationClient.mjs":
/*!******************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createStartWebAuthnRegistrationClient.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createStartWebAuthnRegistrationClient: () => (/* binding */ createStartWebAuthnRegistrationClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createStartWebAuthnRegistrationClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('StartWebAuthnRegistration'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createStartWebAuthnRegistrationClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateDeviceStatusClient.mjs":
/*!***********************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateDeviceStatusClient.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createUpdateDeviceStatusClient: () => (/* binding */ createUpdateDeviceStatusClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createUpdateDeviceStatusClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('UpdateDeviceStatus'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createUpdateDeviceStatusClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateUserAttributesClient.mjs":
/*!*************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateUserAttributesClient.mjs ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createUpdateUserAttributesClient: () => (/* binding */ createUpdateUserAttributesClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createUpdateUserAttributesClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('UpdateUserAttributes'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createUpdateUserAttributesClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs":
/*!************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createVerifySoftwareTokenClient: () => (/* binding */ createVerifySoftwareTokenClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createVerifySoftwareTokenClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('VerifySoftwareToken'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createVerifySoftwareTokenClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifyUserAttributeClient.mjs":
/*!************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifyUserAttributeClient.mjs ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createVerifyUserAttributeClient: () => (/* binding */ createVerifyUserAttributeClient)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/handler/cognitoUserPoolTransferHandler.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs");
/* harmony import */ var _shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/serde/createUserPoolSerializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs");
/* harmony import */ var _shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/serde/createUserPoolDeserializer.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createVerifyUserAttributeClient = (config) => (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeServiceApi)(_shared_handler_cognitoUserPoolTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolTransferHandler, (0,_shared_serde_createUserPoolSerializer_mjs__WEBPACK_IMPORTED_MODULE_2__.createUserPoolSerializer)('VerifyUserAttribute'), (0,_shared_serde_createUserPoolDeserializer_mjs__WEBPACK_IMPORTED_MODULE_3__.createUserPoolDeserializer)(), {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
});


//# sourceMappingURL=createVerifyUserAttributeClient.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoUserPoolTransferHandler: () => (/* binding */ cognitoUserPoolTransferHandler)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeTransferHandler.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/handlers/unauthenticated.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * A Cognito Identity-specific middleware that disables caching for all requests.
 */
const disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {
    request.headers['cache-control'] = 'no-store';
    return next(request);
};
/**
 * A Cognito Identity-specific transfer handler that does NOT sign requests, and
 * disables caching.
 *
 * @internal
 */
const cognitoUserPoolTransferHandler = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeTransferHandler)(_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.unauthenticatedHandler, [disableCacheMiddlewareFactory]);


//# sourceMappingURL=cognitoUserPoolTransferHandler.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createEmptyResponseDeserializer.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createEmptyResponseDeserializer.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createEmptyResponseDeserializer: () => (/* binding */ createEmptyResponseDeserializer)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createEmptyResponseDeserializer = () => async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.parseJsonError)(response);
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__.assertServiceError)(error);
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthError({ name: error.name, message: error.message });
    }
    else {
        return undefined;
    }
};


//# sourceMappingURL=createEmptyResponseDeserializer.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs":
/*!********************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createUserPoolDeserializer: () => (/* binding */ createUserPoolDeserializer)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createUserPoolDeserializer = () => async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.parseJsonError)(response);
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_1__.assertServiceError)(error);
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthError({ name: error.name, message: error.message });
    }
    return (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.parseJsonBody)(response);
};


//# sourceMappingURL=createUserPoolDeserializer.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs":
/*!******************************************************************************************************************************!*\
  !*** ../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createUserPoolSerializer: () => (/* binding */ createUserPoolSerializer)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createUserPoolSerializer = (operation) => (input, endpoint) => {
    const headers = getSharedHeaders(operation);
    const body = JSON.stringify(input);
    return buildHttpRpcRequest(endpoint, headers, body);
};
const getSharedHeaders = (operation) => ({
    'content-type': 'application/x-amz-json-1.1',
    'x-amz-target': `AWSCognitoIdentityProviderService.${operation}`,
});
const buildHttpRpcRequest = ({ url }, headers, body) => ({
    headers,
    url,
    body,
    method: 'POST',
});


//# sourceMappingURL=createUserPoolSerializer.mjs.map


/***/ }),

/***/ "../auth/dist/esm/foundation/parsers/regionParsers.mjs":
/*!*************************************************************!*\
  !*** ../auth/dist/esm/foundation/parsers/regionParsers.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRegionFromIdentityPoolId: () => (/* binding */ getRegionFromIdentityPoolId),
/* harmony export */   getRegionFromUserPoolId: () => (/* binding */ getRegionFromUserPoolId)
/* harmony export */ });
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function getRegionFromUserPoolId(userPoolId) {
    const region = userPoolId?.split('_')[0];
    if (!userPoolId ||
        userPoolId.indexOf('_') < 0 ||
        !region ||
        typeof region !== 'string')
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: 'InvalidUserPoolId',
            message: 'Invalid user pool id provided.',
        });
    return region;
}
function getRegionFromIdentityPoolId(identityPoolId) {
    if (!identityPoolId || !identityPoolId.includes(':')) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: 'InvalidIdentityPoolIdException',
            message: 'Invalid identity pool id provided.',
            recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',
        });
    }
    return identityPoolId.split(':')[0];
}


//# sourceMappingURL=regionParsers.mjs.map


/***/ }),

/***/ "../auth/dist/esm/index.mjs":
/*!**********************************!*\
  !*** ../auth/dist/esm/index.mjs ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthError: () => (/* reexport safe */ _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_28__.AuthError),
/* harmony export */   associateWebAuthnCredential: () => (/* reexport safe */ _client_apis_associateWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_29__.associateWebAuthnCredential),
/* harmony export */   autoSignIn: () => (/* reexport safe */ _providers_cognito_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_25__.autoSignIn),
/* harmony export */   confirmResetPassword: () => (/* reexport safe */ _providers_cognito_apis_confirmResetPassword_mjs__WEBPACK_IMPORTED_MODULE_2__.confirmResetPassword),
/* harmony export */   confirmSignIn: () => (/* reexport safe */ _providers_cognito_apis_confirmSignIn_mjs__WEBPACK_IMPORTED_MODULE_6__.confirmSignIn),
/* harmony export */   confirmSignUp: () => (/* reexport safe */ _providers_cognito_apis_confirmSignUp_mjs__WEBPACK_IMPORTED_MODULE_5__.confirmSignUp),
/* harmony export */   confirmUserAttribute: () => (/* reexport safe */ _providers_cognito_apis_confirmUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_15__.confirmUserAttribute),
/* harmony export */   decodeJWT: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_26__.decodeJWT),
/* harmony export */   deleteUser: () => (/* reexport safe */ _providers_cognito_apis_deleteUser_mjs__WEBPACK_IMPORTED_MODULE_21__.deleteUser),
/* harmony export */   deleteUserAttributes: () => (/* reexport safe */ _providers_cognito_apis_deleteUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_20__.deleteUserAttributes),
/* harmony export */   deleteWebAuthnCredential: () => (/* reexport safe */ _client_apis_deleteWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_31__.deleteWebAuthnCredential),
/* harmony export */   fetchAuthSession: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_27__.fetchAuthSession),
/* harmony export */   fetchDevices: () => (/* reexport safe */ _providers_cognito_apis_fetchDevices_mjs__WEBPACK_IMPORTED_MODULE_24__.fetchDevices),
/* harmony export */   fetchMFAPreference: () => (/* reexport safe */ _providers_cognito_apis_fetchMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_8__.fetchMFAPreference),
/* harmony export */   fetchUserAttributes: () => (/* reexport safe */ _providers_cognito_apis_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_17__.fetchUserAttributes),
/* harmony export */   forgetDevice: () => (/* reexport safe */ _providers_cognito_apis_forgetDevice_mjs__WEBPACK_IMPORTED_MODULE_23__.forgetDevice),
/* harmony export */   getCurrentUser: () => (/* reexport safe */ _providers_cognito_apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_14__.getCurrentUser),
/* harmony export */   listWebAuthnCredentials: () => (/* reexport safe */ _client_apis_listWebAuthnCredentials_mjs__WEBPACK_IMPORTED_MODULE_30__.listWebAuthnCredentials),
/* harmony export */   rememberDevice: () => (/* reexport safe */ _providers_cognito_apis_rememberDevice_mjs__WEBPACK_IMPORTED_MODULE_22__.rememberDevice),
/* harmony export */   resendSignUpCode: () => (/* reexport safe */ _providers_cognito_apis_resendSignUpCode_mjs__WEBPACK_IMPORTED_MODULE_4__.resendSignUpCode),
/* harmony export */   resetPassword: () => (/* reexport safe */ _providers_cognito_apis_resetPassword_mjs__WEBPACK_IMPORTED_MODULE_1__.resetPassword),
/* harmony export */   sendUserAttributeVerificationCode: () => (/* reexport safe */ _providers_cognito_apis_sendUserAttributeVerificationCode_mjs__WEBPACK_IMPORTED_MODULE_19__.sendUserAttributeVerificationCode),
/* harmony export */   setUpTOTP: () => (/* reexport safe */ _providers_cognito_apis_setUpTOTP_mjs__WEBPACK_IMPORTED_MODULE_11__.setUpTOTP),
/* harmony export */   signIn: () => (/* reexport safe */ _providers_cognito_apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_3__.signIn),
/* harmony export */   signInWithRedirect: () => (/* reexport safe */ _providers_cognito_apis_signInWithRedirect_mjs__WEBPACK_IMPORTED_MODULE_16__.signInWithRedirect),
/* harmony export */   signOut: () => (/* reexport safe */ _providers_cognito_apis_signOut_mjs__WEBPACK_IMPORTED_MODULE_18__.signOut),
/* harmony export */   signUp: () => (/* reexport safe */ _providers_cognito_apis_signUp_mjs__WEBPACK_IMPORTED_MODULE_0__.signUp),
/* harmony export */   updateMFAPreference: () => (/* reexport safe */ _providers_cognito_apis_updateMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_7__.updateMFAPreference),
/* harmony export */   updatePassword: () => (/* reexport safe */ _providers_cognito_apis_updatePassword_mjs__WEBPACK_IMPORTED_MODULE_10__.updatePassword),
/* harmony export */   updateUserAttribute: () => (/* reexport safe */ _providers_cognito_apis_updateUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_13__.updateUserAttribute),
/* harmony export */   updateUserAttributes: () => (/* reexport safe */ _providers_cognito_apis_updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_12__.updateUserAttributes),
/* harmony export */   verifyTOTPSetup: () => (/* reexport safe */ _providers_cognito_apis_verifyTOTPSetup_mjs__WEBPACK_IMPORTED_MODULE_9__.verifyTOTPSetup)
/* harmony export */ });
/* harmony import */ var _providers_cognito_apis_signUp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./providers/cognito/apis/signUp.mjs */ "../auth/dist/esm/providers/cognito/apis/signUp.mjs");
/* harmony import */ var _providers_cognito_apis_resetPassword_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./providers/cognito/apis/resetPassword.mjs */ "../auth/dist/esm/providers/cognito/apis/resetPassword.mjs");
/* harmony import */ var _providers_cognito_apis_confirmResetPassword_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./providers/cognito/apis/confirmResetPassword.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmResetPassword.mjs");
/* harmony import */ var _providers_cognito_apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./providers/cognito/apis/signIn.mjs */ "../auth/dist/esm/providers/cognito/apis/signIn.mjs");
/* harmony import */ var _providers_cognito_apis_resendSignUpCode_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./providers/cognito/apis/resendSignUpCode.mjs */ "../auth/dist/esm/providers/cognito/apis/resendSignUpCode.mjs");
/* harmony import */ var _providers_cognito_apis_confirmSignUp_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./providers/cognito/apis/confirmSignUp.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmSignUp.mjs");
/* harmony import */ var _providers_cognito_apis_confirmSignIn_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./providers/cognito/apis/confirmSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmSignIn.mjs");
/* harmony import */ var _providers_cognito_apis_updateMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./providers/cognito/apis/updateMFAPreference.mjs */ "../auth/dist/esm/providers/cognito/apis/updateMFAPreference.mjs");
/* harmony import */ var _providers_cognito_apis_fetchMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./providers/cognito/apis/fetchMFAPreference.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchMFAPreference.mjs");
/* harmony import */ var _providers_cognito_apis_verifyTOTPSetup_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./providers/cognito/apis/verifyTOTPSetup.mjs */ "../auth/dist/esm/providers/cognito/apis/verifyTOTPSetup.mjs");
/* harmony import */ var _providers_cognito_apis_updatePassword_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./providers/cognito/apis/updatePassword.mjs */ "../auth/dist/esm/providers/cognito/apis/updatePassword.mjs");
/* harmony import */ var _providers_cognito_apis_setUpTOTP_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./providers/cognito/apis/setUpTOTP.mjs */ "../auth/dist/esm/providers/cognito/apis/setUpTOTP.mjs");
/* harmony import */ var _providers_cognito_apis_updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./providers/cognito/apis/updateUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/updateUserAttributes.mjs");
/* harmony import */ var _providers_cognito_apis_updateUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./providers/cognito/apis/updateUserAttribute.mjs */ "../auth/dist/esm/providers/cognito/apis/updateUserAttribute.mjs");
/* harmony import */ var _providers_cognito_apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./providers/cognito/apis/getCurrentUser.mjs */ "../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs");
/* harmony import */ var _providers_cognito_apis_confirmUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./providers/cognito/apis/confirmUserAttribute.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmUserAttribute.mjs");
/* harmony import */ var _providers_cognito_apis_signInWithRedirect_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./providers/cognito/apis/signInWithRedirect.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithRedirect.mjs");
/* harmony import */ var _providers_cognito_apis_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./providers/cognito/apis/fetchUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs");
/* harmony import */ var _providers_cognito_apis_signOut_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./providers/cognito/apis/signOut.mjs */ "../auth/dist/esm/providers/cognito/apis/signOut.mjs");
/* harmony import */ var _providers_cognito_apis_sendUserAttributeVerificationCode_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./providers/cognito/apis/sendUserAttributeVerificationCode.mjs */ "../auth/dist/esm/providers/cognito/apis/sendUserAttributeVerificationCode.mjs");
/* harmony import */ var _providers_cognito_apis_deleteUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./providers/cognito/apis/deleteUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/deleteUserAttributes.mjs");
/* harmony import */ var _providers_cognito_apis_deleteUser_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./providers/cognito/apis/deleteUser.mjs */ "../auth/dist/esm/providers/cognito/apis/deleteUser.mjs");
/* harmony import */ var _providers_cognito_apis_rememberDevice_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./providers/cognito/apis/rememberDevice.mjs */ "../auth/dist/esm/providers/cognito/apis/rememberDevice.mjs");
/* harmony import */ var _providers_cognito_apis_forgetDevice_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./providers/cognito/apis/forgetDevice.mjs */ "../auth/dist/esm/providers/cognito/apis/forgetDevice.mjs");
/* harmony import */ var _providers_cognito_apis_fetchDevices_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./providers/cognito/apis/fetchDevices.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchDevices.mjs");
/* harmony import */ var _providers_cognito_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./providers/cognito/apis/autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _client_apis_associateWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./client/apis/associateWebAuthnCredential.mjs */ "../auth/dist/esm/client/apis/associateWebAuthnCredential.mjs");
/* harmony import */ var _client_apis_listWebAuthnCredentials_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./client/apis/listWebAuthnCredentials.mjs */ "../auth/dist/esm/client/apis/listWebAuthnCredentials.mjs");
/* harmony import */ var _client_apis_deleteWebAuthnCredential_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./client/apis/deleteWebAuthnCredential.mjs */ "../auth/dist/esm/client/apis/deleteWebAuthnCredential.mjs");






































//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs":
/*!**************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoSignIn: () => (/* binding */ autoSignIn),
/* harmony export */   resetAutoSignIn: () => (/* binding */ resetAutoSignIn),
/* harmony export */   setAutoSignIn: () => (/* binding */ setAutoSignIn)
/* harmony export */ });
/* harmony import */ var _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../client/utils/store/autoSignInStore.mjs */ "../auth/dist/esm/client/utils/store/autoSignInStore.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const initialAutoSignIn = async () => {
    throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
        name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.AUTO_SIGN_IN_EXCEPTION,
        message: 'The autoSignIn flow has not started, or has been cancelled/completed.',
        recoverySuggestion: 'Please try to use the signIn API or log out before starting a new autoSignIn flow.',
    });
};
/**
 * Signs a user in automatically after finishing the sign-up process.
 *
 * This API will automatically sign a user in if the autoSignIn flow has been completed in the following cases:
 * - User confirmed their account with a verification code sent to their phone or email (default option).
 * - User confirmed their account with a verification link sent to their phone or email. In order to
 * enable this option you need to go to the Amazon Cognito [console](https://aws.amazon.com/pm/cognito),
 * look for your userpool, then go to the `Messaging` tab and enable `link` mode inside the `Verification message` option.
 * Finally you need to define the `signUpVerificationMethod` in your `Auth` config.
 *
 * @example
 * ```typescript
 *  Amplify.configure({
 *    Auth: {
 *     Cognito: {
 *    ...cognitoConfig,
 *    signUpVerificationMethod: "link" // the default value is "code"
 *   }
 *	}});
 * ```
 *
 * @throws AutoSignInException - Thrown when the autoSignIn flow has not started, or has been cancelled/completed.
 * @returns The signInOutput.
 *
 * @example
 * ```typescript
 *  // handleSignUp.ts
 * async function handleSignUp(
 *   username:string,
 *   password:string
 * ){
 *   try {
 *     const { nextStep } = await signUp({
 *       username,
 *       password,
 *       options: {
 *         userAttributes:{ email:'email@email.com'},
 *         autoSignIn: true // This enables the auto sign-in flow.
 *       },
 *     });
 *
 *     handleSignUpStep(nextStep);
 *
 *   } catch (error) {
 *     console.log(error);
 *   }
 * }
 *
 * // handleConfirmSignUp.ts
 * async function handleConfirmSignUp(username:string, confirmationCode:string) {
 *   try {
 *     const { nextStep } = await confirmSignUp({
 *       username,
 *       confirmationCode,
 *     });
 *
 *     handleSignUpStep(nextStep);
 *   } catch (error) {
 *     console.log(error);
 *   }
 * }
 *
 * // signUpUtils.ts
 * async function handleSignUpStep( step: SignUpOutput["nextStep"]) {
 * switch (step.signUpStep) {
 *   case "CONFIRM_SIGN_UP":
 *
 *    // Redirect end-user to confirm-sign up screen.
 *
 *   case "COMPLETE_AUTO_SIGN_IN":
 *	   const codeDeliveryDetails = step.codeDeliveryDetails;
 *     if (codeDeliveryDetails) {
 *      // Redirect user to confirm-sign-up with link screen.
 *     }
 *     const signInOutput = await autoSignIn();
 *   // handle sign-in steps
 * }
 *
 * ```
 */
// TODO(Eslint): can this be refactored not using `let` on exported member?
// eslint-disable-next-line import/no-mutable-exports
let autoSignIn = initialAutoSignIn;
/**
 * Sets the context of autoSignIn at run time.
 * @internal
 */
function setAutoSignIn(callback) {
    autoSignIn = callback;
}
/**
 * Resets the context
 *
 * @internal
 */
function resetAutoSignIn(resetCallback = true) {
    if (resetCallback) {
        autoSignIn = initialAutoSignIn;
    }
    _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_2__.autoSignInStore.dispatch({ type: 'RESET' });
}


//# sourceMappingURL=autoSignIn.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/confirmResetPassword.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/confirmResetPassword.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   confirmResetPassword: () => (/* binding */ confirmResetPassword)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmForgotPasswordClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmForgotPasswordClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmForgotPasswordClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Confirms the new password and verification code to reset the password.
 *
 * @param input -  The ConfirmResetPasswordInput object.
 * @throws -{@link ConfirmForgotPasswordException }
 * Thrown due to an invalid confirmation code or password.
 * @throws -{@link AuthValidationErrorCode }
 * Thrown due to an empty confirmation code, password or username.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function confirmResetPassword(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;
    const { username, newPassword } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmResetPasswordUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!newPassword, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword);
    const code = input.confirmationCode;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!code, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode);
    const metadata = input.options?.clientMetadata;
    const UserContextData = (0,_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const confirmForgotPassword = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmForgotPasswordClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createConfirmForgotPasswordClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await confirmForgotPassword({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(authConfig.userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.ConfirmResetPassword),
    }, {
        Username: username,
        ConfirmationCode: code,
        Password: newPassword,
        ClientMetadata: metadata,
        ClientId: authConfig.userPoolClientId,
        UserContextData,
    });
}


//# sourceMappingURL=confirmResetPassword.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/confirmSignIn.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/confirmSignIn.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   confirmSignIn: () => (/* binding */ confirmSignIn)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");

















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Continues or completes the sign in process when required by the initial call to `signIn`.
 *
 * @param input -  The ConfirmSignInInput object
 * @returns ConfirmSignInOutput
 * @throws  -{@link VerifySoftwareTokenException }:
 * Thrown due to an invalid MFA token.
 * @throws  -{@link RespondToAuthChallengeException }:
 * Thrown due to an invalid auth challenge response.
 * @throws  -{@link AssociateSoftwareTokenException}:
 * Thrown due to a service error during the MFA setup process.
 * @throws  -{@link AuthValidationErrorCode }:
 * Thrown when `challengeResponse` is not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function confirmSignIn(input) {
    const { challengeResponse, options } = input;
    const { username, challengeName, signInSession, signInDetails } = _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_0__.signInStore.getState();
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.assertTokenProviderConfig)(authConfig);
    const clientMetaData = options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_3__.assertValidationError)(!!challengeResponse, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthValidationErrorCode.EmptyChallengeResponse);
    if (!username || !challengeName || !signInSession)
        // TODO: remove this error message for production apps
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__.AuthError({
            name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_6__.AuthErrorCodes.SignInException,
            message: `
			An error occurred during the sign in process.

			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow.
			`,
            recoverySuggestion: 'Make sure a successful call to signIn is made before calling confirmSignIn' +
                'and that the page is not refreshed until the sign in process is done.',
        });
    try {
        const { Session, ChallengeName: handledChallengeName, AuthenticationResult, ChallengeParameters: handledChallengeParameters, } = await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.handleChallengeName)(username, challengeName, signInSession, challengeResponse, authConfig, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_8__.tokenOrchestrator, clientMetaData, options);
        // sets up local state used during the sign-in process
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setActiveSignInState)({
            signInSession: Session,
            username,
            challengeName: handledChallengeName,
            signInDetails,
        });
        if (AuthenticationResult) {
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_0__.cleanActiveSignInState)();
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_9__.cacheCognitoTokens)({
                username,
                ...AuthenticationResult,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,
                    accessToken: AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_10__.dispatchSignedInHubEvent)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getSignInResult)({
            challengeName: handledChallengeName,
            challengeParameters: handledChallengeParameters,
        });
    }
    catch (error) {
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_11__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=confirmSignIn.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/confirmSignUp.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/confirmSignUp.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   confirmSignUp: () => (/* binding */ confirmSignUp)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmSignUpClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmSignUpClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmSignUpClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../client/utils/store/autoSignInStore.mjs */ "../auth/dist/esm/client/utils/store/autoSignInStore.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Confirms a new user account.
 *
 * @param input -  The ConfirmSignUpInput object.
 * @returns ConfirmSignUpOutput
 * @throws -{@link ConfirmSignUpException }
 * Thrown due to an invalid confirmation code.
 * @throws -{@link AuthValidationErrorCode }
 * Thrown due to an empty confirmation code
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function confirmSignUp(input) {
    const { username, confirmationCode, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig;
    const clientMetadata = options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmSignUpUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!confirmationCode, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmSignUpCode);
    const UserContextData = (0,_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const confirmSignUpClient = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmSignUpClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createConfirmSignUpClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { Session: session } = await confirmSignUpClient({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(authConfig.userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.ConfirmSignUp),
    }, {
        Username: username,
        ConfirmationCode: confirmationCode,
        ClientMetadata: clientMetadata,
        ForceAliasCreation: options?.forceAliasCreation,
        ClientId: authConfig.userPoolClientId,
        UserContextData,
    });
    return new Promise((resolve, reject) => {
        try {
            const signUpOut = {
                isSignUpComplete: true,
                nextStep: {
                    signUpStep: 'DONE',
                },
            };
            const autoSignInStoreState = _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_10__.autoSignInStore.getState();
            if (!autoSignInStoreState.active ||
                autoSignInStoreState.username !== username) {
                resolve(signUpOut);
                (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_11__.resetAutoSignIn)();
                return;
            }
            _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_10__.autoSignInStore.dispatch({ type: 'SET_SESSION', value: session });
            const stopListener = _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__.HubInternal.listen('auth-internal', ({ payload }) => {
                switch (payload.event) {
                    case 'autoSignIn':
                        resolve({
                            isSignUpComplete: true,
                            nextStep: {
                                signUpStep: 'COMPLETE_AUTO_SIGN_IN',
                            },
                        });
                        stopListener();
                }
            });
            _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__.HubInternal.dispatch('auth-internal', {
                event: 'confirmSignUp',
                data: signUpOut,
            });
        }
        catch (error) {
            reject(error);
        }
    });
}


//# sourceMappingURL=confirmSignUp.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/confirmUserAttribute.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/confirmUserAttribute.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   confirmUserAttribute: () => (/* binding */ confirmUserAttribute)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createVerifyUserAttributeClient_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createVerifyUserAttributeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifyUserAttributeClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Confirms a user attribute with the confirmation code.
 *
 * @param input -  The ConfirmUserAttributeInput object
 * @throws  -{@link AuthValidationErrorCode } -
 * Thrown when `confirmationCode` is not defined.
 * @throws  -{@link VerifyUserAttributeException } - Thrown due to an invalid confirmation code or attribute.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function confirmUserAttribute(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { confirmationCode, userAttributeKey } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!confirmationCode, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyConfirmUserAttributeCode);
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__.assertAuthTokens)(tokens);
    const verifyUserAttribute = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createVerifyUserAttributeClient_mjs__WEBPACK_IMPORTED_MODULE_6__.createVerifyUserAttributeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await verifyUserAttribute({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.AuthAction.ConfirmUserAttribute),
    }, {
        AccessToken: tokens.accessToken.toString(),
        AttributeName: userAttributeKey,
        Code: confirmationCode,
    });
}


//# sourceMappingURL=confirmUserAttribute.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/deleteUser.mjs":
/*!**************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/deleteUser.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteUser: () => (/* binding */ deleteUser)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createDeleteUserClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _signOut_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./signOut.mjs */ "../auth/dist/esm/providers/cognito/apis/signOut.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Deletes a user from the user pool while authenticated.
 *
 * @throws - {@link DeleteUserException}
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function deleteUser() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const serviceDeleteUser = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createDeleteUserClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createDeleteUserClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await serviceDeleteUser({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.DeleteUser),
    }, {
        AccessToken: tokens.accessToken.toString(),
    });
    await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_9__.tokenOrchestrator.clearDeviceMetadata();
    await (0,_signOut_mjs__WEBPACK_IMPORTED_MODULE_10__.signOut)();
}


//# sourceMappingURL=deleteUser.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/deleteUserAttributes.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/deleteUserAttributes.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteUserAttributes: () => (/* binding */ deleteUserAttributes)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createDeleteUserAttributesClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserAttributesClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserAttributesClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Deletes user attributes.
 *
 * @param input -  The DeleteUserAttributesInput object
 * @throws  -{@link DeleteUserAttributesException } - Thrown due to invalid attribute.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function deleteUserAttributes(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userAttributeKeys } = input;
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const deleteUserAttributesClient = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createDeleteUserAttributesClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createDeleteUserAttributesClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await deleteUserAttributesClient({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.DeleteUserAttributes),
    }, {
        AccessToken: tokens.accessToken.toString(),
        UserAttributeNames: userAttributeKeys,
    });
}


//# sourceMappingURL=deleteUserAttributes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/fetchDevices.mjs":
/*!****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/fetchDevices.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchDevices: () => (/* binding */ fetchDevices)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createListDevicesClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createListDevicesClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createListDevicesClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Cognito Documentation for max device
// https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_ListDevices.html#API_ListDevices_RequestSyntax
const MAX_DEVICES = 60;
/**
 * Fetches devices that have been remembered using {@link rememberDevice}
 * for the currently authenticated user.
 *
 * @returns FetchDevicesOutput
 * @throws {@link ListDevicesException}
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function fetchDevices() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const listDevices = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createListDevicesClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createListDevicesClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await listDevices({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.FetchDevices),
    }, {
        AccessToken: tokens.accessToken.toString(),
        Limit: MAX_DEVICES,
    });
    return parseDevicesResponse(response.Devices ?? []);
}
const parseDevicesResponse = async (devices) => {
    return devices.map(({ DeviceKey: id = '', DeviceAttributes = [], DeviceCreateDate, DeviceLastModifiedDate, DeviceLastAuthenticatedDate, }) => {
        let deviceName;
        const attributes = DeviceAttributes.reduce((attrs, { Name, Value }) => {
            if (Name && Value) {
                if (Name === 'device_name')
                    deviceName = Value;
                attrs[Name] = Value;
            }
            return attrs;
        }, {});
        return {
            id,
            name: deviceName,
            attributes,
            createDate: DeviceCreateDate
                ? new Date(DeviceCreateDate * 1000)
                : undefined,
            lastModifiedDate: DeviceLastModifiedDate
                ? new Date(DeviceLastModifiedDate * 1000)
                : undefined,
            lastAuthenticatedDate: DeviceLastAuthenticatedDate
                ? new Date(DeviceLastAuthenticatedDate * 1000)
                : undefined,
        };
    });
};


//# sourceMappingURL=fetchDevices.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/fetchMFAPreference.mjs":
/*!**********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/fetchMFAPreference.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchMFAPreference: () => (/* binding */ fetchMFAPreference)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Fetches the preferred MFA setting and enabled MFA settings for the user.
 *
 * @returns FetchMFAPreferenceOutput
 * @throws  -{@link GetUserException} : error thrown when the service fails to fetch MFA preference
 * and settings.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function fetchMFAPreference() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const getUser = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createGetUserClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { PreferredMfaSetting, UserMFASettingList } = await getUser({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.FetchMFAPreference),
    }, {
        AccessToken: tokens.accessToken.toString(),
    });
    return {
        preferred: (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__.getMFAType)(PreferredMfaSetting),
        enabled: (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__.getMFATypes)(UserMFASettingList),
    };
}


//# sourceMappingURL=fetchMFAPreference.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchUserAttributes: () => (/* binding */ fetchUserAttributes)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/fetchUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/internal/fetchUserAttributes.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Fetches the current user attributes while authenticated.
 *
 * @throws - {@link GetUserException} - Cognito service errors thrown when the service is not able to get the user.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
const fetchUserAttributes = () => {
    return (0,_internal_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_0__.fetchUserAttributes)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify);
};


//# sourceMappingURL=fetchUserAttributes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/forgetDevice.mjs":
/*!****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/forgetDevice.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   forgetDevice: () => (/* binding */ forgetDevice)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createForgetDeviceClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createForgetDeviceClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgetDeviceClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");


















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Forget a remembered device while authenticated.
 *
 * @param input - The ForgetDeviceInput object.
 * @throws - {@link ForgetDeviceException} - Cognito service errors thrown when
 * forgetting device with invalid device key
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function forgetDevice(input) {
    const { device: { id: externalDeviceKey } = { id: undefined } } = input ?? {};
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const deviceMetadata = await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__.tokenOrchestrator.getDeviceMetadata();
    const currentDeviceKey = deviceMetadata?.deviceKey;
    if (!externalDeviceKey)
        (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertDeviceMetadata)(deviceMetadata);
    const serviceForgetDevice = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createForgetDeviceClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createForgetDeviceClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await serviceForgetDevice({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.ForgetDevice),
    }, {
        AccessToken: tokens.accessToken.toString(),
        DeviceKey: externalDeviceKey ?? currentDeviceKey,
    });
    if (!externalDeviceKey || externalDeviceKey === currentDeviceKey)
        await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__.tokenOrchestrator.clearDeviceMetadata();
}


//# sourceMappingURL=forgetDevice.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/getCurrentUser.mjs */ "../auth/dist/esm/providers/cognito/apis/internal/getCurrentUser.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Gets the current user from the idToken.
 *
 * @param input -  The GetCurrentUserInput object.
 * @returns GetCurrentUserOutput
 * @throws - {@link InitiateAuthException} - Thrown when the service fails to refresh the tokens.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
const getCurrentUser = async () => {
    return (0,_internal_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_0__.getCurrentUser)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify);
};


//# sourceMappingURL=getCurrentUser.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/internal/fetchUserAttributes.mjs":
/*!********************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/internal/fetchUserAttributes.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchUserAttributes: () => (/* binding */ fetchUserAttributes)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/apis/internal/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/apiHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/apiHelpers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserClient_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const fetchUserAttributes = async (amplify) => {
    const authConfig = amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.fetchAuthSession)(amplify, {
        forceRefresh: false,
    });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_2__.assertAuthTokens)(tokens);
    const getUser = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserClient_mjs__WEBPACK_IMPORTED_MODULE_3__.createGetUserClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { UserAttributes } = await getUser({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_5__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_6__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.AuthAction.FetchUserAttributes),
    }, {
        AccessToken: tokens.accessToken.toString(),
    });
    return (0,_utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.toAuthUserAttribute)(UserAttributes);
};


//# sourceMappingURL=fetchUserAttributes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/internal/getCurrentUser.mjs":
/*!***************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/internal/getCurrentUser.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getCurrentUser = async (amplify) => {
    const authConfig = amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig);
    const tokens = await amplify.Auth.getTokens({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_1__.assertAuthTokens)(tokens);
    const { 'cognito:username': username, sub } = tokens.idToken?.payload ?? {};
    const authUser = {
        username: username,
        userId: sub,
    };
    const signInDetails = getSignInDetailsFromTokens(tokens);
    if (signInDetails) {
        authUser.signInDetails = signInDetails;
    }
    return authUser;
};
function getSignInDetailsFromTokens(tokens) {
    return tokens?.signInDetails;
}


//# sourceMappingURL=getCurrentUser.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/rememberDevice.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/rememberDevice.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rememberDevice: () => (/* binding */ rememberDevice)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createUpdateDeviceStatusClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateDeviceStatusClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateDeviceStatusClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");


















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Marks device as remembered while authenticated.
 *
 * @throws - {@link UpdateDeviceStatusException} - Cognito service errors thrown when
 * setting device status to remembered using an invalid device key.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function rememberDevice() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)();
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const deviceMetadata = await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__.tokenOrchestrator?.getDeviceMetadata();
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertDeviceMetadata)(deviceMetadata);
    const updateDeviceStatus = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createUpdateDeviceStatusClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createUpdateDeviceStatusClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await updateDeviceStatus({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.RememberDevice),
    }, {
        AccessToken: tokens.accessToken.toString(),
        DeviceKey: deviceMetadata.deviceKey,
        DeviceRememberedStatus: 'remembered',
    });
}


//# sourceMappingURL=rememberDevice.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/resendSignUpCode.mjs":
/*!********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/resendSignUpCode.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resendSignUpCode: () => (/* binding */ resendSignUpCode)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createResendConfirmationCodeClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createResendConfirmationCodeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createResendConfirmationCodeClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Resend the confirmation code while signing up
 *
 * @param input -  The ResendSignUpCodeInput object
 * @returns ResendSignUpCodeOutput
 * @throws service: {@link ResendConfirmationException } - Cognito service errors thrown when resending the code.
 * @throws validation: {@link AuthValidationErrorCode } - Validation errors thrown either username are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function resendSignUpCode(input) {
    const { username } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthValidationErrorCode.EmptySignUpUsername);
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.assertTokenProviderConfig)(authConfig);
    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;
    const clientMetadata = input.options?.clientMetadata;
    const UserContextData = (0,_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const resendConfirmationCode = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createResendConfirmationCodeClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createResendConfirmationCodeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { CodeDeliveryDetails } = await resendConfirmationCode({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(authConfig.userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.ResendSignUpCode),
    }, {
        Username: username,
        ClientMetadata: clientMetadata,
        ClientId: authConfig.userPoolClientId,
        UserContextData,
    });
    const { DeliveryMedium, AttributeName, Destination } = {
        ...CodeDeliveryDetails,
    };
    return {
        destination: Destination,
        deliveryMedium: DeliveryMedium,
        attributeName: AttributeName
            ? AttributeName
            : undefined,
    };
}


//# sourceMappingURL=resendSignUpCode.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/resetPassword.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/resetPassword.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resetPassword: () => (/* binding */ resetPassword)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createForgotPasswordClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createForgotPasswordClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createForgotPasswordClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Resets a user's password.
 *
 * @param input -  The ResetPasswordInput object.
 * @returns ResetPasswordOutput
 * @throws -{@link ForgotPasswordException }
 * Thrown due to an invalid confirmation code or password.
 * @throws -{@link AuthValidationErrorCode }
 * Thrown due to an empty username.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 **/
async function resetPassword(input) {
    const { username } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthValidationErrorCode.EmptyResetPasswordUsername);
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.assertTokenProviderConfig)(authConfig);
    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;
    const clientMetadata = input.options?.clientMetadata;
    const UserContextData = (0,_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_4__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const forgotPassword = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createForgotPasswordClient_mjs__WEBPACK_IMPORTED_MODULE_5__.createForgotPasswordClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const res = await forgotPassword({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_7__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_8__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.AuthAction.ResetPassword),
    }, {
        Username: username,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    });
    const codeDeliveryDetails = res.CodeDeliveryDetails;
    return {
        isPasswordReset: false,
        nextStep: {
            resetPasswordStep: 'CONFIRM_RESET_PASSWORD_WITH_CODE',
            codeDeliveryDetails: {
                deliveryMedium: codeDeliveryDetails?.DeliveryMedium,
                destination: codeDeliveryDetails?.Destination,
                attributeName: codeDeliveryDetails?.AttributeName,
            },
        },
    };
}


//# sourceMappingURL=resetPassword.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/sendUserAttributeVerificationCode.mjs":
/*!*************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/sendUserAttributeVerificationCode.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   sendUserAttributeVerificationCode: () => (/* binding */ sendUserAttributeVerificationCode)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserAttributeVerificationCodeClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserAttributeVerificationCodeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserAttributeVerificationCodeClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Resends user's confirmation code when updating attributes while authenticated.
 *
 * @param input - The SendUserAttributeVerificationCodeInput object
 * @returns SendUserAttributeVerificationCodeOutput
 * @throws - {@link GetUserAttributeVerificationException}
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
const sendUserAttributeVerificationCode = async (input) => {
    const { userAttributeKey, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const clientMetadata = options?.clientMetadata;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const getUserAttributeVerificationCode = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createGetUserAttributeVerificationCodeClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createGetUserAttributeVerificationCodeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { CodeDeliveryDetails } = await getUserAttributeVerificationCode({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.SendUserAttributeVerificationCode),
    }, {
        AccessToken: tokens.accessToken.toString(),
        ClientMetadata: clientMetadata,
        AttributeName: userAttributeKey,
    });
    const { DeliveryMedium, AttributeName, Destination } = {
        ...CodeDeliveryDetails,
    };
    return {
        destination: Destination,
        deliveryMedium: DeliveryMedium,
        attributeName: AttributeName,
    };
};


//# sourceMappingURL=sendUserAttributeVerificationCode.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/setUpTOTP.mjs":
/*!*************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/setUpTOTP.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setUpTOTP: () => (/* binding */ setUpTOTP)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../types/errors.mjs */ "../auth/dist/esm/providers/cognito/types/errors.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createAssociateSoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");

















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Sets up TOTP for the user.
 *
 * @returns SetUpTOTPOutput
 * @throws -{@link AssociateSoftwareTokenException}
 * Thrown if a service occurs while setting up TOTP.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 **/
async function setUpTOTP() {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const username = tokens.idToken?.payload['cognito:username'] ?? '';
    const associateSoftwareToken = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createAssociateSoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createAssociateSoftwareTokenClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { SecretCode } = await associateSoftwareToken({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.SetUpTOTP),
    }, {
        AccessToken: tokens.accessToken.toString(),
    });
    if (!SecretCode) {
        // This should never happen.
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_9__.AuthError({
            name: _types_errors_mjs__WEBPACK_IMPORTED_MODULE_10__.SETUP_TOTP_EXCEPTION,
            message: 'Failed to set up TOTP.',
        });
    }
    return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_11__.getTOTPSetupDetails)(SecretCode, JSON.stringify(username));
}


//# sourceMappingURL=setUpTOTP.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signIn.mjs":
/*!**********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signIn.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signIn: () => (/* binding */ signIn)
/* harmony export */ });
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _signInWithCustomAuth_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./signInWithCustomAuth.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithCustomAuth.mjs");
/* harmony import */ var _signInWithCustomSRPAuth_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./signInWithCustomSRPAuth.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithCustomSRPAuth.mjs");
/* harmony import */ var _signInWithSRP_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signInWithSRP.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithSRP.mjs");
/* harmony import */ var _signInWithUserPassword_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signInWithUserPassword.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithUserPassword.mjs");
/* harmony import */ var _signInWithUserAuth_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./signInWithUserAuth.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithUserAuth.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in
 *
 * @param input -  The SignInInput object
 * @returns SignInOutput
 * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException }
 *  - Cognito service errors thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signIn(input) {
    // Here we want to reset the store but not reassign the callback.
    // The callback is reset when the underlying promise resolves or rejects.
    // With the advent of session based sign in, this guarantees that the signIn API initiates a new auth flow,
    // regardless of whether it is called for a user currently engaged in an active auto sign in session.
    (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_0__.resetAutoSignIn)(false);
    const authFlowType = input.options?.authFlowType;
    await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.assertUserNotAuthenticated)();
    switch (authFlowType) {
        case 'USER_SRP_AUTH':
            return (0,_signInWithSRP_mjs__WEBPACK_IMPORTED_MODULE_2__.signInWithSRP)(input);
        case 'USER_PASSWORD_AUTH':
            return (0,_signInWithUserPassword_mjs__WEBPACK_IMPORTED_MODULE_3__.signInWithUserPassword)(input);
        case 'CUSTOM_WITHOUT_SRP':
            return (0,_signInWithCustomAuth_mjs__WEBPACK_IMPORTED_MODULE_4__.signInWithCustomAuth)(input);
        case 'CUSTOM_WITH_SRP':
            return (0,_signInWithCustomSRPAuth_mjs__WEBPACK_IMPORTED_MODULE_5__.signInWithCustomSRPAuth)(input);
        case 'USER_AUTH':
            return (0,_signInWithUserAuth_mjs__WEBPACK_IMPORTED_MODULE_6__.signInWithUserAuth)(input);
        default:
            return (0,_signInWithSRP_mjs__WEBPACK_IMPORTED_MODULE_2__.signInWithSRP)(input);
    }
}


//# sourceMappingURL=signIn.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithCustomAuth.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithCustomAuth.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithCustomAuth: () => (/* binding */ signInWithCustomAuth)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in using a custom authentication flow without password
 *
 * @param input -  The SignInWithCustomAuthInput object
 * @returns AuthSignInResult
 * @throws service: {@link InitiateAuthException } - Cognito service errors thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password
 *  are not defined.
 * @throws SignInWithCustomAuthOutput - Thrown when the token provider config is invalid.
 */
async function signInWithCustomAuth(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { username, password, options } = input;
    const signInDetails = {
        loginId: username,
        authFlowType: 'CUSTOM_WITHOUT_SRP',
    };
    const metadata = options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.CustomAuthSignInPassword);
    try {
        const { ChallengeName: retriedChallengeName, ChallengeParameters: retiredChallengeParameters, AuthenticationResult, Session, } = await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.retryOnResourceNotFoundException)(_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.handleCustomAuthFlowWithoutSRP, [username, metadata, authConfig, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator], username, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator);
        const activeUsername = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getActiveSignInUsername)(username);
        // sets up local state used during the sign-in process
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.setActiveSignInState)({
            signInSession: Session,
            username: activeUsername,
            challengeName: retriedChallengeName,
            signInDetails,
        });
        if (AuthenticationResult) {
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__.cacheCognitoTokens)({
                username: activeUsername,
                ...AuthenticationResult,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,
                    accessToken: AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__.dispatchSignedInHubEvent)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResult)({
            challengeName: retriedChallengeName,
            challengeParameters: retiredChallengeParameters,
        });
    }
    catch (error) {
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_9__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=signInWithCustomAuth.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithCustomSRPAuth.mjs":
/*!***************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithCustomSRPAuth.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithCustomSRPAuth: () => (/* binding */ signInWithCustomSRPAuth)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in using a custom authentication flow with SRP
 *
 * @param input -  The SignInWithCustomSRPAuthInput object
 * @returns SignInWithCustomSRPAuthOutput
 * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException } - Cognito
 * service errors thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signInWithCustomSRPAuth(input) {
    const { username, password, options } = input;
    const signInDetails = {
        loginId: username,
        authFlowType: 'CUSTOM_WITH_SRP',
    };
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const metadata = options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInPassword);
    try {
        const { ChallengeName: handledChallengeName, ChallengeParameters: handledChallengeParameters, AuthenticationResult, Session, } = await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.handleCustomSRPAuthFlow)(username, password, metadata, authConfig, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator);
        const activeUsername = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getActiveSignInUsername)(username);
        // sets up local state used during the sign-in process
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.setActiveSignInState)({
            signInSession: Session,
            username: activeUsername,
            challengeName: handledChallengeName,
            signInDetails,
        });
        if (AuthenticationResult) {
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__.cacheCognitoTokens)({
                username: activeUsername,
                ...AuthenticationResult,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,
                    accessToken: AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__.dispatchSignedInHubEvent)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResult)({
            challengeName: handledChallengeName,
            challengeParameters: handledChallengeParameters,
        });
    }
    catch (error) {
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_9__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=signInWithCustomSRPAuth.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithRedirect.mjs":
/*!**********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithRedirect.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithRedirect: () => (/* binding */ signInWithRedirect)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/urlSafeEncode.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/isBrowser.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_oauth_enableOAuthListener_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/oauth/enableOAuthListener.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/enableOAuthListener.mjs");
/* harmony import */ var _types_models_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../types/models.mjs */ "../auth/dist/esm/providers/cognito/types/models.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _utils_openAuthSession_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../utils/openAuthSession.mjs */ "../auth/dist/esm/utils/openAuthSession.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _utils_oauth_generateCodeVerifier_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/oauth/generateCodeVerifier.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/generateCodeVerifier.mjs");
/* harmony import */ var _utils_oauth_generateState_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/oauth/generateState.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/generateState.mjs");
/* harmony import */ var _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/oauth/oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");
/* harmony import */ var _utils_oauth_getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/oauth/getRedirectUrl.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/getRedirectUrl.mjs");
/* harmony import */ var _utils_oauth_handleFailure_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utils/oauth/handleFailure.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/handleFailure.mjs");
/* harmony import */ var _utils_oauth_completeOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../utils/oauth/completeOAuthFlow.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthFlow.mjs");
/* harmony import */ var _utils_oauth_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils/oauth/createOAuthError.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/createOAuthError.mjs");
/* harmony import */ var _utils_oauth_cancelOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/oauth/cancelOAuthFlow.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/cancelOAuthFlow.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs in a user with OAuth. Redirects the application to an Identity Provider.
 *
 * @param input - The SignInWithRedirectInput object, if empty it will redirect to Cognito HostedUI
 *
 * @throws AuthTokenConfigException - Thrown when the user pool config is invalid.
 * @throws OAuthNotConfigureException - Thrown when the oauth config is invalid.
 */
async function signInWithRedirect(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.assertTokenProviderConfig)(authConfig);
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.assertOAuthConfig)(authConfig);
    _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.setAuthConfig(authConfig);
    await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.assertUserNotAuthenticated)();
    let provider = 'COGNITO'; // Default
    if (typeof input?.provider === 'string') {
        provider = _types_models_mjs__WEBPACK_IMPORTED_MODULE_5__.cognitoHostedUIIdentityProviderMap[input.provider];
    }
    else if (input?.provider?.custom) {
        provider = input.provider.custom;
    }
    return oauthSignIn({
        oauthConfig: authConfig.loginWith.oauth,
        clientId: authConfig.userPoolClientId,
        provider,
        customState: input?.customState,
        preferPrivateSession: input?.options?.preferPrivateSession,
    });
}
const oauthSignIn = async ({ oauthConfig, provider, clientId, customState, preferPrivateSession, }) => {
    const { domain, redirectSignIn, responseType, scopes } = oauthConfig;
    const randomState = (0,_utils_oauth_generateState_mjs__WEBPACK_IMPORTED_MODULE_6__.generateState)();
    /* encodeURIComponent is not URL safe, use urlSafeEncode instead. Cognito
    single-encodes/decodes url on first sign in and double-encodes/decodes url
    when user already signed in. Using encodeURIComponent, Base32, Base64 add
    characters % or = which on further encoding becomes unsafe. '=' create issue
    for parsing query params.
    Refer: https://github.com/aws-amplify/amplify-js/issues/5218 */
    const state = customState
        ? `${randomState}-${(0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.urlSafeEncode)(customState)}`
        : randomState;
    const { value, method, toCodeChallenge } = (0,_utils_oauth_generateCodeVerifier_mjs__WEBPACK_IMPORTED_MODULE_8__.generateCodeVerifier)(128);
    const redirectUri = (0,_utils_oauth_getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_9__.getRedirectUrl)(oauthConfig.redirectSignIn);
    if ((0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.isBrowser)())
        _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.storeOAuthInFlight(true);
    _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.storeOAuthState(state);
    _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.storePKCE(value);
    const queryString = Object.entries({
        redirect_uri: redirectUri,
        response_type: responseType,
        client_id: clientId,
        identity_provider: provider,
        scope: scopes.join(' '),
        state,
        ...(responseType === 'code' && {
            code_challenge: toCodeChallenge(),
            code_challenge_method: method,
        }),
    })
        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)
        .join('&');
    // TODO(v6): use URL object instead
    const oAuthUrl = `https://${domain}/oauth2/authorize?${queryString}`;
    // this will only take effect in the following scenarios:
    // 1. the user cancels the OAuth flow on web via back button, and
    // 2. when bfcache is enabled
    (0,_utils_oauth_cancelOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_11__.listenForOAuthFlowCancellation)(_utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore);
    // the following is effective only in react-native as openAuthSession resolves only in react-native
    const { type, error, url } = (await (0,_utils_openAuthSession_mjs__WEBPACK_IMPORTED_MODULE_12__.openAuthSession)(oAuthUrl)) ??
        {};
    try {
        if (type === 'error') {
            throw (0,_utils_oauth_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_13__.createOAuthError)(String(error));
        }
        if (type === 'success' && url) {
            await (0,_utils_oauth_completeOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_14__.completeOAuthFlow)({
                currentUrl: url,
                clientId,
                domain,
                redirectUri,
                responseType,
                userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_15__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_16__.AuthAction.SignInWithRedirect),
                preferPrivateSession,
            });
        }
    }
    catch (err) {
        await (0,_utils_oauth_handleFailure_mjs__WEBPACK_IMPORTED_MODULE_17__.handleFailure)(err);
        // rethrow the error so it can be caught by `await signInWithRedirect()` in react-native
        throw err;
    }
};


//# sourceMappingURL=signInWithRedirect.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithSRP.mjs":
/*!*****************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithSRP.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithSRP: () => (/* binding */ signInWithSRP)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in
 *
 * @param input - The SignInWithSRPInput object
 * @returns SignInWithSRPOutput
 * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException } - Cognito service errors
 * thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signInWithSRP(input) {
    const { username, password } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const signInDetails = {
        loginId: username,
        authFlowType: 'USER_SRP_AUTH',
    };
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const clientMetaData = input.options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInPassword);
    try {
        const { ChallengeName: handledChallengeName, ChallengeParameters: handledChallengeParameters, AuthenticationResult, Session, } = await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.handleUserSRPAuthFlow)(username, password, clientMetaData, authConfig, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator);
        const activeUsername = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getActiveSignInUsername)(username);
        // sets up local state used during the sign-in process
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.setActiveSignInState)({
            signInSession: Session,
            username: activeUsername,
            challengeName: handledChallengeName,
            signInDetails,
        });
        if (AuthenticationResult) {
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__.cacheCognitoTokens)({
                username: activeUsername,
                ...AuthenticationResult,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,
                    accessToken: AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__.dispatchSignedInHubEvent)();
            (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__.resetAutoSignIn)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResult)({
            challengeName: handledChallengeName,
            challengeParameters: handledChallengeParameters,
        });
    }
    catch (error) {
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
        (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__.resetAutoSignIn)();
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_10__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=signInWithSRP.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithUserAuth.mjs":
/*!**********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithUserAuth.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithUserAuth: () => (/* binding */ signInWithUserAuth)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../client/utils/store/autoSignInStore.mjs */ "../auth/dist/esm/client/utils/store/autoSignInStore.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _client_flows_userAuth_handleUserAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../client/flows/userAuth/handleUserAuthFlow.mjs */ "../auth/dist/esm/client/flows/userAuth/handleUserAuthFlow.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");

















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in through a registered email or phone number without a password by by receiving and entering an OTP.
 *
 * @param input - The SignInWithUserAuthInput object
 * @returns SignInWithUserAuthOutput
 * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException } - Cognito service errors
 * thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password -- needs to change
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signInWithUserAuth(input) {
    const { username, password, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const signInDetails = {
        loginId: username,
        authFlowType: 'USER_AUTH',
    };
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const clientMetaData = options?.clientMetadata;
    const preferredChallenge = options?.preferredChallenge;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInUsername);
    try {
        const handleUserAuthFlowInput = {
            username,
            config: authConfig,
            tokenOrchestrator: _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_4__.tokenOrchestrator,
            clientMetadata: clientMetaData,
            preferredChallenge,
            password,
        };
        const autoSignInStoreState = _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_5__.autoSignInStore.getState();
        if (autoSignInStoreState.active &&
            autoSignInStoreState.username === username) {
            handleUserAuthFlowInput.session = autoSignInStoreState.session;
        }
        const response = await (0,_client_flows_userAuth_handleUserAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_6__.handleUserAuthFlow)(handleUserAuthFlowInput);
        const activeUsername = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getActiveSignInUsername)(username);
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_8__.setActiveSignInState)({
            signInSession: response.Session,
            username: activeUsername,
            challengeName: response.ChallengeName,
            signInDetails,
        });
        if (response.AuthenticationResult) {
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_8__.cleanActiveSignInState)();
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_9__.cacheCognitoTokens)({
                username: activeUsername,
                ...response.AuthenticationResult,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: response.AuthenticationResult.NewDeviceMetadata,
                    accessToken: response.AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_10__.dispatchSignedInHubEvent)();
            (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_11__.resetAutoSignIn)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getSignInResult)({
            challengeName: response.ChallengeName,
            challengeParameters: response.ChallengeParameters,
            availableChallenges: 'AvailableChallenges' in response
                ? response.AvailableChallenges
                : undefined,
        });
    }
    catch (error) {
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_8__.cleanActiveSignInState)();
        (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_11__.resetAutoSignIn)();
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_12__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_7__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=signInWithUserAuth.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signInWithUserPassword.mjs":
/*!**************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signInWithUserPassword.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signInWithUserPassword: () => (/* binding */ signInWithUserPassword)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Signs a user in using USER_PASSWORD_AUTH AuthFlowType
 *
 * @param input - The SignInWithUserPasswordInput object
 * @returns SignInWithUserPasswordOutput
 * @throws service: {@link InitiateAuthException } - Cognito service error thrown during the sign-in process.
 * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signInWithUserPassword(input) {
    const { username, password, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const signInDetails = {
        loginId: username,
        authFlowType: 'USER_PASSWORD_AUTH',
    };
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const metadata = options?.clientMetadata;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInUsername);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!password, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignInPassword);
    try {
        const { ChallengeName: retiredChallengeName, ChallengeParameters: retriedChallengeParameters, AuthenticationResult, Session, } = await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.retryOnResourceNotFoundException)(_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.handleUserPasswordAuthFlow, [username, password, metadata, authConfig, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator], username, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_5__.tokenOrchestrator);
        const activeUsername = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getActiveSignInUsername)(username);
        // sets up local state used during the sign-in process
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.setActiveSignInState)({
            signInSession: Session,
            username: activeUsername,
            challengeName: retiredChallengeName,
            signInDetails,
        });
        if (AuthenticationResult) {
            (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
            await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_7__.cacheCognitoTokens)({
                ...AuthenticationResult,
                username: activeUsername,
                NewDeviceMetadata: await (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getNewDeviceMetadata)({
                    userPoolId: authConfig.userPoolId,
                    userPoolEndpoint: authConfig.userPoolEndpoint,
                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,
                    accessToken: AuthenticationResult.AccessToken,
                }),
                signInDetails,
            });
            await (0,_utils_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_8__.dispatchSignedInHubEvent)();
            (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__.resetAutoSignIn)();
            return {
                isSignedIn: true,
                nextStep: { signInStep: 'DONE' },
            };
        }
        return (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResult)({
            challengeName: retiredChallengeName,
            challengeParameters: retriedChallengeParameters,
        });
    }
    catch (error) {
        (0,_client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_6__.cleanActiveSignInState)();
        (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_9__.resetAutoSignIn)();
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_10__.assertServiceError)(error);
        const result = (0,_utils_signInHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getSignInResultFromError)(error.name);
        if (result)
            return result;
        throw error;
    }
}


//# sourceMappingURL=signInWithUserPassword.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signOut.mjs":
/*!***********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signOut.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signOut: () => (/* binding */ signOut)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/clearCredentials.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _utils_signInWithRedirectStore_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/signInWithRedirectStore.mjs */ "../auth/dist/esm/providers/cognito/utils/signInWithRedirectStore.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _utils_oauth_handleOAuthSignOut_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/oauth/handleOAuthSignOut.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/handleOAuthSignOut.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRevokeTokenClient_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRevokeTokenClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRevokeTokenClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createGlobalSignOutClient_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createGlobalSignOutClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGlobalSignOutClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");


























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.ConsoleLogger('Auth');
/**
 * Signs a user out
 *
 * @param input - The SignOutInput object
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signOut(input) {
    const cognitoConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.assertTokenProviderConfig)(cognitoConfig);
    if (input?.global) {
        await globalSignOut(cognitoConfig);
    }
    else {
        await clientSignOut(cognitoConfig);
    }
    let hasOAuthConfig;
    try {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.assertOAuthConfig)(cognitoConfig);
        hasOAuthConfig = true;
    }
    catch (err) {
        hasOAuthConfig = false;
    }
    if (hasOAuthConfig) {
        const oAuthStore = new _utils_signInWithRedirectStore_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultOAuthStore(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.defaultStorage);
        oAuthStore.setAuthConfig(cognitoConfig);
        const { type } = (await (0,_utils_oauth_handleOAuthSignOut_mjs__WEBPACK_IMPORTED_MODULE_6__.handleOAuthSignOut)(cognitoConfig, oAuthStore, _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__.tokenOrchestrator, input?.oauth?.redirectUrl)) ?? {};
        if (type === 'error') {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
                name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.OAUTH_SIGNOUT_EXCEPTION,
                message: `An error occurred when attempting to log out from OAuth provider.`,
            });
        }
    }
    else {
        // complete sign out
        _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__.tokenOrchestrator.clearTokens();
        await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_10__.clearCredentials)();
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_11__.Hub.dispatch('auth', { event: 'signedOut' }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_11__.AMPLIFY_SYMBOL);
    }
}
async function clientSignOut(cognitoConfig) {
    try {
        const { userPoolEndpoint, userPoolId, userPoolClientId } = cognitoConfig;
        const authTokens = await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__.tokenOrchestrator.getTokenStore().loadTokens();
        (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_12__.assertAuthTokensWithRefreshToken)(authTokens);
        if (isSessionRevocable(authTokens.accessToken)) {
            const revokeToken = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRevokeTokenClient_mjs__WEBPACK_IMPORTED_MODULE_13__.createRevokeTokenClient)({
                endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_14__.createCognitoUserPoolEndpointResolver)({
                    endpointOverride: userPoolEndpoint,
                }),
            });
            await revokeToken({
                region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_15__.getRegionFromUserPoolId)(userPoolId),
                userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_16__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_17__.AuthAction.SignOut),
            }, {
                ClientId: userPoolClientId,
                Token: authTokens.refreshToken,
            });
        }
    }
    catch (err) {
        // this shouldn't throw
        logger.debug('Client signOut error caught but will proceed with token removal');
    }
}
async function globalSignOut(cognitoConfig) {
    try {
        const { userPoolEndpoint, userPoolId } = cognitoConfig;
        const authTokens = await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__.tokenOrchestrator.getTokenStore().loadTokens();
        (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_12__.assertAuthTokens)(authTokens);
        const globalSignOutClient = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createGlobalSignOutClient_mjs__WEBPACK_IMPORTED_MODULE_18__.createGlobalSignOutClient)({
            endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_14__.createCognitoUserPoolEndpointResolver)({
                endpointOverride: userPoolEndpoint,
            }),
        });
        await globalSignOutClient({
            region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_15__.getRegionFromUserPoolId)(userPoolId),
            userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_16__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_17__.AuthAction.SignOut),
        }, {
            AccessToken: authTokens.accessToken.toString(),
        });
    }
    catch (err) {
        // it should not throw
        logger.debug('Global signOut error caught but will proceed with token removal');
    }
}
const isSessionRevocable = (token) => !!token?.payload?.origin_jti;


//# sourceMappingURL=signOut.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/signUp.mjs":
/*!**********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/signUp.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signUp: () => (/* binding */ signUp)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/apiHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/apiHelpers.mjs");
/* harmony import */ var _utils_signUpHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils/signUpHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/signUpHelpers.mjs");
/* harmony import */ var _utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createSignUpClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../client/utils/store/autoSignInStore.mjs */ "../auth/dist/esm/client/utils/store/autoSignInStore.mjs");
/* harmony import */ var _autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");



















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Creates a user
 *
 * @param input - The SignUpInput object
 * @returns SignUpOutput
 * @throws service: {@link SignUpException } - Cognito service errors thrown during the sign-up process.
 * @throws validation: {@link AuthValidationErrorCode } - Validation errors thrown either username or password
 *  are not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function signUp(input) {
    const { username, password, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const signUpVerificationMethod = authConfig?.signUpVerificationMethod ?? 'code';
    const { clientMetadata, validationData, autoSignIn } = input.options ?? {};
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!username, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptySignUpUsername);
    const signInServiceOptions = typeof autoSignIn !== 'boolean' ? autoSignIn : undefined;
    const signInInput = {
        username,
        options: signInServiceOptions,
    };
    // if the authFlowType is 'CUSTOM_WITHOUT_SRP' then we don't include the password
    if (signInServiceOptions?.authFlowType !== 'CUSTOM_WITHOUT_SRP') {
        signInInput.password = password;
    }
    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig;
    const signUpClient = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createSignUpClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createSignUpClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const signUpClientInput = {
        Username: username,
        Password: undefined,
        UserAttributes: options?.userAttributes && (0,_utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.toAttributeType)(options?.userAttributes),
        ClientMetadata: clientMetadata,
        ValidationData: validationData && (0,_utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.toAttributeType)(validationData),
        ClientId: userPoolClientId,
        UserContextData: (0,_utils_userContextData_mjs__WEBPACK_IMPORTED_MODULE_7__.getUserContextData)({
            username,
            userPoolId,
            userPoolClientId,
        }),
    };
    if (password) {
        signUpClientInput.Password = password;
    }
    const { UserSub: userId, CodeDeliveryDetails: cdd, UserConfirmed: userConfirmed, Session: session, } = await signUpClient({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.AuthAction.SignUp),
    }, signUpClientInput);
    if (signInServiceOptions || autoSignIn === true) {
        _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_11__.autoSignInStore.dispatch({ type: 'START' });
        _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_11__.autoSignInStore.dispatch({ type: 'SET_USERNAME', value: username });
        _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_11__.autoSignInStore.dispatch({ type: 'SET_SESSION', value: session });
    }
    const codeDeliveryDetails = {
        destination: cdd?.Destination,
        deliveryMedium: cdd?.DeliveryMedium,
        attributeName: cdd?.AttributeName,
    };
    const isSignUpComplete = !!userConfirmed;
    const isAutoSignInStarted = _client_utils_store_autoSignInStore_mjs__WEBPACK_IMPORTED_MODULE_11__.autoSignInStore.getState().active;
    // Sign Up Complete
    // No Confirm Sign In Step Required
    if (isSignUpComplete) {
        if (isAutoSignInStarted) {
            (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_12__.setAutoSignIn)((0,_utils_signUpHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__.autoSignInUserConfirmed)(signInInput));
            return {
                isSignUpComplete: true,
                nextStep: {
                    signUpStep: 'COMPLETE_AUTO_SIGN_IN',
                },
                userId,
            };
        }
        return {
            isSignUpComplete: true,
            nextStep: {
                signUpStep: 'DONE',
            },
            userId,
        };
    }
    // Sign Up Not Complete
    // Confirm Sign Up Step Required
    if (isAutoSignInStarted) {
        // Confirmation Via Link Occurs In Separate Context
        // AutoSignIn Fn Will Initiate Polling Once Executed
        if (signUpVerificationMethod === 'link') {
            (0,_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_12__.setAutoSignIn)((0,_utils_signUpHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__.autoSignInWhenUserIsConfirmedWithLink)(signInInput));
            return {
                isSignUpComplete: false,
                nextStep: {
                    signUpStep: 'COMPLETE_AUTO_SIGN_IN',
                    codeDeliveryDetails,
                },
                userId,
            };
        }
        // Confirmation Via Code Occurs In Same Context
        // AutoSignIn Next Step Will Be Returned From Confirm Sign Up
        (0,_utils_signUpHelpers_mjs__WEBPACK_IMPORTED_MODULE_13__.handleCodeAutoSignIn)(signInInput);
    }
    return {
        isSignUpComplete: false,
        nextStep: {
            signUpStep: 'CONFIRM_SIGN_UP',
            codeDeliveryDetails,
        },
        userId,
    };
}


//# sourceMappingURL=signUp.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/updateMFAPreference.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/updateMFAPreference.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getMFASettings: () => (/* binding */ getMFASettings),
/* harmony export */   updateMFAPreference: () => (/* binding */ updateMFAPreference)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createSetUserMFAPreferenceClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createSetUserMFAPreferenceClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createSetUserMFAPreferenceClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Updates the MFA preference of the user.
 *
 * @param input - The UpdateMFAPreferenceInput object.
 * @throws -{@link SetUserMFAPreferenceException } - Service error thrown when the MFA preference cannot be updated.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function updateMFAPreference(input) {
    const { sms, totp, email } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const setUserMFAPreference = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createSetUserMFAPreferenceClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createSetUserMFAPreferenceClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await setUserMFAPreference({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.UpdateMFAPreference),
    }, {
        AccessToken: tokens.accessToken.toString(),
        SMSMfaSettings: getMFASettings(sms),
        SoftwareTokenMfaSettings: getMFASettings(totp),
        EmailMfaSettings: getMFASettings(email),
    });
}
function getMFASettings(mfaPreference) {
    if (mfaPreference === 'DISABLED') {
        return {
            Enabled: false,
        };
    }
    else if (mfaPreference === 'PREFERRED') {
        return {
            Enabled: true,
            PreferredMfa: true,
        };
    }
    else if (mfaPreference === 'ENABLED') {
        return {
            Enabled: true,
        };
    }
    else if (mfaPreference === 'NOT_PREFERRED') {
        return {
            Enabled: true,
            PreferredMfa: false,
        };
    }
}


//# sourceMappingURL=updateMFAPreference.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/updatePassword.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/updatePassword.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updatePassword: () => (/* binding */ updatePassword)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createChangePasswordClient_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createChangePasswordClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createChangePasswordClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Updates user's password while authenticated.
 *
 * @param input - The UpdatePasswordInput object.
 * @throws - {@link ChangePasswordException} - Cognito service errors thrown when updating a password.
 * @throws - {@link AuthValidationErrorCode} - Validation errors thrown when oldPassword or newPassword are empty.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function updatePassword(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { oldPassword, newPassword } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!oldPassword, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyUpdatePassword);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!newPassword, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyUpdatePassword);
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__.assertAuthTokens)(tokens);
    const changePassword = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createChangePasswordClient_mjs__WEBPACK_IMPORTED_MODULE_6__.createChangePasswordClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await changePassword({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.AuthAction.UpdatePassword),
    }, {
        AccessToken: tokens.accessToken.toString(),
        PreviousPassword: oldPassword,
        ProposedPassword: newPassword,
    });
}


//# sourceMappingURL=updatePassword.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/updateUserAttribute.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/updateUserAttribute.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updateUserAttribute: () => (/* binding */ updateUserAttribute)
/* harmony export */ });
/* harmony import */ var _updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./updateUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/updateUserAttributes.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Updates user's attribute while authenticated.
 *
 * @param input - The UpdateUserAttributeInput object
 * @returns UpdateUserAttributeOutput
 * @throws - {@link UpdateUserAttributesException}
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
const updateUserAttribute = async (input) => {
    const { userAttribute: { attributeKey, value }, options, } = input;
    const output = await (0,_updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_0__.updateUserAttributes)({
        userAttributes: { [attributeKey]: value },
        options,
    });
    return Object.values(output)[0];
};


//# sourceMappingURL=updateUserAttribute.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/updateUserAttributes.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/updateUserAttributes.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updateUserAttributes: () => (/* binding */ updateUserAttributes)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/apiHelpers.mjs */ "../auth/dist/esm/providers/cognito/utils/apiHelpers.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createUpdateUserAttributesClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateUserAttributesClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createUpdateUserAttributesClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Updates user's attributes while authenticated.
 *
 * @param input - The UpdateUserAttributesInput object
 * @returns UpdateUserAttributesOutput
 * @throws - {@link UpdateUserAttributesException}
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
const updateUserAttributes = async (input) => {
    const { userAttributes, options } = input;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    const clientMetadata = options?.clientMetadata;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertAuthTokens)(tokens);
    const updateUserAttributesClient = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createUpdateUserAttributesClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createUpdateUserAttributesClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { CodeDeliveryDetailsList } = await updateUserAttributesClient({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_6__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_7__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AuthAction.UpdateUserAttributes),
    }, {
        AccessToken: tokens.accessToken.toString(),
        ClientMetadata: clientMetadata,
        UserAttributes: (0,_utils_apiHelpers_mjs__WEBPACK_IMPORTED_MODULE_9__.toAttributeType)(userAttributes),
    });
    return {
        ...getConfirmedAttributes(userAttributes),
        ...getUnConfirmedAttributes(CodeDeliveryDetailsList),
    };
};
function getConfirmedAttributes(attributes) {
    const confirmedAttributes = {};
    Object.keys(attributes)?.forEach(key => {
        confirmedAttributes[key] = {
            isUpdated: true,
            nextStep: {
                updateAttributeStep: 'DONE',
            },
        };
    });
    return confirmedAttributes;
}
function getUnConfirmedAttributes(codeDeliveryDetailsList) {
    const unConfirmedAttributes = {};
    codeDeliveryDetailsList?.forEach(codeDeliveryDetails => {
        const { AttributeName, DeliveryMedium, Destination } = codeDeliveryDetails;
        if (AttributeName)
            unConfirmedAttributes[AttributeName] = {
                isUpdated: false,
                nextStep: {
                    updateAttributeStep: 'CONFIRM_ATTRIBUTE_WITH_CODE',
                    codeDeliveryDetails: {
                        attributeName: AttributeName,
                        deliveryMedium: DeliveryMedium,
                        destination: Destination,
                    },
                },
            };
    });
    return unConfirmedAttributes;
}


//# sourceMappingURL=updateUserAttributes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/apis/verifyTOTPSetup.mjs":
/*!*******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/apis/verifyTOTPSetup.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   verifyTOTPSetup: () => (/* binding */ verifyTOTPSetup)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createVerifySoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Verifies an OTP code retrieved from an associated authentication app.
 *
 * @param input - The VerifyTOTPSetupInput
 * @throws  -{@link VerifySoftwareTokenException }:
 * Thrown due to an invalid MFA token.
 * @throws  -{@link AuthValidationErrorCode }:
 * Thrown when `code` is not defined.
 * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.
 */
async function verifyTOTPSetup(input) {
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(authConfig);
    const { userPoolEndpoint, userPoolId } = authConfig;
    const { code, options } = input;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_2__.assertValidationError)(!!code, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthValidationErrorCode.EmptyVerifyTOTPSetupCode);
    const { tokens } = await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.fetchAuthSession)({ forceRefresh: false });
    (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_5__.assertAuthTokens)(tokens);
    const verifySoftwareToken = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createVerifySoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_6__.createVerifySoftwareTokenClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_7__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    await verifySoftwareToken({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_8__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_9__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.AuthAction.VerifyTOTPSetup),
    }, {
        AccessToken: tokens.accessToken.toString(),
        UserCode: code,
        FriendlyDeviceName: options?.friendlyDeviceName,
    });
}


//# sourceMappingURL=verifyTOTPSetup.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdProvider.mjs":
/*!*************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdProvider.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoIdentityIdProvider: () => (/* binding */ cognitoIdentityIdProvider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetIdClient.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _factories_createCognitoIdentityPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../factories/createCognitoIdentityPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoIdentityPoolEndpointResolver.mjs");
/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/utils.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('CognitoIdentityIdProvider');
/**
 * Provides a Cognito identityId
 *
 * @param tokens - The AuthTokens received after SignIn
 * @returns string
 * @throws configuration exceptions: `InvalidIdentityPoolIdException`
 *  - Auth errors that may arise from misconfiguration.
 * @throws service exceptions: {@link GetIdException }
 */
async function cognitoIdentityIdProvider({ tokens, authConfig, identityIdStore, }) {
    identityIdStore.setAuthConfig({ Cognito: authConfig });
    // will return null only if there is no identityId cached or if there is an error retrieving it
    let identityId = await identityIdStore.loadIdentityId();
    // Tokens are available so return primary identityId
    if (tokens) {
        // If there is existing primary identityId in-memory return that
        if (identityId && identityId.type === 'primary') {
            return identityId.id;
        }
        else {
            const logins = tokens.idToken
                ? (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.formLoginsMap)(tokens.idToken.toString())
                : {};
            const generatedIdentityId = await generateIdentityId(logins, authConfig);
            if (identityId && identityId.id === generatedIdentityId) {
                logger.debug(`The guest identity ${identityId.id} has become the primary identity.`);
            }
            identityId = {
                id: generatedIdentityId,
                type: 'primary',
            };
        }
    }
    else {
        // If there is existing guest identityId cached return that
        if (identityId && identityId.type === 'guest') {
            return identityId.id;
        }
        else {
            identityId = {
                id: await generateIdentityId({}, authConfig),
                type: 'guest',
            };
        }
    }
    // Store in-memory or local storage depending on guest or primary identityId
    identityIdStore.storeIdentityId(identityId);
    return identityId.id;
}
async function generateIdentityId(logins, authConfig) {
    const identityPoolId = authConfig?.identityPoolId;
    const region = (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_2__.getRegionFromIdentityPoolId)(identityPoolId);
    const getId = (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.createGetIdClient)({
        endpointResolver: (0,_factories_createCognitoIdentityPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_4__.createCognitoIdentityPoolEndpointResolver)({
            endpointOverride: authConfig.identityPoolEndpoint,
        }),
    });
    // IdentityId is absent so get it using IdentityPoolId with Cognito's GetId API
    const idResult = 
    // for a first-time user, this will return a brand new identity
    // for a returning user, this will retrieve the previous identity associated with the logins
    (await getId({
        region,
    }, {
        IdentityPoolId: identityPoolId,
        Logins: logins,
    })).IdentityId;
    if (!idResult) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_5__.AuthError({
            name: 'GetIdResponseException',
            message: 'Received undefined response from getId operation',
            recoverySuggestion: 'Make sure to pass a valid identityPoolId in the configuration.',
        });
    }
    return idResult;
}


//# sourceMappingURL=IdentityIdProvider.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdStore.mjs":
/*!**********************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdStore.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultIdentityIdStore: () => (/* binding */ DefaultIdentityIdStore)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tokenProvider/TokenStore.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/types.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('DefaultIdentityIdStore');
class DefaultIdentityIdStore {
    setAuthConfig(authConfigParam) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertIdentityPoolIdConfig)(authConfigParam.Cognito);
        this.authConfig = authConfigParam;
        this._authKeys = createKeysForAuthStorage('Cognito', authConfigParam.Cognito.identityPoolId);
    }
    constructor(keyValueStorage) {
        this._authKeys = {};
        this._hasGuestIdentityId = false;
        this.keyValueStorage = keyValueStorage;
    }
    async loadIdentityId() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertIdentityPoolIdConfig)(this.authConfig?.Cognito);
        try {
            if (this._primaryIdentityId) {
                return {
                    id: this._primaryIdentityId,
                    type: 'primary',
                };
            }
            else {
                const storedIdentityId = await this.keyValueStorage.getItem(this._authKeys.identityId);
                if (storedIdentityId) {
                    this._hasGuestIdentityId = true;
                    return {
                        id: storedIdentityId,
                        type: 'guest',
                    };
                }
                return null;
            }
        }
        catch (err) {
            logger.log('Error getting stored IdentityId.', err);
            return null;
        }
    }
    async storeIdentityId(identity) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertIdentityPoolIdConfig)(this.authConfig?.Cognito);
        if (identity.type === 'guest') {
            this.keyValueStorage.setItem(this._authKeys.identityId, identity.id);
            // Clear in-memory storage of primary identityId
            this._primaryIdentityId = undefined;
            this._hasGuestIdentityId = true;
        }
        else {
            this._primaryIdentityId = identity.id;
            // Clear locally stored guest id
            if (this._hasGuestIdentityId) {
                this.keyValueStorage.removeItem(this._authKeys.identityId);
                this._hasGuestIdentityId = false;
            }
        }
    }
    async clearIdentityId() {
        this._primaryIdentityId = undefined;
        await this.keyValueStorage.removeItem(this._authKeys.identityId);
    }
}
const createKeysForAuthStorage = (provider, identifier) => {
    return (0,_tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_2__.getAuthStorageKeys)(_types_mjs__WEBPACK_IMPORTED_MODULE_3__.IdentityIdStorageKeys)(`com.amplify.${provider}`, identifier);
};


//# sourceMappingURL=IdentityIdStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/credentialsProvider.mjs":
/*!**************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/credentialsProvider.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CognitoAWSCredentialsAndIdentityIdProvider: () => (/* binding */ CognitoAWSCredentialsAndIdentityIdProvider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetCredentialsForIdentityClient.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _factories_createCognitoIdentityPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../factories/createCognitoIdentityPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoIdentityPoolEndpointResolver.mjs");
/* harmony import */ var _IdentityIdProvider_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IdentityIdProvider.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdProvider.mjs");
/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/utils.mjs");










// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('CognitoCredentialsProvider');
const CREDENTIALS_TTL = 50 * 60 * 1000; // 50 min, can be modified on config if required in the future
class CognitoAWSCredentialsAndIdentityIdProvider {
    constructor(identityIdStore) {
        this._nextCredentialsRefresh = 0;
        this._identityIdStore = identityIdStore;
    }
    async clearCredentialsAndIdentityId() {
        logger.debug('Clearing out credentials and identityId');
        this._credentialsAndIdentityId = undefined;
        await this._identityIdStore.clearIdentityId();
    }
    async clearCredentials() {
        logger.debug('Clearing out in-memory credentials');
        this._credentialsAndIdentityId = undefined;
    }
    async getCredentialsAndIdentityId(getCredentialsOptions) {
        const isAuthenticated = getCredentialsOptions.authenticated;
        const { tokens } = getCredentialsOptions;
        const { authConfig } = getCredentialsOptions;
        try {
            (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertIdentityPoolIdConfig)(authConfig?.Cognito);
        }
        catch {
            // No identity pool configured, skipping
            return;
        }
        if (!isAuthenticated && !authConfig.Cognito.allowGuestAccess) {
            // TODO(V6): return partial result like Native platforms
            return;
        }
        const { forceRefresh } = getCredentialsOptions;
        const tokenHasChanged = this.hasTokenChanged(tokens);
        const identityId = await (0,_IdentityIdProvider_mjs__WEBPACK_IMPORTED_MODULE_2__.cognitoIdentityIdProvider)({
            tokens,
            authConfig: authConfig.Cognito,
            identityIdStore: this._identityIdStore,
        });
        // Clear cached credentials when forceRefresh is true OR the cache token has changed
        if (forceRefresh || tokenHasChanged) {
            this.clearCredentials();
        }
        if (!isAuthenticated) {
            return this.getGuestCredentials(identityId, authConfig.Cognito);
        }
        else {
            (0,_utils_types_mjs__WEBPACK_IMPORTED_MODULE_3__.assertIdTokenInAuthTokens)(tokens);
            return this.credsForOIDCTokens(authConfig.Cognito, tokens, identityId);
        }
    }
    async getGuestCredentials(identityId, authConfig) {
        // Return existing in-memory cached credentials only if it exists, is not past it's lifetime and is unauthenticated credentials
        if (this._credentialsAndIdentityId &&
            !this.isPastTTL() &&
            this._credentialsAndIdentityId.isAuthenticatedCreds === false) {
            logger.info('returning stored credentials as they neither past TTL nor expired.');
            return this._credentialsAndIdentityId;
        }
        // Clear to discard if any authenticated credentials are set and start with a clean slate
        this.clearCredentials();
        const region = (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__.getRegionFromIdentityPoolId)(authConfig.identityPoolId);
        const getCredentialsForIdentity = (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.createGetCredentialsForIdentityClient)({
            endpointResolver: (0,_factories_createCognitoIdentityPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoIdentityPoolEndpointResolver)({
                endpointOverride: authConfig.identityPoolEndpoint,
            }),
        });
        // use identityId to obtain guest credentials
        // save credentials in-memory
        // No logins params should be passed for guest creds:
        // https://docs.aws.amazon.com/cognitoidentity/latest/APIReference/API_GetCredentialsForIdentity.html
        const clientResult = await getCredentialsForIdentity({ region }, {
            IdentityId: identityId,
        });
        if (clientResult.Credentials &&
            clientResult.Credentials.AccessKeyId &&
            clientResult.Credentials.SecretKey) {
            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;
            const res = {
                credentials: {
                    accessKeyId: clientResult.Credentials.AccessKeyId,
                    secretAccessKey: clientResult.Credentials.SecretKey,
                    sessionToken: clientResult.Credentials.SessionToken,
                    expiration: clientResult.Credentials.Expiration,
                },
                identityId,
            };
            const identityIdRes = clientResult.IdentityId;
            if (identityIdRes) {
                res.identityId = identityIdRes;
                this._identityIdStore.storeIdentityId({
                    id: identityIdRes,
                    type: 'guest',
                });
            }
            this._credentialsAndIdentityId = {
                ...res,
                isAuthenticatedCreds: false,
            };
            return res;
        }
        else {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_7__.AuthError({
                name: 'CredentialsNotFoundException',
                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,
            });
        }
    }
    async credsForOIDCTokens(authConfig, authTokens, identityId) {
        if (this._credentialsAndIdentityId &&
            !this.isPastTTL() &&
            this._credentialsAndIdentityId.isAuthenticatedCreds === true) {
            logger.debug('returning stored credentials as they neither past TTL nor expired.');
            return this._credentialsAndIdentityId;
        }
        // Clear to discard if any unauthenticated credentials are set and start with a clean slate
        this.clearCredentials();
        const logins = authTokens.idToken
            ? (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_8__.formLoginsMap)(authTokens.idToken.toString())
            : {};
        const region = (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_4__.getRegionFromIdentityPoolId)(authConfig.identityPoolId);
        const getCredentialsForIdentity = (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.createGetCredentialsForIdentityClient)({
            endpointResolver: (0,_factories_createCognitoIdentityPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_6__.createCognitoIdentityPoolEndpointResolver)({
                endpointOverride: authConfig.identityPoolEndpoint,
            }),
        });
        const clientResult = await getCredentialsForIdentity({ region }, {
            IdentityId: identityId,
            Logins: logins,
        });
        if (clientResult.Credentials &&
            clientResult.Credentials.AccessKeyId &&
            clientResult.Credentials.SecretKey) {
            const res = {
                credentials: {
                    accessKeyId: clientResult.Credentials.AccessKeyId,
                    secretAccessKey: clientResult.Credentials.SecretKey,
                    sessionToken: clientResult.Credentials.SessionToken,
                    expiration: clientResult.Credentials.Expiration,
                },
                identityId,
            };
            // Store the credentials in-memory along with the expiration
            this._credentialsAndIdentityId = {
                ...res,
                isAuthenticatedCreds: true,
                associatedIdToken: authTokens.idToken?.toString(),
            };
            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;
            const identityIdRes = clientResult.IdentityId;
            if (identityIdRes) {
                res.identityId = identityIdRes;
                this._identityIdStore.storeIdentityId({
                    id: identityIdRes,
                    type: 'primary',
                });
            }
            return res;
        }
        else {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_7__.AuthError({
                name: 'CredentialsException',
                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,
            });
        }
    }
    isPastTTL() {
        return this._nextCredentialsRefresh === undefined
            ? true
            : this._nextCredentialsRefresh <= Date.now();
    }
    hasTokenChanged(tokens) {
        return (!!tokens &&
            !!this._credentialsAndIdentityId?.associatedIdToken &&
            tokens.idToken?.toString() !==
                this._credentialsAndIdentityId.associatedIdToken);
    }
}


//# sourceMappingURL=credentialsProvider.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/index.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CognitoAWSCredentialsAndIdentityIdProvider: () => (/* reexport safe */ _credentialsProvider_mjs__WEBPACK_IMPORTED_MODULE_0__.CognitoAWSCredentialsAndIdentityIdProvider),
/* harmony export */   DefaultIdentityIdStore: () => (/* reexport safe */ _IdentityIdStore_mjs__WEBPACK_IMPORTED_MODULE_1__.DefaultIdentityIdStore),
/* harmony export */   cognitoCredentialsProvider: () => (/* binding */ cognitoCredentialsProvider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _IdentityIdStore_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IdentityIdStore.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdStore.mjs");
/* harmony import */ var _credentialsProvider_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./credentialsProvider.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/credentialsProvider.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Cognito specific implmentation of the CredentialsProvider interface
 * that manages setting and getting of AWS Credentials.
 *
 * @throws configuration expections: `InvalidIdentityPoolIdException`
 *  - Auth errors that may arise from misconfiguration.
 * @throws service expections: {@link GetCredentialsForIdentityException}, {@link GetIdException}
 *
 */
const cognitoCredentialsProvider = new _credentialsProvider_mjs__WEBPACK_IMPORTED_MODULE_0__.CognitoAWSCredentialsAndIdentityIdProvider(new _IdentityIdStore_mjs__WEBPACK_IMPORTED_MODULE_1__.DefaultIdentityIdStore(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.defaultStorage));


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/types.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/types.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IdentityIdStorageKeys: () => (/* binding */ IdentityIdStorageKeys)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const IdentityIdStorageKeys = {
    identityId: 'identityId',
};


//# sourceMappingURL=types.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/credentialsProvider/utils.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/credentialsProvider/utils.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   formLoginsMap: () => (/* binding */ formLoginsMap)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function formLoginsMap(idToken) {
    const issuer = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.decodeJWT)(idToken).payload.iss;
    const res = {};
    if (!issuer) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthError({
            name: 'InvalidIdTokenException',
            message: 'Invalid Idtoken.',
        });
    }
    const domainName = issuer.replace(/(^\w+:|^)\/\//, '');
    res[domainName] = idToken;
    return res;
}


//# sourceMappingURL=utils.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/factories/createCognitoIdentityPoolEndpointResolver.mjs":
/*!**************************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/factories/createCognitoIdentityPoolEndpointResolver.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createCognitoIdentityPoolEndpointResolver: () => (/* binding */ createCognitoIdentityPoolEndpointResolver)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/cognitoIdentityPoolEndpointResolver.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createCognitoIdentityPoolEndpointResolver = ({ endpointOverride }) => (input) => {
    if (endpointOverride) {
        return { url: new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(endpointOverride) };
    }
    return (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.cognitoIdentityPoolEndpointResolver)(input);
};


//# sourceMappingURL=createCognitoIdentityPoolEndpointResolver.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs":
/*!**********************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createCognitoUserPoolEndpointResolver: () => (/* binding */ createCognitoUserPoolEndpointResolver)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _foundation_cognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/cognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/foundation/cognitoUserPoolEndpointResolver.mjs");



const createCognitoUserPoolEndpointResolver = ({ endpointOverride }) => (input) => {
    if (endpointOverride) {
        return { url: new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(endpointOverride) };
    }
    return (0,_foundation_cognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_1__.cognitoUserPoolEndpointResolver)(input);
};


//# sourceMappingURL=createCognitoUserPoolEndpointResolver.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/index.mjs":
/*!****************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/index.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CognitoAWSCredentialsAndIdentityIdProvider: () => (/* reexport safe */ _credentialsProvider_credentialsProvider_mjs__WEBPACK_IMPORTED_MODULE_31__.CognitoAWSCredentialsAndIdentityIdProvider),
/* harmony export */   DefaultIdentityIdStore: () => (/* reexport safe */ _credentialsProvider_IdentityIdStore_mjs__WEBPACK_IMPORTED_MODULE_32__.DefaultIdentityIdStore),
/* harmony export */   DefaultTokenStore: () => (/* reexport safe */ _tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_28__.DefaultTokenStore),
/* harmony export */   TokenOrchestrator: () => (/* reexport safe */ _tokenProvider_TokenOrchestrator_mjs__WEBPACK_IMPORTED_MODULE_29__.TokenOrchestrator),
/* harmony export */   autoSignIn: () => (/* reexport safe */ _apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_25__.autoSignIn),
/* harmony export */   cognitoCredentialsProvider: () => (/* reexport safe */ _credentialsProvider_index_mjs__WEBPACK_IMPORTED_MODULE_26__.cognitoCredentialsProvider),
/* harmony export */   cognitoUserPoolsTokenProvider: () => (/* reexport safe */ _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_30__.cognitoUserPoolsTokenProvider),
/* harmony export */   confirmResetPassword: () => (/* reexport safe */ _apis_confirmResetPassword_mjs__WEBPACK_IMPORTED_MODULE_2__.confirmResetPassword),
/* harmony export */   confirmSignIn: () => (/* reexport safe */ _apis_confirmSignIn_mjs__WEBPACK_IMPORTED_MODULE_6__.confirmSignIn),
/* harmony export */   confirmSignUp: () => (/* reexport safe */ _apis_confirmSignUp_mjs__WEBPACK_IMPORTED_MODULE_5__.confirmSignUp),
/* harmony export */   confirmUserAttribute: () => (/* reexport safe */ _apis_confirmUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_15__.confirmUserAttribute),
/* harmony export */   deleteUser: () => (/* reexport safe */ _apis_deleteUser_mjs__WEBPACK_IMPORTED_MODULE_21__.deleteUser),
/* harmony export */   deleteUserAttributes: () => (/* reexport safe */ _apis_deleteUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_20__.deleteUserAttributes),
/* harmony export */   fetchDevices: () => (/* reexport safe */ _apis_fetchDevices_mjs__WEBPACK_IMPORTED_MODULE_24__.fetchDevices),
/* harmony export */   fetchMFAPreference: () => (/* reexport safe */ _apis_fetchMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_8__.fetchMFAPreference),
/* harmony export */   fetchUserAttributes: () => (/* reexport safe */ _apis_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_17__.fetchUserAttributes),
/* harmony export */   forgetDevice: () => (/* reexport safe */ _apis_forgetDevice_mjs__WEBPACK_IMPORTED_MODULE_23__.forgetDevice),
/* harmony export */   getCurrentUser: () => (/* reexport safe */ _apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_14__.getCurrentUser),
/* harmony export */   refreshAuthTokens: () => (/* reexport safe */ _utils_refreshAuthTokens_mjs__WEBPACK_IMPORTED_MODULE_27__.refreshAuthTokens),
/* harmony export */   refreshAuthTokensWithoutDedupe: () => (/* reexport safe */ _utils_refreshAuthTokens_mjs__WEBPACK_IMPORTED_MODULE_27__.refreshAuthTokensWithoutDedupe),
/* harmony export */   rememberDevice: () => (/* reexport safe */ _apis_rememberDevice_mjs__WEBPACK_IMPORTED_MODULE_22__.rememberDevice),
/* harmony export */   resendSignUpCode: () => (/* reexport safe */ _apis_resendSignUpCode_mjs__WEBPACK_IMPORTED_MODULE_4__.resendSignUpCode),
/* harmony export */   resetPassword: () => (/* reexport safe */ _apis_resetPassword_mjs__WEBPACK_IMPORTED_MODULE_1__.resetPassword),
/* harmony export */   sendUserAttributeVerificationCode: () => (/* reexport safe */ _apis_sendUserAttributeVerificationCode_mjs__WEBPACK_IMPORTED_MODULE_19__.sendUserAttributeVerificationCode),
/* harmony export */   setUpTOTP: () => (/* reexport safe */ _apis_setUpTOTP_mjs__WEBPACK_IMPORTED_MODULE_11__.setUpTOTP),
/* harmony export */   signIn: () => (/* reexport safe */ _apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_3__.signIn),
/* harmony export */   signInWithRedirect: () => (/* reexport safe */ _apis_signInWithRedirect_mjs__WEBPACK_IMPORTED_MODULE_16__.signInWithRedirect),
/* harmony export */   signOut: () => (/* reexport safe */ _apis_signOut_mjs__WEBPACK_IMPORTED_MODULE_18__.signOut),
/* harmony export */   signUp: () => (/* reexport safe */ _apis_signUp_mjs__WEBPACK_IMPORTED_MODULE_0__.signUp),
/* harmony export */   updateMFAPreference: () => (/* reexport safe */ _apis_updateMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_7__.updateMFAPreference),
/* harmony export */   updatePassword: () => (/* reexport safe */ _apis_updatePassword_mjs__WEBPACK_IMPORTED_MODULE_10__.updatePassword),
/* harmony export */   updateUserAttribute: () => (/* reexport safe */ _apis_updateUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_13__.updateUserAttribute),
/* harmony export */   updateUserAttributes: () => (/* reexport safe */ _apis_updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_12__.updateUserAttributes),
/* harmony export */   verifyTOTPSetup: () => (/* reexport safe */ _apis_verifyTOTPSetup_mjs__WEBPACK_IMPORTED_MODULE_9__.verifyTOTPSetup)
/* harmony export */ });
/* harmony import */ var _apis_signUp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apis/signUp.mjs */ "../auth/dist/esm/providers/cognito/apis/signUp.mjs");
/* harmony import */ var _apis_resetPassword_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apis/resetPassword.mjs */ "../auth/dist/esm/providers/cognito/apis/resetPassword.mjs");
/* harmony import */ var _apis_confirmResetPassword_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apis/confirmResetPassword.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmResetPassword.mjs");
/* harmony import */ var _apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./apis/signIn.mjs */ "../auth/dist/esm/providers/cognito/apis/signIn.mjs");
/* harmony import */ var _apis_resendSignUpCode_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./apis/resendSignUpCode.mjs */ "../auth/dist/esm/providers/cognito/apis/resendSignUpCode.mjs");
/* harmony import */ var _apis_confirmSignUp_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apis/confirmSignUp.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmSignUp.mjs");
/* harmony import */ var _apis_confirmSignIn_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./apis/confirmSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmSignIn.mjs");
/* harmony import */ var _apis_updateMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./apis/updateMFAPreference.mjs */ "../auth/dist/esm/providers/cognito/apis/updateMFAPreference.mjs");
/* harmony import */ var _apis_fetchMFAPreference_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./apis/fetchMFAPreference.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchMFAPreference.mjs");
/* harmony import */ var _apis_verifyTOTPSetup_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./apis/verifyTOTPSetup.mjs */ "../auth/dist/esm/providers/cognito/apis/verifyTOTPSetup.mjs");
/* harmony import */ var _apis_updatePassword_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./apis/updatePassword.mjs */ "../auth/dist/esm/providers/cognito/apis/updatePassword.mjs");
/* harmony import */ var _apis_setUpTOTP_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./apis/setUpTOTP.mjs */ "../auth/dist/esm/providers/cognito/apis/setUpTOTP.mjs");
/* harmony import */ var _apis_updateUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./apis/updateUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/updateUserAttributes.mjs");
/* harmony import */ var _apis_updateUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./apis/updateUserAttribute.mjs */ "../auth/dist/esm/providers/cognito/apis/updateUserAttribute.mjs");
/* harmony import */ var _apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./apis/getCurrentUser.mjs */ "../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs");
/* harmony import */ var _apis_confirmUserAttribute_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./apis/confirmUserAttribute.mjs */ "../auth/dist/esm/providers/cognito/apis/confirmUserAttribute.mjs");
/* harmony import */ var _apis_signInWithRedirect_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./apis/signInWithRedirect.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithRedirect.mjs");
/* harmony import */ var _apis_fetchUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./apis/fetchUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchUserAttributes.mjs");
/* harmony import */ var _apis_signOut_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./apis/signOut.mjs */ "../auth/dist/esm/providers/cognito/apis/signOut.mjs");
/* harmony import */ var _apis_sendUserAttributeVerificationCode_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./apis/sendUserAttributeVerificationCode.mjs */ "../auth/dist/esm/providers/cognito/apis/sendUserAttributeVerificationCode.mjs");
/* harmony import */ var _apis_deleteUserAttributes_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./apis/deleteUserAttributes.mjs */ "../auth/dist/esm/providers/cognito/apis/deleteUserAttributes.mjs");
/* harmony import */ var _apis_deleteUser_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./apis/deleteUser.mjs */ "../auth/dist/esm/providers/cognito/apis/deleteUser.mjs");
/* harmony import */ var _apis_rememberDevice_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./apis/rememberDevice.mjs */ "../auth/dist/esm/providers/cognito/apis/rememberDevice.mjs");
/* harmony import */ var _apis_forgetDevice_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./apis/forgetDevice.mjs */ "../auth/dist/esm/providers/cognito/apis/forgetDevice.mjs");
/* harmony import */ var _apis_fetchDevices_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./apis/fetchDevices.mjs */ "../auth/dist/esm/providers/cognito/apis/fetchDevices.mjs");
/* harmony import */ var _apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./apis/autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");
/* harmony import */ var _credentialsProvider_index_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./credentialsProvider/index.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/index.mjs");
/* harmony import */ var _utils_refreshAuthTokens_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils/refreshAuthTokens.mjs */ "../auth/dist/esm/providers/cognito/utils/refreshAuthTokens.mjs");
/* harmony import */ var _tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./tokenProvider/TokenStore.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs");
/* harmony import */ var _tokenProvider_TokenOrchestrator_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./tokenProvider/TokenOrchestrator.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenOrchestrator.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _credentialsProvider_credentialsProvider_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./credentialsProvider/credentialsProvider.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/credentialsProvider.mjs");
/* harmony import */ var _credentialsProvider_IdentityIdStore_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./credentialsProvider/IdentityIdStore.mjs */ "../auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdStore.mjs");

































//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.mjs":
/*!******************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CognitoUserPoolsTokenProvider: () => (/* binding */ CognitoUserPoolsTokenProvider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _utils_refreshAuthTokens_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/refreshAuthTokens.mjs */ "../auth/dist/esm/providers/cognito/utils/refreshAuthTokens.mjs");
/* harmony import */ var _TokenStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TokenStore.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs");
/* harmony import */ var _TokenOrchestrator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TokenOrchestrator.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenOrchestrator.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class CognitoUserPoolsTokenProvider {
    constructor() {
        this.authTokenStore = new _TokenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.DefaultTokenStore();
        this.authTokenStore.setKeyValueStorage(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.defaultStorage);
        this.tokenOrchestrator = new _TokenOrchestrator_mjs__WEBPACK_IMPORTED_MODULE_2__.TokenOrchestrator();
        this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore);
        this.tokenOrchestrator.setTokenRefresher(_utils_refreshAuthTokens_mjs__WEBPACK_IMPORTED_MODULE_3__.refreshAuthTokens);
    }
    getTokens({ forceRefresh } = { forceRefresh: false }) {
        return this.tokenOrchestrator.getTokens({ forceRefresh });
    }
    setKeyValueStorage(keyValueStorage) {
        this.authTokenStore.setKeyValueStorage(keyValueStorage);
    }
    setAuthConfig(authConfig) {
        this.authTokenStore.setAuthConfig(authConfig);
        this.tokenOrchestrator.setAuthConfig(authConfig);
    }
}


//# sourceMappingURL=CognitoUserPoolsTokenProvider.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/TokenOrchestrator.mjs":
/*!******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/TokenOrchestrator.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TokenOrchestrator: () => (/* binding */ TokenOrchestrator)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/isBrowser.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../errors/utils/assertServiceError.mjs */ "../auth/dist/esm/errors/utils/assertServiceError.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/oauth/oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");
/* harmony import */ var _utils_oauth_inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/oauth/inflightPromise.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/inflightPromise.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class TokenOrchestrator {
    constructor() {
        this.waitForInflightOAuth = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.isBrowser)()
            ? async () => {
                if (!(await _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthStore.loadOAuthInFlight())) {
                    return;
                }
                if (this.inflightPromise) {
                    return this.inflightPromise;
                }
                // when there is valid oauth config and there is an inflight oauth flow, try
                // to block async calls that require fetching tokens before the oauth flow completes
                // e.g. getCurrentUser, fetchAuthSession etc.
                this.inflightPromise = new Promise((resolve, _reject) => {
                    (0,_utils_oauth_inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_2__.addInflightPromise)(resolve);
                });
                return this.inflightPromise;
            }
            : async () => {
                // no-op for non-browser environments
            };
    }
    setAuthConfig(authConfig) {
        _utils_oauth_oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthStore.setAuthConfig(authConfig.Cognito);
        this.authConfig = authConfig;
    }
    setTokenRefresher(tokenRefresher) {
        this.tokenRefresher = tokenRefresher;
    }
    setAuthTokenStore(tokenStore) {
        this.tokenStore = tokenStore;
    }
    getTokenStore() {
        if (!this.tokenStore) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthError({
                name: 'EmptyTokenStoreException',
                message: 'TokenStore not set',
            });
        }
        return this.tokenStore;
    }
    getTokenRefresher() {
        if (!this.tokenRefresher) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthError({
                name: 'EmptyTokenRefresherException',
                message: 'TokenRefresher not set',
            });
        }
        return this.tokenRefresher;
    }
    async getTokens(options) {
        let tokens;
        try {
            (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__.assertTokenProviderConfig)(this.authConfig?.Cognito);
        }
        catch (_err) {
            // Token provider not configured
            return null;
        }
        await this.waitForInflightOAuth();
        this.inflightPromise = undefined;
        tokens = await this.getTokenStore().loadTokens();
        const username = await this.getTokenStore().getLastAuthUser();
        if (tokens === null) {
            return null;
        }
        const idTokenExpired = !!tokens?.idToken &&
            (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.isTokenExpired)({
                expiresAt: (tokens.idToken?.payload?.exp ?? 0) * 1000,
                clockDrift: tokens.clockDrift ?? 0,
            });
        const accessTokenExpired = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.isTokenExpired)({
            expiresAt: (tokens.accessToken?.payload?.exp ?? 0) * 1000,
            clockDrift: tokens.clockDrift ?? 0,
        });
        if (options?.forceRefresh || idTokenExpired || accessTokenExpired) {
            tokens = await this.refreshTokens({
                tokens,
                username,
            });
            if (tokens === null) {
                return null;
            }
        }
        return {
            accessToken: tokens?.accessToken,
            idToken: tokens?.idToken,
            signInDetails: tokens?.signInDetails,
        };
    }
    async refreshTokens({ tokens, username, }) {
        try {
            const { signInDetails } = tokens;
            const newTokens = await this.getTokenRefresher()({
                tokens,
                authConfig: this.authConfig,
                username,
            });
            newTokens.signInDetails = signInDetails;
            await this.setTokens({ tokens: newTokens });
            _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.Hub.dispatch('auth', { event: 'tokenRefresh' }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.AMPLIFY_SYMBOL);
            return newTokens;
        }
        catch (err) {
            return this.handleErrors(err);
        }
    }
    handleErrors(err) {
        (0,_errors_utils_assertServiceError_mjs__WEBPACK_IMPORTED_MODULE_7__.assertServiceError)(err);
        if (err.name !== _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.AmplifyErrorCode.NetworkError) {
            // TODO(v6): Check errors on client
            this.clearTokens();
        }
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.Hub.dispatch('auth', {
            event: 'tokenRefresh_failure',
            data: { error: err },
        }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.AMPLIFY_SYMBOL);
        if (err.name.startsWith('NotAuthorizedException')) {
            return null;
        }
        throw err;
    }
    async setTokens({ tokens }) {
        return this.getTokenStore().storeTokens(tokens);
    }
    async clearTokens() {
        return this.getTokenStore().clearTokens();
    }
    getDeviceMetadata(username) {
        return this.getTokenStore().getDeviceMetadata(username);
    }
    clearDeviceMetadata(username) {
        return this.getTokenStore().clearDeviceMetadata(username);
    }
    setOAuthMetadata(metadata) {
        return this.getTokenStore().setOAuthMetadata(metadata);
    }
    getOAuthMetadata() {
        return this.getTokenStore().getOAuthMetadata();
    }
}


//# sourceMappingURL=TokenOrchestrator.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultTokenStore: () => (/* binding */ DefaultTokenStore),
/* harmony export */   createKeysForAuthStorage: () => (/* binding */ createKeysForAuthStorage),
/* harmony export */   getAuthStorageKeys: () => (/* binding */ getAuthStorageKeys)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/types.mjs");
/* harmony import */ var _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errorHelpers.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/errorHelpers.mjs");





class DefaultTokenStore {
    constructor() {
        this.name = 'CognitoIdentityServiceProvider'; // To be backwards compatible with V5, no migration needed
    }
    getKeyValueStorage() {
        if (!this.keyValueStorage) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
                name: 'KeyValueStorageNotFoundException',
                message: 'KeyValueStorage was not found in TokenStore',
            });
        }
        return this.keyValueStorage;
    }
    setKeyValueStorage(keyValueStorage) {
        this.keyValueStorage = keyValueStorage;
    }
    setAuthConfig(authConfig) {
        this.authConfig = authConfig;
    }
    async loadTokens() {
        // TODO(v6): migration logic should be here
        // Reading V5 tokens old format
        try {
            const authKeys = await this.getAuthKeys();
            const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);
            if (!accessTokenString) {
                throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
                    name: 'NoSessionFoundException',
                    message: 'Auth session was not found. Make sure to call signIn.',
                });
            }
            const accessToken = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.decodeJWT)(accessTokenString);
            const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);
            const idToken = itString ? (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.decodeJWT)(itString) : undefined;
            const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ??
                undefined;
            const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';
            const clockDrift = Number.parseInt(clockDriftString);
            const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);
            const tokens = {
                accessToken,
                idToken,
                refreshToken,
                deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,
                clockDrift,
                username: await this.getLastAuthUser(),
            };
            if (signInDetails) {
                tokens.signInDetails = JSON.parse(signInDetails);
            }
            return tokens;
        }
        catch (err) {
            return null;
        }
    }
    async storeTokens(tokens) {
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(tokens !== undefined, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.TokenProviderErrorCode.InvalidAuthTokens);
        await this.clearTokens();
        const lastAuthUser = tokens.username;
        await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);
        const authKeys = await this.getAuthKeys();
        await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());
        if (tokens.idToken) {
            await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());
        }
        if (tokens.refreshToken) {
            await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);
        }
        if (tokens.deviceMetadata) {
            if (tokens.deviceMetadata.deviceKey) {
                await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);
            }
            if (tokens.deviceMetadata.deviceGroupKey) {
                await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);
            }
            await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);
        }
        if (tokens.signInDetails) {
            await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));
        }
        await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);
    }
    async clearTokens() {
        const authKeys = await this.getAuthKeys();
        // Not calling clear because it can remove data that is not managed by AuthTokenStore
        await Promise.all([
            this.getKeyValueStorage().removeItem(authKeys.accessToken),
            this.getKeyValueStorage().removeItem(authKeys.idToken),
            this.getKeyValueStorage().removeItem(authKeys.clockDrift),
            this.getKeyValueStorage().removeItem(authKeys.refreshToken),
            this.getKeyValueStorage().removeItem(authKeys.signInDetails),
            this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),
            this.getKeyValueStorage().removeItem(authKeys.oauthMetadata),
        ]);
    }
    async getDeviceMetadata(username) {
        const authKeys = await this.getAuthKeys(username);
        const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);
        const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);
        const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);
        return randomPassword && deviceGroupKey && deviceKey
            ? {
                deviceKey,
                deviceGroupKey,
                randomPassword,
            }
            : null;
    }
    async clearDeviceMetadata(username) {
        const authKeys = await this.getAuthKeys(username);
        await Promise.all([
            this.getKeyValueStorage().removeItem(authKeys.deviceKey),
            this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey),
            this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey),
        ]);
    }
    async getAuthKeys(username) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(this.authConfig?.Cognito);
        const lastAuthUser = username ?? (await this.getLastAuthUser());
        return createKeysForAuthStorage(this.name, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);
    }
    getLastAuthUserKey() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.assertTokenProviderConfig)(this.authConfig?.Cognito);
        const identifier = this.authConfig.Cognito.userPoolClientId;
        return `${this.name}.${identifier}.LastAuthUser`;
    }
    async getLastAuthUser() {
        const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ??
            'username';
        return lastAuthUser;
    }
    async setOAuthMetadata(metadata) {
        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();
        await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));
    }
    async getOAuthMetadata() {
        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();
        const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);
        return oauthMetadata && JSON.parse(oauthMetadata);
    }
}
const createKeysForAuthStorage = (provider, identifier) => {
    return getAuthStorageKeys(_types_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthTokenStorageKeys)(`${provider}`, identifier);
};
function getAuthStorageKeys(authKeys) {
    const keys = Object.values({ ...authKeys });
    return (prefix, identifier) => keys.reduce((acc, authKey) => ({
        ...acc,
        [authKey]: `${prefix}.${identifier}.${authKey}`,
    }), {});
}


//# sourceMappingURL=TokenStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cacheCognitoTokens: () => (/* binding */ cacheCognitoTokens)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/AmplifyError.mjs");
/* harmony import */ var _tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
async function cacheCognitoTokens(AuthenticationResult) {
    if (AuthenticationResult.AccessToken) {
        const accessToken = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.decodeJWT)(AuthenticationResult.AccessToken);
        const accessTokenIssuedAtInMillis = (accessToken.payload.iat || 0) * 1000;
        const currentTime = new Date().getTime();
        const clockDrift = accessTokenIssuedAtInMillis > 0
            ? accessTokenIssuedAtInMillis - currentTime
            : 0;
        let idToken;
        let refreshToken;
        let deviceMetadata;
        if (AuthenticationResult.RefreshToken) {
            refreshToken = AuthenticationResult.RefreshToken;
        }
        if (AuthenticationResult.IdToken) {
            idToken = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.decodeJWT)(AuthenticationResult.IdToken);
        }
        if (AuthenticationResult?.NewDeviceMetadata) {
            deviceMetadata = AuthenticationResult.NewDeviceMetadata;
        }
        const tokens = {
            accessToken,
            idToken,
            refreshToken,
            clockDrift,
            deviceMetadata,
            username: AuthenticationResult.username,
        };
        if (AuthenticationResult?.signInDetails) {
            tokens.signInDetails = AuthenticationResult.signInDetails;
        }
        await _tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_1__.tokenOrchestrator.setTokens({
            tokens,
        });
    }
    else {
        // This would be a service error
        throw new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyError({
            message: 'Invalid tokens',
            name: 'InvalidTokens',
            recoverySuggestion: 'Check Cognito UserPool settings',
        });
    }
}


//# sourceMappingURL=cacheTokens.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/errorHelpers.mjs":
/*!*************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/errorHelpers.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TokenProviderErrorCode: () => (/* binding */ TokenProviderErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/createAssertionFunction.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var TokenProviderErrorCode;
(function (TokenProviderErrorCode) {
    TokenProviderErrorCode["InvalidAuthTokens"] = "InvalidAuthTokens";
})(TokenProviderErrorCode || (TokenProviderErrorCode = {}));
const tokenValidationErrorMap = {
    [TokenProviderErrorCode.InvalidAuthTokens]: {
        message: 'Invalid tokens.',
        recoverySuggestion: 'Make sure the tokens are valid.',
    },
};
const assert = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(tokenValidationErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs":
/*!**************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoUserPoolsTokenProvider: () => (/* binding */ cognitoUserPoolsTokenProvider),
/* harmony export */   tokenOrchestrator: () => (/* binding */ tokenOrchestrator)
/* harmony export */ });
/* harmony import */ var _CognitoUserPoolsTokenProvider_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CognitoUserPoolsTokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * The default provider for the JWT access token and ID token issued from the configured Cognito user pool. It manages
 * the refresh and storage of the tokens. It stores the tokens in `window.localStorage` if available, and falls back to
 * in-memory storage if not.
 */
const cognitoUserPoolsTokenProvider = new _CognitoUserPoolsTokenProvider_mjs__WEBPACK_IMPORTED_MODULE_0__.CognitoUserPoolsTokenProvider();
const { tokenOrchestrator } = cognitoUserPoolsTokenProvider;


//# sourceMappingURL=tokenProvider.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/tokenProvider/types.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/tokenProvider/types.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthTokenStorageKeys: () => (/* binding */ AuthTokenStorageKeys)
/* harmony export */ });
const AuthTokenStorageKeys = {
    accessToken: 'accessToken',
    idToken: 'idToken',
    oidcProvider: 'oidcProvider',
    clockDrift: 'clockDrift',
    refreshToken: 'refreshToken',
    deviceKey: 'deviceKey',
    randomPasswordKey: 'randomPasswordKey',
    deviceGroupKey: 'deviceGroupKey',
    signInDetails: 'signInDetails',
    oauthMetadata: 'oauthMetadata',
};


//# sourceMappingURL=types.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/types/errors.mjs":
/*!***********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/types/errors.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssociateSoftwareTokenException: () => (/* binding */ AssociateSoftwareTokenException),
/* harmony export */   ChangePasswordException: () => (/* binding */ ChangePasswordException),
/* harmony export */   ConfirmDeviceException: () => (/* binding */ ConfirmDeviceException),
/* harmony export */   ConfirmForgotPasswordException: () => (/* binding */ ConfirmForgotPasswordException),
/* harmony export */   ConfirmSignUpException: () => (/* binding */ ConfirmSignUpException),
/* harmony export */   DeleteUserAttributesException: () => (/* binding */ DeleteUserAttributesException),
/* harmony export */   DeleteUserException: () => (/* binding */ DeleteUserException),
/* harmony export */   ForgetDeviceException: () => (/* binding */ ForgetDeviceException),
/* harmony export */   ForgotPasswordException: () => (/* binding */ ForgotPasswordException),
/* harmony export */   GetCredentialsForIdentityException: () => (/* binding */ GetCredentialsForIdentityException),
/* harmony export */   GetIdException: () => (/* binding */ GetIdException),
/* harmony export */   GetUserAttributeVerificationException: () => (/* binding */ GetUserAttributeVerificationException),
/* harmony export */   GetUserException: () => (/* binding */ GetUserException),
/* harmony export */   GlobalSignOutException: () => (/* binding */ GlobalSignOutException),
/* harmony export */   InitiateAuthException: () => (/* binding */ InitiateAuthException),
/* harmony export */   ListDevicesException: () => (/* binding */ ListDevicesException),
/* harmony export */   ResendConfirmationException: () => (/* binding */ ResendConfirmationException),
/* harmony export */   RespondToAuthChallengeException: () => (/* binding */ RespondToAuthChallengeException),
/* harmony export */   SETUP_TOTP_EXCEPTION: () => (/* binding */ SETUP_TOTP_EXCEPTION),
/* harmony export */   SetUserMFAPreferenceException: () => (/* binding */ SetUserMFAPreferenceException),
/* harmony export */   SignUpException: () => (/* binding */ SignUpException),
/* harmony export */   UpdateDeviceStatusException: () => (/* binding */ UpdateDeviceStatusException),
/* harmony export */   UpdateUserAttributesException: () => (/* binding */ UpdateUserAttributesException),
/* harmony export */   VerifySoftwareTokenException: () => (/* binding */ VerifySoftwareTokenException),
/* harmony export */   VerifyUserAttributeException: () => (/* binding */ VerifyUserAttributeException)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var AssociateSoftwareTokenException;
(function (AssociateSoftwareTokenException) {
    AssociateSoftwareTokenException["ConcurrentModificationException"] = "ConcurrentModificationException";
    AssociateSoftwareTokenException["ForbiddenException"] = "ForbiddenException";
    AssociateSoftwareTokenException["InternalErrorException"] = "InternalErrorException";
    AssociateSoftwareTokenException["InvalidParameterException"] = "InvalidParameterException";
    AssociateSoftwareTokenException["NotAuthorizedException"] = "NotAuthorizedException";
    AssociateSoftwareTokenException["ResourceNotFoundException"] = "ResourceNotFoundException";
    AssociateSoftwareTokenException["SoftwareTokenMFANotFoundException"] = "SoftwareTokenMFANotFoundException";
})(AssociateSoftwareTokenException || (AssociateSoftwareTokenException = {}));
var ChangePasswordException;
(function (ChangePasswordException) {
    ChangePasswordException["ForbiddenException"] = "ForbiddenException";
    ChangePasswordException["InternalErrorException"] = "InternalErrorException";
    ChangePasswordException["InvalidParameterException"] = "InvalidParameterException";
    ChangePasswordException["InvalidPasswordException"] = "InvalidPasswordException";
    ChangePasswordException["LimitExceededException"] = "LimitExceededException";
    ChangePasswordException["NotAuthorizedException"] = "NotAuthorizedException";
    ChangePasswordException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    ChangePasswordException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ChangePasswordException["TooManyRequestsException"] = "TooManyRequestsException";
    ChangePasswordException["UserNotConfirmedException"] = "UserNotConfirmedException";
    ChangePasswordException["UserNotFoundException"] = "UserNotFoundException";
})(ChangePasswordException || (ChangePasswordException = {}));
var ConfirmDeviceException;
(function (ConfirmDeviceException) {
    ConfirmDeviceException["ForbiddenException"] = "ForbiddenException";
    ConfirmDeviceException["InternalErrorException"] = "InternalErrorException";
    ConfirmDeviceException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    ConfirmDeviceException["InvalidParameterException"] = "InvalidParameterException";
    ConfirmDeviceException["InvalidPasswordException"] = "InvalidPasswordException";
    ConfirmDeviceException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    ConfirmDeviceException["NotAuthorizedException"] = "NotAuthorizedException";
    ConfirmDeviceException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    ConfirmDeviceException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ConfirmDeviceException["TooManyRequestsException"] = "TooManyRequestsException";
    ConfirmDeviceException["UsernameExistsException"] = "UsernameExistsException";
    ConfirmDeviceException["UserNotConfirmedException"] = "UserNotConfirmedException";
    ConfirmDeviceException["UserNotFoundException"] = "UserNotFoundException";
})(ConfirmDeviceException || (ConfirmDeviceException = {}));
var ConfirmForgotPasswordException;
(function (ConfirmForgotPasswordException) {
    ConfirmForgotPasswordException["CodeMismatchException"] = "CodeMismatchException";
    ConfirmForgotPasswordException["ExpiredCodeException"] = "ExpiredCodeException";
    ConfirmForgotPasswordException["ForbiddenException"] = "ForbiddenException";
    ConfirmForgotPasswordException["InternalErrorException"] = "InternalErrorException";
    ConfirmForgotPasswordException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    ConfirmForgotPasswordException["InvalidParameterException"] = "InvalidParameterException";
    ConfirmForgotPasswordException["InvalidPasswordException"] = "InvalidPasswordException";
    ConfirmForgotPasswordException["LimitExceededException"] = "LimitExceededException";
    ConfirmForgotPasswordException["NotAuthorizedException"] = "NotAuthorizedException";
    ConfirmForgotPasswordException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ConfirmForgotPasswordException["TooManyFailedAttemptsException"] = "TooManyFailedAttemptsException";
    ConfirmForgotPasswordException["TooManyRequestsException"] = "TooManyRequestsException";
    ConfirmForgotPasswordException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    ConfirmForgotPasswordException["UserLambdaValidationException"] = "UserLambdaValidationException";
    ConfirmForgotPasswordException["UserNotConfirmedException"] = "UserNotConfirmedException";
    ConfirmForgotPasswordException["UserNotFoundException"] = "UserNotFoundException";
})(ConfirmForgotPasswordException || (ConfirmForgotPasswordException = {}));
var ConfirmSignUpException;
(function (ConfirmSignUpException) {
    ConfirmSignUpException["AliasExistsException"] = "AliasExistsException";
    ConfirmSignUpException["CodeMismatchException"] = "CodeMismatchException";
    ConfirmSignUpException["ExpiredCodeException"] = "ExpiredCodeException";
    ConfirmSignUpException["ForbiddenException"] = "ForbiddenException";
    ConfirmSignUpException["InternalErrorException"] = "InternalErrorException";
    ConfirmSignUpException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    ConfirmSignUpException["InvalidParameterException"] = "InvalidParameterException";
    ConfirmSignUpException["LimitExceededException"] = "LimitExceededException";
    ConfirmSignUpException["NotAuthorizedException"] = "NotAuthorizedException";
    ConfirmSignUpException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ConfirmSignUpException["TooManyFailedAttemptsException"] = "TooManyFailedAttemptsException";
    ConfirmSignUpException["TooManyRequestsException"] = "TooManyRequestsException";
    ConfirmSignUpException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    ConfirmSignUpException["UserLambdaValidationException"] = "UserLambdaValidationException";
    ConfirmSignUpException["UserNotFoundException"] = "UserNotFoundException";
})(ConfirmSignUpException || (ConfirmSignUpException = {}));
var DeleteUserAttributesException;
(function (DeleteUserAttributesException) {
    DeleteUserAttributesException["ForbiddenException"] = "ForbiddenException";
    DeleteUserAttributesException["InternalErrorException"] = "InternalErrorException";
    DeleteUserAttributesException["InvalidParameterException"] = "InvalidParameterException";
    DeleteUserAttributesException["NotAuthorizedException"] = "NotAuthorizedException";
    DeleteUserAttributesException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    DeleteUserAttributesException["ResourceNotFoundException"] = "ResourceNotFoundException";
    DeleteUserAttributesException["TooManyRequestsException"] = "TooManyRequestsException";
    DeleteUserAttributesException["UserNotConfirmedException"] = "UserNotConfirmedException";
    DeleteUserAttributesException["UserNotFoundException"] = "UserNotFoundException";
})(DeleteUserAttributesException || (DeleteUserAttributesException = {}));
var DeleteUserException;
(function (DeleteUserException) {
    DeleteUserException["ForbiddenException"] = "ForbiddenException";
    DeleteUserException["InternalErrorException"] = "InternalErrorException";
    DeleteUserException["InvalidParameterException"] = "InvalidParameterException";
    DeleteUserException["NotAuthorizedException"] = "NotAuthorizedException";
    DeleteUserException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    DeleteUserException["ResourceNotFoundException"] = "ResourceNotFoundException";
    DeleteUserException["TooManyRequestsException"] = "TooManyRequestsException";
    DeleteUserException["UserNotConfirmedException"] = "UserNotConfirmedException";
    DeleteUserException["UserNotFoundException"] = "UserNotFoundException";
})(DeleteUserException || (DeleteUserException = {}));
var ForgetDeviceException;
(function (ForgetDeviceException) {
    ForgetDeviceException["ForbiddenException"] = "ForbiddenException";
    ForgetDeviceException["InternalErrorException"] = "InternalErrorException";
    ForgetDeviceException["InvalidParameterException"] = "InvalidParameterException";
    ForgetDeviceException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    ForgetDeviceException["NotAuthorizedException"] = "NotAuthorizedException";
    ForgetDeviceException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    ForgetDeviceException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ForgetDeviceException["TooManyRequestsException"] = "TooManyRequestsException";
    ForgetDeviceException["UserNotConfirmedException"] = "UserNotConfirmedException";
    ForgetDeviceException["UserNotFoundException"] = "UserNotFoundException";
})(ForgetDeviceException || (ForgetDeviceException = {}));
var ForgotPasswordException;
(function (ForgotPasswordException) {
    ForgotPasswordException["CodeDeliveryFailureException"] = "CodeDeliveryFailureException";
    ForgotPasswordException["ForbiddenException"] = "ForbiddenException";
    ForgotPasswordException["InternalErrorException"] = "InternalErrorException";
    ForgotPasswordException["InvalidEmailRoleAccessPolicyException"] = "InvalidEmailRoleAccessPolicyException";
    ForgotPasswordException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    ForgotPasswordException["InvalidParameterException"] = "InvalidParameterException";
    ForgotPasswordException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    ForgotPasswordException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    ForgotPasswordException["LimitExceededException"] = "LimitExceededException";
    ForgotPasswordException["NotAuthorizedException"] = "NotAuthorizedException";
    ForgotPasswordException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ForgotPasswordException["TooManyRequestsException"] = "TooManyRequestsException";
    ForgotPasswordException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    ForgotPasswordException["UserLambdaValidationException"] = "UserLambdaValidationException";
    ForgotPasswordException["UserNotFoundException"] = "UserNotFoundException";
})(ForgotPasswordException || (ForgotPasswordException = {}));
var GetUserException;
(function (GetUserException) {
    GetUserException["ForbiddenException"] = "ForbiddenException";
    GetUserException["InternalErrorException"] = "InternalErrorException";
    GetUserException["InvalidParameterException"] = "InvalidParameterException";
    GetUserException["NotAuthorizedException"] = "NotAuthorizedException";
    GetUserException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    GetUserException["ResourceNotFoundException"] = "ResourceNotFoundException";
    GetUserException["TooManyRequestsException"] = "TooManyRequestsException";
    GetUserException["UserNotConfirmedException"] = "UserNotConfirmedException";
    GetUserException["UserNotFoundException"] = "UserNotFoundException";
})(GetUserException || (GetUserException = {}));
var GetIdException;
(function (GetIdException) {
    GetIdException["ExternalServiceException"] = "ExternalServiceException";
    GetIdException["InternalErrorException"] = "InternalErrorException";
    GetIdException["InvalidParameterException"] = "InvalidParameterException";
    GetIdException["LimitExceededException"] = "LimitExceededException";
    GetIdException["NotAuthorizedException"] = "NotAuthorizedException";
    GetIdException["ResourceConflictException"] = "ResourceConflictException";
    GetIdException["ResourceNotFoundException"] = "ResourceNotFoundException";
    GetIdException["TooManyRequestsException"] = "TooManyRequestsException";
})(GetIdException || (GetIdException = {}));
var GetCredentialsForIdentityException;
(function (GetCredentialsForIdentityException) {
    GetCredentialsForIdentityException["ExternalServiceException"] = "ExternalServiceException";
    GetCredentialsForIdentityException["InternalErrorException"] = "InternalErrorException";
    GetCredentialsForIdentityException["InvalidIdentityPoolConfigurationException"] = "InvalidIdentityPoolConfigurationException";
    GetCredentialsForIdentityException["InvalidParameterException"] = "InvalidParameterException";
    GetCredentialsForIdentityException["NotAuthorizedException"] = "NotAuthorizedException";
    GetCredentialsForIdentityException["ResourceConflictException"] = "ResourceConflictException";
    GetCredentialsForIdentityException["ResourceNotFoundException"] = "ResourceNotFoundException";
    GetCredentialsForIdentityException["TooManyRequestsException"] = "TooManyRequestsException";
})(GetCredentialsForIdentityException || (GetCredentialsForIdentityException = {}));
var GetUserAttributeVerificationException;
(function (GetUserAttributeVerificationException) {
    GetUserAttributeVerificationException["CodeDeliveryFailureException"] = "CodeDeliveryFailureException";
    GetUserAttributeVerificationException["ForbiddenException"] = "ForbiddenException";
    GetUserAttributeVerificationException["InternalErrorException"] = "InternalErrorException";
    GetUserAttributeVerificationException["InvalidEmailRoleAccessPolicyException"] = "InvalidEmailRoleAccessPolicyException";
    GetUserAttributeVerificationException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    GetUserAttributeVerificationException["InvalidParameterException"] = "InvalidParameterException";
    GetUserAttributeVerificationException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    GetUserAttributeVerificationException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    GetUserAttributeVerificationException["LimitExceededException"] = "LimitExceededException";
    GetUserAttributeVerificationException["NotAuthorizedException"] = "NotAuthorizedException";
    GetUserAttributeVerificationException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    GetUserAttributeVerificationException["ResourceNotFoundException"] = "ResourceNotFoundException";
    GetUserAttributeVerificationException["TooManyRequestsException"] = "TooManyRequestsException";
    GetUserAttributeVerificationException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    GetUserAttributeVerificationException["UserLambdaValidationException"] = "UserLambdaValidationException";
    GetUserAttributeVerificationException["UserNotConfirmedException"] = "UserNotConfirmedException";
    GetUserAttributeVerificationException["UserNotFoundException"] = "UserNotFoundException";
})(GetUserAttributeVerificationException || (GetUserAttributeVerificationException = {}));
var GlobalSignOutException;
(function (GlobalSignOutException) {
    GlobalSignOutException["ForbiddenException"] = "ForbiddenException";
    GlobalSignOutException["InternalErrorException"] = "InternalErrorException";
    GlobalSignOutException["InvalidParameterException"] = "InvalidParameterException";
    GlobalSignOutException["NotAuthorizedException"] = "NotAuthorizedException";
    GlobalSignOutException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    GlobalSignOutException["ResourceNotFoundException"] = "ResourceNotFoundException";
    GlobalSignOutException["TooManyRequestsException"] = "TooManyRequestsException";
    GlobalSignOutException["UserNotConfirmedException"] = "UserNotConfirmedException";
})(GlobalSignOutException || (GlobalSignOutException = {}));
var InitiateAuthException;
(function (InitiateAuthException) {
    InitiateAuthException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    InitiateAuthException["ForbiddenException"] = "ForbiddenException";
    InitiateAuthException["InternalErrorException"] = "InternalErrorException";
    InitiateAuthException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    InitiateAuthException["InvalidParameterException"] = "InvalidParameterException";
    InitiateAuthException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    InitiateAuthException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    InitiateAuthException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    InitiateAuthException["NotAuthorizedException"] = "NotAuthorizedException";
    InitiateAuthException["ResourceNotFoundException"] = "ResourceNotFoundException";
    InitiateAuthException["TooManyRequestsException"] = "TooManyRequestsException";
    InitiateAuthException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    InitiateAuthException["UserLambdaValidationException"] = "UserLambdaValidationException";
    InitiateAuthException["UserNotConfirmedException"] = "UserNotConfirmedException";
    InitiateAuthException["UserNotFoundException"] = "UserNotFoundException";
})(InitiateAuthException || (InitiateAuthException = {}));
var ResendConfirmationException;
(function (ResendConfirmationException) {
    ResendConfirmationException["CodeDeliveryFailureException"] = "CodeDeliveryFailureException";
    ResendConfirmationException["ForbiddenException"] = "ForbiddenException";
    ResendConfirmationException["InternalErrorException"] = "InternalErrorException";
    ResendConfirmationException["InvalidEmailRoleAccessPolicyException"] = "InvalidEmailRoleAccessPolicyException";
    ResendConfirmationException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    ResendConfirmationException["InvalidParameterException"] = "InvalidParameterException";
    ResendConfirmationException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    ResendConfirmationException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    ResendConfirmationException["LimitExceededException"] = "LimitExceededException";
    ResendConfirmationException["NotAuthorizedException"] = "NotAuthorizedException";
    ResendConfirmationException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ResendConfirmationException["TooManyRequestsException"] = "TooManyRequestsException";
    ResendConfirmationException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    ResendConfirmationException["UserLambdaValidationException"] = "UserLambdaValidationException";
    ResendConfirmationException["UserNotFoundException"] = "UserNotFoundException";
})(ResendConfirmationException || (ResendConfirmationException = {}));
var RespondToAuthChallengeException;
(function (RespondToAuthChallengeException) {
    RespondToAuthChallengeException["AliasExistsException"] = "AliasExistsException";
    RespondToAuthChallengeException["CodeMismatchException"] = "CodeMismatchException";
    RespondToAuthChallengeException["ExpiredCodeException"] = "ExpiredCodeException";
    RespondToAuthChallengeException["ForbiddenException"] = "ForbiddenException";
    RespondToAuthChallengeException["InternalErrorException"] = "InternalErrorException";
    RespondToAuthChallengeException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    RespondToAuthChallengeException["InvalidParameterException"] = "InvalidParameterException";
    RespondToAuthChallengeException["InvalidPasswordException"] = "InvalidPasswordException";
    RespondToAuthChallengeException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    RespondToAuthChallengeException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    RespondToAuthChallengeException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    RespondToAuthChallengeException["MFAMethodNotFoundException"] = "MFAMethodNotFoundException";
    RespondToAuthChallengeException["NotAuthorizedException"] = "NotAuthorizedException";
    RespondToAuthChallengeException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    RespondToAuthChallengeException["ResourceNotFoundException"] = "ResourceNotFoundException";
    RespondToAuthChallengeException["SoftwareTokenMFANotFoundException"] = "SoftwareTokenMFANotFoundException";
    RespondToAuthChallengeException["TooManyRequestsException"] = "TooManyRequestsException";
    RespondToAuthChallengeException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    RespondToAuthChallengeException["UserLambdaValidationException"] = "UserLambdaValidationException";
    RespondToAuthChallengeException["UserNotConfirmedException"] = "UserNotConfirmedException";
    RespondToAuthChallengeException["UserNotFoundException"] = "UserNotFoundException";
})(RespondToAuthChallengeException || (RespondToAuthChallengeException = {}));
var SetUserMFAPreferenceException;
(function (SetUserMFAPreferenceException) {
    SetUserMFAPreferenceException["ForbiddenException"] = "ForbiddenException";
    SetUserMFAPreferenceException["InternalErrorException"] = "InternalErrorException";
    SetUserMFAPreferenceException["InvalidParameterException"] = "InvalidParameterException";
    SetUserMFAPreferenceException["NotAuthorizedException"] = "NotAuthorizedException";
    SetUserMFAPreferenceException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    SetUserMFAPreferenceException["ResourceNotFoundException"] = "ResourceNotFoundException";
    SetUserMFAPreferenceException["UserNotConfirmedException"] = "UserNotConfirmedException";
    SetUserMFAPreferenceException["UserNotFoundException"] = "UserNotFoundException";
})(SetUserMFAPreferenceException || (SetUserMFAPreferenceException = {}));
var SignUpException;
(function (SignUpException) {
    SignUpException["CodeDeliveryFailureException"] = "CodeDeliveryFailureException";
    SignUpException["InternalErrorException"] = "InternalErrorException";
    SignUpException["InvalidEmailRoleAccessPolicyException"] = "InvalidEmailRoleAccessPolicyException";
    SignUpException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    SignUpException["InvalidParameterException"] = "InvalidParameterException";
    SignUpException["InvalidPasswordException"] = "InvalidPasswordException";
    SignUpException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    SignUpException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    SignUpException["NotAuthorizedException"] = "NotAuthorizedException";
    SignUpException["ResourceNotFoundException"] = "ResourceNotFoundException";
    SignUpException["TooManyRequestsException"] = "TooManyRequestsException";
    SignUpException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    SignUpException["UserLambdaValidationException"] = "UserLambdaValidationException";
    SignUpException["UsernameExistsException"] = "UsernameExistsException";
})(SignUpException || (SignUpException = {}));
var UpdateUserAttributesException;
(function (UpdateUserAttributesException) {
    UpdateUserAttributesException["AliasExistsException"] = "AliasExistsException";
    UpdateUserAttributesException["CodeDeliveryFailureException"] = "CodeDeliveryFailureException";
    UpdateUserAttributesException["CodeMismatchException"] = "CodeMismatchException";
    UpdateUserAttributesException["ExpiredCodeException"] = "ExpiredCodeException";
    UpdateUserAttributesException["ForbiddenException"] = "ForbiddenException";
    UpdateUserAttributesException["InternalErrorException"] = "InternalErrorException";
    UpdateUserAttributesException["InvalidEmailRoleAccessPolicyException"] = "InvalidEmailRoleAccessPolicyException";
    UpdateUserAttributesException["InvalidLambdaResponseException"] = "InvalidLambdaResponseException";
    UpdateUserAttributesException["InvalidParameterException"] = "InvalidParameterException";
    UpdateUserAttributesException["InvalidSmsRoleAccessPolicyException"] = "InvalidSmsRoleAccessPolicyException";
    UpdateUserAttributesException["InvalidSmsRoleTrustRelationshipException"] = "InvalidSmsRoleTrustRelationshipException";
    UpdateUserAttributesException["NotAuthorizedException"] = "NotAuthorizedException";
    UpdateUserAttributesException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    UpdateUserAttributesException["ResourceNotFoundException"] = "ResourceNotFoundException";
    UpdateUserAttributesException["TooManyRequestsException"] = "TooManyRequestsException";
    UpdateUserAttributesException["UnexpectedLambdaException"] = "UnexpectedLambdaException";
    UpdateUserAttributesException["UserLambdaValidationException"] = "UserLambdaValidationException";
    UpdateUserAttributesException["UserNotConfirmedException"] = "UserNotConfirmedException";
    UpdateUserAttributesException["UserNotFoundException"] = "UserNotFoundException";
})(UpdateUserAttributesException || (UpdateUserAttributesException = {}));
var VerifySoftwareTokenException;
(function (VerifySoftwareTokenException) {
    VerifySoftwareTokenException["CodeMismatchException"] = "CodeMismatchException";
    VerifySoftwareTokenException["EnableSoftwareTokenMFAException"] = "EnableSoftwareTokenMFAException";
    VerifySoftwareTokenException["ForbiddenException"] = "ForbiddenException";
    VerifySoftwareTokenException["InternalErrorException"] = "InternalErrorException";
    VerifySoftwareTokenException["InvalidParameterException"] = "InvalidParameterException";
    VerifySoftwareTokenException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    VerifySoftwareTokenException["NotAuthorizedException"] = "NotAuthorizedException";
    VerifySoftwareTokenException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    VerifySoftwareTokenException["ResourceNotFoundException"] = "ResourceNotFoundException";
    VerifySoftwareTokenException["SoftwareTokenMFANotFoundException"] = "SoftwareTokenMFANotFoundException";
    VerifySoftwareTokenException["TooManyRequestsException"] = "TooManyRequestsException";
    VerifySoftwareTokenException["UserNotConfirmedException"] = "UserNotConfirmedException";
    VerifySoftwareTokenException["UserNotFoundException"] = "UserNotFoundException";
})(VerifySoftwareTokenException || (VerifySoftwareTokenException = {}));
var VerifyUserAttributeException;
(function (VerifyUserAttributeException) {
    VerifyUserAttributeException["AliasExistsException"] = "AliasExistsException";
    VerifyUserAttributeException["CodeMismatchException"] = "CodeMismatchException";
    VerifyUserAttributeException["ExpiredCodeException"] = "ExpiredCodeException";
    VerifyUserAttributeException["ForbiddenException"] = "ForbiddenException";
    VerifyUserAttributeException["InternalErrorException"] = "InternalErrorException";
    VerifyUserAttributeException["InvalidParameterException"] = "InvalidParameterException";
    VerifyUserAttributeException["LimitExceededException"] = "LimitExceededException";
    VerifyUserAttributeException["NotAuthorizedException"] = "NotAuthorizedException";
    VerifyUserAttributeException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    VerifyUserAttributeException["ResourceNotFoundException"] = "ResourceNotFoundException";
    VerifyUserAttributeException["TooManyRequestsException"] = "TooManyRequestsException";
    VerifyUserAttributeException["UserNotConfirmedException"] = "UserNotConfirmedException";
    VerifyUserAttributeException["UserNotFoundException"] = "UserNotFoundException";
})(VerifyUserAttributeException || (VerifyUserAttributeException = {}));
var UpdateDeviceStatusException;
(function (UpdateDeviceStatusException) {
    UpdateDeviceStatusException["ForbiddenException"] = "ForbiddenException";
    UpdateDeviceStatusException["InternalErrorException"] = "InternalErrorException";
    UpdateDeviceStatusException["InvalidParameterException"] = "InvalidParameterException";
    UpdateDeviceStatusException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    UpdateDeviceStatusException["NotAuthorizedException"] = "NotAuthorizedException";
    UpdateDeviceStatusException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    UpdateDeviceStatusException["ResourceNotFoundException"] = "ResourceNotFoundException";
    UpdateDeviceStatusException["TooManyRequestsException"] = "TooManyRequestsException";
    UpdateDeviceStatusException["UserNotConfirmedException"] = "UserNotConfirmedException";
    UpdateDeviceStatusException["UserNotFoundException"] = "UserNotFoundException";
})(UpdateDeviceStatusException || (UpdateDeviceStatusException = {}));
var ListDevicesException;
(function (ListDevicesException) {
    ListDevicesException["ForbiddenException"] = "ForbiddenException";
    ListDevicesException["InternalErrorException"] = "InternalErrorException";
    ListDevicesException["InvalidParameterException"] = "InvalidParameterException";
    ListDevicesException["InvalidUserPoolConfigurationException"] = "InvalidUserPoolConfigurationException";
    ListDevicesException["NotAuthorizedException"] = "NotAuthorizedException";
    ListDevicesException["PasswordResetRequiredException"] = "PasswordResetRequiredException";
    ListDevicesException["ResourceNotFoundException"] = "ResourceNotFoundException";
    ListDevicesException["TooManyRequestsException"] = "TooManyRequestsException";
    ListDevicesException["UserNotConfirmedException"] = "UserNotConfirmedException";
    ListDevicesException["UserNotFoundException"] = "UserNotFoundException";
})(ListDevicesException || (ListDevicesException = {}));
const SETUP_TOTP_EXCEPTION = 'SetUpTOTPException';


//# sourceMappingURL=errors.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/types/models.mjs":
/*!***********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/types/models.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoHostedUIIdentityProviderMap: () => (/* binding */ cognitoHostedUIIdentityProviderMap)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const cognitoHostedUIIdentityProviderMap = {
    Google: 'Google',
    Facebook: 'Facebook',
    Amazon: 'LoginWithAmazon',
    Apple: 'SignInWithApple',
};


//# sourceMappingURL=models.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/apiHelpers.mjs":
/*!***************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/apiHelpers.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toAttributeType: () => (/* binding */ toAttributeType),
/* harmony export */   toAuthUserAttribute: () => (/* binding */ toAuthUserAttribute)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Transforms a user attributes object into an array of AttributeType objects.
 * @param attributes user attributes to be mapped to AttributeType objects.
 * @returns an array of AttributeType objects.
 */
function toAttributeType(attributes) {
    return Object.entries(attributes).map(([key, value]) => ({
        Name: key,
        Value: value,
    }));
}
/**
 * Transforms an array of AttributeType objects into a user attributes object.
 *
 * @param attributes - an array of AttributeType objects.
 * @returns AuthUserAttributes object.
 */
function toAuthUserAttribute(attributes) {
    const userAttributes = {};
    attributes?.forEach(attribute => {
        if (attribute.Name)
            userAttributes[attribute.Name] = attribute.Value;
    });
    return userAttributes;
}


//# sourceMappingURL=apiHelpers.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ERROR_MESSAGE: () => (/* binding */ ERROR_MESSAGE),
/* harmony export */   dispatchSignedInHubEvent: () => (/* binding */ dispatchSignedInHubEvent)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../apis/getCurrentUser.mjs */ "../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const ERROR_MESSAGE = 'Unable to get user session following successful sign-in.';
const dispatchSignedInHubEvent = async () => {
    try {
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Hub.dispatch('auth', {
            event: 'signedIn',
            data: await (0,_apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)(),
        }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.AMPLIFY_SYMBOL);
    }
    catch (error) {
        if (error.name === _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.USER_UNAUTHENTICATED_EXCEPTION) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthError({
                name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION,
                message: ERROR_MESSAGE,
                recoverySuggestion: 'This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server.',
            });
        }
        throw error;
    }
};


//# sourceMappingURL=dispatchSignedInHubEvent.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/attemptCompleteOAuthFlow.mjs":
/*!***********************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/attemptCompleteOAuthFlow.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   attemptCompleteOAuthFlow: () => (/* binding */ attemptCompleteOAuthFlow)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");
/* harmony import */ var _completeOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./completeOAuthFlow.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthFlow.mjs");
/* harmony import */ var _getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getRedirectUrl.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/getRedirectUrl.mjs");
/* harmony import */ var _handleFailure_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./handleFailure.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/handleFailure.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const attemptCompleteOAuthFlow = async (authConfig) => {
    try {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig);
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertOAuthConfig)(authConfig);
        _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthStore.setAuthConfig(authConfig);
    }
    catch (_) {
        // no-op
        // This should not happen as Amplify singleton checks the oauth config key
        // unless the oauth config object doesn't contain required properties
        return;
    }
    // No inflight OAuth
    if (!(await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthStore.loadOAuthInFlight())) {
        return;
    }
    try {
        const currentUrl = window.location.href;
        const { loginWith, userPoolClientId } = authConfig;
        const { domain, redirectSignIn, responseType } = loginWith.oauth;
        const redirectUri = (0,_getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_2__.getRedirectUrl)(redirectSignIn);
        await (0,_completeOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_3__.completeOAuthFlow)({
            currentUrl,
            clientId: userPoolClientId,
            domain,
            redirectUri,
            responseType,
            userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.SignInWithRedirect),
        });
    }
    catch (err) {
        await (0,_handleFailure_mjs__WEBPACK_IMPORTED_MODULE_6__.handleFailure)(err);
    }
};


//# sourceMappingURL=attemptCompleteOAuthFlow.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/cancelOAuthFlow.mjs":
/*!**************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/cancelOAuthFlow.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listenForOAuthFlowCancellation: () => (/* binding */ listenForOAuthFlowCancellation)
/* harmony export */ });
/* harmony import */ var _createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createOAuthError.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/createOAuthError.mjs");
/* harmony import */ var _handleFailure_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./handleFailure.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/handleFailure.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const listenForOAuthFlowCancellation = (store) => {
    async function handleCancelOAuthFlow(event) {
        const isBfcache = event.persisted;
        if (isBfcache && (await store.loadOAuthInFlight())) {
            const error = (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.createOAuthError)('User cancelled OAuth flow.');
            await (0,_handleFailure_mjs__WEBPACK_IMPORTED_MODULE_1__.handleFailure)(error);
        }
        window.removeEventListener('pageshow', handleCancelOAuthFlow);
    }
    window.addEventListener('pageshow', handleCancelOAuthFlow);
};


//# sourceMappingURL=cancelOAuthFlow.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthFlow.mjs":
/*!****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthFlow.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   completeOAuthFlow: () => (/* binding */ completeOAuthFlow)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/constants.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/urlSafeDecode.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../tokenProvider/cacheTokens.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/cacheTokens.mjs");
/* harmony import */ var _dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dispatchSignedInHubEvent.mjs */ "../auth/dist/esm/providers/cognito/utils/dispatchSignedInHubEvent.mjs");
/* harmony import */ var _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");
/* harmony import */ var _inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./inflightPromise.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/inflightPromise.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createOAuthError.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/createOAuthError.mjs");
/* harmony import */ var _validateState_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validateState.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/validateState.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const completeOAuthFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, responseType, domain, preferPrivateSession, }) => {
    const urlParams = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(currentUrl);
    const error = urlParams.searchParams.get('error');
    const errorMessage = urlParams.searchParams.get('error_description');
    if (error) {
        throw (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.createOAuthError)(errorMessage ?? error);
    }
    if (responseType === 'code') {
        return handleCodeFlow({
            currentUrl,
            userAgentValue,
            clientId,
            redirectUri,
            domain,
            preferPrivateSession,
        });
    }
    return handleImplicitFlow({
        currentUrl,
        redirectUri,
        preferPrivateSession,
    });
};
const handleCodeFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, domain, preferPrivateSession, }) => {
    /* Convert URL into an object with parameters as keys
{ redirect_uri: 'http://localhost:3000/', response_type: 'code', ...} */
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(currentUrl);
    const code = url.searchParams.get('code');
    const state = url.searchParams.get('state');
    // if `code` or `state` is not presented in the redirect url, most likely
    // that the end user cancelled the inflight oauth flow by:
    // 1. clicking the back button of browser
    // 2. closing the provider hosted UI page and coming back to the app
    if (!code || !state) {
        throw (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.createOAuthError)('User cancelled OAuth flow.');
    }
    // may throw error is being caught in attemptCompleteOAuthFlow.ts
    const validatedState = await (0,_validateState_mjs__WEBPACK_IMPORTED_MODULE_2__.validateState)(state);
    const oAuthTokenEndpoint = 'https://' + domain + '/oauth2/token';
    // TODO(v6): check hub events
    // dispatchAuthEvent(
    // 	'codeFlow',
    // 	{},
    // 	`Retrieving tokens from ${oAuthTokenEndpoint}`
    // );
    const codeVerifier = await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.loadPKCE();
    const oAuthTokenBody = {
        grant_type: 'authorization_code',
        code,
        client_id: clientId,
        redirect_uri: redirectUri,
        ...(codeVerifier ? { code_verifier: codeVerifier } : {}),
    };
    const body = Object.entries(oAuthTokenBody)
        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)
        .join('&');
    const { access_token, refresh_token: refreshToken, id_token, error, error_message: errorMessage, token_type, expires_in, } = await (await fetch(oAuthTokenEndpoint, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            [_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_4__.USER_AGENT_HEADER]: userAgentValue,
        },
        body,
    })).json();
    if (error) {
        // error is being caught in attemptCompleteOAuthFlow.ts
        throw (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.createOAuthError)(errorMessage ?? error);
    }
    const username = (access_token && (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.decodeJWT)(access_token).payload.username) ?? 'username';
    await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_6__.cacheCognitoTokens)({
        username,
        AccessToken: access_token,
        IdToken: id_token,
        RefreshToken: refreshToken,
        TokenType: token_type,
        ExpiresIn: expires_in,
    });
    return completeFlow({
        redirectUri,
        state: validatedState,
        preferPrivateSession,
    });
};
const handleImplicitFlow = async ({ currentUrl, redirectUri, preferPrivateSession, }) => {
    // hash is `null` if `#` doesn't exist on URL
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(currentUrl);
    const { id_token, access_token, state, token_type, expires_in, error_description, error, } = (url.hash ?? '#')
        .substring(1) // Remove # from returned code
        .split('&')
        .map(pairings => pairings.split('='))
        .reduce((accum, [k, v]) => ({ ...accum, [k]: v }), {
        id_token: undefined,
        access_token: undefined,
        state: undefined,
        token_type: undefined,
        expires_in: undefined,
        error_description: undefined,
        error: undefined,
    });
    if (error) {
        throw (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.createOAuthError)(error_description ?? error);
    }
    if (!access_token) {
        // error is being caught in attemptCompleteOAuthFlow.ts
        throw (0,_createOAuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.createOAuthError)('No access token returned from OAuth flow.');
    }
    const validatedState = await (0,_validateState_mjs__WEBPACK_IMPORTED_MODULE_2__.validateState)(state);
    const username = (access_token && (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.decodeJWT)(access_token).payload.username) ?? 'username';
    await (0,_tokenProvider_cacheTokens_mjs__WEBPACK_IMPORTED_MODULE_6__.cacheCognitoTokens)({
        username,
        AccessToken: access_token,
        IdToken: id_token,
        TokenType: token_type,
        ExpiresIn: expires_in,
    });
    return completeFlow({
        redirectUri,
        state: validatedState,
        preferPrivateSession,
    });
};
const completeFlow = async ({ redirectUri, state, preferPrivateSession, }) => {
    await _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_7__.tokenOrchestrator.setOAuthMetadata({
        oauthSignIn: true,
    });
    await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.clearOAuthData();
    await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_3__.oAuthStore.storeOAuthSignIn(true, preferPrivateSession);
    // this should be called before any call that involves `fetchAuthSession`
    // e.g. `getCurrentUser()` below, so it allows every inflight async calls to
    //  `fetchAuthSession` can be resolved
    (0,_inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_8__.resolveAndClearInflightPromises)();
    if (isCustomState(state)) {
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_9__.Hub.dispatch('auth', {
            event: 'customOAuthState',
            data: (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.urlSafeDecode)(getCustomState(state)),
        }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_9__.AMPLIFY_SYMBOL);
    }
    _aws_amplify_core__WEBPACK_IMPORTED_MODULE_9__.Hub.dispatch('auth', { event: 'signInWithRedirect' }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_9__.AMPLIFY_SYMBOL);
    await (0,_dispatchSignedInHubEvent_mjs__WEBPACK_IMPORTED_MODULE_11__.dispatchSignedInHubEvent)();
    clearHistory(redirectUri);
};
const isCustomState = (state) => {
    return /-/.test(state);
};
const getCustomState = (state) => {
    return state.split('-').splice(1).join('-');
};
const clearHistory = (redirectUri) => {
    if (typeof window !== 'undefined' && typeof window.history !== 'undefined') {
        window.history.replaceState(window.history.state, '', redirectUri);
    }
};


//# sourceMappingURL=completeOAuthFlow.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthSignOut.mjs":
/*!*******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthSignOut.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   completeOAuthSignOut: () => (/* binding */ completeOAuthSignOut)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/apis/clearCredentials.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../tokenProvider/tokenProvider.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const completeOAuthSignOut = async (store) => {
    await store.clearOAuthData();
    _tokenProvider_tokenProvider_mjs__WEBPACK_IMPORTED_MODULE_0__.tokenOrchestrator.clearTokens();
    await (0,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.clearCredentials)();
    _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.Hub.dispatch('auth', { event: 'signedOut' }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.AMPLIFY_SYMBOL);
};


//# sourceMappingURL=completeOAuthSignOut.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/createOAuthError.mjs":
/*!***************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/createOAuthError.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createOAuthError: () => (/* binding */ createOAuthError)
/* harmony export */ });
/* harmony import */ var _Errors_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../Errors.mjs */ "../auth/dist/esm/Errors.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createOAuthError = (message, recoverySuggestion) => new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    message: message ?? 'An error has occurred during the oauth process.',
    name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthErrorCodes.OAuthSignInError,
    recoverySuggestion: recoverySuggestion ?? _Errors_mjs__WEBPACK_IMPORTED_MODULE_2__.authErrorMessages.oauthSignInError.log,
});


//# sourceMappingURL=createOAuthError.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/enableOAuthListener.mjs":
/*!******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/enableOAuthListener.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/isBrowser.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/constants.mjs");
/* harmony import */ var _attemptCompleteOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attemptCompleteOAuthFlow.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/attemptCompleteOAuthFlow.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// attach the side effect for handling the completion of an inflight oauth flow
// this side effect works only on Web
(0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.isBrowser)() &&
    (() => {
        // add the listener to the singleton for triggering
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify[_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.ADD_OAUTH_LISTENER](_attemptCompleteOAuthFlow_mjs__WEBPACK_IMPORTED_MODULE_3__.attemptCompleteOAuthFlow);
    })();
//# sourceMappingURL=enableOAuthListener.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/generateCodeVerifier.mjs":
/*!*******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/generateCodeVerifier.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateCodeVerifier: () => (/* binding */ generateCodeVerifier)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/globalHelpers/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const CODE_VERIFIER_CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
/**
 *
 * @param length Desired length of the code verifier.
 *
 * **NOTE:** According to the [RFC 7636](https://datatracker.ietf.org/doc/html/rfc7636#section-4.1)
 * A code verifier must be with a length >= 43 and <= 128.
 *
 * @returns An object that contains the generated `codeVerifier` and a method
 * `toCodeChallenge` to generate the code challenge from the `codeVerifier`
 * following the spec of [RFC 7636](https://datatracker.ietf.org/doc/html/rfc7636#section-4.2).
 */
const generateCodeVerifier = (length) => {
    const randomBytes = new Uint8Array(length);
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.getCrypto)().getRandomValues(randomBytes);
    let value = '';
    let codeChallenge;
    for (const byte of randomBytes) {
        value += CODE_VERIFIER_CHARSET.charAt(byte % CODE_VERIFIER_CHARSET.length);
    }
    return {
        value,
        method: 'S256',
        toCodeChallenge() {
            if (codeChallenge) {
                return codeChallenge;
            }
            codeChallenge = generateCodeChallenge(value);
            return codeChallenge;
        },
    };
};
function generateCodeChallenge(codeVerifier) {
    const awsCryptoHash = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256();
    awsCryptoHash.update(codeVerifier);
    const codeChallenge = removePaddingChar(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.base64Encoder.convert(awsCryptoHash.digestSync(), { urlSafe: true }));
    return codeChallenge;
}
function removePaddingChar(base64Encoded) {
    return base64Encoded.replace(/=/g, '');
}


//# sourceMappingURL=generateCodeVerifier.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/generateState.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/generateState.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateState: () => (/* binding */ generateState)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/generateRandomString.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const generateState = () => {
    return (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32);
};


//# sourceMappingURL=generateState.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/getRedirectUrl.mjs":
/*!*************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/getRedirectUrl.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRedirectUrl: () => (/* binding */ getRedirectUrl)
/* harmony export */ });
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/** @internal */
function getRedirectUrl(redirects, preferredRedirectUrl) {
    if (preferredRedirectUrl) {
        const redirectUrl = redirects?.find(redirect => redirect === preferredRedirectUrl);
        if (!redirectUrl) {
            throw _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.invalidPreferredRedirectUrlException;
        }
        return redirectUrl;
    }
    else {
        const redirectUrlFromTheSameOrigin = redirects?.find(isSameOriginAndPathName) ??
            redirects?.find(isTheSameDomain);
        const redirectUrlFromDifferentOrigin = redirects?.find(isHttps) ?? redirects?.find(isHttp);
        if (redirectUrlFromTheSameOrigin) {
            return redirectUrlFromTheSameOrigin;
        }
        else if (redirectUrlFromDifferentOrigin) {
            throw _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.invalidOriginException;
        }
        throw _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.invalidRedirectException;
    }
}
// origin + pathname => https://example.com/app
const isSameOriginAndPathName = (redirect) => redirect.startsWith(
// eslint-disable-next-line no-constant-binary-expression
String(window.location.origin + window.location.pathname ?? '/'));
// domain => outlook.live.com, github.com
const isTheSameDomain = (redirect) => redirect.includes(String(window.location.hostname));
const isHttp = (redirect) => redirect.startsWith('http://');
const isHttps = (redirect) => redirect.startsWith('https://');


//# sourceMappingURL=getRedirectUrl.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/handleFailure.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/handleFailure.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleFailure: () => (/* binding */ handleFailure)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");
/* harmony import */ var _inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./inflightPromise.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/inflightPromise.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const handleFailure = async (error) => {
    (0,_inflightPromise_mjs__WEBPACK_IMPORTED_MODULE_0__.resolveAndClearInflightPromises)();
    await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthStore.clearOAuthInflightData();
    _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.Hub.dispatch('auth', { event: 'signInWithRedirect_failure', data: { error } }, 'Auth', _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.AMPLIFY_SYMBOL);
};


//# sourceMappingURL=handleFailure.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/handleOAuthSignOut.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/handleOAuthSignOut.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleOAuthSignOut: () => (/* binding */ handleOAuthSignOut)
/* harmony export */ });
/* harmony import */ var _completeOAuthSignOut_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./completeOAuthSignOut.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/completeOAuthSignOut.mjs");
/* harmony import */ var _oAuthSignOutRedirect_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oAuthSignOutRedirect.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthSignOutRedirect.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const handleOAuthSignOut = async (cognitoConfig, store, tokenOrchestrator, redirectUrl) => {
    const { isOAuthSignIn } = await store.loadOAuthSignIn();
    const oauthMetadata = await tokenOrchestrator.getOAuthMetadata();
    // Clear everything before attempting to visted logout endpoint since the current application
    // state could be wiped away on redirect
    await (0,_completeOAuthSignOut_mjs__WEBPACK_IMPORTED_MODULE_0__.completeOAuthSignOut)(store);
    // The isOAuthSignIn flag is propagated by the oAuthToken store which manages oauth keys in local storage only.
    // These keys are used to determine if a user is in an inflight or signedIn oauth states.
    // However, this behavior represents an issue when 2 apps share the same set of tokens in Cookie storage because the app that didn't
    // start the OAuth will not have access to the oauth keys.
    // A heuristic solution is to add oauth metadata to the tokenOrchestrator which will have access to the underlying
    // storage mechanism that is used by Amplify.
    if (isOAuthSignIn || oauthMetadata?.oauthSignIn) {
        // On web, this will always end up being a void action
        return (0,_oAuthSignOutRedirect_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuthSignOutRedirect)(cognitoConfig, false, redirectUrl);
    }
};


//# sourceMappingURL=handleOAuthSignOut.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/inflightPromise.mjs":
/*!**************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/inflightPromise.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addInflightPromise: () => (/* binding */ addInflightPromise),
/* harmony export */   resolveAndClearInflightPromises: () => (/* binding */ resolveAndClearInflightPromises)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const inflightPromises = [];
const addInflightPromise = (resolver) => {
    inflightPromises.push(resolver);
};
const resolveAndClearInflightPromises = () => {
    while (inflightPromises.length) {
        inflightPromises.pop()?.();
    }
};


//# sourceMappingURL=inflightPromise.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthSignOutRedirect.mjs":
/*!*******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/oAuthSignOutRedirect.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   oAuthSignOutRedirect: () => (/* binding */ oAuthSignOutRedirect)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _utils_openAuthSession_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/openAuthSession.mjs */ "../auth/dist/esm/utils/openAuthSession.mjs");
/* harmony import */ var _getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getRedirectUrl.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/getRedirectUrl.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const oAuthSignOutRedirect = async (authConfig, preferPrivateSession = false, redirectUrl) => {
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertOAuthConfig)(authConfig);
    const { loginWith, userPoolClientId } = authConfig;
    const { domain, redirectSignOut } = loginWith.oauth;
    const signoutUri = (0,_getRedirectUrl_mjs__WEBPACK_IMPORTED_MODULE_1__.getRedirectUrl)(redirectSignOut, redirectUrl);
    const oAuthLogoutEndpoint = `https://${domain}/logout?${Object.entries({
        client_id: userPoolClientId,
        logout_uri: encodeURIComponent(signoutUri),
    })
        .map(([k, v]) => `${k}=${v}`)
        .join('&')}`;
    return (0,_utils_openAuthSession_mjs__WEBPACK_IMPORTED_MODULE_2__.openAuthSession)(oAuthLogoutEndpoint);
};


//# sourceMappingURL=oAuthSignOutRedirect.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs":
/*!*********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   oAuthStore: () => (/* binding */ oAuthStore)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _signInWithRedirectStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../signInWithRedirectStore.mjs */ "../auth/dist/esm/providers/cognito/utils/signInWithRedirectStore.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const oAuthStore = new _signInWithRedirectStore_mjs__WEBPACK_IMPORTED_MODULE_0__.DefaultOAuthStore(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.defaultStorage);


//# sourceMappingURL=oAuthStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/oauth/validateState.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/oauth/validateState.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flowCancelledMessage: () => (/* binding */ flowCancelledMessage),
/* harmony export */   validateState: () => (/* binding */ validateState),
/* harmony export */   validationFailedMessage: () => (/* binding */ validationFailedMessage),
/* harmony export */   validationRecoverySuggestion: () => (/* binding */ validationRecoverySuggestion)
/* harmony export */ });
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _types_Auth_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../types/Auth.mjs */ "../auth/dist/esm/types/Auth.mjs");
/* harmony import */ var _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oAuthStore.mjs */ "../auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const flowCancelledMessage = '`signInWithRedirect` has been canceled.';
const validationFailedMessage = 'An error occurred while validating the state.';
const validationRecoverySuggestion = 'Try to initiate an OAuth flow from Amplify';
const validateState = async (state) => {
    const savedState = await _oAuthStore_mjs__WEBPACK_IMPORTED_MODULE_0__.oAuthStore.loadOAuthState();
    // This is because savedState only exists if the flow was initiated by Amplify
    const validatedState = state === savedState ? savedState : undefined;
    if (!validatedState) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthError({
            name: _types_Auth_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthErrorTypes.OAuthSignInError,
            message: state === null ? flowCancelledMessage : validationFailedMessage,
            recoverySuggestion: state === null ? undefined : validationRecoverySuggestion,
        });
    }
    return validatedState;
};


//# sourceMappingURL=validateState.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/refreshAuthTokens.mjs":
/*!**********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/refreshAuthTokens.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   refreshAuthTokens: () => (/* binding */ refreshAuthTokens),
/* harmony export */   refreshAuthTokensWithoutDedupe: () => (/* binding */ refreshAuthTokensWithoutDedupe)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/deDupeAsyncFunction.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _userContextData_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");
















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const refreshAuthTokensFunction = async ({ tokens, authConfig, username, }) => {
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(authConfig?.Cognito);
    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig.Cognito;
    const region = (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_1__.getRegionFromUserPoolId)(userPoolId);
    (0,_types_mjs__WEBPACK_IMPORTED_MODULE_2__.assertAuthTokensWithRefreshToken)(tokens);
    const refreshTokenString = tokens.refreshToken;
    const AuthParameters = {
        REFRESH_TOKEN: refreshTokenString,
    };
    if (tokens.deviceMetadata?.deviceKey) {
        AuthParameters.DEVICE_KEY = tokens.deviceMetadata.deviceKey;
    }
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_3__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_4__.createInitiateAuthClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_5__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { AuthenticationResult } = await initiateAuth({ region }, {
        ClientId: userPoolClientId,
        AuthFlow: 'REFRESH_TOKEN_AUTH',
        AuthParameters,
        UserContextData,
    });
    const accessToken = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.decodeJWT)(AuthenticationResult?.AccessToken ?? '');
    const idToken = AuthenticationResult?.IdToken
        ? (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.decodeJWT)(AuthenticationResult.IdToken)
        : undefined;
    const { iat } = accessToken.payload;
    // This should never happen. If it does, it's a bug from the service.
    if (!iat) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_6__.AuthError({
            name: 'iatNotFoundException',
            message: 'iat not found in access token',
        });
    }
    const clockDrift = iat * 1000 - new Date().getTime();
    return {
        accessToken,
        idToken,
        clockDrift,
        refreshToken: refreshTokenString,
        username,
    };
};
const refreshAuthTokens = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.deDupeAsyncFunction)(refreshAuthTokensFunction);
const refreshAuthTokensWithoutDedupe = refreshAuthTokensFunction;


//# sourceMappingURL=refreshAuthTokens.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/signInHelpers.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertUserNotAuthenticated: () => (/* binding */ assertUserNotAuthenticated),
/* harmony export */   createAttributes: () => (/* binding */ createAttributes),
/* harmony export */   getActiveSignInUsername: () => (/* binding */ getActiveSignInUsername),
/* harmony export */   getAllowedMfaSetupTypes: () => (/* binding */ getAllowedMfaSetupTypes),
/* harmony export */   getMFAType: () => (/* binding */ getMFAType),
/* harmony export */   getMFATypes: () => (/* binding */ getMFATypes),
/* harmony export */   getNewDeviceMetadata: () => (/* binding */ getNewDeviceMetadata),
/* harmony export */   getSignInResult: () => (/* binding */ getSignInResult),
/* harmony export */   getSignInResultFromError: () => (/* binding */ getSignInResultFromError),
/* harmony export */   getTOTPSetupDetails: () => (/* binding */ getTOTPSetupDetails),
/* harmony export */   handleChallengeName: () => (/* binding */ handleChallengeName),
/* harmony export */   handleCompleteNewPasswordChallenge: () => (/* binding */ handleCompleteNewPasswordChallenge),
/* harmony export */   handleCustomAuthFlowWithoutSRP: () => (/* binding */ handleCustomAuthFlowWithoutSRP),
/* harmony export */   handleCustomChallenge: () => (/* binding */ handleCustomChallenge),
/* harmony export */   handleCustomSRPAuthFlow: () => (/* binding */ handleCustomSRPAuthFlow),
/* harmony export */   handleMFAChallenge: () => (/* binding */ handleMFAChallenge),
/* harmony export */   handleMFASetupChallenge: () => (/* binding */ handleMFASetupChallenge),
/* harmony export */   handlePasswordVerifierChallenge: () => (/* binding */ handlePasswordVerifierChallenge),
/* harmony export */   handleSelectMFATypeChallenge: () => (/* binding */ handleSelectMFATypeChallenge),
/* harmony export */   handleUserPasswordAuthFlow: () => (/* binding */ handleUserPasswordAuthFlow),
/* harmony export */   handleUserSRPAuthFlow: () => (/* binding */ handleUserSRPAuthFlow),
/* harmony export */   mapMfaType: () => (/* binding */ mapMfaType),
/* harmony export */   parseAttributes: () => (/* binding */ parseAttributes),
/* harmony export */   parseMFATypes: () => (/* binding */ parseMFATypes),
/* harmony export */   retryOnResourceNotFoundException: () => (/* binding */ retryOnResourceNotFoundException),
/* harmony export */   setActiveSignInUsername: () => (/* binding */ setActiveSignInUsername)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/deviceName/getDeviceName.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../types/errors.mjs */ "../auth/dist/esm/providers/cognito/types/errors.mjs");
/* harmony import */ var _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/AuthErrorStrings.mjs */ "../auth/dist/esm/common/AuthErrorStrings.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../auth/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../auth/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");
/* harmony import */ var _apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../apis/getCurrentUser.mjs */ "../auth/dist/esm/providers/cognito/apis/getCurrentUser.mjs");
/* harmony import */ var _utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/getAuthUserAgentValue.mjs */ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createVerifySoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createAssociateSoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.mjs");
/* harmony import */ var _foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmDeviceClient_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmDeviceClient.mjs */ "../auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmDeviceClient.mjs");
/* harmony import */ var _factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../factories/createCognitoUserPoolEndpointResolver.mjs */ "../auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs");
/* harmony import */ var _foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../foundation/parsers/regionParsers.mjs */ "../auth/dist/esm/foundation/parsers/regionParsers.mjs");
/* harmony import */ var _client_flows_userAuth_handleWebAuthnSignInResult_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../client/flows/userAuth/handleWebAuthnSignInResult.mjs */ "../auth/dist/esm/client/flows/userAuth/handleWebAuthnSignInResult.mjs");
/* harmony import */ var _client_flows_shared_handlePasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../client/flows/shared/handlePasswordSRP.mjs */ "../auth/dist/esm/client/flows/shared/handlePasswordSRP.mjs");
/* harmony import */ var _client_flows_userAuth_handleSelectChallenge_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../client/flows/userAuth/handleSelectChallenge.mjs */ "../auth/dist/esm/client/flows/userAuth/handleSelectChallenge.mjs");
/* harmony import */ var _client_flows_userAuth_handleSelectChallengeWithPassword_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../client/flows/userAuth/handleSelectChallengeWithPassword.mjs */ "../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPassword.mjs");
/* harmony import */ var _client_flows_userAuth_handleSelectChallengeWithPasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../client/flows/userAuth/handleSelectChallengeWithPasswordSRP.mjs */ "../auth/dist/esm/client/flows/userAuth/handleSelectChallengeWithPasswordSRP.mjs");
/* harmony import */ var _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../client/utils/store/signInStore.mjs */ "../auth/dist/esm/client/utils/store/signInStore.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");
/* harmony import */ var _srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./srp/getAuthenticationHelper.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getAuthenticationHelper.mjs");
/* harmony import */ var _srp_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./srp/getBytesFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs");
/* harmony import */ var _srp_getNowString_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./srp/getNowString.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getNowString.mjs");
/* harmony import */ var _srp_getSignatureString_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./srp/getSignatureString.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getSignatureString.mjs");
/* harmony import */ var _srp_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./srp/BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");
/* harmony import */ var _userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userContextData.mjs */ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs");




































// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const USER_ATTRIBUTES = 'userAttributes.';
async function handleCustomChallenge({ challengeResponse, clientMetadata, session, username, config, tokenOrchestrator, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const challengeResponses = {
        USERNAME: username,
        ANSWER: challengeResponse,
    };
    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);
    if (deviceMetadata && deviceMetadata.deviceKey) {
        challengeResponses.DEVICE_KEY = deviceMetadata.deviceKey;
    }
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        ChallengeName: 'CUSTOM_CHALLENGE',
        ChallengeResponses: challengeResponses,
        Session: session,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
    }, jsonReq);
    if (response.ChallengeName === 'DEVICE_SRP_AUTH') {
        return handleDeviceSRPAuth({
            username,
            config,
            clientMetadata,
            session: response.Session,
            tokenOrchestrator,
        });
    }
    return response;
}
async function handleMFASetupChallenge({ challengeResponse, username, clientMetadata, session, deviceName, config, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    if (challengeResponse === 'EMAIL') {
        return {
            ChallengeName: 'MFA_SETUP',
            Session: session,
            ChallengeParameters: {
                MFAS_CAN_SETUP: '["EMAIL_OTP"]',
            },
            $metadata: {},
        };
    }
    if (challengeResponse === 'TOTP') {
        return {
            ChallengeName: 'MFA_SETUP',
            Session: session,
            ChallengeParameters: {
                MFAS_CAN_SETUP: '["SOFTWARE_TOKEN_MFA"]',
            },
            $metadata: {},
        };
    }
    const challengeResponses = {
        USERNAME: username,
    };
    const isTOTPCode = /^\d+$/.test(challengeResponse);
    if (isTOTPCode) {
        const verifySoftwareToken = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createVerifySoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_6__.createVerifySoftwareTokenClient)({
            endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
                endpointOverride: userPoolEndpoint,
            }),
        });
        const { Session } = await verifySoftwareToken({
            region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
            userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
        }, {
            UserCode: challengeResponse,
            Session: session,
            FriendlyDeviceName: deviceName,
        });
        _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__.signInStore.dispatch({
            type: 'SET_SIGN_IN_SESSION',
            value: Session,
        });
        const jsonReq = {
            ChallengeName: 'MFA_SETUP',
            ChallengeResponses: challengeResponses,
            Session,
            ClientMetadata: clientMetadata,
            ClientId: userPoolClientId,
        };
        const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
            endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
                endpointOverride: userPoolEndpoint,
            }),
        });
        return respondToAuthChallenge({
            region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
            userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
        }, jsonReq);
    }
    const isEmail = challengeResponse.includes('@');
    if (isEmail) {
        challengeResponses.EMAIL = challengeResponse;
        const jsonReq = {
            ChallengeName: 'MFA_SETUP',
            ChallengeResponses: challengeResponses,
            Session: session,
            ClientMetadata: clientMetadata,
            ClientId: userPoolClientId,
        };
        const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
            endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
                endpointOverride: userPoolEndpoint,
            }),
        });
        return respondToAuthChallenge({
            region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
            userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
        }, jsonReq);
    }
    throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
        name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_9__.AuthErrorCodes.SignInException,
        message: `Cannot proceed with MFA setup using challengeResponse: ${challengeResponse}`,
        recoverySuggestion: 'Try passing "EMAIL", "TOTP", a valid email, or OTP code as the challengeResponse.',
    });
}
async function handleSelectMFATypeChallenge({ challengeResponse, username, clientMetadata, session, config, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_10__.assertValidationError)(challengeResponse === 'TOTP' ||
        challengeResponse === 'SMS' ||
        challengeResponse === 'EMAIL', _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_11__.AuthValidationErrorCode.IncorrectMFAMethod);
    const challengeResponses = {
        USERNAME: username,
        ANSWER: mapMfaType(challengeResponse),
    };
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        ChallengeName: 'SELECT_MFA_TYPE',
        ChallengeResponses: challengeResponses,
        Session: session,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    return respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
    }, jsonReq);
}
async function handleCompleteNewPasswordChallenge({ challengeResponse, clientMetadata, session, username, requiredAttributes, config, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const challengeResponses = {
        ...createAttributes(requiredAttributes),
        NEW_PASSWORD: challengeResponse,
        USERNAME: username,
    };
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        ChallengeName: 'NEW_PASSWORD_REQUIRED',
        ChallengeResponses: challengeResponses,
        ClientMetadata: clientMetadata,
        Session: session,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    return respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
    }, jsonReq);
}
async function handleUserPasswordAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {
    const { userPoolClientId, userPoolId, userPoolEndpoint } = config;
    const authParameters = {
        USERNAME: username,
        PASSWORD: password,
    };
    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);
    if (deviceMetadata && deviceMetadata.deviceKey) {
        authParameters.DEVICE_KEY = deviceMetadata.deviceKey;
    }
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        AuthFlow: 'USER_PASSWORD_AUTH',
        AuthParameters: authParameters,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_12__.createInitiateAuthClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await initiateAuth({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.SignIn),
    }, jsonReq);
    const activeUsername = response.ChallengeParameters?.USERNAME ??
        response.ChallengeParameters?.USER_ID_FOR_SRP ??
        username;
    setActiveSignInUsername(activeUsername);
    if (response.ChallengeName === 'DEVICE_SRP_AUTH')
        return handleDeviceSRPAuth({
            username: activeUsername,
            config,
            clientMetadata,
            session: response.Session,
            tokenOrchestrator,
        });
    return response;
}
async function handleUserSRPAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {
    return (0,_client_flows_shared_handlePasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_13__.handlePasswordSRP)({
        username,
        password,
        clientMetadata,
        config,
        tokenOrchestrator,
        authFlow: 'USER_SRP_AUTH',
    });
}
async function handleCustomAuthFlowWithoutSRP(username, clientMetadata, config, tokenOrchestrator) {
    const { userPoolClientId, userPoolId, userPoolEndpoint } = config;
    const authParameters = {
        USERNAME: username,
    };
    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);
    if (deviceMetadata && deviceMetadata.deviceKey) {
        authParameters.DEVICE_KEY = deviceMetadata.deviceKey;
    }
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        AuthFlow: 'CUSTOM_AUTH',
        AuthParameters: authParameters,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_12__.createInitiateAuthClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await initiateAuth({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.SignIn),
    }, jsonReq);
    const activeUsername = response.ChallengeParameters?.USERNAME ?? username;
    setActiveSignInUsername(activeUsername);
    if (response.ChallengeName === 'DEVICE_SRP_AUTH')
        return handleDeviceSRPAuth({
            username: activeUsername,
            config,
            clientMetadata,
            session: response.Session,
            tokenOrchestrator,
        });
    return response;
}
async function handleCustomSRPAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_14__.assertTokenProviderConfig)(config);
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const userPoolName = userPoolId?.split('_')[1] || '';
    const authenticationHelper = await (0,_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_15__.getAuthenticationHelper)(userPoolName);
    const authParameters = {
        USERNAME: username,
        SRP_A: authenticationHelper.A.toString(16),
        CHALLENGE_NAME: 'SRP_A',
    };
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        AuthFlow: 'CUSTOM_AUTH',
        AuthParameters: authParameters,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const initiateAuth = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createInitiateAuthClient_mjs__WEBPACK_IMPORTED_MODULE_12__.createInitiateAuthClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { ChallengeParameters: challengeParameters, Session: session } = await initiateAuth({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.SignIn),
    }, jsonReq);
    const activeUsername = challengeParameters?.USERNAME ?? username;
    setActiveSignInUsername(activeUsername);
    return retryOnResourceNotFoundException(handlePasswordVerifierChallenge, [
        password,
        challengeParameters,
        clientMetadata,
        session,
        authenticationHelper,
        config,
        tokenOrchestrator,
    ], activeUsername, tokenOrchestrator);
}
async function handleDeviceSRPAuth({ username, config, clientMetadata, session, tokenOrchestrator, }) {
    const { userPoolId, userPoolEndpoint } = config;
    const clientId = config.userPoolClientId;
    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);
    (0,_types_mjs__WEBPACK_IMPORTED_MODULE_16__.assertDeviceMetadata)(deviceMetadata);
    const authenticationHelper = await (0,_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_15__.getAuthenticationHelper)(deviceMetadata.deviceGroupKey);
    const challengeResponses = {
        USERNAME: username,
        SRP_A: authenticationHelper.A.toString(16),
        DEVICE_KEY: deviceMetadata.deviceKey,
    };
    const jsonReqResponseChallenge = {
        ChallengeName: 'DEVICE_SRP_AUTH',
        ClientId: clientId,
        ChallengeResponses: challengeResponses,
        ClientMetadata: clientMetadata,
        Session: session,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const { ChallengeParameters: respondedChallengeParameters, Session } = await respondToAuthChallenge({ region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId) }, jsonReqResponseChallenge);
    return handleDevicePasswordVerifier(username, respondedChallengeParameters, clientMetadata, Session, authenticationHelper, config, tokenOrchestrator);
}
async function handleDevicePasswordVerifier(username, challengeParameters, clientMetadata, session, authenticationHelper, { userPoolId, userPoolClientId, userPoolEndpoint }, tokenOrchestrator) {
    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);
    (0,_types_mjs__WEBPACK_IMPORTED_MODULE_16__.assertDeviceMetadata)(deviceMetadata);
    const serverBValue = new _srp_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_17__["default"](challengeParameters?.SRP_B, 16);
    const salt = new _srp_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_17__["default"](challengeParameters?.SALT, 16);
    const { deviceKey } = deviceMetadata;
    const { deviceGroupKey } = deviceMetadata;
    const hkdf = await authenticationHelper.getPasswordAuthenticationKey({
        username: deviceMetadata.deviceKey,
        password: deviceMetadata.randomPassword,
        serverBValue,
        salt,
    });
    const dateNow = (0,_srp_getNowString_mjs__WEBPACK_IMPORTED_MODULE_18__.getNowString)();
    const challengeResponses = {
        USERNAME: challengeParameters?.USERNAME ?? username,
        PASSWORD_CLAIM_SECRET_BLOCK: challengeParameters?.SECRET_BLOCK,
        TIMESTAMP: dateNow,
        PASSWORD_CLAIM_SIGNATURE: (0,_srp_getSignatureString_mjs__WEBPACK_IMPORTED_MODULE_19__.getSignatureString)({
            username: deviceKey,
            userPoolName: deviceGroupKey,
            challengeParameters,
            dateNow,
            hkdf,
        }),
        DEVICE_KEY: deviceKey,
    };
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReqResponseChallenge = {
        ChallengeName: 'DEVICE_PASSWORD_VERIFIER',
        ClientId: userPoolClientId,
        ChallengeResponses: challengeResponses,
        Session: session,
        ClientMetadata: clientMetadata,
        UserContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    return respondToAuthChallenge({ region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId) }, jsonReqResponseChallenge);
}
async function handlePasswordVerifierChallenge(password, challengeParameters, clientMetadata, session, authenticationHelper, config, tokenOrchestrator) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const userPoolName = userPoolId?.split('_')[1] || '';
    const serverBValue = new _srp_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_17__["default"](challengeParameters?.SRP_B, 16);
    const salt = new _srp_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_17__["default"](challengeParameters?.SALT, 16);
    const username = challengeParameters?.USER_ID_FOR_SRP;
    if (!username)
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
            name: 'EmptyUserIdForSRPException',
            message: 'USER_ID_FOR_SRP was not found in challengeParameters',
        });
    const hkdf = await authenticationHelper.getPasswordAuthenticationKey({
        username,
        password,
        serverBValue,
        salt,
    });
    const dateNow = (0,_srp_getNowString_mjs__WEBPACK_IMPORTED_MODULE_18__.getNowString)();
    const challengeResponses = {
        USERNAME: username,
        PASSWORD_CLAIM_SECRET_BLOCK: challengeParameters?.SECRET_BLOCK,
        TIMESTAMP: dateNow,
        PASSWORD_CLAIM_SIGNATURE: (0,_srp_getSignatureString_mjs__WEBPACK_IMPORTED_MODULE_19__.getSignatureString)({
            username,
            userPoolName,
            challengeParameters,
            dateNow,
            hkdf,
        }),
    };
    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);
    if (deviceMetadata && deviceMetadata.deviceKey) {
        challengeResponses.DEVICE_KEY = deviceMetadata.deviceKey;
    }
    const UserContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReqResponseChallenge = {
        ChallengeName: 'PASSWORD_VERIFIER',
        ChallengeResponses: challengeResponses,
        ClientMetadata: clientMetadata,
        Session: session,
        ClientId: userPoolClientId,
        UserContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    const response = await respondToAuthChallenge({ region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId) }, jsonReqResponseChallenge);
    if (response.ChallengeName === 'DEVICE_SRP_AUTH')
        return handleDeviceSRPAuth({
            username,
            config,
            clientMetadata,
            session: response.Session,
            tokenOrchestrator,
        });
    return response;
}
async function getSignInResult(params) {
    const { challengeName, challengeParameters, availableChallenges } = params;
    const authConfig = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_20__.Amplify.getConfig().Auth?.Cognito;
    (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_14__.assertTokenProviderConfig)(authConfig);
    switch (challengeName) {
        case 'CUSTOM_CHALLENGE':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE',
                    additionalInfo: challengeParameters,
                },
            };
        case 'MFA_SETUP': {
            const { signInSession, username } = _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__.signInStore.getState();
            const mfaSetupTypes = getMFATypes(parseMFATypes(challengeParameters.MFAS_CAN_SETUP)) || [];
            const allowedMfaSetupTypes = getAllowedMfaSetupTypes(mfaSetupTypes);
            const isTotpMfaSetupAvailable = allowedMfaSetupTypes.includes('TOTP');
            const isEmailMfaSetupAvailable = allowedMfaSetupTypes.includes('EMAIL');
            if (isTotpMfaSetupAvailable && isEmailMfaSetupAvailable) {
                return {
                    isSignedIn: false,
                    nextStep: {
                        signInStep: 'CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION',
                        allowedMFATypes: allowedMfaSetupTypes,
                    },
                };
            }
            if (isEmailMfaSetupAvailable) {
                return {
                    isSignedIn: false,
                    nextStep: {
                        signInStep: 'CONTINUE_SIGN_IN_WITH_EMAIL_SETUP',
                    },
                };
            }
            if (isTotpMfaSetupAvailable) {
                const associateSoftwareToken = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createAssociateSoftwareTokenClient_mjs__WEBPACK_IMPORTED_MODULE_21__.createAssociateSoftwareTokenClient)({
                    endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
                        endpointOverride: authConfig.userPoolEndpoint,
                    }),
                });
                const { Session, SecretCode: secretCode } = await associateSoftwareToken({ region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(authConfig.userPoolId) }, {
                    Session: signInSession,
                });
                _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__.signInStore.dispatch({
                    type: 'SET_SIGN_IN_SESSION',
                    value: Session,
                });
                return {
                    isSignedIn: false,
                    nextStep: {
                        signInStep: 'CONTINUE_SIGN_IN_WITH_TOTP_SETUP',
                        totpSetupDetails: getTOTPSetupDetails(secretCode, username),
                    },
                };
            }
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
                name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_9__.AuthErrorCodes.SignInException,
                message: `Cannot initiate MFA setup from available types: ${mfaSetupTypes}`,
            });
        }
        case 'NEW_PASSWORD_REQUIRED':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED',
                    missingAttributes: parseAttributes(challengeParameters.requiredAttributes),
                },
            };
        case 'SELECT_MFA_TYPE':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONTINUE_SIGN_IN_WITH_MFA_SELECTION',
                    allowedMFATypes: getMFATypes(parseMFATypes(challengeParameters.MFAS_CAN_CHOOSE)),
                },
            };
        case 'SMS_OTP':
        case 'SMS_MFA':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_SMS_CODE',
                    codeDeliveryDetails: {
                        deliveryMedium: challengeParameters.CODE_DELIVERY_DELIVERY_MEDIUM,
                        destination: challengeParameters.CODE_DELIVERY_DESTINATION,
                    },
                },
            };
        case 'SOFTWARE_TOKEN_MFA':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_TOTP_CODE',
                },
            };
        case 'EMAIL_OTP':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_EMAIL_CODE',
                    codeDeliveryDetails: {
                        deliveryMedium: challengeParameters.CODE_DELIVERY_DELIVERY_MEDIUM,
                        destination: challengeParameters.CODE_DELIVERY_DESTINATION,
                    },
                },
            };
        case 'WEB_AUTHN':
            return (0,_client_flows_userAuth_handleWebAuthnSignInResult_mjs__WEBPACK_IMPORTED_MODULE_22__.handleWebAuthnSignInResult)(challengeParameters);
        case 'PASSWORD':
        case 'PASSWORD_SRP':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONFIRM_SIGN_IN_WITH_PASSWORD',
                },
            };
        case 'SELECT_CHALLENGE':
            return {
                isSignedIn: false,
                nextStep: {
                    signInStep: 'CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION',
                    availableChallenges,
                },
            };
    }
    // TODO: remove this error message for production apps
    throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
        name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_9__.AuthErrorCodes.SignInException,
        message: 'An error occurred during the sign in process. ' +
            `${challengeName} challengeName returned by the underlying service was not addressed.`,
    });
}
function getTOTPSetupDetails(secretCode, username) {
    return {
        sharedSecret: secretCode,
        getSetupUri: (appName, accountName) => {
            const totpUri = `otpauth://totp/${appName}:${accountName ?? username}?secret=${secretCode}&issuer=${appName}`;
            return new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_23__.AmplifyUrl(totpUri);
        },
    };
}
function getSignInResultFromError(errorName) {
    if (errorName === _types_errors_mjs__WEBPACK_IMPORTED_MODULE_24__.InitiateAuthException.PasswordResetRequiredException) {
        return {
            isSignedIn: false,
            nextStep: { signInStep: 'RESET_PASSWORD' },
        };
    }
    else if (errorName === _types_errors_mjs__WEBPACK_IMPORTED_MODULE_24__.InitiateAuthException.UserNotConfirmedException) {
        return {
            isSignedIn: false,
            nextStep: { signInStep: 'CONFIRM_SIGN_UP' },
        };
    }
}
function parseAttributes(attributes) {
    if (!attributes)
        return [];
    const parsedAttributes = JSON.parse(attributes).map(att => att.includes(USER_ATTRIBUTES) ? att.replace(USER_ATTRIBUTES, '') : att);
    return parsedAttributes;
}
function createAttributes(attributes) {
    if (!attributes)
        return {};
    const newAttributes = {};
    Object.entries(attributes).forEach(([key, value]) => {
        if (value)
            newAttributes[`${USER_ATTRIBUTES}${key}`] = value;
    });
    return newAttributes;
}
async function handleChallengeName(username, challengeName, session, challengeResponse, config, tokenOrchestrator, clientMetadata, options) {
    const userAttributes = options?.userAttributes;
    const deviceName = options?.friendlyDeviceName;
    switch (challengeName) {
        case 'WEB_AUTHN':
        case 'SELECT_CHALLENGE':
            if (challengeResponse === 'PASSWORD_SRP' ||
                challengeResponse === 'PASSWORD') {
                return {
                    ChallengeName: challengeResponse,
                    Session: session,
                    $metadata: {},
                };
            }
            return (0,_client_flows_userAuth_handleSelectChallenge_mjs__WEBPACK_IMPORTED_MODULE_25__.initiateSelectedChallenge)({
                username,
                session,
                selectedChallenge: challengeResponse,
                config,
                clientMetadata,
            });
        case 'SELECT_MFA_TYPE':
            return handleSelectMFATypeChallenge({
                challengeResponse,
                clientMetadata,
                session,
                username,
                config,
            });
        case 'MFA_SETUP':
            return handleMFASetupChallenge({
                challengeResponse,
                clientMetadata,
                session,
                username,
                deviceName,
                config,
            });
        case 'NEW_PASSWORD_REQUIRED':
            return handleCompleteNewPasswordChallenge({
                challengeResponse,
                clientMetadata,
                session,
                username,
                requiredAttributes: userAttributes,
                config,
            });
        case 'CUSTOM_CHALLENGE':
            return retryOnResourceNotFoundException(handleCustomChallenge, [
                {
                    challengeResponse,
                    clientMetadata,
                    session,
                    username,
                    config,
                    tokenOrchestrator,
                },
            ], username, tokenOrchestrator);
        case 'SMS_MFA':
        case 'SOFTWARE_TOKEN_MFA':
        case 'SMS_OTP':
        case 'EMAIL_OTP':
            return handleMFAChallenge({
                challengeName,
                challengeResponse,
                clientMetadata,
                session,
                username,
                config,
            });
        case 'PASSWORD':
            return (0,_client_flows_userAuth_handleSelectChallengeWithPassword_mjs__WEBPACK_IMPORTED_MODULE_26__.handleSelectChallengeWithPassword)(username, challengeResponse, clientMetadata, config, session);
        case 'PASSWORD_SRP':
            return (0,_client_flows_userAuth_handleSelectChallengeWithPasswordSRP_mjs__WEBPACK_IMPORTED_MODULE_27__.handleSelectChallengeWithPasswordSRP)(username, challengeResponse, // This is the actual password
            clientMetadata, config, session, tokenOrchestrator);
    }
    // TODO: remove this error message for production apps
    throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
        name: _common_AuthErrorStrings_mjs__WEBPACK_IMPORTED_MODULE_9__.AuthErrorCodes.SignInException,
        message: `An error occurred during the sign in process.
		${challengeName} challengeName returned by the underlying service was not addressed.`,
    });
}
function mapMfaType(mfa) {
    let mfaType = 'SMS_MFA';
    if (mfa === 'TOTP')
        mfaType = 'SOFTWARE_TOKEN_MFA';
    if (mfa === 'EMAIL')
        mfaType = 'EMAIL_OTP';
    return mfaType;
}
function getMFAType(type) {
    if (type === 'SMS_MFA')
        return 'SMS';
    if (type === 'SOFTWARE_TOKEN_MFA')
        return 'TOTP';
    if (type === 'EMAIL_OTP')
        return 'EMAIL';
    // TODO: log warning for unknown MFA type
}
function getMFATypes(types) {
    if (!types)
        return undefined;
    return types.map(getMFAType).filter(Boolean);
}
function parseMFATypes(mfa) {
    if (!mfa)
        return [];
    return JSON.parse(mfa);
}
function getAllowedMfaSetupTypes(availableMfaSetupTypes) {
    return availableMfaSetupTypes.filter(authMfaType => authMfaType === 'EMAIL' || authMfaType === 'TOTP');
}
async function assertUserNotAuthenticated() {
    let authUser;
    try {
        authUser = await (0,_apis_getCurrentUser_mjs__WEBPACK_IMPORTED_MODULE_28__.getCurrentUser)();
    }
    catch (error) { }
    if (authUser && authUser.userId && authUser.username) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError({
            name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_29__.USER_ALREADY_AUTHENTICATED_EXCEPTION,
            message: 'There is already a signed in user.',
            recoverySuggestion: 'Call signOut before calling signIn again.',
        });
    }
}
/**
 * This function is used to kick off the device management flow.
 *
 * If an error is thrown while generating a hash device or calling the `ConfirmDevice`
 * client, then this API will ignore the error and return undefined. Otherwise the authentication
 * flow will not complete and the user won't be able to be signed in.
 *
 * @returns DeviceMetadata | undefined
 */
async function getNewDeviceMetadata({ userPoolId, userPoolEndpoint, newDeviceMetadata, accessToken, }) {
    if (!newDeviceMetadata)
        return undefined;
    const userPoolName = userPoolId.split('_')[1] || '';
    const authenticationHelper = await (0,_srp_getAuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_15__.getAuthenticationHelper)(userPoolName);
    const deviceKey = newDeviceMetadata?.DeviceKey;
    const deviceGroupKey = newDeviceMetadata?.DeviceGroupKey;
    try {
        await authenticationHelper.generateHashDevice(deviceGroupKey ?? '', deviceKey ?? '');
    }
    catch (errGenHash) {
        // TODO: log error here
        return undefined;
    }
    const deviceSecretVerifierConfig = {
        Salt: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_30__.base64Encoder.convert((0,_srp_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_31__.getBytesFromHex)(authenticationHelper.getSaltToHashDevices())),
        PasswordVerifier: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_30__.base64Encoder.convert((0,_srp_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_31__.getBytesFromHex)(authenticationHelper.getVerifierDevices())),
    };
    const randomPassword = authenticationHelper.getRandomPassword();
    try {
        const confirmDevice = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createConfirmDeviceClient_mjs__WEBPACK_IMPORTED_MODULE_32__.createConfirmDeviceClient)({
            endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
                endpointOverride: userPoolEndpoint,
            }),
        });
        await confirmDevice({ region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId) }, {
            AccessToken: accessToken,
            DeviceName: await (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_33__.getDeviceName)(),
            DeviceKey: newDeviceMetadata?.DeviceKey,
            DeviceSecretVerifierConfig: deviceSecretVerifierConfig,
        });
        return {
            deviceKey,
            deviceGroupKey,
            randomPassword,
        };
    }
    catch (error) {
        // TODO: log error here
        return undefined;
    }
}
/**
 * It will retry the function if the error is a `ResourceNotFoundException` and
 * will clean the device keys stored in the storage mechanism.
 *
 */
async function retryOnResourceNotFoundException(func, args, username, tokenOrchestrator) {
    try {
        return await func(...args);
    }
    catch (error) {
        if (error instanceof _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_8__.AuthError &&
            error.name === 'ResourceNotFoundException' &&
            error.message.includes('Device does not exist.')) {
            await tokenOrchestrator.clearDeviceMetadata(username);
            return func(...args);
        }
        throw error;
    }
}
function setActiveSignInUsername(username) {
    const { dispatch } = _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__.signInStore;
    dispatch({ type: 'SET_USERNAME', value: username });
}
function getActiveSignInUsername(username) {
    const state = _client_utils_store_signInStore_mjs__WEBPACK_IMPORTED_MODULE_7__.signInStore.getState();
    return state.username ?? username;
}
async function handleMFAChallenge({ challengeName, challengeResponse, clientMetadata, session, username, config, }) {
    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;
    const challengeResponses = {
        USERNAME: username,
    };
    if (challengeName === 'EMAIL_OTP') {
        challengeResponses.EMAIL_OTP_CODE = challengeResponse;
    }
    if (challengeName === 'SMS_MFA') {
        challengeResponses.SMS_MFA_CODE = challengeResponse;
    }
    if (challengeName === 'SMS_OTP') {
        challengeResponses.SMS_OTP_CODE = challengeResponse;
    }
    if (challengeName === 'SOFTWARE_TOKEN_MFA') {
        challengeResponses.SOFTWARE_TOKEN_MFA_CODE = challengeResponse;
    }
    const userContextData = (0,_userContextData_mjs__WEBPACK_IMPORTED_MODULE_0__.getUserContextData)({
        username,
        userPoolId,
        userPoolClientId,
    });
    const jsonReq = {
        ChallengeName: challengeName,
        ChallengeResponses: challengeResponses,
        Session: session,
        ClientMetadata: clientMetadata,
        ClientId: userPoolClientId,
        UserContextData: userContextData,
    };
    const respondToAuthChallenge = (0,_foundation_factories_serviceClients_cognitoIdentityProvider_createRespondToAuthChallengeClient_mjs__WEBPACK_IMPORTED_MODULE_1__.createRespondToAuthChallengeClient)({
        endpointResolver: (0,_factories_createCognitoUserPoolEndpointResolver_mjs__WEBPACK_IMPORTED_MODULE_2__.createCognitoUserPoolEndpointResolver)({
            endpointOverride: userPoolEndpoint,
        }),
    });
    return respondToAuthChallenge({
        region: (0,_foundation_parsers_regionParsers_mjs__WEBPACK_IMPORTED_MODULE_3__.getRegionFromUserPoolId)(userPoolId),
        userAgentValue: (0,_utils_getAuthUserAgentValue_mjs__WEBPACK_IMPORTED_MODULE_4__.getAuthUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_5__.AuthAction.ConfirmSignIn),
    }, jsonReq);
}


//# sourceMappingURL=signInHelpers.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/signInWithRedirectStore.mjs":
/*!****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/signInWithRedirectStore.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultOAuthStore: () => (/* binding */ DefaultOAuthStore)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/singleton/Auth/utils/index.mjs");
/* harmony import */ var _tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tokenProvider/TokenStore.mjs */ "../auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.mjs */ "../auth/dist/esm/providers/cognito/utils/types.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const V5_HOSTED_UI_KEY = 'amplify-signin-with-hostedUI';
const name = 'CognitoIdentityServiceProvider';
class DefaultOAuthStore {
    constructor(keyValueStorage) {
        this.keyValueStorage = keyValueStorage;
    }
    async clearOAuthInflightData() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        await Promise.all([
            this.keyValueStorage.removeItem(authKeys.inflightOAuth),
            this.keyValueStorage.removeItem(authKeys.oauthPKCE),
            this.keyValueStorage.removeItem(authKeys.oauthState),
        ]);
    }
    async clearOAuthData() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        await this.clearOAuthInflightData();
        await this.keyValueStorage.removeItem(V5_HOSTED_UI_KEY); // remove in case a customer migrated an App from v5 to v6
        return this.keyValueStorage.removeItem(authKeys.oauthSignIn);
    }
    loadOAuthState() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        return this.keyValueStorage.getItem(authKeys.oauthState);
    }
    storeOAuthState(state) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        return this.keyValueStorage.setItem(authKeys.oauthState, state);
    }
    loadPKCE() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        return this.keyValueStorage.getItem(authKeys.oauthPKCE);
    }
    storePKCE(pkce) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        return this.keyValueStorage.setItem(authKeys.oauthPKCE, pkce);
    }
    setAuthConfig(authConfigParam) {
        this.cognitoConfig = authConfigParam;
    }
    async loadOAuthInFlight() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        return ((await this.keyValueStorage.getItem(authKeys.inflightOAuth)) === 'true');
    }
    async storeOAuthInFlight(inflight) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        await this.keyValueStorage.setItem(authKeys.inflightOAuth, `${inflight}`);
    }
    async loadOAuthSignIn() {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        const isLegacyHostedUISignIn = await this.keyValueStorage.getItem(V5_HOSTED_UI_KEY);
        const [isOAuthSignIn, preferPrivateSession] = (await this.keyValueStorage.getItem(authKeys.oauthSignIn))?.split(',') ??
            [];
        return {
            isOAuthSignIn: isOAuthSignIn === 'true' || isLegacyHostedUISignIn === 'true',
            preferPrivateSession: preferPrivateSession === 'true',
        };
    }
    async storeOAuthSignIn(oauthSignIn, preferPrivateSession = false) {
        (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.assertTokenProviderConfig)(this.cognitoConfig);
        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);
        await this.keyValueStorage.setItem(authKeys.oauthSignIn, `${oauthSignIn},${preferPrivateSession}`);
    }
}
const createKeysForAuthStorage = (provider, identifier) => {
    return (0,_tokenProvider_TokenStore_mjs__WEBPACK_IMPORTED_MODULE_1__.getAuthStorageKeys)(_types_mjs__WEBPACK_IMPORTED_MODULE_2__.OAuthStorageKeys)(provider, identifier);
};


//# sourceMappingURL=signInWithRedirectStore.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/signUpHelpers.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/signUpHelpers.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoSignInUserConfirmed: () => (/* binding */ autoSignInUserConfirmed),
/* harmony export */   autoSignInWhenUserIsConfirmedWithLink: () => (/* binding */ autoSignInWhenUserIsConfirmedWithLink),
/* harmony export */   handleCodeAutoSignIn: () => (/* binding */ handleCodeAutoSignIn)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../apis/signIn.mjs */ "../auth/dist/esm/providers/cognito/apis/signIn.mjs");
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../apis/autoSignIn.mjs */ "../auth/dist/esm/providers/cognito/apis/autoSignIn.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");
/* harmony import */ var _apis_signInWithUserAuth_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../apis/signInWithUserAuth.mjs */ "../auth/dist/esm/providers/cognito/apis/signInWithUserAuth.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const MAX_AUTOSIGNIN_POLLING_MS = 3 * 60 * 1000;
function handleCodeAutoSignIn(signInInput) {
    const stopHubListener = _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.HubInternal.listen('auth-internal', async ({ payload }) => {
        switch (payload.event) {
            case 'confirmSignUp': {
                const response = payload.data;
                if (response?.isSignUpComplete) {
                    _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.HubInternal.dispatch('auth-internal', {
                        event: 'autoSignIn',
                    });
                    (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.setAutoSignIn)(autoSignInWithCode(signInInput));
                    stopHubListener();
                }
            }
        }
    });
    // This will stop the listener if confirmSignUp is not resolved.
    const timeOutId = setTimeout(() => {
        stopHubListener();
        clearTimeout(timeOutId);
        (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
    }, MAX_AUTOSIGNIN_POLLING_MS);
}
function debounce(fun, delay) {
    let timer;
    return (args) => {
        if (!timer) {
            fun(...args);
        }
        clearTimeout(timer);
        timer = setTimeout(() => {
            timer = undefined;
        }, delay);
    };
}
function handleAutoSignInWithLink(signInInput, resolve, reject) {
    const start = Date.now();
    const autoSignInPollingIntervalId = setInterval(async () => {
        const elapsedTime = Date.now() - start;
        const maxTime = MAX_AUTOSIGNIN_POLLING_MS;
        if (elapsedTime > maxTime) {
            clearInterval(autoSignInPollingIntervalId);
            reject(new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthError({
                name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.AUTO_SIGN_IN_EXCEPTION,
                message: 'The account was not confirmed on time.',
                recoverySuggestion: 'Try to verify your account by clicking the link sent your email or phone and then login manually.',
            }));
            (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
        }
        else {
            try {
                const signInOutput = await (0,_apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_4__.signIn)(signInInput);
                if (signInOutput.nextStep.signInStep !== 'CONFIRM_SIGN_UP') {
                    resolve(signInOutput);
                    clearInterval(autoSignInPollingIntervalId);
                    (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
                }
            }
            catch (error) {
                clearInterval(autoSignInPollingIntervalId);
                reject(error);
                (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
            }
        }
    }, 5000);
}
const debouncedAutoSignInWithLink = debounce(handleAutoSignInWithLink, 300);
const debouncedAutoSignWithCodeOrUserConfirmed = debounce(handleAutoSignInWithCodeOrUserConfirmed, 300);
function autoSignInWhenUserIsConfirmedWithLink(signInInput) {
    return async () => {
        return new Promise((resolve, reject) => {
            debouncedAutoSignInWithLink([signInInput, resolve, reject]);
        });
    };
}
async function handleAutoSignInWithCodeOrUserConfirmed(signInInput, resolve, reject) {
    try {
        const output = signInInput?.options?.authFlowType === 'USER_AUTH'
            ? await (0,_apis_signInWithUserAuth_mjs__WEBPACK_IMPORTED_MODULE_5__.signInWithUserAuth)(signInInput)
            : await (0,_apis_signIn_mjs__WEBPACK_IMPORTED_MODULE_4__.signIn)(signInInput);
        resolve(output);
        (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
    }
    catch (error) {
        reject(error);
        (0,_apis_autoSignIn_mjs__WEBPACK_IMPORTED_MODULE_1__.resetAutoSignIn)();
    }
}
function autoSignInWithCode(signInInput) {
    return async () => {
        return new Promise((resolve, reject) => {
            debouncedAutoSignWithCodeOrUserConfirmed([signInInput, resolve, reject]);
        });
    };
}
const autoSignInUserConfirmed = autoSignInWithCode;


//# sourceMappingURL=signUpHelpers.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/AuthenticationHelper/AuthenticationHelper.mjs":
/*!**************************************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/AuthenticationHelper/AuthenticationHelper.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AuthenticationHelper)
/* harmony export */ });
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../textEncoder/index.mjs */ "../auth/dist/esm/providers/cognito/utils/textEncoder/index.mjs");
/* harmony import */ var _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");
/* harmony import */ var _calculate_calculateS_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../calculate/calculateS.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateS.mjs");
/* harmony import */ var _calculate_calculateU_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../calculate/calculateU.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateU.mjs");
/* harmony import */ var _getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../getBytesFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs");
/* harmony import */ var _getHashFromData_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../getHashFromData.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromData.mjs");
/* harmony import */ var _getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../getHashFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromHex.mjs");
/* harmony import */ var _getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../getHexFromBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHexFromBytes.mjs");
/* harmony import */ var _getHkdfKey_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../getHkdfKey.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHkdfKey.mjs");
/* harmony import */ var _getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../getPaddedHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getPaddedHex.mjs");
/* harmony import */ var _getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../getRandomBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getRandomBytes.mjs");
/* harmony import */ var _getRandomString_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../getRandomString.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getRandomString.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/** @class */
class AuthenticationHelper {
    constructor({ userPoolName, a, g, A, N, }) {
        this.encoder = _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_0__.textEncoder;
        this.userPoolName = userPoolName;
        this.a = a;
        this.g = g;
        this.A = A;
        this.N = N;
        this.k = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]((0,_getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_2__.getHashFromHex)(`${(0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(N)}${(0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(g)}`), 16);
    }
    /**
     * @returns {string} Generated random value included in password hash.
     */
    getRandomPassword() {
        if (!this.randomPassword) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthError({
                name: 'EmptyBigIntegerRandomPassword',
                message: 'random password is empty',
            });
        }
        return this.randomPassword;
    }
    /**
     * @returns {string} Generated random value included in devices hash.
     */
    getSaltToHashDevices() {
        if (!this.saltToHashDevices) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthError({
                name: 'EmptyBigIntegersaltToHashDevices',
                message: 'saltToHashDevices is empty',
            });
        }
        return this.saltToHashDevices;
    }
    /**
     * @returns {string} Value used to verify devices.
     */
    getVerifierDevices() {
        if (!this.verifierDevices) {
            throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_4__.AuthError({
                name: 'EmptyBigIntegerVerifierDevices',
                message: 'verifyDevices is empty',
            });
        }
        return this.verifierDevices;
    }
    /**
     * Generate salts and compute verifier.
     *
     * @param {string} deviceGroupKey Devices to generate verifier for.
     * @param {string} username User to generate verifier for.
     *
     * @returns {Promise<void>}
     */
    async generateHashDevice(deviceGroupKey, username) {
        this.randomPassword = (0,_getRandomString_mjs__WEBPACK_IMPORTED_MODULE_5__.getRandomString)();
        const combinedString = `${deviceGroupKey}${username}:${this.randomPassword}`;
        const hashedString = (0,_getHashFromData_mjs__WEBPACK_IMPORTED_MODULE_6__.getHashFromData)(combinedString);
        const hexRandom = (0,_getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_7__.getHexFromBytes)((0,_getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_8__.getRandomBytes)(16));
        // The random hex will be unambiguously represented as a postive integer
        this.saltToHashDevices = (0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"](hexRandom, 16));
        return new Promise((resolve, reject) => {
            this.g.modPow(new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]((0,_getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_2__.getHashFromHex)(this.saltToHashDevices + hashedString), 16), this.N, (err, result) => {
                if (err) {
                    reject(err);
                    return;
                }
                this.verifierDevices = (0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(result);
                resolve();
            });
        });
    }
    /**
     * Calculates the final HKDF key based on computed S value, computed U value and the key
     *
     * @param {String} username Username.
     * @param {String} password Password.
     * @param {AuthBigInteger} B Server B value.
     * @param {AuthBigInteger} salt Generated salt.
     */
    async getPasswordAuthenticationKey({ username, password, serverBValue, salt, }) {
        if (serverBValue.mod(this.N).equals(_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].ZERO)) {
            throw new Error('B cannot be zero.');
        }
        const U = (0,_calculate_calculateU_mjs__WEBPACK_IMPORTED_MODULE_9__.calculateU)({
            A: this.A,
            B: serverBValue,
        });
        const usernamePassword = `${this.userPoolName}${username}:${password}`;
        const usernamePasswordHash = (0,_getHashFromData_mjs__WEBPACK_IMPORTED_MODULE_6__.getHashFromData)(usernamePassword);
        const x = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]((0,_getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_2__.getHashFromHex)((0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(salt) + usernamePasswordHash), 16);
        const S = await (0,_calculate_calculateS_mjs__WEBPACK_IMPORTED_MODULE_10__.calculateS)({
            a: this.a,
            g: this.g,
            k: this.k,
            x,
            B: serverBValue,
            N: this.N,
            U,
        });
        const context = this.encoder.convert('Caldera Derived Key');
        const spacer = this.encoder.convert(String.fromCharCode(1));
        const info = new Uint8Array(context.byteLength + spacer.byteLength);
        info.set(context, 0);
        info.set(spacer, context.byteLength);
        const hkdfKey = (0,_getHkdfKey_mjs__WEBPACK_IMPORTED_MODULE_11__.getHkdfKey)((0,_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_12__.getBytesFromHex)((0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(S)), (0,_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_12__.getBytesFromHex)((0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_3__.getPaddedHex)(U)), info);
        return hkdfKey;
    }
}


//# sourceMappingURL=AuthenticationHelper.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs":
/*!******************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BigInteger)
/* harmony export */ });
/* eslint-disable */
// @ts-nocheck -> BigInteger is already a vended utility
// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/
//
// All public methods have been removed except the following:
//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)
//   toString (only radix 2, 4, 8, 16 and 32 supported)
//   negate
//   abs
//   compareTo
//   bitLength
//   mod
//   equals
//   add
//   subtract
//   multiply
//   divide
//   modPow
/*
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
// (public) Constructor
function BigInteger(a, b) {
    if (a != null)
        this.fromString(a, b);
}
// return new, unset BigInteger
function nbi() {
    return new BigInteger(null, null);
}
// Bits per digit
let dbits;
// JavaScript engine analysis
const canary = 0xdeadbeefcafe;
const j_lm = (canary & 0xffffff) === 0xefcafe;
// am: Compute w_j += (x*this_i), propagate carries,
// c is initial carry, returns final carry.
// c < 3*dvalue, x < 2*dvalue, this_i < dvalue
// We need to select the fastest one that works in this environment.
// am1: use a single mult and divide to get the high bits,
// max digit bits should be 26 because
// max internal value = 2*dvalue^2-2*dvalue (< 2^53)
function am1(i, x, w, j, c, n) {
    while (--n >= 0) {
        const v = x * this[i++] + w[j] + c;
        c = Math.floor(v / 0x4000000);
        w[j++] = v & 0x3ffffff;
    }
    return c;
}
// am2 avoids a big mult-and-extract completely.
// Max digit bits should be <= 30 because we do bitwise ops
// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)
function am2(i, x, w, j, c, n) {
    const xl = x & 0x7fff;
    const xh = x >> 15;
    while (--n >= 0) {
        let l = this[i] & 0x7fff;
        const h = this[i++] >> 15;
        const m = xh * l + h * xl;
        l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);
        c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);
        w[j++] = l & 0x3fffffff;
    }
    return c;
}
// Alternately, set max digit bits to 28 since some
// browsers slow down when dealing with 32-bit numbers.
function am3(i, x, w, j, c, n) {
    const xl = x & 0x3fff;
    const xh = x >> 14;
    while (--n >= 0) {
        let l = this[i] & 0x3fff;
        const h = this[i++] >> 14;
        const m = xh * l + h * xl;
        l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;
        c = (l >> 28) + (m >> 14) + xh * h;
        w[j++] = l & 0xfffffff;
    }
    return c;
}
const inBrowser = typeof navigator !== 'undefined';
if (inBrowser && j_lm && navigator.appName === 'Microsoft Internet Explorer') {
    BigInteger.prototype.am = am2;
    dbits = 30;
}
else if (inBrowser && j_lm && navigator.appName !== 'Netscape') {
    BigInteger.prototype.am = am1;
    dbits = 26;
}
else {
    // Mozilla/Netscape seems to prefer am3
    BigInteger.prototype.am = am3;
    dbits = 28;
}
BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = (1 << dbits) - 1;
BigInteger.prototype.DV = 1 << dbits;
const BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2, BI_FP);
BigInteger.prototype.F1 = BI_FP - dbits;
BigInteger.prototype.F2 = 2 * dbits - BI_FP;
// Digit conversions
const BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';
const BI_RC = [];
let rr, vv;
rr = '0'.charCodeAt(0);
for (vv = 0; vv <= 9; ++vv)
    BI_RC[rr++] = vv;
rr = 'a'.charCodeAt(0);
for (vv = 10; vv < 36; ++vv)
    BI_RC[rr++] = vv;
rr = 'A'.charCodeAt(0);
for (vv = 10; vv < 36; ++vv)
    BI_RC[rr++] = vv;
function int2char(n) {
    return BI_RM.charAt(n);
}
function intAt(s, i) {
    const c = BI_RC[s.charCodeAt(i)];
    return c == null ? -1 : c;
}
// (protected) copy this to r
function bnpCopyTo(r) {
    for (let i = this.t - 1; i >= 0; --i)
        r[i] = this[i];
    r.t = this.t;
    r.s = this.s;
}
// (protected) set from integer value x, -DV <= x < DV
function bnpFromInt(x) {
    this.t = 1;
    this.s = x < 0 ? -1 : 0;
    if (x > 0)
        this[0] = x;
    else if (x < -1)
        this[0] = x + this.DV;
    else
        this.t = 0;
}
// return bigint initialized to value
function nbv(i) {
    const r = nbi();
    r.fromInt(i);
    return r;
}
// (protected) set from string and radix
function bnpFromString(s, b) {
    let k;
    if (b === 16)
        k = 4;
    else if (b === 8)
        k = 3;
    else if (b === 2)
        k = 1;
    else if (b === 32)
        k = 5;
    else if (b === 4)
        k = 2;
    else
        throw new Error('Only radix 2, 4, 8, 16, 32 are supported');
    this.t = 0;
    this.s = 0;
    let i = s.length;
    let mi = false;
    let sh = 0;
    while (--i >= 0) {
        const x = intAt(s, i);
        if (x < 0) {
            if (s.charAt(i) === '-')
                mi = true;
            continue;
        }
        mi = false;
        if (sh === 0)
            this[this.t++] = x;
        else if (sh + k > this.DB) {
            this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;
            this[this.t++] = x >> (this.DB - sh);
        }
        else
            this[this.t - 1] |= x << sh;
        sh += k;
        if (sh >= this.DB)
            sh -= this.DB;
    }
    this.clamp();
    if (mi)
        BigInteger.ZERO.subTo(this, this);
}
// (protected) clamp off excess high words
function bnpClamp() {
    const c = this.s & this.DM;
    while (this.t > 0 && this[this.t - 1] == c)
        --this.t;
}
// (public) return string representation in given radix
function bnToString(b) {
    if (this.s < 0)
        return '-' + this.negate().toString(b);
    let k;
    if (b == 16)
        k = 4;
    else if (b === 8)
        k = 3;
    else if (b === 2)
        k = 1;
    else if (b === 32)
        k = 5;
    else if (b === 4)
        k = 2;
    else
        throw new Error('Only radix 2, 4, 8, 16, 32 are supported');
    const km = (1 << k) - 1;
    let d;
    let m = false;
    let r = '';
    let i = this.t;
    let p = this.DB - ((i * this.DB) % k);
    if (i-- > 0) {
        if (p < this.DB && (d = this[i] >> p) > 0) {
            m = true;
            r = int2char(d);
        }
        while (i >= 0) {
            if (p < k) {
                d = (this[i] & ((1 << p) - 1)) << (k - p);
                d |= this[--i] >> (p += this.DB - k);
            }
            else {
                d = (this[i] >> (p -= k)) & km;
                if (p <= 0) {
                    p += this.DB;
                    --i;
                }
            }
            if (d > 0)
                m = true;
            if (m)
                r += int2char(d);
        }
    }
    return m ? r : '0';
}
// (public) -this
function bnNegate() {
    const r = nbi();
    BigInteger.ZERO.subTo(this, r);
    return r;
}
// (public) |this|
function bnAbs() {
    return this.s < 0 ? this.negate() : this;
}
// (public) return + if this > a, - if this < a, 0 if equal
function bnCompareTo(a) {
    let r = this.s - a.s;
    if (r != 0)
        return r;
    let i = this.t;
    r = i - a.t;
    if (r != 0)
        return this.s < 0 ? -r : r;
    while (--i >= 0)
        if ((r = this[i] - a[i]) != 0)
            return r;
    return 0;
}
// returns bit length of the integer x
function nbits(x) {
    let r = 1;
    let t;
    if ((t = x >>> 16) !== 0) {
        x = t;
        r += 16;
    }
    if ((t = x >> 8) !== 0) {
        x = t;
        r += 8;
    }
    if ((t = x >> 4) !== 0) {
        x = t;
        r += 4;
    }
    if ((t = x >> 2) !== 0) {
        x = t;
        r += 2;
    }
    if ((t = x >> 1) !== 0) {
        x = t;
        r += 1;
    }
    return r;
}
// (public) return the number of bits in "this"
function bnBitLength() {
    if (this.t <= 0)
        return 0;
    return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));
}
// (protected) r = this << n*DB
function bnpDLShiftTo(n, r) {
    let i;
    for (i = this.t - 1; i >= 0; --i)
        r[i + n] = this[i];
    for (i = n - 1; i >= 0; --i)
        r[i] = 0;
    r.t = this.t + n;
    r.s = this.s;
}
// (protected) r = this >> n*DB
function bnpDRShiftTo(n, r) {
    for (let i = n; i < this.t; ++i)
        r[i - n] = this[i];
    r.t = Math.max(this.t - n, 0);
    r.s = this.s;
}
// (protected) r = this << n
function bnpLShiftTo(n, r) {
    const bs = n % this.DB;
    const cbs = this.DB - bs;
    const bm = (1 << cbs) - 1;
    const ds = Math.floor(n / this.DB);
    let c = (this.s << bs) & this.DM;
    let i;
    for (i = this.t - 1; i >= 0; --i) {
        r[i + ds + 1] = (this[i] >> cbs) | c;
        c = (this[i] & bm) << bs;
    }
    for (i = ds - 1; i >= 0; --i)
        r[i] = 0;
    r[ds] = c;
    r.t = this.t + ds + 1;
    r.s = this.s;
    r.clamp();
}
// (protected) r = this >> n
function bnpRShiftTo(n, r) {
    r.s = this.s;
    const ds = Math.floor(n / this.DB);
    if (ds >= this.t) {
        r.t = 0;
        return;
    }
    const bs = n % this.DB;
    const cbs = this.DB - bs;
    const bm = (1 << bs) - 1;
    r[0] = this[ds] >> bs;
    for (let i = ds + 1; i < this.t; ++i) {
        r[i - ds - 1] |= (this[i] & bm) << cbs;
        r[i - ds] = this[i] >> bs;
    }
    if (bs > 0)
        r[this.t - ds - 1] |= (this.s & bm) << cbs;
    r.t = this.t - ds;
    r.clamp();
}
// (protected) r = this - a
function bnpSubTo(a, r) {
    let i = 0;
    let c = 0;
    const m = Math.min(a.t, this.t);
    while (i < m) {
        c += this[i] - a[i];
        r[i++] = c & this.DM;
        c >>= this.DB;
    }
    if (a.t < this.t) {
        c -= a.s;
        while (i < this.t) {
            c += this[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        c += this.s;
    }
    else {
        c += this.s;
        while (i < a.t) {
            c -= a[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        c -= a.s;
    }
    r.s = c < 0 ? -1 : 0;
    if (c < -1)
        r[i++] = this.DV + c;
    else if (c > 0)
        r[i++] = c;
    r.t = i;
    r.clamp();
}
// (protected) r = this * a, r != this,a (HAC 14.12)
// "this" should be the larger one if appropriate.
function bnpMultiplyTo(a, r) {
    const x = this.abs();
    const y = a.abs();
    let i = x.t;
    r.t = i + y.t;
    while (--i >= 0)
        r[i] = 0;
    for (i = 0; i < y.t; ++i)
        r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);
    r.s = 0;
    r.clamp();
    if (this.s !== a.s)
        BigInteger.ZERO.subTo(r, r);
}
// (protected) r = this^2, r != this (HAC 14.16)
function bnpSquareTo(r) {
    const x = this.abs();
    let i = (r.t = 2 * x.t);
    while (--i >= 0)
        r[i] = 0;
    for (i = 0; i < x.t - 1; ++i) {
        const c = x.am(i, x[i], r, 2 * i, 0, 1);
        if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >=
            x.DV) {
            r[i + x.t] -= x.DV;
            r[i + x.t + 1] = 1;
        }
    }
    if (r.t > 0)
        r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);
    r.s = 0;
    r.clamp();
}
// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)
// r != q, this != m.  q or r may be null.
function bnpDivRemTo(m, q, r) {
    const pm = m.abs();
    if (pm.t <= 0)
        return;
    const pt = this.abs();
    if (pt.t < pm.t) {
        if (q != null)
            q.fromInt(0);
        if (r != null)
            this.copyTo(r);
        return;
    }
    if (r === null)
        r = nbi();
    const y = nbi();
    const ts = this.s;
    const ms = m.s;
    const nsh = this.DB - nbits(pm[pm.t - 1]);
    // normalize modulus
    if (nsh > 0) {
        pm.lShiftTo(nsh, y);
        pt.lShiftTo(nsh, r);
    }
    else {
        pm.copyTo(y);
        pt.copyTo(r);
    }
    const ys = y.t;
    const y0 = y[ys - 1];
    if (y0 === 0)
        return;
    const yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);
    const d1 = this.FV / yt;
    const d2 = (1 << this.F1) / yt;
    const e = 1 << this.F2;
    let i = r.t;
    let j = i - ys;
    const t = q === null ? nbi() : q;
    y.dlShiftTo(j, t);
    if (r.compareTo(t) >= 0) {
        r[r.t++] = 1;
        r.subTo(t, r);
    }
    BigInteger.ONE.dlShiftTo(ys, t);
    t.subTo(y, y);
    // "negative" y so we can replace sub with am later
    while (y.t < ys)
        y[y.t++] = 0;
    while (--j >= 0) {
        // Estimate quotient digit
        let qd = r[--i] === y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);
        if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {
            // Try it out
            y.dlShiftTo(j, t);
            r.subTo(t, r);
            while (r[i] < --qd)
                r.subTo(t, r);
        }
    }
    if (q !== null) {
        r.drShiftTo(ys, q);
        if (ts !== ms)
            BigInteger.ZERO.subTo(q, q);
    }
    r.t = ys;
    r.clamp();
    if (nsh > 0)
        r.rShiftTo(nsh, r);
    // Denormalize remainder
    if (ts < 0)
        BigInteger.ZERO.subTo(r, r);
}
// (public) this mod a
function bnMod(a) {
    const r = nbi();
    this.abs().divRemTo(a, null, r);
    if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0)
        a.subTo(r, r);
    return r;
}
// (protected) return "-1/this % 2^DB"; useful for Mont. reduction
// justification:
//         xy == 1 (mod m)
//         xy =  1+km
//   xy(2-xy) = (1+km)(1-km)
// x[y(2-xy)] = 1-k^2m^2
// x[y(2-xy)] == 1 (mod m^2)
// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2
// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.
// JS multiply "overflows" differently from C/C++, so care is needed here.
function bnpInvDigit() {
    if (this.t < 1)
        return 0;
    const x = this[0];
    if ((x & 1) === 0)
        return 0;
    let y = x & 3;
    // y == 1/x mod 2^2
    y = (y * (2 - (x & 0xf) * y)) & 0xf;
    // y == 1/x mod 2^4
    y = (y * (2 - (x & 0xff) * y)) & 0xff;
    // y == 1/x mod 2^8
    y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff;
    // y == 1/x mod 2^16
    // last step - calculate inverse mod DV directly;
    // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints
    y = (y * (2 - ((x * y) % this.DV))) % this.DV;
    // y == 1/x mod 2^dbits
    // we really want the negative inverse, and -DV < y < DV
    return y > 0 ? this.DV - y : -y;
}
function bnEquals(a) {
    return this.compareTo(a) === 0;
}
// (protected) r = this + a
function bnpAddTo(a, r) {
    let i = 0;
    let c = 0;
    const m = Math.min(a.t, this.t);
    while (i < m) {
        c += this[i] + a[i];
        r[i++] = c & this.DM;
        c >>= this.DB;
    }
    if (a.t < this.t) {
        c += a.s;
        while (i < this.t) {
            c += this[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        c += this.s;
    }
    else {
        c += this.s;
        while (i < a.t) {
            c += a[i];
            r[i++] = c & this.DM;
            c >>= this.DB;
        }
        c += a.s;
    }
    r.s = c < 0 ? -1 : 0;
    if (c > 0)
        r[i++] = c;
    else if (c < -1)
        r[i++] = this.DV + c;
    r.t = i;
    r.clamp();
}
// (public) this + a
function bnAdd(a) {
    const r = nbi();
    this.addTo(a, r);
    return r;
}
// (public) this - a
function bnSubtract(a) {
    const r = nbi();
    this.subTo(a, r);
    return r;
}
// (public) this * a
function bnMultiply(a) {
    const r = nbi();
    this.multiplyTo(a, r);
    return r;
}
// (public) this / a
function bnDivide(a) {
    const r = nbi();
    this.divRemTo(a, r, null);
    return r;
}
// Montgomery reduction
function Montgomery(m) {
    this.m = m;
    this.mp = m.invDigit();
    this.mpl = this.mp & 0x7fff;
    this.mph = this.mp >> 15;
    this.um = (1 << (m.DB - 15)) - 1;
    this.mt2 = 2 * m.t;
}
// xR mod m
function montConvert(x) {
    const r = nbi();
    x.abs().dlShiftTo(this.m.t, r);
    r.divRemTo(this.m, null, r);
    if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0)
        this.m.subTo(r, r);
    return r;
}
// x/R mod m
function montRevert(x) {
    const r = nbi();
    x.copyTo(r);
    this.reduce(r);
    return r;
}
// x = x/R mod m (HAC 14.32)
function montReduce(x) {
    while (x.t <= this.mt2)
        // pad x so am has enough room later
        x[x.t++] = 0;
    for (let i = 0; i < this.m.t; ++i) {
        // faster way of calculating u0 = x[i]*mp mod DV
        let j = x[i] & 0x7fff;
        const u0 = (j * this.mpl +
            (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) &
            x.DM;
        // use am to combine the multiply-shift-add into one call
        j = i + this.m.t;
        x[j] += this.m.am(0, u0, x, i, 0, this.m.t);
        // propagate carry
        while (x[j] >= x.DV) {
            x[j] -= x.DV;
            x[++j]++;
        }
    }
    x.clamp();
    x.drShiftTo(this.m.t, x);
    if (x.compareTo(this.m) >= 0)
        x.subTo(this.m, x);
}
// r = "x^2/R mod m"; x != r
function montSqrTo(x, r) {
    x.squareTo(r);
    this.reduce(r);
}
// r = "xy/R mod m"; x,y != r
function montMulTo(x, y, r) {
    x.multiplyTo(y, r);
    this.reduce(r);
}
Montgomery.prototype.convert = montConvert;
Montgomery.prototype.revert = montRevert;
Montgomery.prototype.reduce = montReduce;
Montgomery.prototype.mulTo = montMulTo;
Montgomery.prototype.sqrTo = montSqrTo;
// (public) this^e % m (HAC 14.85)
function bnModPow(e, m, callback) {
    let i = e.bitLength();
    let k;
    let r = nbv(1);
    const z = new Montgomery(m);
    if (i <= 0)
        return r;
    else if (i < 18)
        k = 1;
    else if (i < 48)
        k = 3;
    else if (i < 144)
        k = 4;
    else if (i < 768)
        k = 5;
    else
        k = 6;
    // precomputation
    const g = [];
    let n = 3;
    const k1 = k - 1;
    const km = (1 << k) - 1;
    g[1] = z.convert(this);
    if (k > 1) {
        const g2 = nbi();
        z.sqrTo(g[1], g2);
        while (n <= km) {
            g[n] = nbi();
            z.mulTo(g2, g[n - 2], g[n]);
            n += 2;
        }
    }
    let j = e.t - 1;
    let w;
    let is1 = true;
    let r2 = nbi();
    let t;
    i = nbits(e[j]) - 1;
    while (j >= 0) {
        if (i >= k1)
            w = (e[j] >> (i - k1)) & km;
        else {
            w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);
            if (j > 0)
                w |= e[j - 1] >> (this.DB + i - k1);
        }
        n = k;
        while ((w & 1) === 0) {
            w >>= 1;
            --n;
        }
        if ((i -= n) < 0) {
            i += this.DB;
            --j;
        }
        if (is1) {
            // ret == 1, don't bother squaring or multiplying it
            g[w].copyTo(r);
            is1 = false;
        }
        else {
            while (n > 1) {
                z.sqrTo(r, r2);
                z.sqrTo(r2, r);
                n -= 2;
            }
            if (n > 0)
                z.sqrTo(r, r2);
            else {
                t = r;
                r = r2;
                r2 = t;
            }
            z.mulTo(r2, g[w], r);
        }
        while (j >= 0 && (e[j] & (1 << i)) === 0) {
            z.sqrTo(r, r2);
            t = r;
            r = r2;
            r2 = t;
            if (--i < 0) {
                i = this.DB - 1;
                --j;
            }
        }
    }
    const result = z.revert(r);
    callback(null, result);
    return result;
}
// protected
BigInteger.prototype.copyTo = bnpCopyTo;
BigInteger.prototype.fromInt = bnpFromInt;
BigInteger.prototype.fromString = bnpFromString;
BigInteger.prototype.clamp = bnpClamp;
BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
BigInteger.prototype.drShiftTo = bnpDRShiftTo;
BigInteger.prototype.lShiftTo = bnpLShiftTo;
BigInteger.prototype.rShiftTo = bnpRShiftTo;
BigInteger.prototype.subTo = bnpSubTo;
BigInteger.prototype.multiplyTo = bnpMultiplyTo;
BigInteger.prototype.squareTo = bnpSquareTo;
BigInteger.prototype.divRemTo = bnpDivRemTo;
BigInteger.prototype.invDigit = bnpInvDigit;
BigInteger.prototype.addTo = bnpAddTo;
// public
BigInteger.prototype.toString = bnToString;
BigInteger.prototype.negate = bnNegate;
BigInteger.prototype.abs = bnAbs;
BigInteger.prototype.compareTo = bnCompareTo;
BigInteger.prototype.bitLength = bnBitLength;
BigInteger.prototype.mod = bnMod;
BigInteger.prototype.equals = bnEquals;
BigInteger.prototype.add = bnAdd;
BigInteger.prototype.subtract = bnSubtract;
BigInteger.prototype.multiply = bnMultiply;
BigInteger.prototype.divide = bnDivide;
BigInteger.prototype.modPow = bnModPow;
// "constants"
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);


//# sourceMappingURL=BigInteger.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateA.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateA.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateA: () => (/* binding */ calculateA)
/* harmony export */ });
/* harmony import */ var _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
const calculateA = async ({ a, g, N, }) => {
    return new Promise((resolve, reject) => {
        g.modPow(a, N, (err, A) => {
            if (err) {
                reject(err);
                return;
            }
            if (A.mod(N).equals(_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].ZERO)) {
                reject(new Error('Illegal parameter. A mod N cannot be 0.'));
                return;
            }
            resolve(A);
        });
    });
};


//# sourceMappingURL=calculateA.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateS.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateS.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateS: () => (/* binding */ calculateS)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
const calculateS = async ({ a, g, k, x, B, N, U, }) => {
    return new Promise((resolve, reject) => {
        g.modPow(x, N, (outerErr, outerResult) => {
            if (outerErr) {
                reject(outerErr);
                return;
            }
            B.subtract(k.multiply(outerResult)).modPow(a.add(U.multiply(x)), N, (innerErr, innerResult) => {
                if (innerErr) {
                    reject(innerErr);
                    return;
                }
                resolve(innerResult.mod(N));
            });
        });
    });
};


//# sourceMappingURL=calculateS.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateU.mjs":
/*!*****************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateU.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateU: () => (/* binding */ calculateU)
/* harmony export */ });
/* harmony import */ var _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");
/* harmony import */ var _getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../getHashFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromHex.mjs");
/* harmony import */ var _getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../getPaddedHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getPaddedHex.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
const calculateU = ({ A, B, }) => {
    const U = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]((0,_getHashFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashFromHex)((0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_2__.getPaddedHex)(A) + (0,_getPaddedHex_mjs__WEBPACK_IMPORTED_MODULE_2__.getPaddedHex)(B)), 16);
    if (U.equals(_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].ZERO)) {
        throw new Error('U cannot be zero.');
    }
    return U;
};


//# sourceMappingURL=calculateU.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/constants.mjs":
/*!******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/constants.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HEX_TO_SHORT: () => (/* binding */ HEX_TO_SHORT),
/* harmony export */   INIT_N: () => (/* binding */ INIT_N),
/* harmony export */   SHORT_TO_HEX: () => (/* binding */ SHORT_TO_HEX)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const INIT_N = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' +
    '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' +
    'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' +
    'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' +
    'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' +
    'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' +
    '83655D23DCA3AD961C62F356208552BB9ED529077096966D' +
    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' +
    'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' +
    'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' +
    '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' +
    'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' +
    'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' +
    'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +
    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' +
    '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';
const SHORT_TO_HEX = {};
const HEX_TO_SHORT = {};
for (let i = 0; i < 256; i++) {
    let encodedByte = i.toString(16).toLowerCase();
    if (encodedByte.length === 1) {
        encodedByte = `0${encodedByte}`;
    }
    SHORT_TO_HEX[i] = encodedByte;
    HEX_TO_SHORT[encodedByte] = i;
}


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getAuthenticationHelper.mjs":
/*!********************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getAuthenticationHelper.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAuthenticationHelper: () => (/* binding */ getAuthenticationHelper)
/* harmony export */ });
/* harmony import */ var _AuthenticationHelper_AuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthenticationHelper/AuthenticationHelper.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/AuthenticationHelper/AuthenticationHelper.mjs");
/* harmony import */ var _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");
/* harmony import */ var _calculate_calculateA_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./calculate/calculateA.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/calculate/calculateA.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/constants.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getHexFromBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHexFromBytes.mjs");
/* harmony import */ var _getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getRandomBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getRandomBytes.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a new {@link AuthenticationHelper} instance with randomly generated BigInteger seed
 *
 * @param userPoolName Cognito user pool name.
 * @returns An {@link AuthenticationHelper} instance.
 *
 * @internal
 */
const getAuthenticationHelper = async (userPoolName) => {
    const N = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"](_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.INIT_N, 16);
    const g = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]('2', 16);
    const a = generateRandomBigInteger();
    const A = await (0,_calculate_calculateA_mjs__WEBPACK_IMPORTED_MODULE_3__.calculateA)({ a, g, N });
    return new _AuthenticationHelper_AuthenticationHelper_mjs__WEBPACK_IMPORTED_MODULE_4__["default"]({ userPoolName, a, g, A, N });
};
/**
 * Generates a random BigInteger.
 *
 * @returns {BigInteger} a random value.
 */
const generateRandomBigInteger = () => {
    // This will be interpreted as a postive 128-bit integer
    const hexRandom = (0,_getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_5__.getHexFromBytes)((0,_getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_6__.getRandomBytes)(128));
    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)
    return new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"](hexRandom, 16);
};


//# sourceMappingURL=getAuthenticationHelper.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getBytesFromHex: () => (/* binding */ getBytesFromHex)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Converts a hexadecimal encoded string to a Uint8Array of bytes.
 *
 * @param encoded The hexadecimal encoded string
 */
const getBytesFromHex = (encoded) => {
    if (encoded.length % 2 !== 0) {
        throw new Error('Hex encoded strings must have an even number length');
    }
    const out = new Uint8Array(encoded.length / 2);
    for (let i = 0; i < encoded.length; i += 2) {
        const encodedByte = encoded.slice(i, i + 2).toLowerCase();
        if (encodedByte in _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.HEX_TO_SHORT) {
            out[i / 2] = _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.HEX_TO_SHORT[encodedByte];
        }
        else {
            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);
        }
    }
    return out;
};


//# sourceMappingURL=getBytesFromHex.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromData.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getHashFromData.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHashFromData: () => (/* binding */ getHashFromData)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getHexFromBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHexFromBytes.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Calculate a hash from a `SourceData`
 * @param {SourceData} data Value to hash.
 * @returns {string} Hex-encoded hash.
 * @private
 */
const getHashFromData = (data) => {
    const sha256 = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256();
    sha256.update(data);
    const hashedData = sha256.digestSync();
    const hashHexFromUint8 = (0,_getHexFromBytes_mjs__WEBPACK_IMPORTED_MODULE_1__.getHexFromBytes)(hashedData);
    return new Array(64 - hashHexFromUint8.length).join('0') + hashHexFromUint8;
};


//# sourceMappingURL=getHashFromData.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromHex.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getHashFromHex.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHashFromHex: () => (/* binding */ getHashFromHex)
/* harmony export */ });
/* harmony import */ var _getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getBytesFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs");
/* harmony import */ var _getHashFromData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getHashFromData.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getHashFromData.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Calculate a hash from a hex string
 * @param {string} hexStr Value to hash.
 * @returns {string} Hex-encoded hash.
 * @private
 */
const getHashFromHex = (hexStr) => (0,_getHashFromData_mjs__WEBPACK_IMPORTED_MODULE_0__.getHashFromData)((0,_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__.getBytesFromHex)(hexStr));


//# sourceMappingURL=getHashFromHex.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getHexFromBytes.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getHexFromBytes.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHexFromBytes: () => (/* binding */ getHexFromBytes)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Converts a Uint8Array of binary data to a hexadecimal encoded string.
 *
 * @param bytes The binary data to encode
 */
const getHexFromBytes = (bytes) => {
    let out = '';
    for (let i = 0; i < bytes.byteLength; i++) {
        out += _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.SHORT_TO_HEX[bytes[i]];
    }
    return out;
};


//# sourceMappingURL=getHexFromBytes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getHkdfKey.mjs":
/*!*******************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getHkdfKey.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHkdfKey: () => (/* binding */ getHkdfKey)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Standard HKDF algorithm.
 *
 * @param {Uint8Array} ikm Input key material.
 * @param {Uint8Array} salt Salt value.
 * @param {Uint8Array} info Context and application specific info.
 *
 * @returns {Uint8Array} Strong key material.
 *
 * @internal
 */
const getHkdfKey = (ikm, salt, info) => {
    const awsCryptoHash = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256(salt);
    awsCryptoHash.update(ikm);
    const resultFromAWSCryptoPrk = awsCryptoHash.digestSync();
    const awsCryptoHashHmac = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256(resultFromAWSCryptoPrk);
    awsCryptoHashHmac.update(info);
    const resultFromAWSCryptoHmac = awsCryptoHashHmac.digestSync();
    const hashHexFromAWSCrypto = resultFromAWSCryptoHmac;
    return hashHexFromAWSCrypto.slice(0, 16);
};


//# sourceMappingURL=getHkdfKey.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getNowString.mjs":
/*!*********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getNowString.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getNowString: () => (/* binding */ getNowString)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const MONTH_NAMES = [
    'Jan',
    'Feb',
    'Mar',
    'Apr',
    'May',
    'Jun',
    'Jul',
    'Aug',
    'Sep',
    'Oct',
    'Nov',
    'Dec',
];
const WEEK_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
const getNowString = () => {
    const now = new Date();
    const weekDay = WEEK_NAMES[now.getUTCDay()];
    const month = MONTH_NAMES[now.getUTCMonth()];
    const day = now.getUTCDate();
    let hours = now.getUTCHours();
    if (hours < 10) {
        hours = `0${hours}`;
    }
    let minutes = now.getUTCMinutes();
    if (minutes < 10) {
        minutes = `0${minutes}`;
    }
    let seconds = now.getUTCSeconds();
    if (seconds < 10) {
        seconds = `0${seconds}`;
    }
    const year = now.getUTCFullYear();
    // ddd MMM D HH:mm:ss UTC YYYY
    const dateNow = `${weekDay} ${month} ${day} ${hours}:${minutes}:${seconds} UTC ${year}`;
    return dateNow;
};


//# sourceMappingURL=getNowString.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getPaddedHex.mjs":
/*!*********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getPaddedHex.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPaddedHex: () => (/* binding */ getPaddedHex)
/* harmony export */ });
/* harmony import */ var _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BigInteger/BigInteger.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/BigInteger/BigInteger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Tests if a hex string has it most significant bit set (case-insensitive regex)
 */
const HEX_MSB_REGEX = /^[89a-f]/i;
/**
 * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.
 *
 * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a
 * byte array containing the two's-complement representation of a BigInteger. The array contains
 * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.
 *
 * Examples showing how ambiguity is avoided by left padding with:
 * 	"00" (for positive values where the most-significant-bit is set)
 *  "FF" (for negative values where the most-significant-bit is set)
 *
 * padHex(bigInteger.fromInt(-236))  === "FF14"
 * padHex(bigInteger.fromInt(20))    === "14"
 *
 * padHex(bigInteger.fromInt(-200))  === "FF38"
 * padHex(bigInteger.fromInt(56))    === "38"
 *
 * padHex(bigInteger.fromInt(-20))   === "EC"
 * padHex(bigInteger.fromInt(236))   === "00EC"
 *
 * padHex(bigInteger.fromInt(-56))   === "C8"
 * padHex(bigInteger.fromInt(200))   === "00C8"
 *
 * @param {AuthBigInteger} bigInt Number to encode.
 * @returns {String} even-length hex string of the two's complement encoding.
 */
const getPaddedHex = (bigInt) => {
    if (!(bigInt instanceof _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"])) {
        throw new Error('Not a BigInteger');
    }
    const isNegative = bigInt.compareTo(_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].ZERO) < 0;
    /* Get a hex string for abs(bigInt) */
    let hexStr = bigInt.abs().toString(16);
    /* Pad hex to even length if needed */
    hexStr = hexStr.length % 2 !== 0 ? `0${hexStr}` : hexStr;
    /* Prepend "00" if the most significant bit is set */
    hexStr = HEX_MSB_REGEX.test(hexStr) ? `00${hexStr}` : hexStr;
    if (isNegative) {
        /* Flip the bits of the representation */
        const invertedNibbles = hexStr
            .split('')
            .map((x) => {
            const invertedNibble = ~parseInt(x, 16) & 0xf;
            return '0123456789ABCDEF'.charAt(invertedNibble);
        })
            .join('');
        /* After flipping the bits, add one to get the 2's complement representation */
        const flippedBitsBI = new _BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"](invertedNibbles, 16).add(_BigInteger_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].ONE);
        hexStr = flippedBitsBI.toString(16);
        /*
        For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128

        Any sequence of '1' bits on the left can always be substituted with a single '1' bit
        without changing the represented value.

        This only happens in the case when the input is 80...00
        */
        if (hexStr.toUpperCase().startsWith('FF8')) {
            hexStr = hexStr.substring(2);
        }
    }
    return hexStr;
};


//# sourceMappingURL=getPaddedHex.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getRandomBytes.mjs":
/*!***********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getRandomBytes.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRandomBytes: () => (/* binding */ getRandomBytes)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/WordArray.mjs");
/* harmony import */ var _getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getBytesFromHex.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getBytesFromHex.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a Uint8Array with a sequence of random nBytes
 *
 * @param {number} nBytes
 * @returns {Uint8Array} fixed-length sequence of random bytes
 */
const getRandomBytes = (nBytes) => {
    const str = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.WordArray().random(nBytes).toString();
    return (0,_getBytesFromHex_mjs__WEBPACK_IMPORTED_MODULE_1__.getBytesFromHex)(str);
};


//# sourceMappingURL=getRandomBytes.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getRandomString.mjs":
/*!************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getRandomString.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRandomString: () => (/* binding */ getRandomString)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs");
/* harmony import */ var _getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getRandomBytes.mjs */ "../auth/dist/esm/providers/cognito/utils/srp/getRandomBytes.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Helper function to generate a random string
 * @returns {string} a random value.
 *
 * @internal
 */
const getRandomString = () => _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.base64Encoder.convert((0,_getRandomBytes_mjs__WEBPACK_IMPORTED_MODULE_1__.getRandomBytes)(40));


//# sourceMappingURL=getRandomString.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/srp/getSignatureString.mjs":
/*!***************************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/srp/getSignatureString.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSignatureString: () => (/* binding */ getSignatureString)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/convert/base64/base64Decoder.mjs");
/* harmony import */ var _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../textEncoder/index.mjs */ "../auth/dist/esm/providers/cognito/utils/textEncoder/index.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getSignatureString = ({ userPoolName, username, challengeParameters, dateNow, hkdf, }) => {
    const bufUPIDaToB = _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_1__.textEncoder.convert(userPoolName);
    const bufUNaToB = _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_1__.textEncoder.convert(username);
    const bufSBaToB = urlB64ToUint8Array(challengeParameters.SECRET_BLOCK);
    const bufDNaToB = _textEncoder_index_mjs__WEBPACK_IMPORTED_MODULE_1__.textEncoder.convert(dateNow);
    const bufConcat = new Uint8Array(bufUPIDaToB.byteLength +
        bufUNaToB.byteLength +
        bufSBaToB.byteLength +
        bufDNaToB.byteLength);
    bufConcat.set(bufUPIDaToB, 0);
    bufConcat.set(bufUNaToB, bufUPIDaToB.byteLength);
    bufConcat.set(bufSBaToB, bufUPIDaToB.byteLength + bufUNaToB.byteLength);
    bufConcat.set(bufDNaToB, bufUPIDaToB.byteLength + bufUNaToB.byteLength + bufSBaToB.byteLength);
    const awsCryptoHash = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256(hkdf);
    awsCryptoHash.update(bufConcat);
    const resultFromAWSCrypto = awsCryptoHash.digestSync();
    const signatureString = _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.base64Encoder.convert(resultFromAWSCrypto);
    return signatureString;
};
const urlB64ToUint8Array = (base64String) => {
    const padding = '='.repeat((4 - (base64String.length % 4)) % 4);
    const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');
    const rawData = _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.base64Decoder.convert(base64);
    const outputArray = new Uint8Array(rawData.length);
    for (let i = 0; i < rawData.length; ++i) {
        outputArray[i] = rawData.charCodeAt(i);
    }
    return outputArray;
};


//# sourceMappingURL=getSignatureString.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/textEncoder/index.mjs":
/*!**********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/textEncoder/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   textEncoder: () => (/* binding */ textEncoder)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const textEncoder = {
    convert(input) {
        return new TextEncoder().encode(input);
    },
};


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/types.mjs":
/*!**********************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/types.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OAuthStorageKeys: () => (/* binding */ OAuthStorageKeys),
/* harmony export */   assertAuthTokens: () => (/* binding */ assertAuthTokens),
/* harmony export */   assertAuthTokensWithRefreshToken: () => (/* binding */ assertAuthTokensWithRefreshToken),
/* harmony export */   assertDeviceMetadata: () => (/* binding */ assertDeviceMetadata),
/* harmony export */   assertIdTokenInAuthTokens: () => (/* binding */ assertIdTokenInAuthTokens),
/* harmony export */   isTypeUserPoolConfig: () => (/* binding */ isTypeUserPoolConfig),
/* harmony export */   oAuthTokenRefreshException: () => (/* binding */ oAuthTokenRefreshException),
/* harmony export */   tokenRefreshException: () => (/* binding */ tokenRefreshException)
/* harmony export */ });
/* harmony import */ var _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/AuthError.mjs */ "../auth/dist/esm/errors/AuthError.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../auth/dist/esm/errors/constants.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function isTypeUserPoolConfig(authConfig) {
    if (authConfig &&
        authConfig.Cognito.userPoolId &&
        authConfig.Cognito.userPoolClientId) {
        return true;
    }
    return false;
}
function assertAuthTokens(tokens) {
    if (!tokens || !tokens.accessToken) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.USER_UNAUTHENTICATED_EXCEPTION,
            message: 'User needs to be authenticated to call this API.',
            recoverySuggestion: 'Sign in before calling this API again.',
        });
    }
}
function assertIdTokenInAuthTokens(tokens) {
    if (!tokens || !tokens.idToken) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.USER_UNAUTHENTICATED_EXCEPTION,
            message: 'User needs to be authenticated to call this API.',
            recoverySuggestion: 'Sign in before calling this API again.',
        });
    }
}
const oAuthTokenRefreshException = new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.TOKEN_REFRESH_EXCEPTION,
    message: `Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,
    recoverySuggestion: `Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`,
});
const tokenRefreshException = new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
    name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.USER_UNAUTHENTICATED_EXCEPTION,
    message: 'User needs to be authenticated to call this API.',
    recoverySuggestion: 'Sign in before calling this API again.',
});
function assertAuthTokensWithRefreshToken(tokens) {
    if (isAuthenticatedWithImplicitOauthFlow(tokens)) {
        throw oAuthTokenRefreshException;
    }
    if (!isAuthenticatedWithRefreshToken(tokens)) {
        throw tokenRefreshException;
    }
}
function assertDeviceMetadata(deviceMetadata) {
    if (!deviceMetadata ||
        !deviceMetadata.deviceKey ||
        !deviceMetadata.deviceGroupKey ||
        !deviceMetadata.randomPassword) {
        throw new _errors_AuthError_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthError({
            name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.DEVICE_METADATA_NOT_FOUND_EXCEPTION,
            message: 'Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.',
            recoverySuggestion: 'Make sure to not clear storage after calling the signIn API.',
        });
    }
}
const OAuthStorageKeys = {
    inflightOAuth: 'inflightOAuth',
    oauthSignIn: 'oauthSignIn',
    oauthPKCE: 'oauthPKCE',
    oauthState: 'oauthState',
};
function isAuthenticated(tokens) {
    return tokens?.accessToken || tokens?.idToken;
}
function isAuthenticatedWithRefreshToken(tokens) {
    return isAuthenticated(tokens) && tokens?.refreshToken;
}
function isAuthenticatedWithImplicitOauthFlow(tokens) {
    return isAuthenticated(tokens) && !tokens?.refreshToken;
}


//# sourceMappingURL=types.mjs.map


/***/ }),

/***/ "../auth/dist/esm/providers/cognito/utils/userContextData.mjs":
/*!********************************************************************!*\
  !*** ../auth/dist/esm/providers/cognito/utils/userContextData.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUserContextData: () => (/* binding */ getUserContextData)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function getUserContextData({ username, userPoolId, userPoolClientId, }) {
    if (typeof window === 'undefined') {
        return undefined;
    }
    const amazonCognitoAdvancedSecurityData = window
        .AmazonCognitoAdvancedSecurityData;
    if (typeof amazonCognitoAdvancedSecurityData === 'undefined') {
        return undefined;
    }
    const advancedSecurityData = amazonCognitoAdvancedSecurityData.getData(username, userPoolId, userPoolClientId);
    if (advancedSecurityData) {
        const userContextData = {
            EncodedData: advancedSecurityData,
        };
        return userContextData;
    }
    return {};
}


//# sourceMappingURL=userContextData.mjs.map


/***/ }),

/***/ "../auth/dist/esm/types/Auth.mjs":
/*!***************************************!*\
  !*** ../auth/dist/esm/types/Auth.mjs ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthErrorTypes: () => (/* binding */ AuthErrorTypes)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var AuthErrorTypes;
(function (AuthErrorTypes) {
    AuthErrorTypes["NoConfig"] = "noConfig";
    AuthErrorTypes["MissingAuthConfig"] = "missingAuthConfig";
    AuthErrorTypes["EmptyUsername"] = "emptyUsername";
    AuthErrorTypes["InvalidUsername"] = "invalidUsername";
    AuthErrorTypes["EmptyPassword"] = "emptyPassword";
    AuthErrorTypes["EmptyCode"] = "emptyCode";
    AuthErrorTypes["SignUpError"] = "signUpError";
    AuthErrorTypes["NoMFA"] = "noMFA";
    AuthErrorTypes["InvalidMFA"] = "invalidMFA";
    AuthErrorTypes["EmptyChallengeResponse"] = "emptyChallengeResponse";
    AuthErrorTypes["NoUserSession"] = "noUserSession";
    AuthErrorTypes["Default"] = "default";
    AuthErrorTypes["DeviceConfig"] = "deviceConfig";
    AuthErrorTypes["NetworkError"] = "networkError";
    AuthErrorTypes["AutoSignInError"] = "autoSignInError";
    AuthErrorTypes["OAuthSignInError"] = "oauthSignInError";
})(AuthErrorTypes || (AuthErrorTypes = {}));


//# sourceMappingURL=Auth.mjs.map


/***/ }),

/***/ "../auth/dist/esm/utils/getAuthUserAgentValue.mjs":
/*!********************************************************!*\
  !*** ../auth/dist/esm/utils/getAuthUserAgentValue.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAuthUserAgentValue: () => (/* binding */ getAuthUserAgentValue)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getAuthUserAgentValue = (action, customUserAgentDetails) => (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.getAmplifyUserAgent)({
    category: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.Category.Auth,
    action,
    ...customUserAgentDetails,
});


//# sourceMappingURL=getAuthUserAgentValue.mjs.map


/***/ }),

/***/ "../auth/dist/esm/utils/openAuthSession.mjs":
/*!**************************************************!*\
  !*** ../auth/dist/esm/utils/openAuthSession.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   openAuthSession: () => (/* binding */ openAuthSession)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const openAuthSession = async (url) => {
    if (!window?.location) {
        return;
    }
    // enforce HTTPS
    window.location.href = url.replace('http://', 'https://');
};


//# sourceMappingURL=openAuthSession.mjs.map


/***/ }),

/***/ "./dist/esm/initSingleton.mjs":
/*!************************************!*\
  !*** ./dist/esm/initSingleton.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultAmplify: () => (/* binding */ DefaultAmplify)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/CookieStorage.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/parseAmplifyConfig.mjs");
/* harmony import */ var _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/auth/cognito */ "../auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs");
/* harmony import */ var _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/auth/cognito */ "../auth/dist/esm/providers/cognito/credentialsProvider/index.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const DefaultAmplify = {
    /**
     * Configures Amplify with the {@link resourceConfig} and {@link libraryOptions}.
     *
     * @param resourceConfig The {@link ResourcesConfig} object that is typically imported from the
     * `amplifyconfiguration.json` file. It can also be an object literal created inline when calling `Amplify.configure`.
     * @param libraryOptions The {@link LibraryOptions} additional options for the library.
     *
     * @example
     * import config from './amplifyconfiguration.json';
     *
     * Amplify.configure(config);
     */
    configure(resourceConfig, libraryOptions) {
        const resolvedResourceConfig = (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.parseAmplifyConfig)(resourceConfig);
        // If no Auth config is provided, no special handling will be required, configure as is.
        // Otherwise, we can assume an Auth config is provided from here on.
        if (!resolvedResourceConfig.Auth) {
            _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.configure(resolvedResourceConfig, libraryOptions);
            return;
        }
        // If Auth options are provided, always just configure as is.
        // Otherwise, we can assume no Auth libraryOptions were provided from here on.
        if (libraryOptions?.Auth) {
            _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.configure(resolvedResourceConfig, libraryOptions);
            return;
        }
        // If no Auth libraryOptions were previously configured, then always add default providers.
        if (!_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.libraryOptions.Auth) {
            _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_2__.cognitoUserPoolsTokenProvider.setAuthConfig(resolvedResourceConfig.Auth);
            _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_2__.cognitoUserPoolsTokenProvider.setKeyValueStorage(
            // TODO: allow configure with a public interface
            libraryOptions?.ssr
                ? new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.CookieStorage({ sameSite: 'lax' })
                : _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.defaultStorage);
            _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.configure(resolvedResourceConfig, {
                ...libraryOptions,
                Auth: {
                    tokenProvider: _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_2__.cognitoUserPoolsTokenProvider,
                    credentialsProvider: _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_5__.cognitoCredentialsProvider,
                },
            });
            return;
        }
        // At this point, Auth libraryOptions would have been previously configured and no overriding
        // Auth options were given, so we should preserve the currently configured Auth libraryOptions.
        if (libraryOptions) {
            // If ssr is provided through libraryOptions, we should respect the intentional reconfiguration.
            if (libraryOptions.ssr !== undefined) {
                _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_2__.cognitoUserPoolsTokenProvider.setKeyValueStorage(
                // TODO: allow configure with a public interface
                libraryOptions.ssr
                    ? new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.CookieStorage({ sameSite: 'lax' })
                    : _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.defaultStorage);
            }
            _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.configure(resolvedResourceConfig, {
                Auth: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.libraryOptions.Auth,
                ...libraryOptions,
            });
            return;
        }
        // Finally, if there were no libraryOptions given at all, we should simply not touch the currently
        // configured libraryOptions.
        _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.configure(resolvedResourceConfig);
    },
    /**
     * Returns the {@link ResourcesConfig} object passed in as the `resourceConfig` parameter when calling
     * `Amplify.configure`.
     *
     * @returns An {@link ResourcesConfig} object.
     */
    getConfig() {
        return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify.getConfig();
    },
};


//# sourceMappingURL=initSingleton.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/StorageCache.mjs":
/*!***********************************************!*\
  !*** ../core/dist/esm/Cache/StorageCache.mjs ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StorageCache: () => (/* binding */ StorageCache)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _storage_KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../storage/KeyValueStorage.mjs */ "../core/dist/esm/storage/KeyValueStorage.mjs");
/* harmony import */ var _storage_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storage/utils.mjs */ "../core/dist/esm/storage/utils.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/Cache/constants.mjs");
/* harmony import */ var _StorageCacheCommon_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StorageCacheCommon.mjs */ "../core/dist/esm/Cache/StorageCacheCommon.mjs");
/* harmony import */ var _utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/cacheHelpers.mjs */ "../core/dist/esm/Cache/utils/cacheHelpers.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('StorageCache');
/**
 * Customized storage based on the SessionStorage or LocalStorage with LRU implemented
 */
class StorageCache extends _StorageCacheCommon_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageCacheCommon {
    /**
     * initialize the cache
     * @param config - the configuration of the cache
     */
    constructor(config) {
        const storage = (0,_storage_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getLocalStorageWithFallback)();
        super({ config, keyValueStorage: new _storage_KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_3__.KeyValueStorage(storage) });
        this.storage = storage;
        this.getItem = this.getItem.bind(this);
        this.setItem = this.setItem.bind(this);
        this.removeItem = this.removeItem.bind(this);
    }
    async getAllCacheKeys(options) {
        const { omitSizeKey } = options ?? {};
        const keys = [];
        for (let i = 0; i < this.storage.length; i++) {
            const key = this.storage.key(i);
            if (omitSizeKey && key === (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getCurrentSizeKey)(this.config.keyPrefix)) {
                continue;
            }
            if (key?.startsWith(this.config.keyPrefix)) {
                keys.push(key.substring(this.config.keyPrefix.length));
            }
        }
        return keys;
    }
    /**
     * Return a new instance of cache with customized configuration.
     * @param {Object} config - the customized configuration
     * @return {Object} - the new instance of Cache
     */
    createInstance(config) {
        if (!config.keyPrefix || config.keyPrefix === _constants_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig.keyPrefix) {
            logger.error('invalid keyPrefix, setting keyPrefix with timeStamp');
            config.keyPrefix = _utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.getCurrentTime.toString();
        }
        return new StorageCache(config);
    }
}


//# sourceMappingURL=StorageCache.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/StorageCacheCommon.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Cache/StorageCacheCommon.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StorageCacheCommon: () => (/* binding */ StorageCacheCommon)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/Cache/constants.mjs");
/* harmony import */ var _utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/cacheHelpers.mjs */ "../core/dist/esm/Cache/utils/cacheHelpers.mjs");
/* harmony import */ var _utils_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/errorHelpers.mjs */ "../core/dist/esm/Cache/utils/errorHelpers.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('StorageCache');
/**
 * Initialization of the cache
 *
 */
class StorageCacheCommon {
    /**
     * Initialize the cache
     *
     * @param config - Custom configuration for this instance.
     */
    constructor({ config, keyValueStorage, }) {
        this.config = {
            ..._constants_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig,
            ...config,
        };
        this.keyValueStorage = keyValueStorage;
        this.sanitizeConfig();
    }
    getModuleName() {
        return 'Cache';
    }
    /**
     * Set custom configuration for the cache instance.
     *
     * @param config - customized configuration (without keyPrefix, which can't be changed)
     *
     * @return - the current configuration
     */
    configure(config) {
        if (config) {
            if (config.keyPrefix) {
                logger.warn('keyPrefix can not be re-configured on an existing Cache instance.');
            }
            this.config = {
                ...this.config,
                ...config,
            };
        }
        this.sanitizeConfig();
        return this.config;
    }
    /**
     * return the current size of the cache
     * @return {Promise}
     */
    async getCurrentCacheSize() {
        let size = await this.getStorage().getItem((0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeKey)(this.config.keyPrefix));
        if (!size) {
            await this.getStorage().setItem((0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeKey)(this.config.keyPrefix), '0');
            size = '0';
        }
        return Number(size);
    }
    /**
     * Set item into cache. You can put number, string, boolean or object.
     * The cache will first check whether has the same key.
     * If it has, it will delete the old item and then put the new item in
     * The cache will pop out items if it is full
     * You can specify the cache item options. The cache will abort and output a warning:
     * If the key is invalid
     * If the size of the item exceeds itemMaxSize.
     * If the value is undefined
     * If incorrect cache item configuration
     * If error happened with browser storage
     *
     * @param {String} key - the key of the item
     * @param {Object} value - the value of the item
     * @param {Object} [options] - optional, the specified meta-data
     *
     * @return {Promise}
     */
    async setItem(key, value, options) {
        logger.debug(`Set item: key is ${key}, value is ${value} with options: ${options}`);
        if (!key || key === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey) {
            logger.warn(`Invalid key: should not be empty or reserved key: '${_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey}'`);
            return;
        }
        if (typeof value === 'undefined') {
            logger.warn(`The value of item should not be undefined!`);
            return;
        }
        const cacheItemOptions = {
            priority: options?.priority !== undefined
                ? options.priority
                : this.config.defaultPriority,
            expires: options?.expires !== undefined
                ? options.expires
                : this.config.defaultTTL + (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentTime)(),
        };
        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {
            logger.warn(`Invalid parameter: priority due to out or range. It should be within 1 and 5.`);
            return;
        }
        const prefixedKey = `${this.config.keyPrefix}${key}`;
        const item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);
        // check whether this item is too big;
        if (item.byteSize > this.config.itemMaxSize) {
            logger.warn(`Item with key: ${key} you are trying to put into is too big!`);
            return;
        }
        try {
            // first look into the storage, if it exists, delete it.
            const val = await this.getStorage().getItem(prefixedKey);
            if (val) {
                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);
            }
            // check whether the cache is full
            if (await this.isCacheFull(item.byteSize)) {
                const validKeys = await this.clearInvalidAndGetRemainingKeys();
                if (await this.isCacheFull(item.byteSize)) {
                    const sizeToPop = await this.sizeToPop(item.byteSize);
                    await this.popOutItems(validKeys, sizeToPop);
                }
            }
            // put item in the cache
            return this.setCacheItem(prefixedKey, item);
        }
        catch (e) {
            logger.warn(`setItem failed! ${e}`);
        }
    }
    /**
     * Get item from cache. It will return null if item doesn’t exist or it has been expired.
     * If you specified callback function in the options,
     * then the function will be executed if no such item in the cache
     * and finally put the return value into cache.
     * Please make sure the callback function will return the value you want to put into the cache.
     * The cache will abort output a warning:
     * If the key is invalid
     * If error happened with AsyncStorage
     *
     * @param {String} key - the key of the item
     * @param {Object} [options] - the options of callback function
     *
     * @return {Promise} - return a promise resolves to be the value of the item
     */
    async getItem(key, options) {
        logger.debug(`Get item: key is ${key} with options ${options}`);
        let cached;
        if (!key || key === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey) {
            logger.warn(`Invalid key: should not be empty or reserved key: '${_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey}'`);
            return null;
        }
        const prefixedKey = `${this.config.keyPrefix}${key}`;
        try {
            cached = await this.getStorage().getItem(prefixedKey);
            if (cached != null) {
                if (await this.isExpired(prefixedKey)) {
                    // if expired, remove that item and return null
                    await this.removeCacheItem(prefixedKey, JSON.parse(cached).byteSize);
                }
                else {
                    // if not expired, update its visitedTime and return the value
                    const item = await this.updateVisitedTime(JSON.parse(cached), prefixedKey);
                    return item.data;
                }
            }
            if (options?.callback) {
                const val = options.callback();
                if (val !== null) {
                    await this.setItem(key, val, options);
                }
                return val;
            }
            return null;
        }
        catch (e) {
            logger.warn(`getItem failed! ${e}`);
            return null;
        }
    }
    /**
     * remove item from the cache
     * The cache will abort output a warning:
     * If error happened with AsyncStorage
     * @param {String} key - the key of the item
     * @return {Promise}
     */
    async removeItem(key) {
        logger.debug(`Remove item: key is ${key}`);
        if (!key || key === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey) {
            logger.warn(`Invalid key: should not be empty or reserved key: '${_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.currentSizeKey}'`);
            return;
        }
        const prefixedKey = `${this.config.keyPrefix}${key}`;
        try {
            const val = await this.getStorage().getItem(prefixedKey);
            if (val) {
                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);
            }
        }
        catch (e) {
            logger.warn(`removeItem failed! ${e}`);
        }
    }
    /**
     * Return all the keys owned by this cache.
     * Will return an empty array if error occurred.
     *
     * @return {Promise}
     */
    async getAllKeys() {
        try {
            return await this.getAllCacheKeys();
        }
        catch (e) {
            logger.warn(`getAllkeys failed! ${e}`);
            return [];
        }
    }
    getStorage() {
        return this.keyValueStorage;
    }
    /**
     * check whether item is expired
     *
     * @param key - the key of the item
     *
     * @return true if the item is expired.
     */
    async isExpired(key) {
        const text = await this.getStorage().getItem(key);
        (0,_utils_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assert)(text !== null, _utils_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.CacheErrorCode.NoCacheItem, `Key: ${key}`);
        const item = JSON.parse(text);
        if ((0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentTime)() >= item.expires) {
            return true;
        }
        return false;
    }
    /**
     * delete item from cache
     *
     * @param prefixedKey - the key of the item
     * @param size - optional, the byte size of the item
     */
    async removeCacheItem(prefixedKey, size) {
        const item = await this.getStorage().getItem(prefixedKey);
        (0,_utils_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assert)(item !== null, _utils_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.CacheErrorCode.NoCacheItem, `Key: ${prefixedKey}`);
        const itemSize = size ?? JSON.parse(item).byteSize;
        // first try to update the current size of the cache
        await this.decreaseCurrentSizeInBytes(itemSize);
        // try to remove the item from cache
        try {
            await this.getStorage().removeItem(prefixedKey);
        }
        catch (removeItemError) {
            // if some error happened, we need to rollback the current size
            await this.increaseCurrentSizeInBytes(itemSize);
            logger.error(`Failed to remove item: ${removeItemError}`);
        }
    }
    /**
     * produce a JSON object with meta-data and data value
     * @param value - the value of the item
     * @param options - optional, the specified meta-data
     *
     * @return - the item which has the meta-data and the value
     */
    fillCacheItem(key, value, options) {
        const item = {
            key,
            data: value,
            timestamp: (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentTime)(),
            visitedTime: (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentTime)(),
            priority: options.priority ?? 0,
            expires: options.expires ?? 0,
            type: typeof value,
            byteSize: 0,
        };
        // calculate byte size
        item.byteSize = (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getByteLength)(JSON.stringify(item));
        // re-calculate using cache item with updated byteSize property
        item.byteSize = (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getByteLength)(JSON.stringify(item));
        return item;
    }
    sanitizeConfig() {
        if (this.config.itemMaxSize > this.config.capacityInBytes) {
            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');
            this.config.itemMaxSize = _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig.itemMaxSize;
        }
        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {
            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');
            this.config.defaultPriority = _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig.defaultPriority;
        }
        if (Number(this.config.warningThreshold) > 1 ||
            Number(this.config.warningThreshold) < 0) {
            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');
            this.config.warningThreshold = _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig.warningThreshold;
        }
        // Set 5MB limit
        const cacheLimit = 5 * 1024 * 1024;
        if (this.config.capacityInBytes > cacheLimit) {
            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');
            this.config.capacityInBytes = _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig.capacityInBytes;
        }
    }
    /**
     * increase current size of the cache
     *
     * @param amount - the amount of the cache szie which need to be increased
     */
    async increaseCurrentSizeInBytes(amount) {
        const size = await this.getCurrentCacheSize();
        await this.getStorage().setItem((0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeKey)(this.config.keyPrefix), (size + amount).toString());
    }
    /**
     * decrease current size of the cache
     *
     * @param amount - the amount of the cache size which needs to be decreased
     */
    async decreaseCurrentSizeInBytes(amount) {
        const size = await this.getCurrentCacheSize();
        await this.getStorage().setItem((0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeKey)(this.config.keyPrefix), (size - amount).toString());
    }
    /**
     * update the visited time if item has been visited
     *
     * @param item - the item which need to be updated
     * @param prefixedKey - the key of the item
     *
     * @return the updated item
     */
    async updateVisitedTime(item, prefixedKey) {
        item.visitedTime = (0,_utils_cacheHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getCurrentTime)();
        await this.getStorage().setItem(prefixedKey, JSON.stringify(item));
        return item;
    }
    /**
     * put item into cache
     *
     * @param prefixedKey - the key of the item
     * @param itemData - the value of the item
     * @param itemSizeInBytes - the byte size of the item
     */
    async setCacheItem(prefixedKey, item) {
        // first try to update the current size of the cache.
        await this.increaseCurrentSizeInBytes(item.byteSize);
        // try to add the item into cache
        try {
            await this.getStorage().setItem(prefixedKey, JSON.stringify(item));
        }
        catch (setItemErr) {
            // if some error happened, we need to rollback the current size
            await this.decreaseCurrentSizeInBytes(item.byteSize);
            logger.error(`Failed to set item ${setItemErr}`);
        }
    }
    /**
     * total space needed when poping out items
     *
     * @param itemSize
     *
     * @return total space needed
     */
    async sizeToPop(itemSize) {
        const cur = await this.getCurrentCacheSize();
        const spaceItemNeed = cur + itemSize - this.config.capacityInBytes;
        const cacheThresholdSpace = (1 - this.config.warningThreshold) * this.config.capacityInBytes;
        return spaceItemNeed > cacheThresholdSpace
            ? spaceItemNeed
            : cacheThresholdSpace;
    }
    /**
     * see whether cache is full
     *
     * @param itemSize
     *
     * @return true if cache is full
     */
    async isCacheFull(itemSize) {
        const cur = await this.getCurrentCacheSize();
        return itemSize + cur > this.config.capacityInBytes;
    }
    /**
     * get all the items we have, sort them by their priority,
     * if priority is same, sort them by their last visited time
     * pop out items from the low priority (5 is the lowest)
     * @private
     * @param keys - all the keys in this cache
     * @param sizeToPop - the total size of the items which needed to be poped out
     */
    async popOutItems(keys, sizeToPop) {
        const items = [];
        let remainedSize = sizeToPop;
        for (const key of keys) {
            const val = await this.getStorage().getItem(key);
            if (val != null) {
                const item = JSON.parse(val);
                items.push(item);
            }
        }
        // first compare priority
        // then compare visited time
        items.sort((a, b) => {
            if (a.priority > b.priority) {
                return -1;
            }
            else if (a.priority < b.priority) {
                return 1;
            }
            else {
                if (a.visitedTime < b.visitedTime) {
                    return -1;
                }
                else
                    return 1;
            }
        });
        for (const item of items) {
            // pop out items until we have enough room for new item
            await this.removeCacheItem(item.key, item.byteSize);
            remainedSize -= item.byteSize;
            if (remainedSize <= 0) {
                return;
            }
        }
    }
    /**
     * Scan the storage and combine the following operations for efficiency
     *   1. Clear out all expired keys owned by this cache, not including the size key.
     *   2. Return the remaining keys.
     *
     * @return The remaining valid keys
     */
    async clearInvalidAndGetRemainingKeys() {
        const remainingKeys = [];
        const keys = await this.getAllCacheKeys({
            omitSizeKey: true,
        });
        for (const key of keys) {
            if (await this.isExpired(key)) {
                await this.removeCacheItem(key);
            }
            else {
                remainingKeys.push(key);
            }
        }
        return remainingKeys;
    }
    /**
     * clear the entire cache
     * The cache will abort and output a warning if error occurs
     * @return {Promise}
     */
    async clear() {
        logger.debug(`Clear Cache`);
        try {
            const keys = await this.getAllKeys();
            for (const key of keys) {
                const prefixedKey = `${this.config.keyPrefix}${key}`;
                await this.getStorage().removeItem(prefixedKey);
            }
        }
        catch (e) {
            logger.warn(`clear failed! ${e}`);
        }
    }
}


//# sourceMappingURL=StorageCacheCommon.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/constants.mjs":
/*!********************************************!*\
  !*** ../core/dist/esm/Cache/constants.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   currentSizeKey: () => (/* binding */ currentSizeKey),
/* harmony export */   defaultConfig: () => (/* binding */ defaultConfig)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Default cache config
 */
const defaultConfig = {
    keyPrefix: 'aws-amplify-cache',
    capacityInBytes: 1048576,
    itemMaxSize: 210000,
    defaultTTL: 259200000,
    defaultPriority: 5,
    warningThreshold: 0.8,
};
const currentSizeKey = 'CurSize';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/index.mjs":
/*!****************************************!*\
  !*** ../core/dist/esm/Cache/index.mjs ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cache: () => (/* binding */ Cache)
/* harmony export */ });
/* harmony import */ var _StorageCache_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StorageCache.mjs */ "../core/dist/esm/Cache/StorageCache.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const Cache = new _StorageCache_mjs__WEBPACK_IMPORTED_MODULE_0__.StorageCache();


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/utils/cacheHelpers.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Cache/utils/cacheHelpers.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getByteLength: () => (/* binding */ getByteLength),
/* harmony export */   getCurrentSizeKey: () => (/* binding */ getCurrentSizeKey),
/* harmony export */   getCurrentTime: () => (/* binding */ getCurrentTime),
/* harmony export */   isInteger: () => (/* binding */ isInteger)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/Cache/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * return the byte size of the string
 * @param str
 */
function getByteLength(str) {
    let ret = 0;
    ret = str.length;
    for (let i = str.length; i >= 0; i -= 1) {
        const charCode = str.charCodeAt(i);
        if (charCode > 0x7f && charCode <= 0x7ff) {
            ret += 1;
        }
        else if (charCode > 0x7ff && charCode <= 0xffff) {
            ret += 2;
        }
        // trail surrogate
        if (charCode >= 0xdc00 && charCode <= 0xdfff) {
            i -= 1;
        }
    }
    return ret;
}
/**
 * get current time
 */
function getCurrentTime() {
    const currentTime = new Date();
    return currentTime.getTime();
}
/**
 * check if passed value is an integer
 */
function isInteger(value) {
    if (Number.isInteger) {
        return Number.isInteger(value);
    }
    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);
}
const getCurrentSizeKey = (keyPrefix) => `${keyPrefix}${_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.currentSizeKey}`;


//# sourceMappingURL=cacheHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/Cache/utils/errorHelpers.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Cache/utils/errorHelpers.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CacheErrorCode: () => (/* binding */ CacheErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors/createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var CacheErrorCode;
(function (CacheErrorCode) {
    CacheErrorCode["NoCacheItem"] = "NoCacheItem";
    CacheErrorCode["NullNextNode"] = "NullNextNode";
    CacheErrorCode["NullPreviousNode"] = "NullPreviousNode";
})(CacheErrorCode || (CacheErrorCode = {}));
const cacheErrorMap = {
    [CacheErrorCode.NoCacheItem]: {
        message: 'Item not found in the cache storage.',
    },
    [CacheErrorCode.NullNextNode]: {
        message: 'Next node is null.',
    },
    [CacheErrorCode.NullPreviousNode]: {
        message: 'Previous node is null.',
    },
};
const assert = (0,_errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(cacheErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/Hub/index.mjs":
/*!**************************************!*\
  !*** ../core/dist/esm/Hub/index.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AMPLIFY_SYMBOL: () => (/* binding */ AMPLIFY_SYMBOL),
/* harmony export */   Hub: () => (/* binding */ Hub),
/* harmony export */   HubClass: () => (/* binding */ HubClass),
/* harmony export */   HubInternal: () => (/* binding */ HubInternal)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/constants.mjs");
/* harmony import */ var _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'
    ? Symbol('amplify_default')
    : '@@amplify_default');
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('Hub');
class HubClass {
    constructor(name) {
        this.listeners = new Map();
        this.protectedChannels = [
            'core',
            'auth',
            'api',
            'analytics',
            'interactions',
            'pubsub',
            'storage',
            'ui',
            'xr',
        ];
        this.name = name;
    }
    /**
     * Used internally to remove a Hub listener.
     *
     * @remarks
     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.
     */
    _remove(channel, listener) {
        const holder = this.listeners.get(channel);
        if (!holder) {
            logger.warn(`No listeners for ${channel}`);
            return;
        }
        this.listeners.set(channel, [
            ...holder.filter(({ callback }) => callback !== listener),
        ]);
    }
    dispatch(channel, payload, source, ampSymbol) {
        if (typeof channel === 'string' &&
            this.protectedChannels.indexOf(channel) > -1) {
            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;
            if (!hasAccess) {
                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);
            }
        }
        const capsule = {
            channel,
            payload: { ...payload },
            source,
            patternInfo: [],
        };
        try {
            this._toListeners(capsule);
        }
        catch (e) {
            logger.error(e);
        }
    }
    listen(channel, callback, listenerName = 'noname') {
        let cb;
        if (typeof callback !== 'function') {
            throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyError({
                name: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.NO_HUBCALLBACK_PROVIDED_EXCEPTION,
                message: 'No callback supplied to Hub',
            });
        }
        else {
            // Needs to be casted as a more generic type
            cb = callback;
        }
        let holder = this.listeners.get(channel);
        if (!holder) {
            holder = [];
            this.listeners.set(channel, holder);
        }
        holder.push({
            name: listenerName,
            callback: cb,
        });
        return () => {
            this._remove(channel, cb);
        };
    }
    _toListeners(capsule) {
        const { channel, payload } = capsule;
        const holder = this.listeners.get(channel);
        if (holder) {
            holder.forEach(listener => {
                logger.debug(`Dispatching to ${channel} with `, payload);
                try {
                    listener.callback(capsule);
                }
                catch (e) {
                    logger.error(e);
                }
            });
        }
    }
}
/* We export a __default__ instance of HubClass to use it as a
pseudo Singleton for the main messaging bus, however you can still create
your own instance of HubClass() for a separate "private bus" of events. */
const Hub = new HubClass('__default__');
/**
 * @internal
 *
 * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.
 *
 */
const HubInternal = new HubClass('internal-hub');


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/I18n/I18n.mjs":
/*!**************************************!*\
  !*** ../core/dist/esm/I18n/I18n.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18n: () => (/* binding */ I18n$1)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('I18n');
/**
 * Language translation utility.
 */
let I18n$1 = class I18n {
    constructor() {
        /**
         * @private
         */
        this._options = null;
        /**
         * @private
         */
        this._lang = null;
        /**
         * @private
         */
        this._dict = {};
    }
    /**
     * Sets the default language from the configuration when required.
     */
    setDefaultLanguage() {
        // Default to window language if not set in instance
        if (!this._lang &&
            typeof window !== 'undefined' &&
            window &&
            window.navigator) {
            this._lang = window.navigator.language;
        }
        logger.debug(this._lang);
    }
    /**
     * @method
     * Explicitly setting language
     * @param {String} lang
     */
    setLanguage(lang) {
        this._lang = lang;
    }
    /**
     * @method
     * Get value
     * @param {String} key
     * @param {String} defVal - Default value
     */
    get(key, defVal = undefined) {
        this.setDefaultLanguage();
        if (!this._lang) {
            return typeof defVal !== 'undefined' ? defVal : key;
        }
        const lang = this._lang;
        let val = this.getByLanguage(key, lang);
        if (val) {
            return val;
        }
        if (lang.indexOf('-') > 0) {
            val = this.getByLanguage(key, lang.split('-')[0]);
        }
        if (val) {
            return val;
        }
        return typeof defVal !== 'undefined' ? defVal : key;
    }
    /**
     * @method
     * Get value according to specified language
     * @param {String} key
     * @param {String} language - Specified langurage to be used
     * @param {String} defVal - Default value
     */
    getByLanguage(key, language, defVal = null) {
        if (!language) {
            return defVal;
        }
        const langDict = this._dict[language];
        if (!langDict) {
            return defVal;
        }
        return langDict[key];
    }
    /**
     * @method
     * Add vocabularies for one language
     * @param {String} language - Language of the dictionary
     * @param {Object} vocabularies - Object that has key-value as dictionary entry
     */
    putVocabulariesForLanguage(language, vocabularies) {
        let langDict = this._dict[language];
        if (!langDict) {
            langDict = this._dict[language] = {};
        }
        this._dict[language] = { ...langDict, ...vocabularies };
    }
    /**
     * @method
     * Add vocabularies for one language
     * @param {Object} vocabularies - Object that has language as key,
     *                                vocabularies of each language as value
     */
    putVocabularies(vocabularies) {
        Object.keys(vocabularies).forEach(key => {
            this.putVocabulariesForLanguage(key, vocabularies[key]);
        });
    }
};


//# sourceMappingURL=I18n.mjs.map


/***/ }),

/***/ "../core/dist/esm/I18n/errorHelpers.mjs":
/*!**********************************************!*\
  !*** ../core/dist/esm/I18n/errorHelpers.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18nErrorCode: () => (/* binding */ I18nErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var I18nErrorCode;
(function (I18nErrorCode) {
    I18nErrorCode["NotConfigured"] = "NotConfigured";
})(I18nErrorCode || (I18nErrorCode = {}));
const i18nErrorMap = {
    [I18nErrorCode.NotConfigured]: {
        message: 'i18n is not configured.',
    },
};
const assert = (0,_errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(i18nErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/I18n/index.mjs":
/*!***************************************!*\
  !*** ../core/dist/esm/I18n/index.mjs ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I18n: () => (/* binding */ I18n)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _I18n_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I18n.mjs */ "../core/dist/esm/I18n/I18n.mjs");
/* harmony import */ var _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errorHelpers.mjs */ "../core/dist/esm/I18n/errorHelpers.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('I18n');
let _config = { language: null };
let _i18n = null;
/**
 * Export I18n APIs
 */
class I18n {
    /**
     * @static
     * @method
     * Configure I18n part
     * @param {Object} config - Configuration of the I18n
     */
    static configure(config) {
        logger.debug('configure I18n');
        if (!config) {
            return _config;
        }
        _config = Object.assign({}, _config, config.I18n || config);
        I18n.createInstance();
        return _config;
    }
    static getModuleName() {
        return 'I18n';
    }
    /**
     * @static
     * @method
     * Create an instance of I18n for the library
     */
    static createInstance() {
        logger.debug('create I18n instance');
        if (_i18n) {
            return;
        }
        _i18n = new _I18n_mjs__WEBPACK_IMPORTED_MODULE_1__.I18n();
    }
    /**
     * @static @method
     * Explicitly setting language
     * @param {String} lang
     */
    static setLanguage(lang) {
        I18n.checkConfig();
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(!!_i18n, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.I18nErrorCode.NotConfigured);
        _i18n.setLanguage(lang);
    }
    /**
     * @static @method
     * Get value
     * @param {String} key
     * @param {String} defVal - Default value
     */
    static get(key, defVal) {
        if (!I18n.checkConfig()) {
            return typeof defVal === 'undefined' ? key : defVal;
        }
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(!!_i18n, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.I18nErrorCode.NotConfigured);
        return _i18n.get(key, defVal);
    }
    /**
     * @static
     * @method
     * Add vocabularies for one language
     * @param {String} language - Language of the dictionary
     * @param {Object} vocabularies - Object that has key-value as dictionary entry
     */
    static putVocabulariesForLanguage(language, vocabularies) {
        I18n.checkConfig();
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(!!_i18n, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.I18nErrorCode.NotConfigured);
        _i18n.putVocabulariesForLanguage(language, vocabularies);
    }
    /**
     * @static
     * @method
     * Add vocabularies for one language
     * @param {Object} vocabularies - Object that has language as key,
     *                                vocabularies of each language as value
     */
    static putVocabularies(vocabularies) {
        I18n.checkConfig();
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(!!_i18n, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.I18nErrorCode.NotConfigured);
        _i18n.putVocabularies(vocabularies);
    }
    static checkConfig() {
        if (!_i18n) {
            I18n.createInstance();
        }
        return true;
    }
}
// Create an instance of I18n in the static class
I18n.createInstance();


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/Logger/ConsoleLogger.mjs":
/*!*************************************************!*\
  !*** ../core/dist/esm/Logger/ConsoleLogger.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConsoleLogger: () => (/* binding */ ConsoleLogger)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/constants.mjs");
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.mjs */ "../core/dist/esm/Logger/types.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const LOG_LEVELS = {
    VERBOSE: 1,
    DEBUG: 2,
    INFO: 3,
    WARN: 4,
    ERROR: 5,
    NONE: 6,
};
/**
 * Write logs
 * @class Logger
 */
class ConsoleLogger {
    /**
     * @constructor
     * @param {string} name - Name of the logger
     */
    constructor(name, level = _types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.WARN) {
        this.name = name;
        this.level = level;
        this._pluggables = [];
    }
    _padding(n) {
        return n < 10 ? '0' + n : '' + n;
    }
    _ts() {
        const dt = new Date();
        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +
            '.' +
            dt.getMilliseconds());
    }
    configure(config) {
        if (!config)
            return this._config;
        this._config = config;
        return this._config;
    }
    /**
     * Write log
     * @method
     * @memeberof Logger
     * @param {LogType|string} type - log type, default INFO
     * @param {string|object} msg - Logging message or object
     */
    _log(type, ...msg) {
        let loggerLevelName = this.level;
        if (ConsoleLogger.LOG_LEVEL) {
            loggerLevelName = ConsoleLogger.LOG_LEVEL;
        }
        if (typeof window !== 'undefined' && window.LOG_LEVEL) {
            loggerLevelName = window.LOG_LEVEL;
        }
        const loggerLevel = LOG_LEVELS[loggerLevelName];
        const typeLevel = LOG_LEVELS[type];
        if (!(typeLevel >= loggerLevel)) {
            // Do nothing if type is not greater than or equal to logger level (handle undefined)
            return;
        }
        let log = console.log.bind(console);
        if (type === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.ERROR && console.error) {
            log = console.error.bind(console);
        }
        if (type === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.WARN && console.warn) {
            log = console.warn.bind(console);
        }
        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {
            if (type === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.INFO && console.info) {
                log = console.info.bind(console);
            }
            if (type === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.DEBUG && console.debug) {
                log = console.debug.bind(console);
            }
        }
        const prefix = `[${type}] ${this._ts()} ${this.name}`;
        let message = '';
        if (msg.length === 1 && typeof msg[0] === 'string') {
            message = `${prefix} - ${msg[0]}`;
            log(message);
        }
        else if (msg.length === 1) {
            message = `${prefix} ${msg[0]}`;
            log(prefix, msg[0]);
        }
        else if (typeof msg[0] === 'string') {
            let obj = msg.slice(1);
            if (obj.length === 1) {
                obj = obj[0];
            }
            message = `${prefix} - ${msg[0]} ${obj}`;
            log(`${prefix} - ${msg[0]}`, obj);
        }
        else {
            message = `${prefix} ${msg}`;
            log(prefix, msg);
        }
        for (const plugin of this._pluggables) {
            const logEvent = { message, timestamp: Date.now() };
            plugin.pushLogs([logEvent]);
        }
    }
    /**
     * Write General log. Default to INFO
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    log(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.INFO, ...msg);
    }
    /**
     * Write INFO log
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    info(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.INFO, ...msg);
    }
    /**
     * Write WARN log
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    warn(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.WARN, ...msg);
    }
    /**
     * Write ERROR log
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    error(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.ERROR, ...msg);
    }
    /**
     * Write DEBUG log
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    debug(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.DEBUG, ...msg);
    }
    /**
     * Write VERBOSE log
     * @method
     * @memeberof Logger
     * @param {string|object} msg - Logging message or object
     */
    verbose(...msg) {
        this._log(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.LogType.VERBOSE, ...msg);
    }
    addPluggable(pluggable) {
        if (pluggable && pluggable.getCategoryName() === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.AWS_CLOUDWATCH_CATEGORY) {
            this._pluggables.push(pluggable);
            pluggable.configure(this._config);
        }
    }
    listPluggables() {
        return this._pluggables;
    }
}
ConsoleLogger.LOG_LEVEL = null;
ConsoleLogger.BIND_ALL_LOG_LEVELS = false;


//# sourceMappingURL=ConsoleLogger.mjs.map


/***/ }),

/***/ "../core/dist/esm/Logger/types.mjs":
/*!*****************************************!*\
  !*** ../core/dist/esm/Logger/types.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LogType: () => (/* binding */ LogType)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var LogType;
(function (LogType) {
    LogType["DEBUG"] = "DEBUG";
    LogType["ERROR"] = "ERROR";
    LogType["INFO"] = "INFO";
    LogType["WARN"] = "WARN";
    LogType["VERBOSE"] = "VERBOSE";
    LogType["NONE"] = "NONE";
})(LogType || (LogType = {}));


//# sourceMappingURL=types.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/customUserAgent.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Platform/customUserAgent.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCustomUserAgent: () => (/* binding */ getCustomUserAgent),
/* harmony export */   setCustomUserAgent: () => (/* binding */ setCustomUserAgent)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Maintains custom user-agent state set by external consumers.
const customUserAgentState = {};
/**
 * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to
 * clean up any custom state set with this API.
 *
 * @note
 * This API operates globally. Calling this API multiple times will result in the most recently set values for a
 * particular API being used.
 *
 * @note
 * This utility IS NOT compatible with SSR.
 *
 * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.
 */
const setCustomUserAgent = (input) => {
    // Save custom user-agent state & increment reference counter
    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373
    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({
        ...acc,
        [api]: {
            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,
            additionalDetails: input.additionalDetails,
        },
    }), customUserAgentState[input.category] ?? {});
    // Callback that cleans up state for APIs recorded by this call
    let cleanUpCallbackCalled = false;
    const cleanUpCallback = () => {
        // Only allow the cleanup callback to be called once
        if (cleanUpCallbackCalled) {
            return;
        }
        cleanUpCallbackCalled = true;
        input.apis.forEach(api => {
            const apiRefCount = customUserAgentState[input.category][api].refCount;
            if (apiRefCount > 1) {
                customUserAgentState[input.category][api].refCount = apiRefCount - 1;
            }
            else {
                delete customUserAgentState[input.category][api];
                // Clean up category if no more APIs set
                if (!Object.keys(customUserAgentState[input.category]).length) {
                    delete customUserAgentState[input.category];
                }
            }
        });
    };
    return cleanUpCallback;
};
const getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;


//# sourceMappingURL=customUserAgent.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detectFramework.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Platform/detectFramework.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearCache: () => (/* binding */ clearCache),
/* harmony export */   detectFramework: () => (/* binding */ detectFramework),
/* harmony export */   frameworkChangeObservers: () => (/* binding */ frameworkChangeObservers),
/* harmony export */   observeFrameworkChanges: () => (/* binding */ observeFrameworkChanges)
/* harmony export */ });
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.mjs */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _detection_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./detection/index.mjs */ "../core/dist/esm/Platform/detection/index.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// We want to cache detection since the framework won't change
let frameworkCache;
const frameworkChangeObservers = [];
// Setup the detection reset tracking / timeout delays
let resetTriggered = false;
const SSR_RESET_TIMEOUT = 10; // ms
const WEB_RESET_TIMEOUT = 10; // ms
const PRIME_FRAMEWORK_DELAY = 1000; // ms
const detectFramework = () => {
    if (!frameworkCache) {
        frameworkCache = (0,_detection_index_mjs__WEBPACK_IMPORTED_MODULE_0__.detect)();
        if (resetTriggered) {
            // The final run of detectFramework:
            // Starting from this point, the `frameworkCache` becomes "final".
            // So we don't need to notify the observers again so the observer
            // can be removed after the final notice.
            while (frameworkChangeObservers.length) {
                frameworkChangeObservers.pop()?.();
            }
        }
        else {
            // The first run of detectFramework:
            // Every time we update the cache, call each observer function
            frameworkChangeObservers.forEach(fcn => {
                fcn();
            });
        }
        // Retry once for either Unknown type after a delay (explained below)
        resetTimeout(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);
        resetTimeout(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.Framework.WebUnknown, WEB_RESET_TIMEOUT);
    }
    return frameworkCache;
};
/**
 * @internal Setup observer callback that will be called everytime the framework changes
 */
const observeFrameworkChanges = (fcn) => {
    // When the `frameworkCache` won't be updated again, we ignore all incoming
    // observers.
    if (resetTriggered) {
        return;
    }
    frameworkChangeObservers.push(fcn);
};
function clearCache() {
    frameworkCache = undefined;
}
// For a framework type and a delay amount, setup the event to re-detect
//   During the runtime boot, it is possible that framework detection will
//   be triggered before the framework has made modifications to the
//   global/window/etc needed for detection. When no framework is detected
//   we will reset and try again to ensure we don't use a cached
//   non-framework detection result for all requests.
function resetTimeout(framework, delay) {
    if (frameworkCache === framework && !resetTriggered) {
        setTimeout(() => {
            clearCache();
            resetTriggered = true;
            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);
        }, delay);
    }
}


//# sourceMappingURL=detectFramework.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Angular.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Angular.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   angularSSRDetect: () => (/* binding */ angularSSRDetect),
/* harmony export */   angularWebDetect: () => (/* binding */ angularWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with @angular/core 16.0.0
function angularWebDetect() {
    const angularVersionSetInDocument = Boolean((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.documentExists)() && document.querySelector('[ng-version]'));
    const angularContentSetInWindow = Boolean((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)() && typeof window.ng !== 'undefined');
    return angularVersionSetInDocument || angularContentSetInWindow;
}
function angularSSRDetect() {
    return (((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.processExists)() &&
        typeof process.env === 'object' &&
        process.env.npm_lifecycle_script?.startsWith('ng ')) ||
        false);
}


//# sourceMappingURL=Angular.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Expo.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Expo.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   expoDetect: () => (/* binding */ expoDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with expo 48 / react-native 0.71.3
function expoDetect() {
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.globalExists)() && typeof global.expo !== 'undefined';
}


//# sourceMappingURL=Expo.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Next.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Next.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   nextSSRDetect: () => (/* binding */ nextSSRDetect),
/* harmony export */   nextWebDetect: () => (/* binding */ nextWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with next 13.4 / react 18.2
function nextWebDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)() &&
        window.next &&
        typeof window.next === 'object');
}
function nextSSRDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.globalExists)() &&
        ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.keyPrefixMatch)(global, '__next') || (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.keyPrefixMatch)(global, '__NEXT')));
}


//# sourceMappingURL=Next.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Nuxt.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Nuxt.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   nuxtSSRDetect: () => (/* binding */ nuxtSSRDetect),
/* harmony export */   nuxtWebDetect: () => (/* binding */ nuxtWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with nuxt 2.15 / vue 2.7
function nuxtWebDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)() &&
        (window.__NUXT__ !== undefined ||
            window.$nuxt !== undefined));
}
function nuxtSSRDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.globalExists)() && typeof global.__NUXT_PATHS__ !== 'undefined');
}


//# sourceMappingURL=Nuxt.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/React.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Platform/detection/React.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   reactSSRDetect: () => (/* binding */ reactSSRDetect),
/* harmony export */   reactWebDetect: () => (/* binding */ reactWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with react 18.2 - built using Vite
function reactWebDetect() {
    const elementKeyPrefixedWithReact = (key) => {
        return key.startsWith('_react') || key.startsWith('__react');
    };
    const elementIsReactEnabled = (element) => {
        return Object.keys(element).find(elementKeyPrefixedWithReact);
    };
    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.documentExists)() && allElementsWithId().some(elementIsReactEnabled);
}
function reactSSRDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.processExists)() &&
        typeof process.env !== 'undefined' &&
        !!Object.keys(process.env).find(key => key.includes('react')));
}
// use the some


//# sourceMappingURL=React.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/ReactNative.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/Platform/detection/ReactNative.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   reactNativeDetect: () => (/* binding */ reactNativeDetect)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with react-native 0.17.7
function reactNativeDetect() {
    return (typeof navigator !== 'undefined' &&
        typeof navigator.product !== 'undefined' &&
        navigator.product === 'ReactNative');
}


//# sourceMappingURL=ReactNative.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Svelte.mjs":
/*!******************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Svelte.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   svelteSSRDetect: () => (/* binding */ svelteSSRDetect),
/* harmony export */   svelteWebDetect: () => (/* binding */ svelteWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with svelte 3.59
function svelteWebDetect() {
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)() && (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.keyPrefixMatch)(window, '__SVELTE');
}
function svelteSSRDetect() {
    return ((0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.processExists)() &&
        typeof process.env !== 'undefined' &&
        !!Object.keys(process.env).find(key => key.includes('svelte')));
}


//# sourceMappingURL=Svelte.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Vue.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Vue.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   vueSSRDetect: () => (/* binding */ vueSSRDetect),
/* harmony export */   vueWebDetect: () => (/* binding */ vueWebDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Tested with vue 3.3.2
function vueWebDetect() {
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)() && (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.keyPrefixMatch)(window, '__VUE');
}
function vueSSRDetect() {
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.globalExists)() && (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.keyPrefixMatch)(global, '__VUE');
}


//# sourceMappingURL=Vue.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/Web.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/Platform/detection/Web.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   webDetect: () => (/* binding */ webDetect)
/* harmony export */ });
/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ "../core/dist/esm/Platform/detection/helpers.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function webDetect() {
    return (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.windowExists)();
}


//# sourceMappingURL=Web.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/helpers.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/Platform/detection/helpers.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   documentExists: () => (/* binding */ documentExists),
/* harmony export */   globalExists: () => (/* binding */ globalExists),
/* harmony export */   globalThisExists: () => (/* binding */ globalThisExists),
/* harmony export */   keyPrefixMatch: () => (/* binding */ keyPrefixMatch),
/* harmony export */   processExists: () => (/* binding */ processExists),
/* harmony export */   windowExists: () => (/* binding */ windowExists)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const globalExists = () => {
    return typeof global !== 'undefined';
};
const globalThisExists = () => {
    return typeof globalThis !== 'undefined';
};
const windowExists = () => {
    return typeof window !== 'undefined';
};
const documentExists = () => {
    return typeof document !== 'undefined';
};
const processExists = () => {
    return typeof process !== 'undefined';
};
const keyPrefixMatch = (object, prefix) => {
    return !!Object.keys(object).find(key => key.startsWith(prefix));
};


//# sourceMappingURL=helpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/detection/index.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/Platform/detection/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   detect: () => (/* binding */ detect)
/* harmony export */ });
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.mjs */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _React_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./React.mjs */ "../core/dist/esm/Platform/detection/React.mjs");
/* harmony import */ var _Vue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Vue.mjs */ "../core/dist/esm/Platform/detection/Vue.mjs");
/* harmony import */ var _Svelte_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Svelte.mjs */ "../core/dist/esm/Platform/detection/Svelte.mjs");
/* harmony import */ var _Next_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Next.mjs */ "../core/dist/esm/Platform/detection/Next.mjs");
/* harmony import */ var _Nuxt_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Nuxt.mjs */ "../core/dist/esm/Platform/detection/Nuxt.mjs");
/* harmony import */ var _Angular_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Angular.mjs */ "../core/dist/esm/Platform/detection/Angular.mjs");
/* harmony import */ var _ReactNative_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ReactNative.mjs */ "../core/dist/esm/Platform/detection/ReactNative.mjs");
/* harmony import */ var _Expo_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Expo.mjs */ "../core/dist/esm/Platform/detection/Expo.mjs");
/* harmony import */ var _Web_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Web.mjs */ "../core/dist/esm/Platform/detection/Web.mjs");











// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// These are in the order of detection where when both are detectable, the early Framework will be reported
const detectionMap = [
    // First, detect mobile
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.Expo, detectionMethod: _Expo_mjs__WEBPACK_IMPORTED_MODULE_1__.expoDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.ReactNative, detectionMethod: _ReactNative_mjs__WEBPACK_IMPORTED_MODULE_2__.reactNativeDetect },
    // Next, detect web frameworks
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.NextJs, detectionMethod: _Next_mjs__WEBPACK_IMPORTED_MODULE_3__.nextWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.Nuxt, detectionMethod: _Nuxt_mjs__WEBPACK_IMPORTED_MODULE_4__.nuxtWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.Angular, detectionMethod: _Angular_mjs__WEBPACK_IMPORTED_MODULE_5__.angularWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.React, detectionMethod: _React_mjs__WEBPACK_IMPORTED_MODULE_6__.reactWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.VueJs, detectionMethod: _Vue_mjs__WEBPACK_IMPORTED_MODULE_7__.vueWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.Svelte, detectionMethod: _Svelte_mjs__WEBPACK_IMPORTED_MODULE_8__.svelteWebDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.WebUnknown, detectionMethod: _Web_mjs__WEBPACK_IMPORTED_MODULE_9__.webDetect },
    // Last, detect ssr frameworks
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.NextJsSSR, detectionMethod: _Next_mjs__WEBPACK_IMPORTED_MODULE_3__.nextSSRDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.NuxtSSR, detectionMethod: _Nuxt_mjs__WEBPACK_IMPORTED_MODULE_4__.nuxtSSRDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.ReactSSR, detectionMethod: _React_mjs__WEBPACK_IMPORTED_MODULE_6__.reactSSRDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.VueJsSSR, detectionMethod: _Vue_mjs__WEBPACK_IMPORTED_MODULE_7__.vueSSRDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.AngularSSR, detectionMethod: _Angular_mjs__WEBPACK_IMPORTED_MODULE_5__.angularSSRDetect },
    { platform: _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.SvelteSSR, detectionMethod: _Svelte_mjs__WEBPACK_IMPORTED_MODULE_8__.svelteSSRDetect },
];
function detect() {
    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())
        ?.platform || _types_mjs__WEBPACK_IMPORTED_MODULE_0__.Framework.ServerSideUnknown);
}


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/index.mjs":
/*!*******************************************!*\
  !*** ../core/dist/esm/Platform/index.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Platform: () => (/* binding */ Platform),
/* harmony export */   getAmplifyUserAgent: () => (/* binding */ getAmplifyUserAgent),
/* harmony export */   getAmplifyUserAgentObject: () => (/* binding */ getAmplifyUserAgentObject),
/* harmony export */   sanitizeAmplifyVersion: () => (/* binding */ sanitizeAmplifyVersion)
/* harmony export */ });
/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.mjs */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _version_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./version.mjs */ "../core/dist/esm/Platform/version.mjs");
/* harmony import */ var _detectFramework_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./detectFramework.mjs */ "../core/dist/esm/Platform/detectFramework.mjs");
/* harmony import */ var _customUserAgent_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./customUserAgent.mjs */ "../core/dist/esm/Platform/customUserAgent.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const BASE_USER_AGENT = `aws-amplify`;
/** Sanitize Amplify version string be removing special character + and character post the special character  */
const sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\+.*/, '');
class PlatformBuilder {
    constructor() {
        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(_version_mjs__WEBPACK_IMPORTED_MODULE_0__.version)}`;
    }
    get framework() {
        return (0,_detectFramework_mjs__WEBPACK_IMPORTED_MODULE_1__.detectFramework)();
    }
    get isReactNative() {
        return (this.framework === _types_mjs__WEBPACK_IMPORTED_MODULE_2__.Framework.ReactNative ||
            this.framework === _types_mjs__WEBPACK_IMPORTED_MODULE_2__.Framework.Expo);
    }
    observeFrameworkChanges(fcn) {
        (0,_detectFramework_mjs__WEBPACK_IMPORTED_MODULE_1__.observeFrameworkChanges)(fcn);
    }
}
const Platform = new PlatformBuilder();
const getAmplifyUserAgentObject = ({ category, action, } = {}) => {
    const userAgent = [
        [BASE_USER_AGENT, sanitizeAmplifyVersion(_version_mjs__WEBPACK_IMPORTED_MODULE_0__.version)],
    ];
    if (category) {
        userAgent.push([category, action]);
    }
    userAgent.push(['framework', (0,_detectFramework_mjs__WEBPACK_IMPORTED_MODULE_1__.detectFramework)()]);
    if (category && action) {
        const customState = (0,_customUserAgent_mjs__WEBPACK_IMPORTED_MODULE_3__.getCustomUserAgent)(category, action);
        if (customState) {
            customState.forEach(state => {
                userAgent.push(state);
            });
        }
    }
    return userAgent;
};
const getAmplifyUserAgent = (customUserAgentDetails) => {
    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);
    const userAgentString = userAgent
        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)
        .join(' ');
    return userAgentString;
};


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/types.mjs":
/*!*******************************************!*\
  !*** ../core/dist/esm/Platform/types.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AiAction: () => (/* binding */ AiAction),
/* harmony export */   AnalyticsAction: () => (/* binding */ AnalyticsAction),
/* harmony export */   ApiAction: () => (/* binding */ ApiAction),
/* harmony export */   AuthAction: () => (/* binding */ AuthAction),
/* harmony export */   Category: () => (/* binding */ Category),
/* harmony export */   DataStoreAction: () => (/* binding */ DataStoreAction),
/* harmony export */   Framework: () => (/* binding */ Framework),
/* harmony export */   GeoAction: () => (/* binding */ GeoAction),
/* harmony export */   InAppMessagingAction: () => (/* binding */ InAppMessagingAction),
/* harmony export */   InteractionsAction: () => (/* binding */ InteractionsAction),
/* harmony export */   PredictionsAction: () => (/* binding */ PredictionsAction),
/* harmony export */   PubSubAction: () => (/* binding */ PubSubAction),
/* harmony export */   PushNotificationAction: () => (/* binding */ PushNotificationAction),
/* harmony export */   StorageAction: () => (/* binding */ StorageAction)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var Framework;
(function (Framework) {
    // < 100 - Web frameworks
    Framework["WebUnknown"] = "0";
    Framework["React"] = "1";
    Framework["NextJs"] = "2";
    Framework["Angular"] = "3";
    Framework["VueJs"] = "4";
    Framework["Nuxt"] = "5";
    Framework["Svelte"] = "6";
    // 100s - Server side frameworks
    Framework["ServerSideUnknown"] = "100";
    Framework["ReactSSR"] = "101";
    Framework["NextJsSSR"] = "102";
    Framework["AngularSSR"] = "103";
    Framework["VueJsSSR"] = "104";
    Framework["NuxtSSR"] = "105";
    Framework["SvelteSSR"] = "106";
    // 200s - Mobile framework
    Framework["ReactNative"] = "201";
    Framework["Expo"] = "202";
})(Framework || (Framework = {}));
var Category;
(function (Category) {
    Category["AI"] = "ai";
    Category["API"] = "api";
    Category["Auth"] = "auth";
    Category["Analytics"] = "analytics";
    Category["DataStore"] = "datastore";
    Category["Geo"] = "geo";
    Category["InAppMessaging"] = "inappmessaging";
    Category["Interactions"] = "interactions";
    Category["Predictions"] = "predictions";
    Category["PubSub"] = "pubsub";
    Category["PushNotification"] = "pushnotification";
    Category["Storage"] = "storage";
})(Category || (Category = {}));
var AiAction;
(function (AiAction) {
    AiAction["CreateConversation"] = "1";
    AiAction["GetConversation"] = "2";
    AiAction["ListConversations"] = "3";
    AiAction["DeleteConversation"] = "4";
    AiAction["SendMessage"] = "5";
    AiAction["ListMessages"] = "6";
    AiAction["OnMessage"] = "7";
    AiAction["Generation"] = "8";
    AiAction["UpdateConversation"] = "9";
})(AiAction || (AiAction = {}));
var AnalyticsAction;
(function (AnalyticsAction) {
    AnalyticsAction["Record"] = "1";
    AnalyticsAction["IdentifyUser"] = "2";
})(AnalyticsAction || (AnalyticsAction = {}));
var ApiAction;
(function (ApiAction) {
    ApiAction["GraphQl"] = "1";
    ApiAction["Get"] = "2";
    ApiAction["Post"] = "3";
    ApiAction["Put"] = "4";
    ApiAction["Patch"] = "5";
    ApiAction["Del"] = "6";
    ApiAction["Head"] = "7";
})(ApiAction || (ApiAction = {}));
var AuthAction;
(function (AuthAction) {
    AuthAction["SignUp"] = "1";
    AuthAction["ConfirmSignUp"] = "2";
    AuthAction["ResendSignUpCode"] = "3";
    AuthAction["SignIn"] = "4";
    AuthAction["FetchMFAPreference"] = "6";
    AuthAction["UpdateMFAPreference"] = "7";
    AuthAction["SetUpTOTP"] = "10";
    AuthAction["VerifyTOTPSetup"] = "11";
    AuthAction["ConfirmSignIn"] = "12";
    AuthAction["DeleteUserAttributes"] = "15";
    AuthAction["DeleteUser"] = "16";
    AuthAction["UpdateUserAttributes"] = "17";
    AuthAction["FetchUserAttributes"] = "18";
    AuthAction["ConfirmUserAttribute"] = "22";
    AuthAction["SignOut"] = "26";
    AuthAction["UpdatePassword"] = "27";
    AuthAction["ResetPassword"] = "28";
    AuthAction["ConfirmResetPassword"] = "29";
    AuthAction["FederatedSignIn"] = "30";
    AuthAction["RememberDevice"] = "32";
    AuthAction["ForgetDevice"] = "33";
    AuthAction["FetchDevices"] = "34";
    AuthAction["SendUserAttributeVerificationCode"] = "35";
    AuthAction["SignInWithRedirect"] = "36";
    AuthAction["StartWebAuthnRegistration"] = "37";
    AuthAction["CompleteWebAuthnRegistration"] = "38";
    AuthAction["ListWebAuthnCredentials"] = "39";
    AuthAction["DeleteWebAuthnCredential"] = "40";
})(AuthAction || (AuthAction = {}));
var DataStoreAction;
(function (DataStoreAction) {
    DataStoreAction["Subscribe"] = "1";
    DataStoreAction["GraphQl"] = "2";
})(DataStoreAction || (DataStoreAction = {}));
var GeoAction;
(function (GeoAction) {
    GeoAction["SearchByText"] = "0";
    GeoAction["SearchByCoordinates"] = "1";
    GeoAction["SearchForSuggestions"] = "2";
    GeoAction["SearchByPlaceId"] = "3";
    GeoAction["SaveGeofences"] = "4";
    GeoAction["GetGeofence"] = "5";
    GeoAction["ListGeofences"] = "6";
    GeoAction["DeleteGeofences"] = "7";
})(GeoAction || (GeoAction = {}));
var InAppMessagingAction;
(function (InAppMessagingAction) {
    InAppMessagingAction["SyncMessages"] = "1";
    InAppMessagingAction["IdentifyUser"] = "2";
    InAppMessagingAction["NotifyMessageInteraction"] = "3";
})(InAppMessagingAction || (InAppMessagingAction = {}));
var InteractionsAction;
(function (InteractionsAction) {
    InteractionsAction["None"] = "0";
})(InteractionsAction || (InteractionsAction = {}));
var PredictionsAction;
(function (PredictionsAction) {
    PredictionsAction["Convert"] = "1";
    PredictionsAction["Identify"] = "2";
    PredictionsAction["Interpret"] = "3";
})(PredictionsAction || (PredictionsAction = {}));
var PubSubAction;
(function (PubSubAction) {
    PubSubAction["Subscribe"] = "1";
})(PubSubAction || (PubSubAction = {}));
var PushNotificationAction;
(function (PushNotificationAction) {
    PushNotificationAction["InitializePushNotifications"] = "1";
    PushNotificationAction["IdentifyUser"] = "2";
})(PushNotificationAction || (PushNotificationAction = {}));
var StorageAction;
(function (StorageAction) {
    StorageAction["UploadData"] = "1";
    StorageAction["DownloadData"] = "2";
    StorageAction["List"] = "3";
    StorageAction["Copy"] = "4";
    StorageAction["Remove"] = "5";
    StorageAction["GetProperties"] = "6";
    StorageAction["GetUrl"] = "7";
    StorageAction["GetDataAccess"] = "8";
    StorageAction["ListCallerAccessGrants"] = "9";
})(StorageAction || (StorageAction = {}));


//# sourceMappingURL=types.mjs.map


/***/ }),

/***/ "../core/dist/esm/Platform/version.mjs":
/*!*********************************************!*\
  !*** ../core/dist/esm/Platform/version.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   version: () => (/* binding */ version)
/* harmony export */ });
// generated by genversion
const version = '6.10.2';


//# sourceMappingURL=version.mjs.map


/***/ }),

/***/ "../core/dist/esm/ServiceWorker/ServiceWorker.mjs":
/*!********************************************************!*\
  !*** ../core/dist/esm/ServiceWorker/ServiceWorker.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ServiceWorkerClass: () => (/* binding */ ServiceWorkerClass)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _utils_isBrowser_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/isBrowser.mjs */ "../core/dist/esm/utils/isBrowser.mjs");
/* harmony import */ var _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../errors/AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Cache/index.mjs */ "../core/dist/esm/Cache/index.mjs");
/* harmony import */ var _providers_pinpoint_apis_record_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../providers/pinpoint/apis/record.mjs */ "../core/dist/esm/providers/pinpoint/apis/record.mjs");
/* harmony import */ var _singleton_Amplify_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../singleton/Amplify.mjs */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _singleton_apis_fetchAuthSession_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../singleton/apis/fetchAuthSession.mjs */ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs");
/* harmony import */ var _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./errorHelpers.mjs */ "../core/dist/esm/ServiceWorker/errorHelpers.mjs");




















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Provides a means to registering a service worker in the browser
 * and communicating with it via postMessage events.
 * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/
 *
 * postMessage events are currently not supported in all browsers. See:
 * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API
 *
 * At the minmum this class will register the service worker and listen
 * and attempt to dispatch messages on state change and record analytics
 * events based on the service worker lifecycle.
 */
class ServiceWorkerClass {
    constructor() {
        // The AWS Amplify logger
        this._logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_3__.ConsoleLogger('ServiceWorker');
    }
    /**
     * Get the currently active service worker
     */
    get serviceWorker() {
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.assert)(this._serviceWorker !== undefined, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.UndefinedInstance);
        return this._serviceWorker;
    }
    /**
     * Register the service-worker.js file in the browser
     * Make sure the service-worker.js is part of the build
     * for example with Angular, modify the angular-cli.json file
     * and add to "assets" array "service-worker.js"
     * @param {string} filePath Service worker file. Defaults to "/service-worker.js"
     * @param {string} scope The service worker scope. Defaults to "/"
     *  - API Doc: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register
     * @returns {Promise}
     *	- resolve(ServiceWorkerRegistration)
     *	- reject(Error)
     **/
    register(filePath = '/service-worker.js', scope = '/') {
        this._logger.debug(`registering ${filePath}`);
        this._logger.debug(`registering service worker with scope ${scope}`);
        return new Promise((resolve, reject) => {
            if (navigator && 'serviceWorker' in navigator) {
                navigator.serviceWorker
                    .register(filePath, {
                    scope,
                })
                    .then(registration => {
                    if (registration.installing) {
                        this._serviceWorker = registration.installing;
                    }
                    else if (registration.waiting) {
                        this._serviceWorker = registration.waiting;
                    }
                    else if (registration.active) {
                        this._serviceWorker = registration.active;
                    }
                    this._registration = registration;
                    this._setupListeners();
                    this._logger.debug(`Service Worker Registration Success: ${registration}`);
                    resolve(registration);
                })
                    .catch(error => {
                    this._logger.debug(`Service Worker Registration Failed ${error}`);
                    reject(new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_5__.AmplifyError({
                        name: _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.Unavailable,
                        message: 'Service Worker not available',
                        underlyingError: error,
                    }));
                });
            }
            else {
                reject(new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_5__.AmplifyError({
                    name: _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.Unavailable,
                    message: 'Service Worker not available',
                }));
            }
        });
    }
    /**
     * Enable web push notifications. If not subscribed, a new subscription will
     * be created and registered.
     * 	Test Push Server: https://web-push-codelab.glitch.me/
     * 	Push Server Libraries: https://github.com/web-push-libs/
     * 	API Doc: https://developers.google.com/web/fundamentals/codelabs/push-notifications/
     * @param publicKey
     * @returns {Promise}
     * 	- resolve(PushSubscription)
     *  - reject(Error)
     */
    enablePush(publicKey) {
        (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.assert)(this._registration !== undefined, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.UndefinedRegistration);
        this._publicKey = publicKey;
        return new Promise((resolve, reject) => {
            if ((0,_utils_isBrowser_mjs__WEBPACK_IMPORTED_MODULE_6__.isBrowser)()) {
                (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.assert)(this._registration !== undefined, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.UndefinedRegistration);
                this._registration.pushManager.getSubscription().then(subscription => {
                    if (subscription) {
                        this._subscription = subscription;
                        this._logger.debug(`User is subscribed to push: ${JSON.stringify(subscription)}`);
                        resolve(subscription);
                    }
                    else {
                        this._logger.debug(`User is NOT subscribed to push`);
                        return this._registration.pushManager.subscribe({
                            userVisibleOnly: true,
                            applicationServerKey: this._urlB64ToUint8Array(publicKey),
                        })
                            .then(pushManagerSubscription => {
                            this._subscription = pushManagerSubscription;
                            this._logger.debug(`User subscribed: ${JSON.stringify(pushManagerSubscription)}`);
                            resolve(pushManagerSubscription);
                        })
                            .catch(error => {
                            this._logger.error(error);
                        });
                    }
                });
            }
            else {
                reject(new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_5__.AmplifyError({
                    name: _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.ServiceWorkerErrorCode.Unavailable,
                    message: 'Service Worker not available',
                }));
            }
        });
    }
    /**
     * Convert a base64 encoded string to a Uint8 array for the push server key
     * @param base64String
     */
    _urlB64ToUint8Array(base64String) {
        const padding = '='.repeat((4 - (base64String.length % 4)) % 4);
        const base64 = (base64String + padding)
            .replace(/-/g, '+')
            .replace(/_/g, '/');
        const rawData = window.atob(base64);
        const outputArray = new Uint8Array(rawData.length);
        for (let i = 0; i < rawData.length; ++i) {
            outputArray[i] = rawData.charCodeAt(i);
        }
        return outputArray;
    }
    /**
     * Send a message to the service worker. The service worker needs
     * to implement `self.addEventListener('message') to handle the
     * message. This ***currently*** does not work in Safari or IE.
     * @param {object | string} message An arbitrary JSON object or string message to send to the service worker
     *	- see: https://developer.mozilla.org/en-US/docs/Web/API/Transferable
     * @returns {Promise}
     **/
    send(message) {
        if (this._serviceWorker) {
            this._serviceWorker.postMessage(typeof message === 'object' ? JSON.stringify(message) : message);
        }
    }
    /**
     * Listen for service worker state change and message events
     * https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker/state
     **/
    _setupListeners() {
        this.serviceWorker.addEventListener('statechange', async () => {
            const currentState = this.serviceWorker.state;
            this._logger.debug(`ServiceWorker statechange: ${currentState}`);
            const { appId, region, bufferSize, flushInterval, flushSize, resendLimit, } = _singleton_Amplify_mjs__WEBPACK_IMPORTED_MODULE_7__.Amplify.getConfig().Analytics?.Pinpoint ?? {};
            const { credentials } = await (0,_singleton_apis_fetchAuthSession_mjs__WEBPACK_IMPORTED_MODULE_8__.fetchAuthSession)();
            if (appId && region && credentials) {
                // Pinpoint is configured, record an event
                (0,_providers_pinpoint_apis_record_mjs__WEBPACK_IMPORTED_MODULE_9__.record)({
                    appId,
                    region,
                    category: 'Core',
                    credentials,
                    bufferSize,
                    flushInterval,
                    flushSize,
                    resendLimit,
                    event: {
                        name: 'ServiceWorker',
                        attributes: {
                            state: currentState,
                        },
                    },
                });
            }
        });
        this.serviceWorker.addEventListener('message', event => {
            this._logger.debug(`ServiceWorker message event: ${event}`);
        });
    }
}


//# sourceMappingURL=ServiceWorker.mjs.map


/***/ }),

/***/ "../core/dist/esm/ServiceWorker/errorHelpers.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/ServiceWorker/errorHelpers.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ServiceWorkerErrorCode: () => (/* binding */ ServiceWorkerErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var ServiceWorkerErrorCode;
(function (ServiceWorkerErrorCode) {
    ServiceWorkerErrorCode["UndefinedInstance"] = "UndefinedInstance";
    ServiceWorkerErrorCode["UndefinedRegistration"] = "UndefinedRegistration";
    ServiceWorkerErrorCode["Unavailable"] = "Unavailable";
})(ServiceWorkerErrorCode || (ServiceWorkerErrorCode = {}));
const serviceWorkerErrorMap = {
    [ServiceWorkerErrorCode.UndefinedInstance]: {
        message: 'Service Worker instance is undefined.',
    },
    [ServiceWorkerErrorCode.UndefinedRegistration]: {
        message: 'Service Worker registration is undefined.',
    },
    [ServiceWorkerErrorCode.Unavailable]: {
        message: 'Service Worker not available.',
    },
};
const assert = (0,_errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(serviceWorkerErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/awsClients/pinpoint/base.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/awsClients/pinpoint/base.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultConfig: () => (/* binding */ defaultConfig),
/* harmony export */   getSharedHeaders: () => (/* binding */ getSharedHeaders)
/* harmony export */ });
/* harmony import */ var _clients_endpoints_getDnsSuffix_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../clients/endpoints/getDnsSuffix.mjs */ "../core/dist/esm/clients/endpoints/getDnsSuffix.mjs");
/* harmony import */ var _clients_middleware_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../clients/middleware/retry/jitteredBackoff.mjs */ "../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs");
/* harmony import */ var _clients_middleware_retry_defaultRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clients/middleware/retry/defaultRetryDecider.mjs */ "../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _Platform_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Platform/index.mjs */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/amplifyUrl/index.mjs */ "../core/dist/esm/utils/amplifyUrl/index.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * The service name used to sign requests if the API requires authentication.
 */
const SERVICE_NAME = 'mobiletargeting';
/**
 * The endpoint resolver function that returns the endpoint URL for a given region.
 */
const endpointResolver = ({ region }) => ({
    url: new _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyUrl(`https://pinpoint.${region}.${(0,_clients_endpoints_getDnsSuffix_mjs__WEBPACK_IMPORTED_MODULE_1__.getDnsSuffix)(region)}`),
});
/**
 * @internal
 */
const defaultConfig = {
    service: SERVICE_NAME,
    endpointResolver,
    retryDecider: (0,_clients_middleware_retry_defaultRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_2__.getRetryDecider)(_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__.parseJsonError),
    computeDelay: _clients_middleware_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_4__.jitteredBackoff,
    userAgentValue: (0,_Platform_index_mjs__WEBPACK_IMPORTED_MODULE_5__.getAmplifyUserAgent)(),
};
/**
 * @internal
 */
const getSharedHeaders = () => ({
    'content-type': 'application/json',
});


//# sourceMappingURL=base.mjs.map


/***/ }),

/***/ "../core/dist/esm/awsClients/pinpoint/errorHelpers.mjs":
/*!*************************************************************!*\
  !*** ../core/dist/esm/awsClients/pinpoint/errorHelpers.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PinpointValidationErrorCode: () => (/* binding */ PinpointValidationErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors/createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var PinpointValidationErrorCode;
(function (PinpointValidationErrorCode) {
    PinpointValidationErrorCode["NoAppId"] = "NoAppId";
})(PinpointValidationErrorCode || (PinpointValidationErrorCode = {}));
const pinpointValidationErrorMap = {
    [PinpointValidationErrorCode.NoAppId]: {
        message: 'Missing application id.',
    },
};
const assert = (0,_errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(pinpointValidationErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/awsClients/pinpoint/putEvents.mjs":
/*!**********************************************************!*\
  !*** ../core/dist/esm/awsClients/pinpoint/putEvents.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   putEvents: () => (/* binding */ putEvents)
/* harmony export */ });
/* harmony import */ var _clients_handlers_authenticated_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../clients/handlers/authenticated.mjs */ "../core/dist/esm/clients/handlers/authenticated.mjs");
/* harmony import */ var _clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../clients/internal/composeServiceApi.mjs */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _clients_middleware_signing_utils_extendedEncodeURIComponent_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs */ "../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs");
/* harmony import */ var _clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../clients/serde/responseInfo.mjs */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/amplifyUrl/index.mjs */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.mjs */ "../core/dist/esm/awsClients/pinpoint/base.mjs");
/* harmony import */ var _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errorHelpers.mjs */ "../core/dist/esm/awsClients/pinpoint/errorHelpers.mjs");









// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const putEventsSerializer = ({ ApplicationId, EventsRequest }, endpoint) => {
    (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(!!ApplicationId, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.PinpointValidationErrorCode.NoAppId);
    const headers = (0,_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getSharedHeaders)();
    const url = new _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url);
    url.pathname = `v1/apps/${(0,_clients_middleware_signing_utils_extendedEncodeURIComponent_mjs__WEBPACK_IMPORTED_MODULE_3__.extendedEncodeURIComponent)(ApplicationId)}/events`;
    const body = JSON.stringify(EventsRequest ?? {});
    return { method: 'POST', headers, url, body };
};
const putEventsDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_4__.parseJsonError)(response);
        throw error;
    }
    else {
        const { Results } = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_4__.parseJsonBody)(response);
        return {
            EventsResponse: { Results },
            $metadata: (0,_clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_5__.parseMetadata)(response),
        };
    }
};
/**
 * @internal
 */
const putEvents = (0,_clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_6__.composeServiceApi)(_clients_handlers_authenticated_mjs__WEBPACK_IMPORTED_MODULE_7__.authenticatedHandler, putEventsSerializer, putEventsDeserializer, _base_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultConfig);


//# sourceMappingURL=putEvents.mjs.map


/***/ }),

/***/ "../core/dist/esm/awsClients/pinpoint/updateEndpoint.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/awsClients/pinpoint/updateEndpoint.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updateEndpoint: () => (/* binding */ updateEndpoint)
/* harmony export */ });
/* harmony import */ var _clients_handlers_authenticated_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../clients/handlers/authenticated.mjs */ "../core/dist/esm/clients/handlers/authenticated.mjs");
/* harmony import */ var _clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../clients/internal/composeServiceApi.mjs */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _clients_middleware_signing_utils_extendedEncodeURIComponent_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs */ "../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs");
/* harmony import */ var _clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../clients/serde/responseInfo.mjs */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/amplifyUrl/index.mjs */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ "../core/dist/esm/awsClients/pinpoint/base.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const updateEndpointSerializer = ({ ApplicationId = '', EndpointId = '', EndpointRequest }, endpoint) => {
    const headers = (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.getSharedHeaders)();
    const url = new _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyUrl(endpoint.url);
    url.pathname = `v1/apps/${(0,_clients_middleware_signing_utils_extendedEncodeURIComponent_mjs__WEBPACK_IMPORTED_MODULE_2__.extendedEncodeURIComponent)(ApplicationId)}/endpoints/${(0,_clients_middleware_signing_utils_extendedEncodeURIComponent_mjs__WEBPACK_IMPORTED_MODULE_2__.extendedEncodeURIComponent)(EndpointId)}`;
    const body = JSON.stringify(EndpointRequest);
    return { method: 'PUT', headers, url, body };
};
const updateEndpointDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__.parseJsonError)(response);
        throw error;
    }
    else {
        const { Message, RequestID } = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__.parseJsonBody)(response);
        return {
            MessageBody: {
                Message,
                RequestID,
            },
            $metadata: (0,_clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_4__.parseMetadata)(response),
        };
    }
};
/**
 * @internal
 */
const updateEndpoint = (0,_clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_5__.composeServiceApi)(_clients_handlers_authenticated_mjs__WEBPACK_IMPORTED_MODULE_6__.authenticatedHandler, updateEndpointSerializer, updateEndpointDeserializer, _base_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultConfig);


//# sourceMappingURL=updateEndpoint.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/endpoints/getDnsSuffix.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/clients/endpoints/getDnsSuffix.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDnsSuffix: () => (/* binding */ getDnsSuffix)
/* harmony export */ });
/* harmony import */ var _partitions_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./partitions.mjs */ "../core/dist/esm/clients/endpoints/partitions.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Get the AWS Services endpoint URL's DNS suffix for a given region. A typical AWS regional service endpoint URL will
 * follow this pattern: {endpointPrefix}.{region}.{dnsSuffix}. For example, the endpoint URL for Cognito Identity in
 * us-east-1 will be cognito-identity.us-east-1.amazonaws.com. Here the DnsSuffix is `amazonaws.com`.
 *
 * @param region
 * @returns The DNS suffix
 *
 * @internal
 */
const getDnsSuffix = (region) => {
    const { partitions } = _partitions_mjs__WEBPACK_IMPORTED_MODULE_0__.partitionsInfo;
    for (const { regions, outputs, regionRegex } of partitions) {
        const regex = new RegExp(regionRegex);
        if (regions.includes(region) || regex.test(region)) {
            return outputs.dnsSuffix;
        }
    }
    return _partitions_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultPartition.outputs.dnsSuffix;
};


//# sourceMappingURL=getDnsSuffix.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/endpoints/partitions.mjs":
/*!*********************************************************!*\
  !*** ../core/dist/esm/clients/endpoints/partitions.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defaultPartition: () => (/* binding */ defaultPartition),
/* harmony export */   partitionsInfo: () => (/* binding */ partitionsInfo)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Default partition for AWS services. This is used when the region is not provided or the region is not recognized.
 *
 * @internal
 */
const defaultPartition = {
    id: 'aws',
    outputs: {
        dnsSuffix: 'amazonaws.com',
    },
    regionRegex: '^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$',
    regions: ['aws-global'],
};
/**
 * This data is adapted from the partition file from AWS SDK shared utilities but remove some contents for bundle size
 * concern. Information removed are `dualStackDnsSuffix`, `supportDualStack`, `supportFIPS`, restricted partitions, and
 * list of regions for each partition other than global regions.
 *
 * * Ref: https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints
 * * Ref: https://github.com/aws/aws-sdk-js-v3/blob/0201baef03c2379f1f6f7150b9d401d4b230d488/packages/util-endpoints/src/lib/aws/partitions.json#L1
 *
 * @internal
 */
const partitionsInfo = {
    partitions: [
        defaultPartition,
        {
            id: 'aws-cn',
            outputs: {
                dnsSuffix: 'amazonaws.com.cn',
            },
            regionRegex: '^cn\\-\\w+\\-\\d+$',
            regions: ['aws-cn-global'],
        },
    ],
};


//# sourceMappingURL=partitions.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/handlers/authenticated.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/clients/handlers/authenticated.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   authenticatedHandler: () => (/* binding */ authenticatedHandler)
/* harmony export */ });
/* harmony import */ var _middleware_retry_middleware_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middleware/retry/middleware.mjs */ "../core/dist/esm/clients/middleware/retry/middleware.mjs");
/* harmony import */ var _middleware_signing_middleware_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../middleware/signing/middleware.mjs */ "../core/dist/esm/clients/middleware/signing/middleware.mjs");
/* harmony import */ var _middleware_userAgent_middleware_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/userAgent/middleware.mjs */ "../core/dist/esm/clients/middleware/userAgent/middleware.mjs");
/* harmony import */ var _internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../internal/composeTransferHandler.mjs */ "../core/dist/esm/clients/internal/composeTransferHandler.mjs");
/* harmony import */ var _fetch_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch.mjs */ "../core/dist/esm/clients/handlers/fetch.mjs");









// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const authenticatedHandler = (0,_internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_0__.composeTransferHandler)(_fetch_mjs__WEBPACK_IMPORTED_MODULE_1__.fetchTransferHandler, [
    _middleware_userAgent_middleware_mjs__WEBPACK_IMPORTED_MODULE_2__.userAgentMiddlewareFactory,
    _middleware_retry_middleware_mjs__WEBPACK_IMPORTED_MODULE_3__.retryMiddlewareFactory,
    _middleware_signing_middleware_mjs__WEBPACK_IMPORTED_MODULE_4__.signingMiddlewareFactory,
]);


//# sourceMappingURL=authenticated.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/handlers/fetch.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/clients/handlers/fetch.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchTransferHandler: () => (/* binding */ fetchTransferHandler)
/* harmony export */ });
/* harmony import */ var _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors/AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../types/errors.mjs */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _utils_memoization_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/memoization.mjs */ "../core/dist/esm/clients/utils/memoization.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());
// TODO[AllanZhengYP]: we need to provide isCanceledError utility
const fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {
    let resp;
    try {
        resp = await fetch(url, {
            method,
            headers,
            body: shouldSendBody(method) ? body : undefined,
            signal: abortSignal,
            cache,
            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',
        });
    }
    catch (e) {
        if (e instanceof TypeError) {
            throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError({
                name: _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyErrorCode.NetworkError,
                message: 'A network error has occurred.',
                underlyingError: e,
            });
        }
        throw e;
    }
    const responseHeaders = {};
    resp.headers?.forEach((value, key) => {
        responseHeaders[key.toLowerCase()] = value;
    });
    const httpResponse = {
        statusCode: resp.status,
        headers: responseHeaders,
        body: null,
    };
    // resp.body is a ReadableStream according to Fetch API spec, but React Native
    // does not implement it.
    const bodyWithMixin = Object.assign(resp.body ?? {}, {
        text: (0,_utils_memoization_mjs__WEBPACK_IMPORTED_MODULE_2__.withMemoization)(() => resp.text()),
        blob: (0,_utils_memoization_mjs__WEBPACK_IMPORTED_MODULE_2__.withMemoization)(() => resp.blob()),
        json: (0,_utils_memoization_mjs__WEBPACK_IMPORTED_MODULE_2__.withMemoization)(() => resp.json()),
    });
    return {
        ...httpResponse,
        body: bodyWithMixin,
    };
};


//# sourceMappingURL=fetch.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/handlers/unauthenticated.mjs":
/*!*************************************************************!*\
  !*** ../core/dist/esm/clients/handlers/unauthenticated.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unauthenticatedHandler: () => (/* binding */ unauthenticatedHandler)
/* harmony export */ });
/* harmony import */ var _middleware_retry_middleware_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middleware/retry/middleware.mjs */ "../core/dist/esm/clients/middleware/retry/middleware.mjs");
/* harmony import */ var _middleware_userAgent_middleware_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/userAgent/middleware.mjs */ "../core/dist/esm/clients/middleware/userAgent/middleware.mjs");
/* harmony import */ var _internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../internal/composeTransferHandler.mjs */ "../core/dist/esm/clients/internal/composeTransferHandler.mjs");
/* harmony import */ var _fetch_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch.mjs */ "../core/dist/esm/clients/handlers/fetch.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const unauthenticatedHandler = (0,_internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_0__.composeTransferHandler)(_fetch_mjs__WEBPACK_IMPORTED_MODULE_1__.fetchTransferHandler, [_middleware_userAgent_middleware_mjs__WEBPACK_IMPORTED_MODULE_2__.userAgentMiddlewareFactory, _middleware_retry_middleware_mjs__WEBPACK_IMPORTED_MODULE_3__.retryMiddlewareFactory]);


//# sourceMappingURL=unauthenticated.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/internal/composeServiceApi.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/clients/internal/composeServiceApi.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   composeServiceApi: () => (/* binding */ composeServiceApi)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Compose a service API handler that accepts input as defined shape and responds conforming to defined output shape.
 * A service API handler is composed with:
 * * A transfer handler
 * * A serializer function
 * * A deserializer function
 * * A default config object
 *
 * The returned service API handler, when called, will trigger the following workflow:
 * 1. When calling the service API handler function, the default config object is merged into the input config
 * object to assign the default values of some omitted configs, resulting to a resolved config object.
 * 2. The `endpointResolver` function from the default config object will be invoked with the resolved config object and
 * API input object resulting to an endpoint instance.
 * 3. The serializer function is invoked with API input object and the endpoint instance resulting to an HTTP request
 * instance.
 * 4. The HTTP request instance and the resolved config object is passed to the transfer handler function.
 * 5. The transfer handler function resolves to an HTTP response instance(can be either successful or failed status code).
 * 6. The deserializer function is invoked with the HTTP response instance resulting to the API output object, and
 * return to the caller.
 *
 *
 * @param transferHandler Async function for dispatching HTTP requests and returning HTTP response.
 * @param serializer  Async function for converting object in defined input shape into HTTP request targeting a given
 * 	endpoint.
 * @param deserializer Async function for converting HTTP response into output object in defined output shape, or error
 * 	shape.
 * @param defaultConfig  object containing default options to be consumed by transfer handler, serializer and
 *  deserializer.
 * @returns a async service API handler function that accepts a config object and input object in defined shape, returns
 * 	an output object in defined shape. It may also throw error instance in defined shape in deserializer. The config
 *  object type is composed with options type of transferHandler, endpointResolver function as well as endpointResolver
 *  function's input options type, region string. The config object property will be marked as optional if it's also
 * 	defined in defaultConfig.
 *
 * @internal
 */
const composeServiceApi = (transferHandler, serializer, deserializer, defaultConfig) => {
    return async (config, input) => {
        const resolvedConfig = {
            ...defaultConfig,
            ...config,
        };
        // We need to allow different endpoints based on both given config(other than region) and input.
        // However for most of non-S3 services, region is the only input for endpoint resolver.
        const endpoint = await resolvedConfig.endpointResolver(resolvedConfig, input);
        // Unlike AWS SDK clients, a serializer should NOT populate the `host` or `content-length` headers.
        // Both of these headers are prohibited per Spec(https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name).
        // They will be populated automatically by browser, or node-fetch polyfill.
        const request = await serializer(input, endpoint);
        const response = await transferHandler(request, {
            ...resolvedConfig,
        });
        return deserializer(response);
    };
};


//# sourceMappingURL=composeServiceApi.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/internal/composeTransferHandler.mjs":
/*!********************************************************************!*\
  !*** ../core/dist/esm/clients/internal/composeTransferHandler.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   composeTransferHandler: () => (/* binding */ composeTransferHandler)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Compose a transfer handler with a core transfer handler and a list of middleware.
 * @param coreHandler Core transfer handler
 * @param middleware	List of middleware
 * @returns A transfer handler whose option type is the union of the core
 * 	transfer handler's option type and the middleware's option type.
 * @internal
 */
const composeTransferHandler = (coreHandler, middleware) => (request, options) => {
    const context = {};
    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);
    for (let i = middleware.length - 1; i >= 0; i--) {
        const m = middleware[i];
        const resolvedMiddleware = m(options);
        composedHandler = resolvedMiddleware(composedHandler, context);
    }
    return composedHandler(request);
};


//# sourceMappingURL=composeTransferHandler.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs":
/*!*************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRetryDecider: () => (/* binding */ getRetryDecider)
/* harmony export */ });
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types/errors.mjs */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _isClockSkewError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isClockSkewError.mjs */ "../core/dist/esm/clients/middleware/retry/isClockSkewError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Get retry decider function
 * @param errorParser Function to load JavaScript error from HTTP response
 */
const getRetryDecider = (errorParser) => async (response, error) => {
    const parsedError = error ??
        (await errorParser(response)) ??
        undefined;
    const errorCode = parsedError?.code || parsedError?.name;
    const statusCode = response?.statusCode;
    const isRetryable = isConnectionError(error) ||
        isThrottlingError(statusCode, errorCode) ||
        (0,_isClockSkewError_mjs__WEBPACK_IMPORTED_MODULE_0__.isClockSkewError)(errorCode) ||
        isServerSideError(statusCode, errorCode);
    return {
        retryable: isRetryable,
    };
};
// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37
const THROTTLING_ERROR_CODES = [
    'BandwidthLimitExceeded',
    'EC2ThrottledException',
    'LimitExceededException',
    'PriorRequestNotComplete',
    'ProvisionedThroughputExceededException',
    'RequestLimitExceeded',
    'RequestThrottled',
    'RequestThrottledException',
    'SlowDown',
    'ThrottledException',
    'Throttling',
    'ThrottlingException',
    'TooManyRequestsException',
];
const TIMEOUT_ERROR_CODES = [
    'TimeoutError',
    'RequestTimeout',
    'RequestTimeoutException',
];
const isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||
    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));
const isConnectionError = (error) => [
    _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyErrorCode.NetworkError,
    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler
    'ERR_NETWORK',
].includes(error?.name);
const isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||
    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));


//# sourceMappingURL=defaultRetryDecider.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/retry/isClockSkewError.mjs":
/*!**********************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/retry/isClockSkewError.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isClockSkewError: () => (/* binding */ isClockSkewError)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8
const CLOCK_SKEW_ERROR_CODES = [
    'AuthFailure',
    'InvalidSignatureException',
    'RequestExpired',
    'RequestInTheFuture',
    'RequestTimeTooSkewed',
    'SignatureDoesNotMatch',
    'BadRequestException', // API Gateway
];
/**
 * Given an error code, returns true if it is related to a clock skew error.
 *
 * @param errorCode String representation of some error.
 * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.
 *
 * @internal
 */
const isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);


//# sourceMappingURL=isClockSkewError.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs":
/*!*********************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   jitteredBackoff: () => (/* binding */ jitteredBackoff)
/* harmony export */ });
/* harmony import */ var _utils_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/retry/jitteredBackoff.mjs */ "../core/dist/esm/utils/retry/jitteredBackoff.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.
const DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;
const jitteredBackoff = attempt => {
    const delayFunction = (0,_utils_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_0__.jitteredBackoff)(DEFAULT_MAX_DELAY_MS);
    const delay = delayFunction(attempt);
    // The delayFunction returns false when the delay is greater than the max delay(5 mins).
    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.
    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;
};


//# sourceMappingURL=jitteredBackoff.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/retry/middleware.mjs":
/*!****************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/retry/middleware.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   retryMiddlewareFactory: () => (/* binding */ retryMiddlewareFactory)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const DEFAULT_RETRY_ATTEMPTS = 3;
/**
 * Retry middleware
 */
const retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {
    if (maxAttempts < 1) {
        throw new Error('maxAttempts must be greater than 0');
    }
    return (next, context) => async function retryMiddleware(request) {
        let error;
        let attemptsCount = context.attemptsCount ?? 0;
        let response;
        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.
        const handleTerminalErrorOrResponse = () => {
            if (response) {
                addOrIncrementMetadataAttempts(response, attemptsCount);
                return response;
            }
            else {
                addOrIncrementMetadataAttempts(error, attemptsCount);
                throw error;
            }
        };
        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {
            try {
                response = await next(request);
                error = undefined;
            }
            catch (e) {
                error = e;
                response = undefined;
            }
            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.
            attemptsCount =
                (context.attemptsCount ?? 0) > attemptsCount
                    ? (context.attemptsCount ?? 0)
                    : attemptsCount + 1;
            context.attemptsCount = attemptsCount;
            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);
            if (retryable) {
                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.
                context.isCredentialsExpired = !!isCredentialsExpiredError;
                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {
                    // prevent sleep for last attempt or cancelled request;
                    const delay = computeDelay(attemptsCount);
                    await cancellableSleep(delay, abortSignal);
                }
                continue;
            }
            else {
                return handleTerminalErrorOrResponse();
            }
        }
        if (abortSignal?.aborted) {
            throw new Error('Request aborted.');
        }
        else {
            return handleTerminalErrorOrResponse();
        }
    };
};
const cancellableSleep = (timeoutMs, abortSignal) => {
    if (abortSignal?.aborted) {
        return Promise.resolve();
    }
    let timeoutId;
    let sleepPromiseResolveFn;
    const sleepPromise = new Promise(resolve => {
        sleepPromiseResolveFn = resolve;
        timeoutId = setTimeout(resolve, timeoutMs);
    });
    abortSignal?.addEventListener('abort', function cancelSleep(_) {
        clearTimeout(timeoutId);
        abortSignal?.removeEventListener('abort', cancelSleep);
        sleepPromiseResolveFn();
    });
    return sleepPromise;
};
const addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {
    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {
        return;
    }
    nextHandlerOutput.$metadata = {
        ...(nextHandlerOutput.$metadata ?? {}),
        attempts,
    };
};


//# sourceMappingURL=middleware.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/middleware.mjs":
/*!******************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/middleware.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signingMiddlewareFactory: () => (/* binding */ signingMiddlewareFactory)
/* harmony export */ });
/* harmony import */ var _signer_signatureV4_signRequest_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./signer/signatureV4/signRequest.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _utils_getSkewCorrectedDate_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/getSkewCorrectedDate.mjs */ "../core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs");
/* harmony import */ var _utils_getUpdatedSystemClockOffset_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/getUpdatedSystemClockOffset.mjs */ "../core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.
 * This middleware is expected to be placed after retry middleware.
 */
const signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {
    let currentSystemClockOffset;
    return (next, context) => async function signingMiddleware(request) {
        currentSystemClockOffset = currentSystemClockOffset ?? 0;
        const signRequestOptions = {
            credentials: typeof credentials === 'function'
                ? await credentials({
                    forceRefresh: !!context?.isCredentialsExpired,
                })
                : credentials,
            signingDate: (0,_utils_getSkewCorrectedDate_mjs__WEBPACK_IMPORTED_MODULE_2__.getSkewCorrectedDate)(currentSystemClockOffset),
            signingRegion: region,
            signingService: service,
            uriEscapePath,
        };
        const signedRequest = await (0,_signer_signatureV4_signRequest_mjs__WEBPACK_IMPORTED_MODULE_3__.signRequest)(request, signRequestOptions);
        const response = await next(signedRequest);
        // Update system clock offset if response contains date header, regardless of the status code.
        // non-2xx response will still be returned from next handler instead of thrown, because it's
        // only thrown by the retry middleware.
        const dateString = getDateHeader(response);
        if (dateString) {
            currentSystemClockOffset = (0,_utils_getUpdatedSystemClockOffset_mjs__WEBPACK_IMPORTED_MODULE_4__.getUpdatedSystemClockOffset)(Date.parse(dateString), currentSystemClockOffset);
        }
        return response;
    };
};
const getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];


//# sourceMappingURL=middleware.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs":
/*!************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ALGORITHM_QUERY_PARAM: () => (/* binding */ ALGORITHM_QUERY_PARAM),
/* harmony export */   AMZ_DATE_HEADER: () => (/* binding */ AMZ_DATE_HEADER),
/* harmony export */   AMZ_DATE_QUERY_PARAM: () => (/* binding */ AMZ_DATE_QUERY_PARAM),
/* harmony export */   AUTH_HEADER: () => (/* binding */ AUTH_HEADER),
/* harmony export */   CREDENTIAL_QUERY_PARAM: () => (/* binding */ CREDENTIAL_QUERY_PARAM),
/* harmony export */   EMPTY_HASH: () => (/* binding */ EMPTY_HASH),
/* harmony export */   EXPIRES_QUERY_PARAM: () => (/* binding */ EXPIRES_QUERY_PARAM),
/* harmony export */   HOST_HEADER: () => (/* binding */ HOST_HEADER),
/* harmony export */   KEY_TYPE_IDENTIFIER: () => (/* binding */ KEY_TYPE_IDENTIFIER),
/* harmony export */   REGION_SET_PARAM: () => (/* binding */ REGION_SET_PARAM),
/* harmony export */   SHA256_ALGORITHM_IDENTIFIER: () => (/* binding */ SHA256_ALGORITHM_IDENTIFIER),
/* harmony export */   SIGNATURE_IDENTIFIER: () => (/* binding */ SIGNATURE_IDENTIFIER),
/* harmony export */   SIGNATURE_QUERY_PARAM: () => (/* binding */ SIGNATURE_QUERY_PARAM),
/* harmony export */   SIGNED_HEADERS_QUERY_PARAM: () => (/* binding */ SIGNED_HEADERS_QUERY_PARAM),
/* harmony export */   TOKEN_HEADER: () => (/* binding */ TOKEN_HEADER),
/* harmony export */   TOKEN_QUERY_PARAM: () => (/* binding */ TOKEN_QUERY_PARAM),
/* harmony export */   UNSIGNED_PAYLOAD: () => (/* binding */ UNSIGNED_PAYLOAD)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// query params
const ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';
const AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';
const CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';
const EXPIRES_QUERY_PARAM = 'X-Amz-Expires';
const REGION_SET_PARAM = 'X-Amz-Region-Set';
const SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';
const SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';
const TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';
// headers
const AUTH_HEADER = 'authorization';
const HOST_HEADER = 'host';
const AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();
const TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();
// identifiers
const KEY_TYPE_IDENTIFIER = 'aws4_request';
const SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';
const SIGNATURE_IDENTIFIER = 'AWS4';
// preset values
const EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';
const UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/presignUrl.mjs":
/*!*************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/presignUrl.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   presignUrl: () => (/* binding */ presignUrl)
/* harmony export */ });
/* harmony import */ var _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../utils/amplifyUrl/index.mjs */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");
/* harmony import */ var _utils_getSigningValues_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/getSigningValues.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs");
/* harmony import */ var _utils_getSignature_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/getSignature.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Given a `Presignable` object, returns a Signature Version 4 presigned `URL` object.
 *
 * @param presignable `Presignable` object containing at least a url to be presigned with authentication query params.
 * @param presignUrlOptions `PresignUrlOptions` object containing values used to construct the signature.
 * @returns A `URL` with authentication query params which can grant temporary access to AWS resources.
 */
const presignUrl = ({ body, method = 'GET', url }, { expiration, ...options }) => {
    const signingValues = (0,_utils_getSigningValues_mjs__WEBPACK_IMPORTED_MODULE_0__.getSigningValues)(options);
    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;
    // create the request to sign
    const presignedUrl = new _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyUrl(url);
    Object.entries({
        [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.ALGORITHM_QUERY_PARAM]: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.SHA256_ALGORITHM_IDENTIFIER,
        [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.CREDENTIAL_QUERY_PARAM]: `${accessKeyId}/${credentialScope}`,
        [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.AMZ_DATE_QUERY_PARAM]: longDate,
        [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.SIGNED_HEADERS_QUERY_PARAM]: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.HOST_HEADER,
        ...(expiration && { [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.EXPIRES_QUERY_PARAM]: expiration.toString() }),
        ...(sessionToken && { [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.TOKEN_QUERY_PARAM]: sessionToken }),
    }).forEach(([key, value]) => {
        presignedUrl.searchParams.append(key, value);
    });
    const requestToSign = {
        body,
        headers: { [_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.HOST_HEADER]: url.host },
        method,
        url: presignedUrl,
    };
    // calculate and add the signature to the url
    const signature = (0,_utils_getSignature_mjs__WEBPACK_IMPORTED_MODULE_3__.getSignature)(requestToSign, signingValues);
    presignedUrl.searchParams.append(_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.SIGNATURE_QUERY_PARAM, signature);
    return presignedUrl;
};


//# sourceMappingURL=presignUrl.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs":
/*!**************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   signRequest: () => (/* binding */ signRequest)
/* harmony export */ });
/* harmony import */ var _utils_getSignedHeaders_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/getSignedHeaders.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs");
/* harmony import */ var _utils_getSigningValues_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/getSigningValues.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");
/* harmony import */ var _utils_getSignature_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/getSignature.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.
 *
 * @param request `HttpRequest` to be signed.
 * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.
 * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.
 */
const signRequest = (request, options) => {
    const signingValues = (0,_utils_getSigningValues_mjs__WEBPACK_IMPORTED_MODULE_0__.getSigningValues)(options);
    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;
    // create the request to sign
    const headers = { ...request.headers };
    headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.HOST_HEADER] = request.url.host;
    headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.AMZ_DATE_HEADER] = longDate;
    if (sessionToken) {
        headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.TOKEN_HEADER] = sessionToken;
    }
    const requestToSign = { ...request, headers };
    // calculate and add the signature to the request
    const signature = (0,_utils_getSignature_mjs__WEBPACK_IMPORTED_MODULE_2__.getSignature)(requestToSign, signingValues);
    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;
    const signedHeadersEntry = `SignedHeaders=${(0,_utils_getSignedHeaders_mjs__WEBPACK_IMPORTED_MODULE_3__.getSignedHeaders)(headers)}`;
    const signatureEntry = `Signature=${signature}`;
    headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.AUTH_HEADER] =
        `${_constants_mjs__WEBPACK_IMPORTED_MODULE_1__.SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;
    return requestToSign;
};


//# sourceMappingURL=signRequest.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs":
/*!************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHashedData: () => (/* binding */ getHashedData),
/* harmony export */   getHashedDataAsHex: () => (/* binding */ getHashedDataAsHex)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// TODO: V6 update to different crypto dependency?
/**
 * Returns the hashed data a `Uint8Array`.
 *
 * @param key `SourceData` to be used as hashing key.
 * @param data Hashable `SourceData`.
 * @returns `Uint8Array` created from the data as input to a hash function.
 */
const getHashedData = (key, data) => {
    const sha256 = new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__.Sha256(key ?? undefined);
    sha256.update(data);
    // TODO: V6 flip to async digest
    const hashedData = sha256.digestSync();
    return hashedData;
};
/**
 * Returns the hashed data as a hex string.
 *
 * @param key `SourceData` to be used as hashing key.
 * @param data Hashable `SourceData`.
 * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.
 *
 * @internal
 */
const getHashedDataAsHex = (key, data) => {
    const hashedData = getHashedData(key, data);
    return (0,_smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__.toHex)(hashedData);
};


//# sourceMappingURL=dataHashHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs":
/*!****************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalHeaders: () => (/* binding */ getCanonicalHeaders)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns canonical headers.
 *
 * @param headers Headers from the request.
 * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must
 * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,
 * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values
 * for a multi-value header using commas.
 *
 * @internal
 */
const getCanonicalHeaders = (headers) => Object.entries(headers)
    .map(([key, value]) => ({
    key: key.toLowerCase(),
    value: value?.trim().replace(/\s+/g, ' ') ?? '',
}))
    .sort((a, b) => (a.key < b.key ? -1 : 1))
    .map(entry => `${entry.key}:${entry.value}\n`)
    .join('');


//# sourceMappingURL=getCanonicalHeaders.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs":
/*!********************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalQueryString: () => (/* binding */ getCanonicalQueryString)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a canonical query string.
 *
 * @param searchParams `searchParams` from the request url.
 * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,
 * including the space character. Encode names and values separately. If there are empty parameters, append the equals
 * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there
 * is no query string, use an empty string ("").
 *
 * @internal
 */
const getCanonicalQueryString = (searchParams) => Array.from(searchParams)
    .sort(([keyA, valA], [keyB, valB]) => {
    if (keyA === keyB) {
        return valA < valB ? -1 : 1;
    }
    return keyA < keyB ? -1 : 1;
})
    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)
    .join('&');
const escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);
const hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;


//# sourceMappingURL=getCanonicalQueryString.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs":
/*!****************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalRequest: () => (/* binding */ getCanonicalRequest)
/* harmony export */ });
/* harmony import */ var _getCanonicalHeaders_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getCanonicalHeaders.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs");
/* harmony import */ var _getCanonicalQueryString_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getCanonicalQueryString.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs");
/* harmony import */ var _getCanonicalUri_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getCanonicalUri.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs");
/* harmony import */ var _getHashedPayload_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getHashedPayload.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs");
/* harmony import */ var _getSignedHeaders_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getSignedHeaders.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a canonical request.
 *
 * @param request `HttpRequest` from which to create the canonical request from.
 * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the
 *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.
 * @returns String created by by concatenating the following strings, separated by newline characters:
 * - HTTPMethod
 * - CanonicalUri
 * - CanonicalQueryString
 * - CanonicalHeaders
 * - SignedHeaders
 * - HashedPayload
 *
 * @internal
 */
const getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [
    method,
    (0,_getCanonicalUri_mjs__WEBPACK_IMPORTED_MODULE_0__.getCanonicalUri)(url.pathname, uriEscapePath),
    (0,_getCanonicalQueryString_mjs__WEBPACK_IMPORTED_MODULE_1__.getCanonicalQueryString)(url.searchParams),
    (0,_getCanonicalHeaders_mjs__WEBPACK_IMPORTED_MODULE_2__.getCanonicalHeaders)(headers),
    (0,_getSignedHeaders_mjs__WEBPACK_IMPORTED_MODULE_3__.getSignedHeaders)(headers),
    (0,_getHashedPayload_mjs__WEBPACK_IMPORTED_MODULE_4__.getHashedPayload)(body),
].join('\n');


//# sourceMappingURL=getCanonicalRequest.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs":
/*!************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCanonicalUri: () => (/* binding */ getCanonicalUri)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a canonical uri.
 *
 * @param pathname `pathname` from request url.
 * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the
 *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.
 * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark
 * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).
 *
 * @internal
 */
const getCanonicalUri = (pathname, uriEscapePath = true) => pathname
    ? uriEscapePath
        ? encodeURIComponent(pathname).replace(/%2F/g, '/')
        : pathname
    : '/';


//# sourceMappingURL=getCanonicalUri.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs":
/*!***************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCredentialScope: () => (/* binding */ getCredentialScope)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns the credential scope which restricts the resulting signature to the specified region and service.
 *
 * @param date Current date in the format 'YYYYMMDD'.
 * @param region AWS region in which the service resides.
 * @param service Service to which the signed request is being sent.
 *
 * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.
 *
 * @internal
 */
const getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.KEY_TYPE_IDENTIFIER}`;


//# sourceMappingURL=getCredentialScope.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs":
/*!**************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFormattedDates: () => (/* binding */ getFormattedDates)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns expected date strings to be used in signing.
 *
 * @param date JavaScript `Date` object.
 * @returns `FormattedDates` object containing the following:
 * - longDate: A date string in 'YYYYMMDDThhmmssZ' format
 * - shortDate: A date string in 'YYYYMMDD' format
 *
 * @internal
 */
const getFormattedDates = (date) => {
    const longDate = date.toISOString().replace(/[:-]|\.\d{3}/g, '');
    return {
        longDate,
        shortDate: longDate.slice(0, 8),
    };
};


//# sourceMappingURL=getFormattedDates.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs":
/*!*************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getHashedPayload: () => (/* binding */ getHashedPayload)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");
/* harmony import */ var _dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dataHashHelpers.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns the hashed payload.
 *
 * @param body `body` (payload) from the request.
 * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string
 * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.
 *
 * @internal
 */
const getHashedPayload = (body) => {
    // return precalculated empty hash if body is undefined or null
    if (body == null) {
        return _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.EMPTY_HASH;
    }
    if (isSourceData(body)) {
        const hashedData = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedDataAsHex)(null, body);
        return hashedData;
    }
    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.
    return _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.UNSIGNED_PAYLOAD;
};
const isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);
const isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||
    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';


//# sourceMappingURL=getHashedPayload.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs":
/*!*********************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSignature: () => (/* binding */ getSignature)
/* harmony export */ });
/* harmony import */ var _dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dataHashHelpers.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs");
/* harmony import */ var _getCanonicalRequest_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getCanonicalRequest.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs");
/* harmony import */ var _getSigningKey_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getSigningKey.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs");
/* harmony import */ var _getStringToSign_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getStringToSign.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Calculates and returns an AWS API Signature.
 * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html
 *
 * @param request `HttpRequest` to be signed.
 * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.
 * @returns AWS API Signature to sign a request or url with.
 *
 * @internal
 */
const getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {
    // step 1: create a canonical request
    const canonicalRequest = (0,_getCanonicalRequest_mjs__WEBPACK_IMPORTED_MODULE_0__.getCanonicalRequest)(request, uriEscapePath);
    // step 2: create a hash of the canonical request
    const hashedRequest = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedDataAsHex)(null, canonicalRequest);
    // step 3: create a string to sign
    const stringToSign = (0,_getStringToSign_mjs__WEBPACK_IMPORTED_MODULE_2__.getStringToSign)(longDate, credentialScope, hashedRequest);
    // step 4: calculate the signature
    const signature = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedDataAsHex)((0,_getSigningKey_mjs__WEBPACK_IMPORTED_MODULE_3__.getSigningKey)(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);
    return signature;
};


//# sourceMappingURL=getSignature.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs":
/*!*************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSignedHeaders: () => (/* binding */ getSignedHeaders)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns signed headers.
 *
 * @param headers `headers` from the request.
 * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers
 * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.
 *
 * @internal
 */
const getSignedHeaders = (headers) => Object.keys(headers)
    .map(key => key.toLowerCase())
    .sort()
    .join(';');


//# sourceMappingURL=getSignedHeaders.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs":
/*!**********************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSigningKey: () => (/* binding */ getSigningKey)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");
/* harmony import */ var _dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dataHashHelpers.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a signing key to be used for signing requests.
 *
 * @param secretAccessKey AWS secret access key from credentials.
 * @param date Current date in the format 'YYYYMMDD'.
 * @param region AWS region in which the service resides.
 * @param service Service to which the signed request is being sent.
 *
 * @returns `Uint8Array` calculated from its composite parts.
 *
 * @internal
 */
const getSigningKey = (secretAccessKey, date, region, service) => {
    const key = `${_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.SIGNATURE_IDENTIFIER}${secretAccessKey}`;
    const dateKey = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedData)(key, date);
    const regionKey = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedData)(dateKey, region);
    const serviceKey = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedData)(regionKey, service);
    const signingKey = (0,_dataHashHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.getHashedData)(serviceKey, _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.KEY_TYPE_IDENTIFIER);
    return signingKey;
};


//# sourceMappingURL=getSigningKey.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs":
/*!*************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSigningValues: () => (/* binding */ getSigningValues)
/* harmony export */ });
/* harmony import */ var _getCredentialScope_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getCredentialScope.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs");
/* harmony import */ var _getFormattedDates_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getFormattedDates.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Extracts common values used for signing both requests and urls.
 *
 * @param options `SignRequestOptions` object containing values used to construct the signature.
 * @returns Common `SigningValues` used for signing.
 *
 * @internal
 */
const getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {
    // get properties from credentials
    const { accessKeyId, secretAccessKey, sessionToken } = credentials;
    // get formatted dates for signing
    const { longDate, shortDate } = (0,_getFormattedDates_mjs__WEBPACK_IMPORTED_MODULE_0__.getFormattedDates)(signingDate);
    // copy header and set signing properties
    const credentialScope = (0,_getCredentialScope_mjs__WEBPACK_IMPORTED_MODULE_1__.getCredentialScope)(shortDate, signingRegion, signingService);
    return {
        accessKeyId,
        credentialScope,
        longDate,
        secretAccessKey,
        sessionToken,
        shortDate,
        signingRegion,
        signingService,
        uriEscapePath,
    };
};


//# sourceMappingURL=getSigningValues.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs":
/*!************************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getStringToSign: () => (/* binding */ getStringToSign)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.mjs */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a string to be signed.
 *
 * @param date Current date in the format 'YYYYMMDDThhmmssZ'.
 * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.
 * @param hashedRequest Hashed canonical request.
 *
 * @returns A string created by by concatenating the following strings, separated by newline characters:
 * - Algorithm
 * - RequestDateTime
 * - CredentialScope
 * - HashedCanonicalRequest
 *
 * @internal
 */
const getStringToSign = (date, credentialScope, hashedRequest) => [_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\n');


//# sourceMappingURL=getStringToSign.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs":
/*!****************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   extendedEncodeURIComponent: () => (/* binding */ extendedEncodeURIComponent)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Wraps encodeURIComponent to encode additional characters to fully adhere to RFC 3986.
 * @see https://github.com/aws/aws-sdk-js-v3/blob/86b432c464150069678b25ff88d57c2ca26e75a2/packages/smithy-client/src/extended-encode-uri-component.ts#L7
 *
 * @param uri URI string to encode
 * @returns RFC 3986 encoded string
 *
 * @internal
 */
const extendedEncodeURIComponent = (uri) => {
    // Match characters normally not encoded by `encodeURIComponent`
    const extendedCharacters = /[!'()*]/g;
    return encodeURIComponent(uri).replace(extendedCharacters, hexEncode);
};
const hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;


//# sourceMappingURL=extendedEncodeURIComponent.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs":
/*!**********************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSkewCorrectedDate: () => (/* binding */ getSkewCorrectedDate)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns a `Date` that is corrected for clock skew.
 *
 * @param systemClockOffset The offset of the system clock in milliseconds.
 *
 * @returns `Date` representing the current time adjusted by the system clock offset.
 *
 * @internal
 */
const getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);


//# sourceMappingURL=getSkewCorrectedDate.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs":
/*!*****************************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUpdatedSystemClockOffset: () => (/* binding */ getUpdatedSystemClockOffset)
/* harmony export */ });
/* harmony import */ var _isClockSkewed_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isClockSkewed.mjs */ "../core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns the difference between clock time and the current system time if clock is skewed.
 *
 * @param clockTimeInMilliseconds Clock time in milliseconds.
 * @param currentSystemClockOffset Current system clock offset in milliseconds.
 *
 * @internal
 */
const getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {
    if ((0,_isClockSkewed_mjs__WEBPACK_IMPORTED_MODULE_0__.isClockSkewed)(clockTimeInMilliseconds, currentSystemClockOffset)) {
        return clockTimeInMilliseconds - Date.now();
    }
    return currentSystemClockOffset;
};


//# sourceMappingURL=getUpdatedSystemClockOffset.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs":
/*!***************************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isClockSkewed: () => (/* binding */ isClockSkewed)
/* harmony export */ });
/* harmony import */ var _getSkewCorrectedDate_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getSkewCorrectedDate.mjs */ "../core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10
const SKEW_WINDOW = 5 * 60 * 1000;
/**
 * Checks if the provided date is within the skew window of 5 minutes.
 *
 * @param clockTimeInMilliseconds Time to check for skew in milliseconds.
 * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.
 *
 * @returns True if skewed. False otherwise.
 *
 * @internal
 */
const isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs((0,_getSkewCorrectedDate_mjs__WEBPACK_IMPORTED_MODULE_0__.getSkewCorrectedDate)(clockOffsetInMilliseconds).getTime() -
    clockTimeInMilliseconds) >= SKEW_WINDOW;


//# sourceMappingURL=isClockSkewed.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/middleware/userAgent/middleware.mjs":
/*!********************************************************************!*\
  !*** ../core/dist/esm/clients/middleware/userAgent/middleware.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   userAgentMiddlewareFactory: () => (/* binding */ userAgentMiddlewareFactory)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),
 * if the header is not set already.
 *
 * TODO: incorporate new user agent design
 */
const userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {
    return async function userAgentMiddleware(request) {
        if (userAgentValue.trim().length === 0) {
            const result = await next(request);
            return result;
        }
        else {
            const headerName = userAgentHeader.toLowerCase();
            request.headers[headerName] = request.headers[headerName]
                ? `${request.headers[headerName]} ${userAgentValue}`
                : userAgentValue;
            const response = await next(request);
            return response;
        }
    };
};


//# sourceMappingURL=middleware.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/serde/json.mjs":
/*!***********************************************!*\
  !*** ../core/dist/esm/clients/serde/json.mjs ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseJsonBody: () => (/* binding */ parseJsonBody),
/* harmony export */   parseJsonError: () => (/* binding */ parseJsonError)
/* harmony export */ });
/* harmony import */ var _responseInfo_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./responseInfo.mjs */ "../core/dist/esm/clients/serde/responseInfo.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)
 */
/**
 * Error parser for AWS JSON protocol.
 */
const parseJsonError = async (response) => {
    if (!response || response.statusCode < 300) {
        return;
    }
    const body = await parseJsonBody(response);
    const sanitizeErrorCode = (rawValue) => {
        const [cleanValue] = rawValue.toString().split(/[,:]+/);
        if (cleanValue.includes('#')) {
            return cleanValue.split('#')[1];
        }
        return cleanValue;
    };
    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??
        body.code ??
        body.__type ??
        'UnknownError');
    const message = body.message ?? body.Message ?? 'Unknown error';
    const error = new Error(message);
    return Object.assign(error, {
        name: code,
        $metadata: (0,_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_0__.parseMetadata)(response),
    });
};
/**
 * Parse JSON response body to JavaScript object.
 */
const parseJsonBody = async (response) => {
    if (!response.body) {
        throw new Error('Missing response payload');
    }
    const output = await response.body.json();
    return Object.assign(output, {
        $metadata: (0,_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_0__.parseMetadata)(response),
    });
};


//# sourceMappingURL=json.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/serde/responseInfo.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/clients/serde/responseInfo.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseMetadata: () => (/* binding */ parseMetadata)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const parseMetadata = (response) => {
    const { headers, statusCode } = response;
    return {
        ...(isMetadataBearer(response) ? response.$metadata : {}),
        httpStatusCode: statusCode,
        requestId: headers['x-amzn-requestid'] ??
            headers['x-amzn-request-id'] ??
            headers['x-amz-request-id'],
        extendedRequestId: headers['x-amz-id-2'],
        cfId: headers['x-amz-cf-id'],
    };
};
const isMetadataBearer = (response) => typeof response?.$metadata === 'object';


//# sourceMappingURL=responseInfo.mjs.map


/***/ }),

/***/ "../core/dist/esm/clients/utils/memoization.mjs":
/*!******************************************************!*\
  !*** ../core/dist/esm/clients/utils/memoization.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   withMemoization: () => (/* binding */ withMemoization)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Cache the payload of a response body. It allows multiple calls to the body,
 * for example, when reading the body in both retry decider and error deserializer.
 * Caching body is allowed here because we call the body accessor(blob(), json(),
 * etc.) when body is small or streaming implementation is not available(RN).
 *
 * @internal
 */
const withMemoization = (payloadAccessor) => {
    let cached;
    return () => {
        if (!cached) {
            // Explicitly not awaiting. Intermediate await would add overhead and
            // introduce a possible race in the event that this wrapper is called
            // again before the first `payloadAccessor` call resolves.
            cached = payloadAccessor();
        }
        return cached;
    };
};


//# sourceMappingURL=memoization.mjs.map


/***/ }),

/***/ "../core/dist/esm/constants.mjs":
/*!**************************************!*\
  !*** ../core/dist/esm/constants.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AWS_CLOUDWATCH_CATEGORY: () => (/* binding */ AWS_CLOUDWATCH_CATEGORY),
/* harmony export */   NO_HUBCALLBACK_PROVIDED_EXCEPTION: () => (/* binding */ NO_HUBCALLBACK_PROVIDED_EXCEPTION),
/* harmony export */   USER_AGENT_HEADER: () => (/* binding */ USER_AGENT_HEADER)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Logging constants
const AWS_CLOUDWATCH_CATEGORY = 'Logging';
const USER_AGENT_HEADER = 'x-amz-user-agent';
// Error exception code constants
const NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/errors/AmplifyError.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/errors/AmplifyError.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AmplifyError: () => (/* binding */ AmplifyError)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class AmplifyError extends Error {
    /**
     *  Constructs an AmplifyError.
     *
     * @param message text that describes the main problem.
     * @param underlyingError the underlying cause of the error.
     * @param recoverySuggestion suggestion to recover from the error.
     *
     */
    constructor({ message, name, recoverySuggestion, underlyingError, }) {
        super(message);
        this.name = name;
        this.underlyingError = underlyingError;
        this.recoverySuggestion = recoverySuggestion;
        // Hack for making the custom error class work when transpiled to es5
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = AmplifyError;
        Object.setPrototypeOf(this, AmplifyError.prototype);
    }
}


//# sourceMappingURL=AmplifyError.mjs.map


/***/ }),

/***/ "../core/dist/esm/errors/PlatformNotSupportedError.mjs":
/*!*************************************************************!*\
  !*** ../core/dist/esm/errors/PlatformNotSupportedError.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PlatformNotSupportedError: () => (/* binding */ PlatformNotSupportedError)
/* harmony export */ });
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/errors.mjs */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class PlatformNotSupportedError extends _AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError {
    constructor() {
        super({
            name: _types_errors_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyErrorCode.PlatformNotSupported,
            message: 'Function not supported on current platform',
        });
    }
}


//# sourceMappingURL=PlatformNotSupportedError.mjs.map


/***/ }),

/***/ "../core/dist/esm/errors/createAssertionFunction.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/errors/createAssertionFunction.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createAssertionFunction: () => (/* binding */ createAssertionFunction)
/* harmony export */ });
/* harmony import */ var _AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createAssertionFunction = (errorMap, AssertionError = _AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError) => (assertion, name, additionalContext) => {
    const { message, recoverySuggestion } = errorMap[name];
    if (!assertion) {
        throw new AssertionError({
            name,
            message: additionalContext
                ? `${message} ${additionalContext}`
                : message,
            recoverySuggestion,
        });
    }
};


//# sourceMappingURL=createAssertionFunction.mjs.map


/***/ }),

/***/ "../core/dist/esm/errors/errorHelpers.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/errors/errorHelpers.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/errors.mjs */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const amplifyErrorMap = {
    [_types_errors_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyErrorCode.NoEndpointId]: {
        message: 'Endpoint ID was not found and was unable to be created.',
    },
    [_types_errors_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyErrorCode.PlatformNotSupported]: {
        message: 'Function not supported on current platform.',
    },
    [_types_errors_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyErrorCode.Unknown]: {
        message: 'An unknown error occurred.',
    },
    [_types_errors_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyErrorCode.NetworkError]: {
        message: 'A network error has occurred.',
    },
};
const assert = (0,_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_1__.createAssertionFunction)(amplifyErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/middleware/createDisableCacheMiddleware.mjs":
/*!*****************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/middleware/createDisableCacheMiddleware.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDisableCacheMiddleware: () => (/* binding */ createDisableCacheMiddleware)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * A Cognito Identity-specific middleware that disables caching for all requests.
 */
const createDisableCacheMiddleware = () => next => async function disableCacheMiddleware(request) {
    request.headers['cache-control'] = 'no-store';
    return next(request);
};


//# sourceMappingURL=createDisableCacheMiddleware.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/cognitoIdentityPoolEndpointResolver.mjs":
/*!********************************************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/cognitoIdentityPoolEndpointResolver.mjs ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoIdentityPoolEndpointResolver: () => (/* binding */ cognitoIdentityPoolEndpointResolver)
/* harmony export */ });
/* harmony import */ var _clients_endpoints_getDnsSuffix_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../clients/endpoints/getDnsSuffix.mjs */ "../core/dist/esm/clients/endpoints/getDnsSuffix.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/amplifyUrl/index.mjs */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs");




















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const cognitoIdentityPoolEndpointResolver = ({ region, }) => ({
    url: new _utils_amplifyUrl_index_mjs__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(`https://${_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.COGNITO_IDENTITY_SERVICE_NAME}.${region}.${(0,_clients_endpoints_getDnsSuffix_mjs__WEBPACK_IMPORTED_MODULE_4__.getDnsSuffix)(region)}`),
});


//# sourceMappingURL=cognitoIdentityPoolEndpointResolver.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs":
/*!******************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   COGNITO_IDENTITY_SERVICE_NAME: () => (/* binding */ COGNITO_IDENTITY_SERVICE_NAME),
/* harmony export */   DEFAULT_SERVICE_CLIENT_API_CONFIG: () => (/* binding */ DEFAULT_SERVICE_CLIENT_API_CONFIG)
/* harmony export */ });
/* harmony import */ var _clients_middleware_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../clients/middleware/retry/jitteredBackoff.mjs */ "../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs");
/* harmony import */ var _clients_middleware_retry_defaultRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../clients/middleware/retry/defaultRetryDecider.mjs */ "../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * The service name used to sign requests if the API requires authentication.
 */
const COGNITO_IDENTITY_SERVICE_NAME = 'cognito-identity';
const DEFAULT_SERVICE_CLIENT_API_CONFIG = {
    service: COGNITO_IDENTITY_SERVICE_NAME,
    retryDecider: (0,_clients_middleware_retry_defaultRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_2__.getRetryDecider)(_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_3__.parseJsonError),
    computeDelay: _clients_middleware_retry_jitteredBackoff_mjs__WEBPACK_IMPORTED_MODULE_4__.jitteredBackoff,
    cache: 'no-store',
};


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetCredentialsForIdentityClient.mjs":
/*!**********************************************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetCredentialsForIdentityClient.mjs ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetCredentialsForIdentityClient: () => (/* binding */ createGetCredentialsForIdentityClient)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../clients/serde/responseInfo.mjs */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../clients/internal/composeServiceApi.mjs */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _Platform_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../Platform/index.mjs */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs");
/* harmony import */ var _handler_cognitoIdentityTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handler/cognitoIdentityTransferHandler.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs");
/* harmony import */ var _serde_createClientSerializer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./serde/createClientSerializer.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createGetCredentialsForIdentityClient = (config) => (0,_clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_2__.composeServiceApi)(_handler_cognitoIdentityTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_3__.cognitoIdentityTransferHandler, (0,_serde_createClientSerializer_mjs__WEBPACK_IMPORTED_MODULE_4__.createClientSerializer)('GetCredentialsForIdentity'), getCredentialsForIdentityDeserializer, {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
    userAgentValue: (0,_Platform_index_mjs__WEBPACK_IMPORTED_MODULE_6__.getAmplifyUserAgent)(),
});
const getCredentialsForIdentityDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__.parseJsonError)(response);
        throw error;
    }
    else {
        const body = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__.parseJsonBody)(response);
        return {
            IdentityId: body.IdentityId,
            Credentials: deserializeCredentials(body.Credentials),
            $metadata: (0,_clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_8__.parseMetadata)(response),
        };
    }
};
const deserializeCredentials = ({ Expiration, ...rest } = {}) => ({
    ...rest,
    Expiration: Expiration && new Date(Expiration * 1000),
});


//# sourceMappingURL=createGetCredentialsForIdentityClient.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetIdClient.mjs":
/*!**************************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetIdClient.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createGetIdClient: () => (/* binding */ createGetIdClient)
/* harmony export */ });
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../clients/serde/responseInfo.mjs */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../clients/serde/json.mjs */ "../core/dist/esm/clients/serde/json.mjs");
/* harmony import */ var _clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../clients/internal/composeServiceApi.mjs */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _Platform_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../Platform/index.mjs */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs");
/* harmony import */ var _handler_cognitoIdentityTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./handler/cognitoIdentityTransferHandler.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs");
/* harmony import */ var _serde_createClientSerializer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./serde/createClientSerializer.mjs */ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createGetIdClient = (config) => (0,_clients_internal_composeServiceApi_mjs__WEBPACK_IMPORTED_MODULE_2__.composeServiceApi)(_handler_cognitoIdentityTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_3__.cognitoIdentityTransferHandler, (0,_serde_createClientSerializer_mjs__WEBPACK_IMPORTED_MODULE_4__.createClientSerializer)('GetId'), getIdDeserializer, {
    ..._constants_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_SERVICE_CLIENT_API_CONFIG,
    ...config,
    userAgentValue: (0,_Platform_index_mjs__WEBPACK_IMPORTED_MODULE_6__.getAmplifyUserAgent)(),
});
const getIdDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__.parseJsonError)(response);
        throw error;
    }
    else {
        const body = await (0,_clients_serde_json_mjs__WEBPACK_IMPORTED_MODULE_7__.parseJsonBody)(response);
        return {
            IdentityId: body.IdentityId,
            $metadata: (0,_clients_serde_responseInfo_mjs__WEBPACK_IMPORTED_MODULE_8__.parseMetadata)(response),
        };
    }
};


//# sourceMappingURL=createGetIdClient.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs":
/*!***********************************************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cognitoIdentityTransferHandler: () => (/* binding */ cognitoIdentityTransferHandler)
/* harmony export */ });
/* harmony import */ var _clients_handlers_unauthenticated_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../clients/handlers/unauthenticated.mjs */ "../core/dist/esm/clients/handlers/unauthenticated.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _clients_internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../clients/internal/composeTransferHandler.mjs */ "../core/dist/esm/clients/internal/composeTransferHandler.mjs");
/* harmony import */ var _middleware_createDisableCacheMiddleware_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../middleware/createDisableCacheMiddleware.mjs */ "../core/dist/esm/foundation/factories/middleware/createDisableCacheMiddleware.mjs");










// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * A Cognito Identity-specific transfer handler that does NOT sign requests, and
 * disables caching.
 *
 * @internal
 */
const cognitoIdentityTransferHandler = (0,_clients_internal_composeTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_2__.composeTransferHandler)(_clients_handlers_unauthenticated_mjs__WEBPACK_IMPORTED_MODULE_3__.unauthenticatedHandler, [_middleware_createDisableCacheMiddleware_mjs__WEBPACK_IMPORTED_MODULE_4__.createDisableCacheMiddleware]);


//# sourceMappingURL=cognitoIdentityTransferHandler.mjs.map


/***/ }),

/***/ "../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs":
/*!*************************************************************************************************************!*\
  !*** ../core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   buildHttpRpcRequest: () => (/* binding */ buildHttpRpcRequest),
/* harmony export */   createClientSerializer: () => (/* binding */ createClientSerializer)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createClientSerializer = (operation) => (input, endpoint) => {
    const headers = getSharedHeaders(operation);
    const body = JSON.stringify(input);
    return buildHttpRpcRequest(endpoint, headers, body);
};
const getSharedHeaders = (operation) => ({
    'content-type': 'application/x-amz-json-1.1',
    'x-amz-target': `AWSCognitoIdentityService.${operation}`,
});
const buildHttpRpcRequest = ({ url }, headers, body) => ({
    headers,
    url,
    body,
    method: 'POST',
});


//# sourceMappingURL=createClientSerializer.mjs.map


/***/ }),

/***/ "../core/dist/esm/parseAWSExports.mjs":
/*!********************************************!*\
  !*** ../core/dist/esm/parseAWSExports.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseAWSExports: () => (/* binding */ parseAWSExports)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors/AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('parseAWSExports');
const authTypeMapping = {
    API_KEY: 'apiKey',
    AWS_IAM: 'iam',
    AMAZON_COGNITO_USER_POOLS: 'userPool',
    OPENID_CONNECT: 'oidc',
    NONE: 'none',
    AWS_LAMBDA: 'lambda',
    // `LAMBDA` is an incorrect value that was added during the v6 rewrite.
    // Keeping it as a valid value until v7 to prevent breaking customers who might
    // be relying on it as a workaround.
    // ref: https://github.com/aws-amplify/amplify-js/pull/12922
    // TODO: @v7 remove next line
    LAMBDA: 'lambda',
};
/**
 * Converts the object imported from `aws-exports.js` or `amplifyconfiguration.json` files generated by
 * the Amplify CLI into an object that conforms to the {@link ResourcesConfig}.
 *
 * @param config A configuration object imported  from `aws-exports.js` or `amplifyconfiguration.json`.
 *
 * @returns An object that conforms to the {@link ResourcesConfig} .
 */
const parseAWSExports = (config = {}) => {
    if (!Object.prototype.hasOwnProperty.call(config, 'aws_project_region')) {
        throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_1__.AmplifyError({
            name: 'InvalidParameterException',
            message: 'Invalid config parameter.',
            recoverySuggestion: 'Ensure passing the config object imported from  `amplifyconfiguration.json`.',
        });
    }
    const { aws_appsync_apiKey, aws_appsync_authenticationType, aws_appsync_graphqlEndpoint, aws_appsync_region, aws_bots_config, aws_cognito_identity_pool_id, aws_cognito_sign_up_verification_method, aws_cognito_mfa_configuration, aws_cognito_mfa_types, aws_cognito_password_protection_settings, aws_cognito_verification_mechanisms, aws_cognito_signup_attributes, aws_cognito_social_providers, aws_cognito_username_attributes, aws_mandatory_sign_in, aws_mobile_analytics_app_id, aws_mobile_analytics_app_region, aws_user_files_s3_bucket, aws_user_files_s3_bucket_region, aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing, aws_user_pools_id, aws_user_pools_web_client_id, geo, oauth, predictions, aws_cloud_logic_custom, Notifications, modelIntrospection, } = config;
    const amplifyConfig = {};
    // Analytics
    if (aws_mobile_analytics_app_id) {
        amplifyConfig.Analytics = {
            Pinpoint: {
                appId: aws_mobile_analytics_app_id,
                region: aws_mobile_analytics_app_region,
            },
        };
    }
    // Notifications
    const { InAppMessaging, Push } = Notifications ?? {};
    if (InAppMessaging?.AWSPinpoint || Push?.AWSPinpoint) {
        if (InAppMessaging?.AWSPinpoint) {
            const { appId, region } = InAppMessaging.AWSPinpoint;
            amplifyConfig.Notifications = {
                InAppMessaging: {
                    Pinpoint: {
                        appId,
                        region,
                    },
                },
            };
        }
        if (Push?.AWSPinpoint) {
            const { appId, region } = Push.AWSPinpoint;
            amplifyConfig.Notifications = {
                ...amplifyConfig.Notifications,
                PushNotification: {
                    Pinpoint: {
                        appId,
                        region,
                    },
                },
            };
        }
    }
    // Interactions
    if (Array.isArray(aws_bots_config)) {
        amplifyConfig.Interactions = {
            LexV1: Object.fromEntries(aws_bots_config.map(bot => [bot.name, bot])),
        };
    }
    // API
    if (aws_appsync_graphqlEndpoint) {
        const defaultAuthMode = authTypeMapping[aws_appsync_authenticationType];
        if (!defaultAuthMode) {
            logger.debug(`Invalid authentication type ${aws_appsync_authenticationType}. Falling back to IAM.`);
        }
        amplifyConfig.API = {
            GraphQL: {
                endpoint: aws_appsync_graphqlEndpoint,
                apiKey: aws_appsync_apiKey,
                region: aws_appsync_region,
                defaultAuthMode: defaultAuthMode ?? 'iam',
            },
        };
        if (modelIntrospection) {
            amplifyConfig.API.GraphQL.modelIntrospection = modelIntrospection;
        }
    }
    // Auth
    const mfaConfig = aws_cognito_mfa_configuration
        ? {
            status: aws_cognito_mfa_configuration &&
                aws_cognito_mfa_configuration.toLowerCase(),
            totpEnabled: aws_cognito_mfa_types?.includes('TOTP') ?? false,
            smsEnabled: aws_cognito_mfa_types?.includes('SMS') ?? false,
        }
        : undefined;
    const passwordFormatConfig = aws_cognito_password_protection_settings
        ? {
            minLength: aws_cognito_password_protection_settings.passwordPolicyMinLength,
            requireLowercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_LOWERCASE') ?? false,
            requireUppercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_UPPERCASE') ?? false,
            requireNumbers: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_NUMBERS') ?? false,
            requireSpecialCharacters: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_SYMBOLS') ?? false,
        }
        : undefined;
    const mergedUserAttributes = Array.from(new Set([
        ...(aws_cognito_verification_mechanisms ?? []),
        ...(aws_cognito_signup_attributes ?? []),
    ]));
    const userAttributes = mergedUserAttributes.reduce((attributes, key) => ({
        ...attributes,
        // All user attributes generated by the CLI are required
        [key.toLowerCase()]: { required: true },
    }), {});
    const loginWithEmailEnabled = aws_cognito_username_attributes?.includes('EMAIL') ?? false;
    const loginWithPhoneEnabled = aws_cognito_username_attributes?.includes('PHONE_NUMBER') ?? false;
    if (aws_cognito_identity_pool_id || aws_user_pools_id) {
        amplifyConfig.Auth = {
            Cognito: {
                identityPoolId: aws_cognito_identity_pool_id,
                allowGuestAccess: aws_mandatory_sign_in !== 'enable',
                signUpVerificationMethod: aws_cognito_sign_up_verification_method,
                userAttributes,
                userPoolClientId: aws_user_pools_web_client_id,
                userPoolId: aws_user_pools_id,
                mfa: mfaConfig,
                passwordFormat: passwordFormatConfig,
                loginWith: {
                    username: !(loginWithEmailEnabled || loginWithPhoneEnabled),
                    email: loginWithEmailEnabled,
                    phone: loginWithPhoneEnabled,
                },
            },
        };
    }
    const hasOAuthConfig = oauth ? Object.keys(oauth).length > 0 : false;
    const hasSocialProviderConfig = aws_cognito_social_providers
        ? aws_cognito_social_providers.length > 0
        : false;
    if (amplifyConfig.Auth && hasOAuthConfig) {
        amplifyConfig.Auth.Cognito.loginWith = {
            ...amplifyConfig.Auth.Cognito.loginWith,
            oauth: {
                ...getOAuthConfig(oauth),
                ...(hasSocialProviderConfig && {
                    providers: parseSocialProviders(aws_cognito_social_providers),
                }),
            },
        };
    }
    // Storage
    if (aws_user_files_s3_bucket) {
        amplifyConfig.Storage = {
            S3: {
                bucket: aws_user_files_s3_bucket,
                region: aws_user_files_s3_bucket_region,
                dangerouslyConnectToHttpEndpointForTesting: aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing,
            },
        };
    }
    // Geo
    if (geo) {
        const { amazon_location_service } = geo;
        amplifyConfig.Geo = {
            LocationService: {
                maps: amazon_location_service.maps,
                geofenceCollections: amazon_location_service.geofenceCollections,
                searchIndices: amazon_location_service.search_indices,
                region: amazon_location_service.region,
            },
        };
    }
    // REST API
    if (aws_cloud_logic_custom) {
        amplifyConfig.API = {
            ...amplifyConfig.API,
            REST: aws_cloud_logic_custom.reduce((acc, api) => {
                const { name, endpoint, region, service } = api;
                return {
                    ...acc,
                    [name]: {
                        endpoint,
                        ...(service ? { service } : undefined),
                        ...(region ? { region } : undefined),
                    },
                };
            }, {}),
        };
    }
    // Predictions
    if (predictions) {
        // map VoiceId from speechGenerator defaults to voiceId
        const { VoiceId: voiceId } = predictions?.convert?.speechGenerator?.defaults ?? {};
        amplifyConfig.Predictions = voiceId
            ? {
                ...predictions,
                convert: {
                    ...predictions.convert,
                    speechGenerator: {
                        ...predictions.convert.speechGenerator,
                        defaults: { voiceId },
                    },
                },
            }
            : predictions;
    }
    return amplifyConfig;
};
const getRedirectUrl = (redirectStr) => redirectStr?.split(',') ?? [];
const getOAuthConfig = ({ domain, scope, redirectSignIn, redirectSignOut, responseType, }) => ({
    domain,
    scopes: scope,
    redirectSignIn: getRedirectUrl(redirectSignIn),
    redirectSignOut: getRedirectUrl(redirectSignOut),
    responseType,
});
const parseSocialProviders = (aws_cognito_social_providers) => {
    return aws_cognito_social_providers.map((provider) => {
        const updatedProvider = provider.toLowerCase();
        return updatedProvider.charAt(0).toUpperCase() + updatedProvider.slice(1);
    });
};


//# sourceMappingURL=parseAWSExports.mjs.map


/***/ }),

/***/ "../core/dist/esm/parseAmplifyOutputs.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/parseAmplifyOutputs.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isAmplifyOutputs: () => (/* binding */ isAmplifyOutputs),
/* harmony export */   parseAmplifyOutputs: () => (/* binding */ parseAmplifyOutputs),
/* harmony export */   parseAnalytics: () => (/* binding */ parseAnalytics)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function isAmplifyOutputs(config) {
    // version format initially will be '1' but is expected to be something like x.y where x is major and y minor version
    const { version } = config;
    if (!version) {
        return false;
    }
    return version.startsWith('1');
}
function parseStorage(amplifyOutputsStorageProperties) {
    if (!amplifyOutputsStorageProperties) {
        return undefined;
    }
    const { bucket_name, aws_region, buckets } = amplifyOutputsStorageProperties;
    return {
        S3: {
            bucket: bucket_name,
            region: aws_region,
            buckets: buckets && createBucketInfoMap(buckets),
        },
    };
}
function parseAuth(amplifyOutputsAuthProperties) {
    if (!amplifyOutputsAuthProperties) {
        return undefined;
    }
    const { user_pool_id, user_pool_client_id, identity_pool_id, password_policy, mfa_configuration, mfa_methods, unauthenticated_identities_enabled, oauth, username_attributes, standard_required_attributes, groups, } = amplifyOutputsAuthProperties;
    const authConfig = {
        Cognito: {
            userPoolId: user_pool_id,
            userPoolClientId: user_pool_client_id,
            groups,
        },
    };
    if (identity_pool_id) {
        authConfig.Cognito = {
            ...authConfig.Cognito,
            identityPoolId: identity_pool_id,
        };
    }
    if (password_policy) {
        authConfig.Cognito.passwordFormat = {
            requireLowercase: password_policy.require_lowercase,
            requireNumbers: password_policy.require_numbers,
            requireUppercase: password_policy.require_uppercase,
            requireSpecialCharacters: password_policy.require_symbols,
            minLength: password_policy.min_length ?? 6,
        };
    }
    if (mfa_configuration) {
        authConfig.Cognito.mfa = {
            status: getMfaStatus(mfa_configuration),
            smsEnabled: mfa_methods?.includes('SMS'),
            totpEnabled: mfa_methods?.includes('TOTP'),
        };
    }
    if (unauthenticated_identities_enabled) {
        authConfig.Cognito.allowGuestAccess = unauthenticated_identities_enabled;
    }
    if (oauth) {
        authConfig.Cognito.loginWith = {
            oauth: {
                domain: oauth.domain,
                redirectSignIn: oauth.redirect_sign_in_uri,
                redirectSignOut: oauth.redirect_sign_out_uri,
                responseType: oauth.response_type === 'token' ? 'token' : 'code',
                scopes: oauth.scopes,
                providers: getOAuthProviders(oauth.identity_providers),
            },
        };
    }
    if (username_attributes) {
        authConfig.Cognito.loginWith = {
            ...authConfig.Cognito.loginWith,
            email: username_attributes.includes('email'),
            phone: username_attributes.includes('phone_number'),
            // Signing in with a username is not currently supported in Gen2, this should always evaluate to false
            username: username_attributes.includes('username'),
        };
    }
    if (standard_required_attributes) {
        authConfig.Cognito.userAttributes = standard_required_attributes.reduce((acc, curr) => ({ ...acc, [curr]: { required: true } }), {});
    }
    return authConfig;
}
function parseAnalytics(amplifyOutputsAnalyticsProperties) {
    if (!amplifyOutputsAnalyticsProperties?.amazon_pinpoint) {
        return undefined;
    }
    const { amazon_pinpoint } = amplifyOutputsAnalyticsProperties;
    return {
        Pinpoint: {
            appId: amazon_pinpoint.app_id,
            region: amazon_pinpoint.aws_region,
        },
    };
}
function parseGeo(amplifyOutputsAnalyticsProperties) {
    if (!amplifyOutputsAnalyticsProperties) {
        return undefined;
    }
    const { aws_region, geofence_collections, maps, search_indices } = amplifyOutputsAnalyticsProperties;
    return {
        LocationService: {
            region: aws_region,
            searchIndices: search_indices,
            geofenceCollections: geofence_collections,
            maps,
        },
    };
}
function parseData(amplifyOutputsDataProperties) {
    if (!amplifyOutputsDataProperties) {
        return undefined;
    }
    const { aws_region, default_authorization_type, url, api_key, model_introspection, } = amplifyOutputsDataProperties;
    const GraphQL = {
        endpoint: url,
        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),
        region: aws_region,
        apiKey: api_key,
        modelIntrospection: model_introspection,
    };
    return {
        GraphQL,
    };
}
function parseCustom(amplifyOutputsCustomProperties) {
    if (!amplifyOutputsCustomProperties?.events) {
        return undefined;
    }
    const { url, aws_region, api_key, default_authorization_type } = amplifyOutputsCustomProperties.events;
    const Events = {
        endpoint: url,
        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),
        region: aws_region,
        apiKey: api_key,
    };
    return {
        Events,
    };
}
function parseNotifications(amplifyOutputsNotificationsProperties) {
    if (!amplifyOutputsNotificationsProperties) {
        return undefined;
    }
    const { aws_region, channels, amazon_pinpoint_app_id } = amplifyOutputsNotificationsProperties;
    const hasInAppMessaging = channels.includes('IN_APP_MESSAGING');
    const hasPushNotification = channels.includes('APNS') || channels.includes('FCM');
    if (!(hasInAppMessaging || hasPushNotification)) {
        return undefined;
    }
    // At this point, we know the Amplify outputs contains at least one supported channel
    const notificationsConfig = {};
    if (hasInAppMessaging) {
        notificationsConfig.InAppMessaging = {
            Pinpoint: {
                appId: amazon_pinpoint_app_id,
                region: aws_region,
            },
        };
    }
    if (hasPushNotification) {
        notificationsConfig.PushNotification = {
            Pinpoint: {
                appId: amazon_pinpoint_app_id,
                region: aws_region,
            },
        };
    }
    return notificationsConfig;
}
function parseAmplifyOutputs(amplifyOutputs) {
    const resourcesConfig = {};
    if (amplifyOutputs.storage) {
        resourcesConfig.Storage = parseStorage(amplifyOutputs.storage);
    }
    if (amplifyOutputs.auth) {
        resourcesConfig.Auth = parseAuth(amplifyOutputs.auth);
    }
    if (amplifyOutputs.analytics) {
        resourcesConfig.Analytics = parseAnalytics(amplifyOutputs.analytics);
    }
    if (amplifyOutputs.geo) {
        resourcesConfig.Geo = parseGeo(amplifyOutputs.geo);
    }
    if (amplifyOutputs.data) {
        resourcesConfig.API = parseData(amplifyOutputs.data);
    }
    if (amplifyOutputs.custom) {
        const customConfig = parseCustom(amplifyOutputs.custom);
        if (customConfig && 'Events' in customConfig) {
            resourcesConfig.API = { ...resourcesConfig.API, ...customConfig };
        }
    }
    if (amplifyOutputs.notifications) {
        resourcesConfig.Notifications = parseNotifications(amplifyOutputs.notifications);
    }
    return resourcesConfig;
}
const authModeNames = {
    AMAZON_COGNITO_USER_POOLS: 'userPool',
    API_KEY: 'apiKey',
    AWS_IAM: 'iam',
    AWS_LAMBDA: 'lambda',
    OPENID_CONNECT: 'oidc',
};
function getGraphQLAuthMode(authType) {
    return authModeNames[authType];
}
const providerNames = {
    GOOGLE: 'Google',
    LOGIN_WITH_AMAZON: 'Amazon',
    FACEBOOK: 'Facebook',
    SIGN_IN_WITH_APPLE: 'Apple',
};
function getOAuthProviders(providers = []) {
    return providers.reduce((oAuthProviders, provider) => {
        if (providerNames[provider] !== undefined) {
            oAuthProviders.push(providerNames[provider]);
        }
        return oAuthProviders;
    }, []);
}
function getMfaStatus(mfaConfiguration) {
    if (mfaConfiguration === 'OPTIONAL')
        return 'optional';
    if (mfaConfiguration === 'REQUIRED')
        return 'on';
    return 'off';
}
function createBucketInfoMap(buckets) {
    const mappedBuckets = {};
    buckets.forEach(({ name, bucket_name: bucketName, aws_region: region, paths }) => {
        if (name in mappedBuckets) {
            throw new Error(`Duplicate friendly name found: ${name}. Name must be unique.`);
        }
        mappedBuckets[name] = {
            bucketName,
            region,
            paths,
        };
    });
    return mappedBuckets;
}


//# sourceMappingURL=parseAmplifyOutputs.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/apis/record.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/apis/record.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   record: () => (/* binding */ record)
/* harmony export */ });
/* harmony import */ var _utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/amplifyUuid/index.mjs */ "../core/dist/esm/utils/amplifyUuid/index.mjs");
/* harmony import */ var _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Cache/index.mjs */ "../core/dist/esm/Cache/index.mjs");
/* harmony import */ var _utils_resolveEndpointId_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/resolveEndpointId.mjs */ "../core/dist/esm/providers/pinpoint/utils/resolveEndpointId.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/constants.mjs */ "../core/dist/esm/providers/pinpoint/utils/constants.mjs");
/* harmony import */ var _utils_getEventBuffer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/getEventBuffer.mjs */ "../core/dist/esm/providers/pinpoint/utils/getEventBuffer.mjs");
/* harmony import */ var _utils_sessionListener_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/sessionListener/constants.mjs */ "../core/dist/esm/utils/sessionListener/constants.mjs");








// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
let session;
/**
 * @internal
 */
const record = async ({ appId, category, channelType, credentials, event, identityId, region, userAgentValue, bufferSize, flushInterval, flushSize, resendLimit, }) => {
    let eventSession = session;
    const currentTime = new Date();
    const timestampISOString = currentTime.toISOString();
    const eventId = (0,_utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_1__.amplifyUuid)();
    // Prepare event buffer if required
    const buffer = (0,_utils_getEventBuffer_mjs__WEBPACK_IMPORTED_MODULE_2__.getEventBuffer)({
        appId,
        region,
        credentials,
        bufferSize: bufferSize ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.BUFFER_SIZE,
        flushInterval: flushInterval ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.FLUSH_INTERVAL,
        flushSize: flushSize ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.FLUSH_SIZE,
        resendLimit: resendLimit ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.RESEND_LIMIT,
        identityId,
        userAgentValue,
    });
    const endpointId = await (0,_utils_resolveEndpointId_mjs__WEBPACK_IMPORTED_MODULE_4__.resolveEndpointId)({
        appId,
        category,
        channelType,
        credentials,
        identityId,
        region,
        userAgentValue,
    });
    // Generate session if required
    if (!eventSession || event.name === _utils_sessionListener_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.SESSION_START_EVENT) {
        const sessionId = (0,_utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_1__.amplifyUuid)();
        session = {
            Id: sessionId,
            StartTimestamp: timestampISOString,
        };
        eventSession = session;
    }
    // Terminate session when required
    if (session && event.name === _utils_sessionListener_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.SESSION_STOP_EVENT) {
        eventSession = {
            ...session,
            StopTimestamp: timestampISOString,
            Duration: currentTime.getTime() - new Date(session.StartTimestamp).getTime(),
        };
        session = undefined;
    }
    // Push event to buffer
    buffer.push({
        eventId,
        endpointId,
        event,
        session: eventSession,
        timestamp: timestampISOString,
        resendLimit: resendLimit ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_3__.RESEND_LIMIT,
    });
};


//# sourceMappingURL=record.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/apis/updateEndpoint.mjs":
/*!*******************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/apis/updateEndpoint.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updateEndpoint: () => (/* binding */ updateEndpoint)
/* harmony export */ });
/* harmony import */ var _utils_getClientInfo_getClientInfo_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/getClientInfo/getClientInfo.mjs */ "../core/dist/esm/utils/getClientInfo/getClientInfo.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _awsClients_pinpoint_updateEndpoint_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../awsClients/pinpoint/updateEndpoint.mjs */ "../core/dist/esm/awsClients/pinpoint/updateEndpoint.mjs");
/* harmony import */ var _utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/amplifyUuid/index.mjs */ "../core/dist/esm/utils/amplifyUuid/index.mjs");
/* harmony import */ var _utils_cacheEndpointId_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/cacheEndpointId.mjs */ "../core/dist/esm/providers/pinpoint/utils/cacheEndpointId.mjs");
/* harmony import */ var _utils_createEndpointId_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/createEndpointId.mjs */ "../core/dist/esm/providers/pinpoint/utils/createEndpointId.mjs");
/* harmony import */ var _utils_getEndpointId_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/getEndpointId.mjs */ "../core/dist/esm/providers/pinpoint/utils/getEndpointId.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
const updateEndpoint = async ({ address, appId, category, channelType, credentials, identityId, optOut, region, userAttributes, userId, userProfile, userAgentValue, }) => {
    const endpointId = await (0,_utils_getEndpointId_mjs__WEBPACK_IMPORTED_MODULE_2__.getEndpointId)(appId, category);
    // only generate a new endpoint id if one was not found in cache
    const createdEndpointId = !endpointId
        ? (0,_utils_createEndpointId_mjs__WEBPACK_IMPORTED_MODULE_3__.createEndpointId)(appId, category)
        : undefined;
    const { customProperties, demographic, email, location, metrics, name, plan, } = userProfile ?? {};
    // only automatically populate the endpoint with client info and identity id upon endpoint creation to
    // avoid overwriting the endpoint with these values every time the endpoint is updated
    const demographicsFromClientInfo = {};
    const resolvedUserId = createdEndpointId ? (userId ?? identityId) : userId;
    if (createdEndpointId) {
        const clientInfo = (0,_utils_getClientInfo_getClientInfo_mjs__WEBPACK_IMPORTED_MODULE_4__.getClientInfo)();
        demographicsFromClientInfo.appVersion = clientInfo.appVersion;
        demographicsFromClientInfo.make = clientInfo.make;
        demographicsFromClientInfo.model = clientInfo.model;
        demographicsFromClientInfo.modelVersion = clientInfo.version;
        demographicsFromClientInfo.platform = clientInfo.platform;
    }
    const mergedDemographic = {
        ...demographicsFromClientInfo,
        ...demographic,
    };
    const attributes = {
        ...(email && { email: [email] }),
        ...(name && { name: [name] }),
        ...(plan && { plan: [plan] }),
        ...customProperties,
    };
    const shouldAddDemographics = createdEndpointId || demographic;
    const shouldAddAttributes = email || customProperties || name || plan;
    const shouldAddUser = resolvedUserId || userAttributes;
    const input = {
        ApplicationId: appId,
        EndpointId: endpointId ?? createdEndpointId,
        EndpointRequest: {
            RequestId: (0,_utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_5__.amplifyUuid)(),
            EffectiveDate: new Date().toISOString(),
            ChannelType: channelType,
            Address: address,
            ...(shouldAddAttributes && { Attributes: attributes }),
            ...(shouldAddDemographics && {
                Demographic: {
                    AppVersion: mergedDemographic.appVersion,
                    Locale: mergedDemographic.locale,
                    Make: mergedDemographic.make,
                    Model: mergedDemographic.model,
                    ModelVersion: mergedDemographic.modelVersion,
                    Platform: mergedDemographic.platform,
                    PlatformVersion: mergedDemographic.platformVersion,
                    Timezone: mergedDemographic.timezone,
                },
            }),
            ...(location && {
                Location: {
                    City: location.city,
                    Country: location.country,
                    Latitude: location.latitude,
                    Longitude: location.longitude,
                    PostalCode: location.postalCode,
                    Region: location.region,
                },
            }),
            Metrics: metrics,
            OptOut: optOut,
            ...(shouldAddUser && {
                User: {
                    UserId: resolvedUserId,
                    UserAttributes: userAttributes,
                },
            }),
        },
    };
    try {
        await (0,_awsClients_pinpoint_updateEndpoint_mjs__WEBPACK_IMPORTED_MODULE_6__.updateEndpoint)({ credentials, region, userAgentValue }, input);
        // if we had to create an endpoint id, we need to now cache it
        if (createdEndpointId) {
            await (0,_utils_cacheEndpointId_mjs__WEBPACK_IMPORTED_MODULE_7__.cacheEndpointId)(appId, category, createdEndpointId);
        }
    }
    finally {
        // at this point, we completely reset the behavior so even if the update was unsuccessful
        // we can just start over with a newly created endpoint id
        if (createdEndpointId) {
            (0,_utils_createEndpointId_mjs__WEBPACK_IMPORTED_MODULE_3__.clearCreatedEndpointId)(appId, category);
        }
    }
};


//# sourceMappingURL=updateEndpoint.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/PinpointEventBuffer.mjs":
/*!*************************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/PinpointEventBuffer.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PinpointEventBuffer: () => (/* binding */ PinpointEventBuffer)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");
/* harmony import */ var _awsClients_pinpoint_putEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../awsClients/pinpoint/putEvents.mjs */ "../core/dist/esm/awsClients/pinpoint/putEvents.mjs");
/* harmony import */ var _isAppInForeground_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isAppInForeground.mjs */ "../core/dist/esm/providers/pinpoint/utils/isAppInForeground.mjs");











// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_2__.ConsoleLogger('PinpointEventBuffer');
const RETRYABLE_CODES = [429, 500];
const ACCEPTED_CODES = [202];
class PinpointEventBuffer {
    constructor(config) {
        this._interval = undefined;
        this._pause = false;
        this._flush = false;
        this._buffer = [];
        this._config = config;
        this._sendBatch = this._sendBatch.bind(this);
        this._startLoop();
    }
    push(event) {
        if (this._buffer.length >= this._config.bufferSize) {
            logger.debug('Exceeded Pinpoint event buffer limits, event dropped.', {
                eventId: event.eventId,
            });
            return;
        }
        this._buffer.push({ [event.eventId]: event });
    }
    pause() {
        this._pause = true;
    }
    resume() {
        this._pause = false;
    }
    flush() {
        this._flush = true;
    }
    identityHasChanged(identityId) {
        return this._config.identityId !== identityId;
    }
    flushAll() {
        this._putEvents(this._buffer.splice(0, this._buffer.length));
    }
    _startLoop() {
        if (this._interval) {
            clearInterval(this._interval);
        }
        const { flushInterval } = this._config;
        this._interval = setInterval(this._sendBatch, flushInterval);
    }
    _sendBatch() {
        const bufferLength = this._buffer.length;
        if (this._flush && !bufferLength && this._interval) {
            clearInterval(this._interval);
        }
        if (this._pause || !bufferLength || !(0,_isAppInForeground_mjs__WEBPACK_IMPORTED_MODULE_3__.isAppInForeground)()) {
            return;
        }
        const { flushSize } = this._config;
        const batchSize = Math.min(flushSize, bufferLength);
        const bufferSubset = this._buffer.splice(0, batchSize);
        this._putEvents(bufferSubset);
    }
    async _putEvents(buffer) {
        const eventMap = this._bufferToMap(buffer);
        const batchEventParams = this._generateBatchEventParams(eventMap);
        try {
            const { credentials, region, userAgentValue } = this._config;
            const data = await (0,_awsClients_pinpoint_putEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.putEvents)({
                credentials,
                region,
                userAgentValue,
            }, batchEventParams);
            this._processPutEventsSuccessResponse(data, eventMap);
        }
        catch (err) {
            this._handlePutEventsFailure(err, eventMap);
        }
    }
    _generateBatchEventParams(eventMap) {
        const batchItem = {};
        Object.values(eventMap).forEach(item => {
            const { event, timestamp, endpointId, eventId, session } = item;
            const { name, attributes, metrics } = event;
            batchItem[endpointId] = {
                Endpoint: {
                    ...batchItem[endpointId]?.Endpoint,
                },
                Events: {
                    ...batchItem[endpointId]?.Events,
                    [eventId]: {
                        EventType: name,
                        Timestamp: new Date(timestamp).toISOString(),
                        Attributes: attributes,
                        Metrics: metrics,
                        Session: session,
                    },
                },
            };
        });
        return {
            ApplicationId: this._config.appId,
            EventsRequest: {
                BatchItem: batchItem,
            },
        };
    }
    _handlePutEventsFailure(err, eventMap) {
        logger.debug('putEvents call to Pinpoint failed.', err);
        const statusCode = err.$metadata && err.$metadata.httpStatusCode;
        if (RETRYABLE_CODES.includes(statusCode)) {
            const retryableEvents = Object.values(eventMap);
            this._retry(retryableEvents);
        }
    }
    _processPutEventsSuccessResponse(data, eventMap) {
        const { Results = {} } = data.EventsResponse ?? {};
        const retryableEvents = [];
        Object.entries(Results).forEach(([_, endpointValues]) => {
            const responses = endpointValues.EventsItemResponse ?? {};
            Object.entries(responses).forEach(([eventId, eventValues]) => {
                const eventObject = eventMap[eventId];
                if (!eventObject) {
                    return;
                }
                const { StatusCode, Message } = eventValues ?? {};
                if (StatusCode && ACCEPTED_CODES.includes(StatusCode)) {
                    return;
                }
                if (StatusCode && RETRYABLE_CODES.includes(StatusCode)) {
                    retryableEvents.push(eventObject);
                    return;
                }
                const { name } = eventObject.event;
                logger.warn('Pinpoint event failed to send.', {
                    eventId,
                    name,
                    message: Message,
                });
            });
        });
        if (retryableEvents.length) {
            this._retry(retryableEvents);
        }
    }
    _retry(retryableEvents) {
        // retryable events that haven't reached the resendLimit
        const eligibleEvents = [];
        retryableEvents.forEach((bufferedEvent) => {
            const { eventId } = bufferedEvent;
            const { name } = bufferedEvent.event;
            if (bufferedEvent.resendLimit-- > 0) {
                logger.debug('Resending event.', {
                    eventId,
                    name,
                    remainingAttempts: bufferedEvent.resendLimit,
                });
                eligibleEvents.push({ [eventId]: bufferedEvent });
                return;
            }
            logger.debug('No retry attempts remaining for event.', {
                eventId,
                name,
            });
        });
        // add the events to the front of the buffer
        this._buffer.unshift(...eligibleEvents);
    }
    _bufferToMap(buffer) {
        return buffer.reduce((acc, curVal) => {
            const [[key, value]] = Object.entries(curVal);
            acc[key] = value;
            return acc;
        }, {});
    }
}


//# sourceMappingURL=PinpointEventBuffer.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/cacheEndpointId.mjs":
/*!*********************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/cacheEndpointId.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cacheEndpointId: () => (/* binding */ cacheEndpointId)
/* harmony export */ });
/* harmony import */ var _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Cache/index.mjs */ "../core/dist/esm/Cache/index.mjs");
/* harmony import */ var _getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getCacheKey.mjs */ "../core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Writes an endpoint id to a long-lived cache.
 *
 * @internal
 */
const cacheEndpointId = async (appId, category, endpointId) => {
    const cacheKey = (0,_getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_1__.getCacheKey)(appId, category);
    // Set a longer TTL to avoid endpoint id being deleted after the default TTL (3 days)
    // Also set its priority to the highest to reduce its chance of being deleted when cache is full
    const ttl = 1000 * 60 * 60 * 24 * 365 * 100; // 100 years
    const expiration = new Date().getTime() + ttl;
    return _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Cache.setItem(cacheKey, endpointId, {
        expires: expiration,
        priority: 1,
    });
};


//# sourceMappingURL=cacheEndpointId.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/constants.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/constants.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BUFFER_SIZE: () => (/* binding */ BUFFER_SIZE),
/* harmony export */   FLUSH_INTERVAL: () => (/* binding */ FLUSH_INTERVAL),
/* harmony export */   FLUSH_SIZE: () => (/* binding */ FLUSH_SIZE),
/* harmony export */   RESEND_LIMIT: () => (/* binding */ RESEND_LIMIT)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Default buffer constants
const BUFFER_SIZE = 1000;
const FLUSH_SIZE = 100;
const FLUSH_INTERVAL = 5 * 1000; // 5s
const RESEND_LIMIT = 5;


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/createEndpointId.mjs":
/*!**********************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/createEndpointId.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearCreatedEndpointId: () => (/* binding */ clearCreatedEndpointId),
/* harmony export */   createEndpointId: () => (/* binding */ createEndpointId)
/* harmony export */ });
/* harmony import */ var _utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/amplifyUuid/index.mjs */ "../core/dist/esm/utils/amplifyUuid/index.mjs");
/* harmony import */ var _getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getCacheKey.mjs */ "../core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createdEndpointIds = {};
/**
 * Creates an endpoint id and guarantees multiple creations for a category returns the same uuid.
 *
 * @internal
 */
const createEndpointId = (appId, category) => {
    const cacheKey = (0,_getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_0__.getCacheKey)(appId, category);
    if (!createdEndpointIds[cacheKey]) {
        createdEndpointIds[cacheKey] = (0,_utils_amplifyUuid_index_mjs__WEBPACK_IMPORTED_MODULE_1__.amplifyUuid)();
    }
    return createdEndpointIds[cacheKey];
};
/**
 * Clears a created endpoint id for a category.
 *
 * @internal
 */
const clearCreatedEndpointId = (appId, category) => {
    const cacheKey = (0,_getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_0__.getCacheKey)(appId, category);
    delete createdEndpointIds[cacheKey];
};


//# sourceMappingURL=createEndpointId.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs":
/*!*****************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const PROVIDER_NAME = 'pinpoint';
/**
 * Returns a unique cache key for a particular category/appId combination.
 *
 * @internal
 */
const getCacheKey = (appId, category) => `${category}:${PROVIDER_NAME}:${appId}`;


//# sourceMappingURL=getCacheKey.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/getEndpointId.mjs":
/*!*******************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/getEndpointId.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEndpointId: () => (/* binding */ getEndpointId)
/* harmony export */ });
/* harmony import */ var _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Cache/index.mjs */ "../core/dist/esm/Cache/index.mjs");
/* harmony import */ var _getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getCacheKey.mjs */ "../core/dist/esm/providers/pinpoint/utils/getCacheKey.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Returns an endpoint id from cache or `undefined` if not found.
 *
 * @internal
 */
const getEndpointId = async (appId, category) => {
    const cacheKey = (0,_getCacheKey_mjs__WEBPACK_IMPORTED_MODULE_1__.getCacheKey)(appId, category);
    const cachedEndpointId = await _Cache_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Cache.getItem(cacheKey);
    return cachedEndpointId ?? undefined;
};


//# sourceMappingURL=getEndpointId.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/getEventBuffer.mjs":
/*!********************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/getEventBuffer.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEventBuffer: () => (/* binding */ getEventBuffer)
/* harmony export */ });
/* harmony import */ var _PinpointEventBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PinpointEventBuffer.mjs */ "../core/dist/esm/providers/pinpoint/utils/PinpointEventBuffer.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Map of buffers by region -> appId
const eventBufferMap = {};
/**
 * Returns a PinpointEventBuffer instance for the specified region & app ID, creating one if it does not yet exist.
 *
 * @internal
 */
const getEventBuffer = ({ appId, region, credentials, bufferSize, flushInterval, flushSize, resendLimit, identityId, userAgentValue, }) => {
    if (eventBufferMap[region]?.[appId]) {
        const buffer = eventBufferMap[region][appId];
        /*
        If the identity has changed flush out the buffer and create a new instance. The old instance will be garbage
        collected.
        */
        if (buffer.identityHasChanged(identityId)) {
            buffer.flush();
        }
        else {
            return buffer;
        }
    }
    const buffer = new _PinpointEventBuffer_mjs__WEBPACK_IMPORTED_MODULE_0__.PinpointEventBuffer({
        appId,
        bufferSize,
        credentials,
        flushInterval,
        flushSize,
        identityId,
        region,
        resendLimit,
        userAgentValue,
    });
    if (!eventBufferMap[region]) {
        eventBufferMap[region] = {};
    }
    eventBufferMap[region][appId] = buffer;
    return buffer;
};


//# sourceMappingURL=getEventBuffer.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/isAppInForeground.mjs":
/*!***********************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/isAppInForeground.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isAppInForeground: () => (/* binding */ isAppInForeground)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const isAppInForeground = () => true;


//# sourceMappingURL=isAppInForeground.mjs.map


/***/ }),

/***/ "../core/dist/esm/providers/pinpoint/utils/resolveEndpointId.mjs":
/*!***********************************************************************!*\
  !*** ../core/dist/esm/providers/pinpoint/utils/resolveEndpointId.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveEndpointId: () => (/* binding */ resolveEndpointId)
/* harmony export */ });
/* harmony import */ var _types_errors_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../types/errors.mjs */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _errors_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../errors/errorHelpers.mjs */ "../core/dist/esm/errors/errorHelpers.mjs");
/* harmony import */ var _apis_updateEndpoint_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../apis/updateEndpoint.mjs */ "../core/dist/esm/providers/pinpoint/apis/updateEndpoint.mjs");
/* harmony import */ var _getEndpointId_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getEndpointId.mjs */ "../core/dist/esm/providers/pinpoint/utils/getEndpointId.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Resolves an endpoint id from cache or prepare via updateEndpoint if one does not already exist,
 * which will generate and cache an endpoint id between calls.
 *
 * @internal
 */
const resolveEndpointId = async ({ address, appId, category, channelType, credentials, identityId, region, userAgentValue, }) => {
    let endpointId = await (0,_getEndpointId_mjs__WEBPACK_IMPORTED_MODULE_0__.getEndpointId)(appId, category);
    if (!endpointId) {
        await (0,_apis_updateEndpoint_mjs__WEBPACK_IMPORTED_MODULE_1__.updateEndpoint)({
            address,
            appId,
            category,
            channelType,
            credentials,
            identityId,
            region,
            userAgentValue,
        });
        endpointId = await (0,_getEndpointId_mjs__WEBPACK_IMPORTED_MODULE_0__.getEndpointId)(appId, category);
    }
    (0,_errors_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assert)(!!endpointId, _types_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.AmplifyErrorCode.NoEndpointId);
    return endpointId;
};


//# sourceMappingURL=resolveEndpointId.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/Amplify.mjs":
/*!**********************************************!*\
  !*** ../core/dist/esm/singleton/Amplify.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Amplify: () => (/* binding */ Amplify),
/* harmony export */   AmplifyClass: () => (/* binding */ AmplifyClass)
/* harmony export */ });
/* harmony import */ var _Hub_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Hub/index.mjs */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _utils_deepFreeze_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/deepFreeze.mjs */ "../core/dist/esm/utils/deepFreeze.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/singleton/constants.mjs");
/* harmony import */ var _utils_parseAmplifyConfig_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/parseAmplifyConfig.mjs */ "../core/dist/esm/utils/parseAmplifyConfig.mjs");
/* harmony import */ var _Auth_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Auth/index.mjs */ "../core/dist/esm/singleton/Auth/index.mjs");
/* harmony import */ var _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-crypto/sha256-js */ "../../node_modules/@aws-crypto/sha256-js/build/module/index.js");
/* harmony import */ var _smithy_util_hex_encoding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/util-hex-encoding */ "../core/node_modules/@smithy/util-hex-encoding/dist-es/index.js");




















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class AmplifyClass {
    constructor() {
        this.oAuthListener = undefined;
        this.resourcesConfig = {};
        this.libraryOptions = {};
        this.Auth = new _Auth_index_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthClass();
    }
    /**
     * Configures Amplify for use with your back-end resources.
     *
     * @remarks
     * This API does not perform any merging of either `resourcesConfig` or `libraryOptions`. The most recently
     * provided values will be used after configuration.
     *
     * @remarks
     * `configure` can be used to specify additional library options where available for supported categories.
     *
     * @param resourceConfig - Back-end resource configuration. Typically provided via the `aws-exports.js` file.
     * @param libraryOptions - Additional options for customizing the behavior of the library.
     */
    configure(resourcesConfig, libraryOptions) {
        const resolvedResourceConfig = (0,_utils_parseAmplifyConfig_mjs__WEBPACK_IMPORTED_MODULE_3__.parseAmplifyConfig)(resourcesConfig);
        this.resourcesConfig = resolvedResourceConfig;
        if (libraryOptions) {
            this.libraryOptions = libraryOptions;
        }
        // Make resource config immutable
        this.resourcesConfig = (0,_utils_deepFreeze_mjs__WEBPACK_IMPORTED_MODULE_4__.deepFreeze)(this.resourcesConfig);
        this.Auth.configure(this.resourcesConfig.Auth, this.libraryOptions.Auth);
        _Hub_index_mjs__WEBPACK_IMPORTED_MODULE_5__.Hub.dispatch('core', {
            event: 'configure',
            data: this.resourcesConfig,
        }, 'Configure', _Hub_index_mjs__WEBPACK_IMPORTED_MODULE_5__.AMPLIFY_SYMBOL);
        this.notifyOAuthListener();
    }
    /**
     * Provides access to the current back-end resource configuration for the Library.
     *
     * @returns Returns the immutable back-end resource configuration.
     */
    getConfig() {
        return this.resourcesConfig;
    }
    /** @internal */
    [_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.ADD_OAUTH_LISTENER](listener) {
        if (this.resourcesConfig.Auth?.Cognito.loginWith?.oauth) {
            // when Amplify has been configured with a valid OAuth config while adding the listener, run it directly
            listener(this.resourcesConfig.Auth?.Cognito);
        }
        else {
            // otherwise register the listener and run it later when Amplify gets configured with a valid oauth config
            this.oAuthListener = listener;
        }
    }
    notifyOAuthListener() {
        if (!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth ||
            !this.oAuthListener) {
            return;
        }
        this.oAuthListener(this.resourcesConfig.Auth?.Cognito);
        // the listener should only be notified once with a valid oauth config
        this.oAuthListener = undefined;
    }
}
/**
 * The `Amplify` utility is used to configure the library.
 *
 * @remarks
 * `Amplify` orchestrates cross-category communication within the library.
 */
const Amplify = new AmplifyClass();


//# sourceMappingURL=Amplify.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/Auth/index.mjs":
/*!*************************************************!*\
  !*** ../core/dist/esm/singleton/Auth/index.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthClass: () => (/* binding */ AuthClass),
/* harmony export */   isTokenExpired: () => (/* binding */ isTokenExpired)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('Auth');
function isTokenExpired({ expiresAt, clockDrift, }) {
    const currentTime = Date.now();
    return currentTime + clockDrift > expiresAt;
}
class AuthClass {
    /**
     * Configure Auth category
     *
     * @internal
     *
     * @param authResourcesConfig - Resources configurations required by Auth providers.
     * @param authOptions - Client options used by library
     *
     * @returns void
     */
    configure(authResourcesConfig, authOptions) {
        this.authConfig = authResourcesConfig;
        this.authOptions = authOptions;
        if (authResourcesConfig.Cognito.userPoolEndpoint) {
            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito User Pool'));
        }
        if (authResourcesConfig.Cognito.identityPoolEndpoint) {
            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito Identity Pool'));
        }
    }
    /**
     * Fetch the auth tokens, and the temporary AWS credentials and identity if they are configured. By default it
     * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh
     * with `{ forceRefresh: true }` input.
     *
     * @param options - Options configuring the fetch behavior.
     *
     * @returns Promise of current auth session {@link AuthSession}.
     */
    async fetchAuthSession(options = {}) {
        let credentialsAndIdentityId;
        let userSub;
        // Get tokens will throw if session cannot be refreshed (network or service error) or return null if not available
        const tokens = await this.getTokens(options);
        if (tokens) {
            userSub = tokens.accessToken?.payload?.sub;
            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)
            credentialsAndIdentityId =
                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({
                    authConfig: this.authConfig,
                    tokens,
                    authenticated: true,
                    forceRefresh: options.forceRefresh,
                });
        }
        else {
            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)
            credentialsAndIdentityId =
                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({
                    authConfig: this.authConfig,
                    authenticated: false,
                    forceRefresh: options.forceRefresh,
                });
        }
        return {
            tokens,
            credentials: credentialsAndIdentityId?.credentials,
            identityId: credentialsAndIdentityId?.identityId,
            userSub,
        };
    }
    async clearCredentials() {
        await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId();
    }
    async getTokens(options) {
        return ((await this.authOptions?.tokenProvider?.getTokens(options)) ?? undefined);
    }
}
const getCustomEndpointWarningMessage = (target) => `You are using a custom Amazon ${target} endpoint, ensure the endpoint is correct.`;


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/Auth/utils/errorHelpers.mjs":
/*!**************************************************************!*\
  !*** ../core/dist/esm/singleton/Auth/utils/errorHelpers.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthConfigurationErrorCode: () => (/* binding */ AuthConfigurationErrorCode),
/* harmony export */   assert: () => (/* binding */ assert)
/* harmony export */ });
/* harmony import */ var _errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/createAssertionFunction.mjs */ "../core/dist/esm/errors/createAssertionFunction.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var AuthConfigurationErrorCode;
(function (AuthConfigurationErrorCode) {
    AuthConfigurationErrorCode["AuthTokenConfigException"] = "AuthTokenConfigException";
    AuthConfigurationErrorCode["AuthUserPoolAndIdentityPoolException"] = "AuthUserPoolAndIdentityPoolException";
    AuthConfigurationErrorCode["AuthUserPoolException"] = "AuthUserPoolException";
    AuthConfigurationErrorCode["InvalidIdentityPoolIdException"] = "InvalidIdentityPoolIdException";
    AuthConfigurationErrorCode["OAuthNotConfigureException"] = "OAuthNotConfigureException";
})(AuthConfigurationErrorCode || (AuthConfigurationErrorCode = {}));
const authConfigurationErrorMap = {
    [AuthConfigurationErrorCode.AuthTokenConfigException]: {
        message: 'Auth Token Provider not configured.',
        recoverySuggestion: 'Make sure to call Amplify.configure in your app.',
    },
    [AuthConfigurationErrorCode.AuthUserPoolAndIdentityPoolException]: {
        message: 'Auth UserPool or IdentityPool not configured.',
        recoverySuggestion: 'Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId.',
    },
    [AuthConfigurationErrorCode.AuthUserPoolException]: {
        message: 'Auth UserPool not configured.',
        recoverySuggestion: 'Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId.',
    },
    [AuthConfigurationErrorCode.InvalidIdentityPoolIdException]: {
        message: 'Invalid identity pool id provided.',
        recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',
    },
    [AuthConfigurationErrorCode.OAuthNotConfigureException]: {
        message: 'oauth param not configured.',
        recoverySuggestion: 'Make sure to call Amplify.configure with oauth parameter in your app.',
    },
};
const assert = (0,_errors_createAssertionFunction_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssertionFunction)(authConfigurationErrorMap);


//# sourceMappingURL=errorHelpers.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/Auth/utils/index.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/singleton/Auth/utils/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertIdentityPoolIdConfig: () => (/* binding */ assertIdentityPoolIdConfig),
/* harmony export */   assertOAuthConfig: () => (/* binding */ assertOAuthConfig),
/* harmony export */   assertTokenProviderConfig: () => (/* binding */ assertTokenProviderConfig),
/* harmony export */   decodeJWT: () => (/* binding */ decodeJWT)
/* harmony export */ });
/* harmony import */ var _utils_convert_base64_base64Decoder_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/convert/base64/base64Decoder.mjs */ "../core/dist/esm/utils/convert/base64/base64Decoder.mjs");
/* harmony import */ var _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errorHelpers.mjs */ "../core/dist/esm/singleton/Auth/utils/errorHelpers.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertTokenProviderConfig(cognitoConfig) {
    let assertionValid = true; // assume valid until otherwise proveed
    if (!cognitoConfig) {
        assertionValid = false;
    }
    else {
        assertionValid =
            !!cognitoConfig.userPoolId && !!cognitoConfig.userPoolClientId;
    }
    (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(assertionValid, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthConfigurationErrorCode.AuthUserPoolException);
}
function assertOAuthConfig(cognitoConfig) {
    const validOAuthConfig = !!cognitoConfig?.loginWith?.oauth?.domain &&
        !!cognitoConfig?.loginWith?.oauth?.redirectSignOut &&
        !!cognitoConfig?.loginWith?.oauth?.redirectSignIn &&
        !!cognitoConfig?.loginWith?.oauth?.responseType;
    (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(validOAuthConfig, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthConfigurationErrorCode.OAuthNotConfigureException);
}
function assertIdentityPoolIdConfig(cognitoConfig) {
    const validConfig = !!cognitoConfig?.identityPoolId;
    (0,_errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(validConfig, _errorHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.AuthConfigurationErrorCode.InvalidIdentityPoolIdException);
}
/**
 * Decodes payload of JWT token
 *
 * @param {String} token A string representing a token to be decoded
 * @throws {@link Error} - Throws error when token is invalid or payload malformed.
 */
function decodeJWT(token) {
    const tokenParts = token.split('.');
    if (tokenParts.length !== 3) {
        throw new Error('Invalid token');
    }
    try {
        const base64WithUrlSafe = tokenParts[1];
        const base64 = base64WithUrlSafe.replace(/-/g, '+').replace(/_/g, '/');
        const jsonStr = decodeURIComponent(_utils_convert_base64_base64Decoder_mjs__WEBPACK_IMPORTED_MODULE_1__.base64Decoder
            .convert(base64)
            .split('')
            .map(char => `%${`00${char.charCodeAt(0).toString(16)}`.slice(-2)}`)
            .join(''));
        const payload = JSON.parse(jsonStr);
        return {
            toString: () => token,
            payload,
        };
    }
    catch (err) {
        throw new Error('Invalid token payload');
    }
}


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/apis/clearCredentials.mjs":
/*!************************************************************!*\
  !*** ../core/dist/esm/singleton/apis/clearCredentials.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearCredentials: () => (/* binding */ clearCredentials)
/* harmony export */ });
/* harmony import */ var _Amplify_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Amplify.mjs */ "../core/dist/esm/singleton/Amplify.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function clearCredentials() {
    return _Amplify_mjs__WEBPACK_IMPORTED_MODULE_0__.Amplify.Auth.clearCredentials();
}


//# sourceMappingURL=clearCredentials.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/apis/fetchAuthSession.mjs":
/*!************************************************************!*\
  !*** ../core/dist/esm/singleton/apis/fetchAuthSession.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchAuthSession: () => (/* binding */ fetchAuthSession)
/* harmony export */ });
/* harmony import */ var _Amplify_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Amplify.mjs */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_fetchAuthSession_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/fetchAuthSession.mjs */ "../core/dist/esm/singleton/apis/internal/fetchAuthSession.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Fetch the auth session including the tokens and credentials if they are available. By default it
 * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh
 * with `{ forceRefresh: true }` input.
 *
 * @param options - Options configuring the fetch behavior.
 * @throws {@link AuthError} - Throws error when session information cannot be refreshed.
 * @returns Promise<AuthSession>
 */
const fetchAuthSession = (options) => {
    return (0,_internal_fetchAuthSession_mjs__WEBPACK_IMPORTED_MODULE_0__.fetchAuthSession)(_Amplify_mjs__WEBPACK_IMPORTED_MODULE_1__.Amplify, options);
};


//# sourceMappingURL=fetchAuthSession.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/apis/internal/fetchAuthSession.mjs":
/*!*********************************************************************!*\
  !*** ../core/dist/esm/singleton/apis/internal/fetchAuthSession.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchAuthSession: () => (/* binding */ fetchAuthSession)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const fetchAuthSession = (amplify, options) => {
    return amplify.Auth.fetchAuthSession(options);
};


//# sourceMappingURL=fetchAuthSession.mjs.map


/***/ }),

/***/ "../core/dist/esm/singleton/constants.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/singleton/constants.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ADD_OAUTH_LISTENER: () => (/* binding */ ADD_OAUTH_LISTENER)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const ADD_OAUTH_LISTENER = Symbol('oauth-listener');


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/CookieStorage.mjs":
/*!**************************************************!*\
  !*** ../core/dist/esm/storage/CookieStorage.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CookieStorage: () => (/* binding */ CookieStorage)
/* harmony export */ });
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ "../../node_modules/js-cookie/dist/js.cookie.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class CookieStorage {
    constructor(data = {}) {
        const { path, domain, expires, sameSite, secure } = data;
        this.domain = domain;
        this.path = path || '/';
        this.expires = Object.prototype.hasOwnProperty.call(data, 'expires')
            ? expires
            : 365;
        this.secure = Object.prototype.hasOwnProperty.call(data, 'secure')
            ? secure
            : true;
        if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {
            if (!sameSite || !['strict', 'lax', 'none'].includes(sameSite)) {
                throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');
            }
            if (sameSite === 'none' && !this.secure) {
                throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');
            }
            this.sameSite = sameSite;
        }
    }
    async setItem(key, value) {
        js_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].set(key, value, this.getData());
    }
    async getItem(key) {
        const item = js_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].get(key);
        return item ?? null;
    }
    async removeItem(key) {
        js_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].remove(key, this.getData());
    }
    async clear() {
        const cookie = js_cookie__WEBPACK_IMPORTED_MODULE_0__["default"].get();
        const promises = Object.keys(cookie).map(key => this.removeItem(key));
        await Promise.all(promises);
    }
    getData() {
        return {
            path: this.path,
            expires: this.expires,
            domain: this.domain,
            secure: this.secure,
            ...(this.sameSite && { sameSite: this.sameSite }),
        };
    }
}


//# sourceMappingURL=CookieStorage.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/DefaultStorage.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/storage/DefaultStorage.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefaultStorage: () => (/* binding */ DefaultStorage)
/* harmony export */ });
/* harmony import */ var _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KeyValueStorage.mjs */ "../core/dist/esm/storage/KeyValueStorage.mjs");
/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ "../core/dist/esm/storage/utils.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
class DefaultStorage extends _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_0__.KeyValueStorage {
    constructor() {
        super((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.getLocalStorageWithFallback)());
    }
}


//# sourceMappingURL=DefaultStorage.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/InMemoryStorage.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/storage/InMemoryStorage.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InMemoryStorage: () => (/* binding */ InMemoryStorage)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
class InMemoryStorage {
    constructor() {
        this.storage = new Map();
    }
    get length() {
        return this.storage.size;
    }
    key(index) {
        if (index > this.length - 1) {
            return null;
        }
        return Array.from(this.storage.keys())[index];
    }
    setItem(key, value) {
        this.storage.set(key, value);
    }
    getItem(key) {
        return this.storage.get(key) ?? null;
    }
    removeItem(key) {
        this.storage.delete(key);
    }
    clear() {
        this.storage.clear();
    }
}


//# sourceMappingURL=InMemoryStorage.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/KeyValueStorage.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/storage/KeyValueStorage.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KeyValueStorage: () => (/* binding */ KeyValueStorage)
/* harmony export */ });
/* harmony import */ var _errors_PlatformNotSupportedError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/PlatformNotSupportedError.mjs */ "../core/dist/esm/errors/PlatformNotSupportedError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
class KeyValueStorage {
    constructor(storage) {
        this.storage = storage;
    }
    /**
     * This is used to set a specific item in storage
     * @param {string} key - the key for the item
     * @param {object} value - the value
     * @returns {string} value that was set
     */
    async setItem(key, value) {
        if (!this.storage)
            throw new _errors_PlatformNotSupportedError_mjs__WEBPACK_IMPORTED_MODULE_0__.PlatformNotSupportedError();
        this.storage.setItem(key, value);
    }
    /**
     * This is used to get a specific key from storage
     * @param {string} key - the key for the item
     * This is used to clear the storage
     * @returns {string} the data item
     */
    async getItem(key) {
        if (!this.storage)
            throw new _errors_PlatformNotSupportedError_mjs__WEBPACK_IMPORTED_MODULE_0__.PlatformNotSupportedError();
        return this.storage.getItem(key);
    }
    /**
     * This is used to remove an item from storage
     * @param {string} key - the key being set
     * @returns {string} value - value that was deleted
     */
    async removeItem(key) {
        if (!this.storage)
            throw new _errors_PlatformNotSupportedError_mjs__WEBPACK_IMPORTED_MODULE_0__.PlatformNotSupportedError();
        this.storage.removeItem(key);
    }
    /**
     * This is used to clear the storage
     * @returns {string} nothing
     */
    async clear() {
        if (!this.storage)
            throw new _errors_PlatformNotSupportedError_mjs__WEBPACK_IMPORTED_MODULE_0__.PlatformNotSupportedError();
        this.storage.clear();
    }
}


//# sourceMappingURL=KeyValueStorage.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/SessionStorage.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/storage/SessionStorage.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SessionStorage: () => (/* binding */ SessionStorage)
/* harmony export */ });
/* harmony import */ var _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KeyValueStorage.mjs */ "../core/dist/esm/storage/KeyValueStorage.mjs");
/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ "../core/dist/esm/storage/utils.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
class SessionStorage extends _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_0__.KeyValueStorage {
    constructor() {
        super((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.getSessionStorageWithFallback)());
    }
}


//# sourceMappingURL=SessionStorage.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/index.mjs":
/*!******************************************!*\
  !*** ../core/dist/esm/storage/index.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CookieStorage: () => (/* reexport safe */ _CookieStorage_mjs__WEBPACK_IMPORTED_MODULE_0__.CookieStorage),
/* harmony export */   defaultStorage: () => (/* binding */ defaultStorage),
/* harmony export */   sessionStorage: () => (/* binding */ sessionStorage),
/* harmony export */   sharedInMemoryStorage: () => (/* binding */ sharedInMemoryStorage)
/* harmony export */ });
/* harmony import */ var _DefaultStorage_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DefaultStorage.mjs */ "../core/dist/esm/storage/DefaultStorage.mjs");
/* harmony import */ var _InMemoryStorage_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InMemoryStorage.mjs */ "../core/dist/esm/storage/InMemoryStorage.mjs");
/* harmony import */ var _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./KeyValueStorage.mjs */ "../core/dist/esm/storage/KeyValueStorage.mjs");
/* harmony import */ var _SessionStorage_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SessionStorage.mjs */ "../core/dist/esm/storage/SessionStorage.mjs");
/* harmony import */ var _CookieStorage_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CookieStorage.mjs */ "../core/dist/esm/storage/CookieStorage.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const defaultStorage = new _DefaultStorage_mjs__WEBPACK_IMPORTED_MODULE_1__.DefaultStorage();
const sessionStorage = new _SessionStorage_mjs__WEBPACK_IMPORTED_MODULE_2__.SessionStorage();
const sharedInMemoryStorage = new _KeyValueStorage_mjs__WEBPACK_IMPORTED_MODULE_3__.KeyValueStorage(new _InMemoryStorage_mjs__WEBPACK_IMPORTED_MODULE_4__.InMemoryStorage());


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/storage/utils.mjs":
/*!******************************************!*\
  !*** ../core/dist/esm/storage/utils.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getLocalStorageWithFallback: () => (/* binding */ getLocalStorageWithFallback),
/* harmony export */   getSessionStorageWithFallback: () => (/* binding */ getSessionStorageWithFallback)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _InMemoryStorage_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InMemoryStorage.mjs */ "../core/dist/esm/storage/InMemoryStorage.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 * @returns Either a reference to window.localStorage or an in-memory storage as fallback
 */
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('CoreStorageUtils');
const getLocalStorageWithFallback = () => {
    try {
        // Attempt to use localStorage directly
        if (typeof window !== 'undefined' && window.localStorage) {
            return window.localStorage;
        }
    }
    catch (e) {
        // Handle any errors related to localStorage access
        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');
    }
    // Return in-memory storage as a fallback if localStorage is not accessible
    return new _InMemoryStorage_mjs__WEBPACK_IMPORTED_MODULE_1__.InMemoryStorage();
};
/**
 * @internal
 * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback
 */
const getSessionStorageWithFallback = () => {
    try {
        // Attempt to use sessionStorage directly
        if (typeof window !== 'undefined' && window.sessionStorage) {
            // Verify we can actually use it by testing access
            window.sessionStorage.getItem('test');
            return window.sessionStorage;
        }
        throw new Error('sessionStorage is not defined');
    }
    catch (e) {
        // Handle any errors related to sessionStorage access
        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');
        return new _InMemoryStorage_mjs__WEBPACK_IMPORTED_MODULE_1__.InMemoryStorage();
    }
};


//# sourceMappingURL=utils.mjs.map


/***/ }),

/***/ "../core/dist/esm/types/errors.mjs":
/*!*****************************************!*\
  !*** ../core/dist/esm/types/errors.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AmplifyErrorCode: () => (/* binding */ AmplifyErrorCode)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var AmplifyErrorCode;
(function (AmplifyErrorCode) {
    AmplifyErrorCode["NoEndpointId"] = "NoEndpointId";
    AmplifyErrorCode["PlatformNotSupported"] = "PlatformNotSupported";
    AmplifyErrorCode["Unknown"] = "Unknown";
    AmplifyErrorCode["NetworkError"] = "NetworkError";
})(AmplifyErrorCode || (AmplifyErrorCode = {}));


//# sourceMappingURL=errors.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/WordArray.mjs":
/*!********************************************!*\
  !*** ../core/dist/esm/utils/WordArray.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WordArray: () => (/* binding */ WordArray)
/* harmony export */ });
/* harmony import */ var _cryptoSecureRandomInt_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cryptoSecureRandomInt.mjs */ "../core/dist/esm/utils/cryptoSecureRandomInt.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Hex encoding strategy.
 * Converts a word array to a hex string.
 * @param {WordArray} wordArray The word array.
 * @return {string} The hex string.
 * @static
 */
function hexStringify(wordArray) {
    // Shortcuts
    const { words } = wordArray;
    const { sigBytes } = wordArray;
    // Convert
    const hexChars = [];
    for (let i = 0; i < sigBytes; i++) {
        const bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;
        hexChars.push((bite >>> 4).toString(16));
        hexChars.push((bite & 0x0f).toString(16));
    }
    return hexChars.join('');
}
class WordArray {
    constructor(words, sigBytes) {
        this.words = [];
        let Words = words;
        Words = this.words = Words || [];
        if (sigBytes !== undefined) {
            this.sigBytes = sigBytes;
        }
        else {
            this.sigBytes = Words.length * 4;
        }
    }
    random(nBytes) {
        const words = [];
        for (let i = 0; i < nBytes; i += 4) {
            words.push((0,_cryptoSecureRandomInt_mjs__WEBPACK_IMPORTED_MODULE_0__.cryptoSecureRandomInt)());
        }
        return new WordArray(words, nBytes);
    }
    toString() {
        return hexStringify(this);
    }
}


//# sourceMappingURL=WordArray.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/amplifyUrl/index.mjs":
/*!***************************************************!*\
  !*** ../core/dist/esm/utils/amplifyUrl/index.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AmplifyUrl: () => (/* binding */ AmplifyUrl),
/* harmony export */   AmplifyUrlSearchParams: () => (/* binding */ AmplifyUrlSearchParams)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const AmplifyUrl = URL;
const AmplifyUrlSearchParams = URLSearchParams;


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/amplifyUuid/index.mjs":
/*!****************************************************!*\
  !*** ../core/dist/esm/utils/amplifyUuid/index.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   amplifyUuid: () => (/* binding */ amplifyUuid)
/* harmony export */ });
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ "../../node_modules/uuid/dist/esm-browser/v4.js");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const amplifyUuid = uuid__WEBPACK_IMPORTED_MODULE_0__["default"];


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/convert/base64/base64Decoder.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/utils/convert/base64/base64Decoder.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   base64Decoder: () => (/* binding */ base64Decoder)
/* harmony export */ });
/* harmony import */ var _globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../globalHelpers/index.mjs */ "../core/dist/esm/utils/globalHelpers/index.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const base64Decoder = {
    convert(input, options) {
        let inputStr = input;
        // urlSafe character replacement options conform to the base64 url spec
        // https://datatracker.ietf.org/doc/html/rfc4648#page-7
        if (options?.urlSafe) {
            inputStr = inputStr.replace(/-/g, '+').replace(/_/g, '/');
        }
        return (0,_globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_0__.getAtob)()(inputStr);
    },
};


//# sourceMappingURL=base64Decoder.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/convert/base64/base64Encoder.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/utils/convert/base64/base64Encoder.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   base64Encoder: () => (/* binding */ base64Encoder)
/* harmony export */ });
/* harmony import */ var _globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../globalHelpers/index.mjs */ "../core/dist/esm/utils/globalHelpers/index.mjs");
/* harmony import */ var _bytesToString_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytesToString.mjs */ "../core/dist/esm/utils/convert/base64/bytesToString.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const base64Encoder = {
    /**
     * Convert input to base64-encoded string
     * @param input - string to convert to base64
     * @param options - encoding options that can optionally produce a base64url string
     * @returns base64-encoded string
     */
    convert(input, options = {
        urlSafe: false,
        skipPadding: false,
    }) {
        const inputStr = typeof input === 'string' ? input : (0,_bytesToString_mjs__WEBPACK_IMPORTED_MODULE_0__.bytesToString)(input);
        let encodedStr = (0,_globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getBtoa)()(inputStr);
        // urlSafe char replacement and skipPadding options conform to the base64url spec
        // https://datatracker.ietf.org/doc/html/rfc4648#section-5
        if (options.urlSafe) {
            encodedStr = encodedStr.replace(/\+/g, '-').replace(/\//g, '_');
        }
        if (options.skipPadding) {
            encodedStr = encodedStr.replace(/=/g, '');
        }
        return encodedStr;
    },
};


//# sourceMappingURL=base64Encoder.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/convert/base64/bytesToString.mjs":
/*!***************************************************************!*\
  !*** ../core/dist/esm/utils/convert/base64/bytesToString.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bytesToString: () => (/* binding */ bytesToString)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function bytesToString(input) {
    return Array.from(input, byte => String.fromCodePoint(byte)).join('');
}


//# sourceMappingURL=bytesToString.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/cryptoSecureRandomInt.mjs":
/*!********************************************************!*\
  !*** ../core/dist/esm/utils/cryptoSecureRandomInt.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cryptoSecureRandomInt: () => (/* binding */ cryptoSecureRandomInt)
/* harmony export */ });
/* harmony import */ var _globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globalHelpers/index.mjs */ "../core/dist/esm/utils/globalHelpers/index.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/*
 * Cryptographically secure pseudorandom number generator
 * As Math.random() is cryptographically not safe to use
 */
function cryptoSecureRandomInt() {
    const crypto = (0,_globalHelpers_index_mjs__WEBPACK_IMPORTED_MODULE_0__.getCrypto)();
    const randomResult = crypto.getRandomValues(new Uint32Array(1))[0];
    return randomResult;
}


//# sourceMappingURL=cryptoSecureRandomInt.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/deDupeAsyncFunction.mjs":
/*!******************************************************!*\
  !*** ../core/dist/esm/utils/deDupeAsyncFunction.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deDupeAsyncFunction: () => (/* binding */ deDupeAsyncFunction)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * returns in-flight promise if there is one
 *
 * @param asyncFunction - asyncFunction to be deduped.
 * @returns - the return type of the callback
 */
const deDupeAsyncFunction = (asyncFunction) => {
    let inflightPromise;
    return async (...args) => {
        if (inflightPromise)
            return inflightPromise;
        inflightPromise = new Promise((resolve, reject) => {
            asyncFunction(...args)
                .then(result => {
                resolve(result);
            })
                .catch(error => {
                reject(error);
            })
                .finally(() => {
                inflightPromise = undefined;
            });
        });
        return inflightPromise;
    };
};


//# sourceMappingURL=deDupeAsyncFunction.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/deepFreeze.mjs":
/*!*********************************************!*\
  !*** ../core/dist/esm/utils/deepFreeze.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deepFreeze: () => (/* binding */ deepFreeze)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const deepFreeze = (object) => {
    const propNames = Reflect.ownKeys(object);
    for (const name of propNames) {
        const value = object[name];
        if ((value && typeof value === 'object') || typeof value === 'function') {
            deepFreeze(value);
        }
    }
    return Object.freeze(object);
};


//# sourceMappingURL=deepFreeze.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/deviceName/getDeviceName.mjs":
/*!***********************************************************!*\
  !*** ../core/dist/esm/utils/deviceName/getDeviceName.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDeviceName: () => (/* binding */ getDeviceName)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Retrieves the device name using the User-Agent Client Hints API if available,
 * falling back to the traditional userAgent string if not.
 *
 * @returns {Promise<string>} A promise that resolves with a string representing the device name.
 *
 * Example Output:
 * navigator.userAgentData:
 *   'macOS 14.2.1 arm macOS Not A(Brand/99.0.0.0;Google Chrome/121.0.6167.160;Chromium/121.0.6167.160'
 * navigator.userAgent:
 *   'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/115.0'
 */
const getDeviceName = async () => {
    const { userAgentData } = navigator;
    if (!userAgentData)
        return navigator.userAgent;
    const { platform = '', platformVersion = '', model = '', architecture = '', fullVersionList = [], } = await userAgentData.getHighEntropyValues([
        'platform',
        'platformVersion',
        'architecture',
        'model',
        'fullVersionList',
    ]);
    const versionList = fullVersionList
        .map((v) => `${v.brand}/${v.version}`)
        .join(';');
    const deviceName = [
        platform,
        platformVersion,
        architecture,
        model,
        platform,
        versionList,
    ]
        .filter(value => value)
        .join(' ');
    return deviceName;
};


//# sourceMappingURL=getDeviceName.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/generateRandomString.mjs":
/*!*******************************************************!*\
  !*** ../core/dist/esm/utils/generateRandomString.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const generateRandomString = (length) => {
    const STATE_CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    for (let i = 0; i < length; i++) {
        result += STATE_CHARSET.charAt(Math.floor(Math.random() * STATE_CHARSET.length));
    }
    return result;
};


//# sourceMappingURL=generateRandomString.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/getClientInfo/getClientInfo.mjs":
/*!**************************************************************!*\
  !*** ../core/dist/esm/utils/getClientInfo/getClientInfo.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getClientInfo: () => (/* binding */ getClientInfo)
/* harmony export */ });
/* harmony import */ var _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Logger/ConsoleLogger.mjs */ "../core/dist/esm/Logger/ConsoleLogger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _Logger_ConsoleLogger_mjs__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('getClientInfo');
function getClientInfo() {
    if (typeof window === 'undefined') {
        return {};
    }
    return browserClientInfo();
}
function browserClientInfo() {
    if (typeof window === 'undefined') {
        logger.warn('No window object available to get browser client info');
        return {};
    }
    const nav = window.navigator;
    if (!nav) {
        logger.warn('No navigator object available to get browser client info');
        return {};
    }
    const { platform, product, vendor, userAgent, language } = nav;
    const type = getBrowserType(userAgent);
    const timezone = browserTimezone();
    return {
        platform,
        make: product || vendor,
        model: type.type,
        version: type.version,
        appVersion: [type.type, type.version].join('/'),
        language,
        timezone,
    };
}
function browserTimezone() {
    const tzMatch = /\(([A-Za-z\s].*)\)/.exec(new Date().toString());
    return tzMatch ? tzMatch[1] || '' : '';
}
function getBrowserType(userAgent) {
    // The latest user agents for Opera: https://www.whatismybrowser.com/guides/the-latest-user-agent/opera
    const operaMatch = /.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9.]+).*/i.exec(userAgent);
    if (operaMatch) {
        return { type: operaMatch[1], version: operaMatch[2] };
    }
    // The latest user agents for Edge: https://www.whatismybrowser.com/guides/the-latest-user-agent/edge
    const ieMatch = /.+(Trident|Edge|Edg|EdgA|EdgiOS)\/([0-9.]+).*/i.exec(userAgent);
    if (ieMatch) {
        return { type: ieMatch[1], version: ieMatch[2] };
    }
    // The latest user agents for web browsers on Firefox and Chrome
    // https://www.whatismybrowser.com/guides/the-latest-user-agent/firefox
    // https://www.whatismybrowser.com/guides/the-latest-user-agent/chrome
    const cfMatch = /.+(Chrome|CriOS|Firefox|FxiOS)\/([0-9.]+).*/i.exec(userAgent);
    if (cfMatch) {
        return { type: cfMatch[1], version: cfMatch[2] };
    }
    // The latest user agents for Safari: https://www.whatismybrowser.com/guides/the-latest-user-agent/safari
    const sMatch = /.+(Safari)\/([0-9.]+).*/i.exec(userAgent);
    if (sMatch) {
        return { type: sMatch[1], version: sMatch[2] };
    }
    const awkMatch = /.+(AppleWebKit)\/([0-9.]+).*/i.exec(userAgent);
    if (awkMatch) {
        return { type: awkMatch[1], version: awkMatch[2] };
    }
    const anyMatch = /.*([A-Z]+)\/([0-9.]+).*/i.exec(userAgent);
    if (anyMatch) {
        return { type: anyMatch[1], version: anyMatch[2] };
    }
    return { type: '', version: '' };
}


//# sourceMappingURL=getClientInfo.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/globalHelpers/index.mjs":
/*!******************************************************!*\
  !*** ../core/dist/esm/utils/globalHelpers/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAtob: () => (/* binding */ getAtob),
/* harmony export */   getBtoa: () => (/* binding */ getBtoa),
/* harmony export */   getCrypto: () => (/* binding */ getCrypto)
/* harmony export */ });
/* harmony import */ var _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors/AmplifyError.mjs */ "../core/dist/esm/errors/AmplifyError.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getCrypto = () => {
    if (typeof window === 'object' && typeof window.crypto === 'object') {
        return window.crypto;
    }
    // Next.js global polyfill
    if (typeof crypto === 'object') {
        return crypto;
    }
    throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError({
        name: 'MissingPolyfill',
        message: 'Cannot resolve the `crypto` function from the environment.',
    });
};
const getBtoa = () => {
    // browser
    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {
        return window.btoa;
    }
    // Next.js global polyfill
    if (typeof btoa === 'function') {
        return btoa;
    }
    throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError({
        name: 'Base64EncoderError',
        message: 'Cannot resolve the `btoa` function from the environment.',
    });
};
const getAtob = () => {
    // browser
    if (typeof window !== 'undefined' && typeof window.atob === 'function') {
        return window.atob;
    }
    // Next.js global polyfill
    if (typeof atob === 'function') {
        return atob;
    }
    throw new _errors_AmplifyError_mjs__WEBPACK_IMPORTED_MODULE_0__.AmplifyError({
        name: 'Base64EncoderError',
        message: 'Cannot resolve the `atob` function from the environment.',
    });
};


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/isBrowser.mjs":
/*!********************************************!*\
  !*** ../core/dist/esm/utils/isBrowser.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isBrowser: () => (/* binding */ isBrowser)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const isBrowser = () => typeof window !== 'undefined' && typeof window.document !== 'undefined';


//# sourceMappingURL=isBrowser.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/parseAmplifyConfig.mjs":
/*!*****************************************************!*\
  !*** ../core/dist/esm/utils/parseAmplifyConfig.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseAmplifyConfig: () => (/* binding */ parseAmplifyConfig)
/* harmony export */ });
/* harmony import */ var _parseAWSExports_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseAWSExports.mjs */ "../core/dist/esm/parseAWSExports.mjs");
/* harmony import */ var _parseAmplifyOutputs_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseAmplifyOutputs.mjs */ "../core/dist/esm/parseAmplifyOutputs.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Parses the variety of configuration shapes that Amplify can accept into a ResourcesConfig.
 *
 * @param amplifyConfig An Amplify configuration object conforming to one of the supported schemas.
 * @return A ResourcesConfig for the provided configuration object.
 */
const parseAmplifyConfig = (amplifyConfig) => {
    if (Object.keys(amplifyConfig).some(key => key.startsWith('aws_'))) {
        return (0,_parseAWSExports_mjs__WEBPACK_IMPORTED_MODULE_0__.parseAWSExports)(amplifyConfig);
    }
    else if ((0,_parseAmplifyOutputs_mjs__WEBPACK_IMPORTED_MODULE_1__.isAmplifyOutputs)(amplifyConfig)) {
        return (0,_parseAmplifyOutputs_mjs__WEBPACK_IMPORTED_MODULE_1__.parseAmplifyOutputs)(amplifyConfig);
    }
    else {
        return amplifyConfig;
    }
};


//# sourceMappingURL=parseAmplifyConfig.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/retry/constants.mjs":
/*!**************************************************!*\
  !*** ../core/dist/esm/utils/retry/constants.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MAX_DELAY_MS: () => (/* binding */ MAX_DELAY_MS)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const MAX_DELAY_MS = 5 * 60 * 1000;


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/retry/jitteredBackoff.mjs":
/*!********************************************************!*\
  !*** ../core/dist/esm/utils/retry/jitteredBackoff.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   jitteredBackoff: () => (/* binding */ jitteredBackoff)
/* harmony export */ });
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.mjs */ "../core/dist/esm/utils/retry/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @private
 * Internal use of Amplify only
 */
function jitteredBackoff(maxDelayMs = _constants_mjs__WEBPACK_IMPORTED_MODULE_0__.MAX_DELAY_MS) {
    const BASE_TIME_MS = 100;
    const JITTER_FACTOR = 100;
    return attempt => {
        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();
        return delay > maxDelayMs ? false : delay;
    };
}


//# sourceMappingURL=jitteredBackoff.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/sessionListener/constants.mjs":
/*!************************************************************!*\
  !*** ../core/dist/esm/utils/sessionListener/constants.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SESSION_START_EVENT: () => (/* binding */ SESSION_START_EVENT),
/* harmony export */   SESSION_STOP_EVENT: () => (/* binding */ SESSION_STOP_EVENT)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Standard session start & stop event names
const SESSION_START_EVENT = '_session.start';
const SESSION_STOP_EVENT = '_session.stop';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/urlSafeDecode.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/utils/urlSafeDecode.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   urlSafeDecode: () => (/* binding */ urlSafeDecode)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function urlSafeDecode(hex) {
    const matchArr = hex.match(/.{2}/g) || [];
    return matchArr.map(char => String.fromCharCode(parseInt(char, 16))).join('');
}


//# sourceMappingURL=urlSafeDecode.mjs.map


/***/ }),

/***/ "../core/dist/esm/utils/urlSafeEncode.mjs":
/*!************************************************!*\
  !*** ../core/dist/esm/utils/urlSafeEncode.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   urlSafeEncode: () => (/* binding */ urlSafeEncode)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function urlSafeEncode(str) {
    return str
        .split('')
        .map(char => char.charCodeAt(0).toString(16).padStart(2, '0'))
        .join('');
}


//# sourceMappingURL=urlSafeEncode.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/CanceledError.mjs":
/*!****************************************************!*\
  !*** ../storage/dist/esm/errors/CanceledError.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CanceledError: () => (/* binding */ CanceledError),
/* harmony export */   isCancelError: () => (/* binding */ isCancelError)
/* harmony export */ });
/* harmony import */ var _StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Internal-only class for CanceledError thrown by XHR handler or multipart upload when cancellation is invoked
 * without overwriting behavior.
 *
 * @internal
 */
class CanceledError extends _StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__.StorageError {
    constructor(params = {}) {
        super({
            name: 'CanceledError',
            message: 'Upload is canceled by user',
            ...params,
        });
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = CanceledError;
        Object.setPrototypeOf(this, CanceledError.prototype);
    }
}
/**
 * Check if an error is caused by user calling `cancel()` on a upload/download task. If an overwriting error is
 * supplied to `task.cancel(errorOverwrite)`, this function will return `false`.
 * @param {unknown} error The unknown exception to be checked.
 * @returns - A boolean indicating if the error was from an upload cancellation
 */
const isCancelError = (error) => !!error && error instanceof CanceledError;


//# sourceMappingURL=CanceledError.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/IntegrityError.mjs":
/*!*****************************************************!*\
  !*** ../storage/dist/esm/errors/IntegrityError.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IntegrityError: () => (/* binding */ IntegrityError)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class IntegrityError extends _StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__.StorageError {
    constructor(params = {
        name: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.AmplifyErrorCode.Unknown,
        message: 'An unknown error has occurred.',
        recoverySuggestion: 'This may be a bug. Please reach out to library authors.',
    }) {
        super(params);
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = IntegrityError;
        Object.setPrototypeOf(this, IntegrityError.prototype);
    }
}


//# sourceMappingURL=IntegrityError.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/StorageError.mjs":
/*!***************************************************!*\
  !*** ../storage/dist/esm/errors/StorageError.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StorageError: () => (/* binding */ StorageError)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/errors/AmplifyError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
class StorageError extends _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.AmplifyError {
    constructor(params) {
        super(params);
        // TODO: Delete the following 2 lines after we change the build target to >= es2015
        this.constructor = StorageError;
        Object.setPrototypeOf(this, StorageError.prototype);
    }
}


//# sourceMappingURL=StorageError.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/constants.mjs":
/*!************************************************!*\
  !*** ../storage/dist/esm/errors/constants.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   INVALID_STORAGE_INPUT: () => (/* binding */ INVALID_STORAGE_INPUT)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const INVALID_STORAGE_INPUT = 'InvalidStorageInput';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/types/validation.mjs":
/*!*******************************************************!*\
  !*** ../storage/dist/esm/errors/types/validation.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StorageValidationErrorCode: () => (/* binding */ StorageValidationErrorCode),
/* harmony export */   validationErrorMap: () => (/* binding */ validationErrorMap)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
var StorageValidationErrorCode;
(function (StorageValidationErrorCode) {
    StorageValidationErrorCode["NoCredentials"] = "NoCredentials";
    StorageValidationErrorCode["NoIdentityId"] = "NoIdentityId";
    StorageValidationErrorCode["NoKey"] = "NoKey";
    StorageValidationErrorCode["NoSourceKey"] = "NoSourceKey";
    StorageValidationErrorCode["NoDestinationKey"] = "NoDestinationKey";
    StorageValidationErrorCode["NoSourcePath"] = "NoSourcePath";
    StorageValidationErrorCode["NoDestinationPath"] = "NoDestinationPath";
    StorageValidationErrorCode["NoBucket"] = "NoBucket";
    StorageValidationErrorCode["NoRegion"] = "NoRegion";
    StorageValidationErrorCode["InvalidStorageBucket"] = "InvalidStorageBucket";
    StorageValidationErrorCode["InvalidCopyOperationStorageBucket"] = "InvalidCopyOperationStorageBucket";
    StorageValidationErrorCode["InvalidStorageOperationPrefixInput"] = "InvalidStorageOperationPrefixInput";
    StorageValidationErrorCode["InvalidStorageOperationInput"] = "InvalidStorageOperationInput";
    StorageValidationErrorCode["InvalidAWSAccountID"] = "InvalidAWSAccountID";
    StorageValidationErrorCode["InvalidStoragePathInput"] = "InvalidStoragePathInput";
    StorageValidationErrorCode["InvalidUploadSource"] = "InvalidUploadSource";
    StorageValidationErrorCode["ObjectIsTooLarge"] = "ObjectIsTooLarge";
    StorageValidationErrorCode["UrlExpirationMaxLimitExceed"] = "UrlExpirationMaxLimitExceed";
    StorageValidationErrorCode["InvalidLocationCredentialsCacheSize"] = "InvalidLocationCredentialsCacheSize";
    StorageValidationErrorCode["LocationCredentialsStoreDestroyed"] = "LocationCredentialsStoreDestroyed";
    StorageValidationErrorCode["InvalidS3Uri"] = "InvalidS3Uri";
    StorageValidationErrorCode["InvalidCustomEndpoint"] = "InvalidCustomEndpoint";
    StorageValidationErrorCode["ForcePathStyleEndpointNotSupported"] = "ForcePathStyleEndpointNotSupported";
    StorageValidationErrorCode["DnsIncompatibleBucketName"] = "DnsIncompatibleBucketName";
})(StorageValidationErrorCode || (StorageValidationErrorCode = {}));
const validationErrorMap = {
    [StorageValidationErrorCode.NoCredentials]: {
        message: 'Credentials should not be empty.',
    },
    [StorageValidationErrorCode.NoIdentityId]: {
        message: 'Missing identity ID when accessing objects in protected or private access level.',
    },
    [StorageValidationErrorCode.NoKey]: {
        message: 'Missing key in api call.',
    },
    [StorageValidationErrorCode.NoSourceKey]: {
        message: 'Missing source key in copy api call.',
    },
    [StorageValidationErrorCode.NoDestinationKey]: {
        message: 'Missing destination key in copy api call.',
    },
    [StorageValidationErrorCode.NoSourcePath]: {
        message: 'Missing source path in copy api call.',
    },
    [StorageValidationErrorCode.NoDestinationPath]: {
        message: 'Missing destination path in copy api call.',
    },
    [StorageValidationErrorCode.NoBucket]: {
        message: 'Missing bucket name while accessing object.',
    },
    [StorageValidationErrorCode.NoRegion]: {
        message: 'Missing region while accessing object.',
    },
    [StorageValidationErrorCode.UrlExpirationMaxLimitExceed]: {
        message: 'Url Expiration can not be greater than 7 Days.',
    },
    [StorageValidationErrorCode.ObjectIsTooLarge]: {
        message: 'Object size cannot not be greater than 5TB.',
    },
    [StorageValidationErrorCode.InvalidUploadSource]: {
        message: 'Upload source type can only be a `Blob`, `File`, `ArrayBuffer`, or `string`.',
    },
    [StorageValidationErrorCode.InvalidStorageOperationInput]: {
        message: 'Path or key parameter must be specified in the input. Both can not be specified at the same time.',
    },
    [StorageValidationErrorCode.InvalidAWSAccountID]: {
        message: 'Invalid AWS account ID was provided.',
    },
    [StorageValidationErrorCode.InvalidStorageOperationPrefixInput]: {
        message: 'Both path and prefix can not be specified at the same time.',
    },
    [StorageValidationErrorCode.InvalidStoragePathInput]: {
        message: 'Input `path` does not allow a leading slash (/).',
    },
    [StorageValidationErrorCode.InvalidLocationCredentialsCacheSize]: {
        message: 'locationCredentialsCacheSize must be a positive integer.',
    },
    [StorageValidationErrorCode.LocationCredentialsStoreDestroyed]: {
        message: `Location-specific credentials store has been destroyed.`,
    },
    [StorageValidationErrorCode.InvalidS3Uri]: {
        message: 'Invalid S3 URI.',
    },
    [StorageValidationErrorCode.InvalidStorageBucket]: {
        message: 'Unable to lookup bucket from provided name in Amplify configuration.',
    },
    [StorageValidationErrorCode.InvalidCopyOperationStorageBucket]: {
        message: 'Missing bucket option in either source or destination.',
    },
    [StorageValidationErrorCode.InvalidCustomEndpoint]: {
        message: 'Invalid S3 custom endpoint.',
    },
    [StorageValidationErrorCode.ForcePathStyleEndpointNotSupported]: {
        message: 'Path style URLs are not supported with S3 Transfer Acceleration.',
    },
    [StorageValidationErrorCode.DnsIncompatibleBucketName]: {
        message: `The bucket name isn't DNS compatible.`,
    },
};


//# sourceMappingURL=validation.mjs.map


/***/ }),

/***/ "../storage/dist/esm/errors/utils/assertValidationError.mjs":
/*!******************************************************************!*\
  !*** ../storage/dist/esm/errors/utils/assertValidationError.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assertValidationError: () => (/* binding */ assertValidationError)
/* harmony export */ });
/* harmony import */ var _types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function assertValidationError(assertion, name) {
    const { message, recoverySuggestion } = _types_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.validationErrorMap[name];
    if (!assertion) {
        throw new _StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageError({ name, message, recoverySuggestion });
    }
}


//# sourceMappingURL=assertValidationError.mjs.map


/***/ }),

/***/ "../storage/dist/esm/index.mjs":
/*!*************************************!*\
  !*** ../storage/dist/esm/index.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_PART_SIZE: () => (/* reexport safe */ _providers_s3_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_PART_SIZE),
/* harmony export */   StorageError: () => (/* reexport safe */ _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_9__.StorageError),
/* harmony export */   copy: () => (/* reexport safe */ _providers_s3_apis_copy_mjs__WEBPACK_IMPORTED_MODULE_5__.copy),
/* harmony export */   downloadData: () => (/* reexport safe */ _providers_s3_apis_downloadData_mjs__WEBPACK_IMPORTED_MODULE_1__.downloadData),
/* harmony export */   getProperties: () => (/* reexport safe */ _providers_s3_apis_getProperties_mjs__WEBPACK_IMPORTED_MODULE_4__.getProperties),
/* harmony export */   getUrl: () => (/* reexport safe */ _providers_s3_apis_getUrl_mjs__WEBPACK_IMPORTED_MODULE_6__.getUrl),
/* harmony export */   isCancelError: () => (/* reexport safe */ _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_8__.isCancelError),
/* harmony export */   list: () => (/* reexport safe */ _providers_s3_apis_list_mjs__WEBPACK_IMPORTED_MODULE_3__.list),
/* harmony export */   remove: () => (/* reexport safe */ _providers_s3_apis_remove_mjs__WEBPACK_IMPORTED_MODULE_2__.remove),
/* harmony export */   uploadData: () => (/* reexport safe */ _providers_s3_apis_uploadData_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadData)
/* harmony export */ });
/* harmony import */ var _providers_s3_apis_uploadData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./providers/s3/apis/uploadData.mjs */ "../storage/dist/esm/providers/s3/apis/uploadData.mjs");
/* harmony import */ var _providers_s3_apis_downloadData_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./providers/s3/apis/downloadData.mjs */ "../storage/dist/esm/providers/s3/apis/downloadData.mjs");
/* harmony import */ var _providers_s3_apis_remove_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./providers/s3/apis/remove.mjs */ "../storage/dist/esm/providers/s3/apis/remove.mjs");
/* harmony import */ var _providers_s3_apis_list_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./providers/s3/apis/list.mjs */ "../storage/dist/esm/providers/s3/apis/list.mjs");
/* harmony import */ var _providers_s3_apis_getProperties_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./providers/s3/apis/getProperties.mjs */ "../storage/dist/esm/providers/s3/apis/getProperties.mjs");
/* harmony import */ var _providers_s3_apis_copy_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./providers/s3/apis/copy.mjs */ "../storage/dist/esm/providers/s3/apis/copy.mjs");
/* harmony import */ var _providers_s3_apis_getUrl_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./providers/s3/apis/getUrl.mjs */ "../storage/dist/esm/providers/s3/apis/getUrl.mjs");
/* harmony import */ var _providers_s3_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./providers/s3/utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./errors/CanceledError.mjs */ "../storage/dist/esm/errors/CanceledError.mjs");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");










//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/copy.mjs":
/*!******************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/copy.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   copy: () => (/* binding */ copy)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_copy_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/copy.mjs */ "../storage/dist/esm/providers/s3/apis/internal/copy.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function copy(input) {
    return (0,_internal_copy_mjs__WEBPACK_IMPORTED_MODULE_0__.copy)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=copy.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/downloadData.mjs":
/*!**************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/downloadData.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   downloadData: () => (/* binding */ downloadData)
/* harmony export */ });
/* harmony import */ var _internal_downloadData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/downloadData.mjs */ "../storage/dist/esm/providers/s3/apis/internal/downloadData.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function downloadData(input) {
    return (0,_internal_downloadData_mjs__WEBPACK_IMPORTED_MODULE_0__.downloadData)(input);
}


//# sourceMappingURL=downloadData.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/getProperties.mjs":
/*!***************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/getProperties.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getProperties: () => (/* binding */ getProperties)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_getProperties_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/getProperties.mjs */ "../storage/dist/esm/providers/s3/apis/internal/getProperties.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function getProperties(input) {
    return (0,_internal_getProperties_mjs__WEBPACK_IMPORTED_MODULE_0__.getProperties)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=getProperties.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/getUrl.mjs":
/*!********************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/getUrl.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUrl: () => (/* binding */ getUrl)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_getUrl_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/getUrl.mjs */ "../storage/dist/esm/providers/s3/apis/internal/getUrl.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function getUrl(input) {
    return (0,_internal_getUrl_mjs__WEBPACK_IMPORTED_MODULE_0__.getUrl)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=getUrl.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/copy.mjs":
/*!***************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/copy.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   copy: () => (/* binding */ copy),
/* harmony export */   copyWithKey: () => (/* binding */ copyWithKey)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_isInputWithPath_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/isInputWithPath.mjs */ "../storage/dist/esm/providers/s3/utils/isInputWithPath.mjs");
/* harmony import */ var _utils_client_s3data_copyObject_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/client/s3data/copyObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/copyObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");




























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const isCopyInputWithPath = (input) => (0,_utils_isInputWithPath_mjs__WEBPACK_IMPORTED_MODULE_3__.isInputWithPath)(input.source);
const storageBucketAssertion = (sourceBucket, destBucket) => {
    /**  For multi-bucket, both source and destination bucket needs to be passed in
     *   or both can be undefined and we fallback to singleton's default value
     */
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(
    // Both src & dest bucket option is present is acceptable
    (sourceBucket !== undefined && destBucket !== undefined) ||
        // or both are undefined is also acceptable
        (!destBucket && !sourceBucket), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.InvalidCopyOperationStorageBucket);
};
const copy = async (amplify, input) => {
    return isCopyInputWithPath(input)
        ? copyWithPath(amplify, input)
        : copyWithKey(amplify, input);
};
const copyWithPath = async (amplify, input) => {
    const { source, destination } = input;
    storageBucketAssertion(source.bucket, destination.bucket);
    const { bucket: sourceBucket } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_6__.resolveS3ConfigAndInput)(amplify, {
        path: input.source.path,
        options: {
            locationCredentialsProvider: input.options?.locationCredentialsProvider,
            ...input.source,
        },
    });
    // The bucket, region, credentials of s3 client are resolved from destination.
    // Whereas the source bucket and path are a input parameter of S3 copy operation.
    const { s3Config, bucket: destBucket, identityId, } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_6__.resolveS3ConfigAndInput)(amplify, {
        path: input.destination.path,
        options: {
            locationCredentialsProvider: input.options?.locationCredentialsProvider,
            customEndpoint: input.options?.customEndpoint,
            ...input.destination,
        },
    }); // resolveS3ConfigAndInput does not make extra API calls or storage access if called repeatedly.
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!!source.path, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.NoSourcePath);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!!destination.path, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.NoDestinationPath);
    const { objectKey: sourcePath } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_7__.validateStorageOperationInput)(source, identityId);
    const { objectKey: destinationPath } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_7__.validateStorageOperationInput)(destination, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_8__.validateBucketOwnerID)(source.expectedBucketOwner);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_8__.validateBucketOwnerID)(destination.expectedBucketOwner);
    const finalCopySource = `${sourceBucket}/${sourcePath}`;
    const finalCopyDestination = destinationPath;
    _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_9__.logger.debug(`copying "${finalCopySource}" to "${finalCopyDestination}".`);
    await serviceCopy({
        source: finalCopySource,
        destination: finalCopyDestination,
        bucket: destBucket,
        s3Config,
        notModifiedSince: input.source.notModifiedSince,
        eTag: input.source.eTag,
        expectedSourceBucketOwner: input.source?.expectedBucketOwner,
        expectedBucketOwner: input.destination?.expectedBucketOwner,
    });
    return { path: finalCopyDestination };
};
/** @deprecated Use {@link copyWithPath} instead. */
const copyWithKey = async (amplify, input) => {
    const { source, destination } = input;
    storageBucketAssertion(source.bucket, destination.bucket);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!!source.key, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.NoSourceKey);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!!destination.key, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.NoDestinationKey);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_8__.validateBucketOwnerID)(source.expectedBucketOwner);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_8__.validateBucketOwnerID)(destination.expectedBucketOwner);
    const { bucket: sourceBucket, keyPrefix: sourceKeyPrefix } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_6__.resolveS3ConfigAndInput)(amplify, {
        ...input,
        options: {
            // @ts-expect-error: 'options' does not exist on type 'CopyInput'. In case of JS users set the location
            // credentials provider option, resolveS3ConfigAndInput will throw validation error.
            locationCredentialsProvider: input.options?.locationCredentialsProvider,
            ...input.source,
        },
    });
    // The bucket, region, credentials of s3 client are resolved from destination.
    // Whereas the source bucket and path are a input parameter of S3 copy operation.
    const { s3Config, bucket: destBucket, keyPrefix: destinationKeyPrefix, } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_6__.resolveS3ConfigAndInput)(amplify, {
        ...input,
        options: {
            // @ts-expect-error: 'options' does not exist on type 'CopyInput'. In case of JS users set the location
            // credentials provider option, resolveS3ConfigAndInput will throw validation error.
            locationCredentialsProvider: input.options?.locationCredentialsProvider,
            ...input.destination,
        },
    }); // resolveS3ConfigAndInput does not make extra API calls or storage access if called repeatedly.
    // TODO(ashwinkumar6) V6-logger: warn `You may copy files from another user if the source level is "protected", currently it's ${srcLevel}`
    const finalCopySource = `${sourceBucket}/${sourceKeyPrefix}${source.key}`;
    const finalCopyDestination = `${destinationKeyPrefix}${destination.key}`;
    _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_9__.logger.debug(`copying "${finalCopySource}" to "${finalCopyDestination}".`);
    await serviceCopy({
        source: finalCopySource,
        destination: finalCopyDestination,
        bucket: destBucket,
        s3Config,
        notModifiedSince: input.source.notModifiedSince,
        eTag: input.source.eTag,
        expectedSourceBucketOwner: input.source?.expectedBucketOwner,
        expectedBucketOwner: input.destination?.expectedBucketOwner,
    });
    return {
        key: destination.key,
    };
};
const serviceCopy = async ({ source, destination, bucket, s3Config, notModifiedSince, eTag, expectedSourceBucketOwner, expectedBucketOwner, }) => {
    await (0,_utils_client_s3data_copyObject_mjs__WEBPACK_IMPORTED_MODULE_10__.copyObject)({
        ...s3Config,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_11__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__.StorageAction.Copy),
    }, {
        Bucket: bucket,
        CopySource: source,
        Key: destination,
        MetadataDirective: 'COPY',
        CopySourceIfMatch: eTag,
        CopySourceIfUnmodifiedSince: notModifiedSince,
        ExpectedSourceBucketOwner: expectedSourceBucketOwner,
        ExpectedBucketOwner: expectedBucketOwner,
    });
};


//# sourceMappingURL=copy.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/downloadData.mjs":
/*!***********************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/downloadData.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   downloadData: () => (/* binding */ downloadData)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_transferTask_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/transferTask.mjs */ "../storage/dist/esm/providers/s3/utils/transferTask.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_getObject_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/client/s3data/getObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/getObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");





























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const downloadData = (input) => {
    const abortController = new AbortController();
    const downloadTask = (0,_utils_transferTask_mjs__WEBPACK_IMPORTED_MODULE_3__.createDownloadTask)({
        job: downloadDataJob(input, abortController.signal),
        onCancel: (message) => {
            abortController.abort(message);
        },
    });
    return downloadTask;
};
const downloadDataJob = (downloadDataInput, abortSignal) => async () => {
    const { options: downloadDataOptions } = downloadDataInput;
    const { bucket, keyPrefix, s3Config, identityId } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_4__.resolveS3ConfigAndInput)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.Amplify, downloadDataInput);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_6__.validateStorageOperationInput)(downloadDataInput, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_7__.validateBucketOwnerID)(downloadDataOptions?.expectedBucketOwner);
    const finalKey = inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;
    _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_9__.logger.debug(`download ${objectKey} from ${finalKey}.`);
    const { Body: body, LastModified: lastModified, ContentLength: size, ETag: eTag, Metadata: metadata, VersionId: versionId, ContentType: contentType, } = await (0,_utils_client_s3data_getObject_mjs__WEBPACK_IMPORTED_MODULE_10__.getObject)({
        ...s3Config,
        abortSignal,
        onDownloadProgress: downloadDataOptions?.onProgress,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_11__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_12__.StorageAction.DownloadData),
    }, {
        Bucket: bucket,
        Key: finalKey,
        ...(downloadDataOptions?.bytesRange && {
            Range: `bytes=${downloadDataOptions.bytesRange.start}-${downloadDataOptions.bytesRange.end}`,
        }),
        ExpectedBucketOwner: downloadDataOptions?.expectedBucketOwner,
    });
    const result = {
        body,
        lastModified,
        size,
        contentType,
        eTag,
        metadata,
        versionId,
    };
    return inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__.STORAGE_INPUT_KEY
        ? { key: objectKey, ...result }
        : { path: objectKey, ...result };
};


//# sourceMappingURL=downloadData.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/getProperties.mjs":
/*!************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/getProperties.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getProperties: () => (/* binding */ getProperties)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_headObject_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/client/s3data/headObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/headObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");



























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getProperties = async (amplify, input, action) => {
    const { s3Config, bucket, keyPrefix, identityId } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveS3ConfigAndInput)(amplify, input);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__.validateStorageOperationInput)(input, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__.validateBucketOwnerID)(input.options?.expectedBucketOwner);
    const finalKey = inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;
    _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`get properties of ${objectKey} from ${finalKey}`);
    const response = await (0,_utils_client_s3data_headObject_mjs__WEBPACK_IMPORTED_MODULE_8__.headObject)({
        ...s3Config,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__.getStorageUserAgentValue)(action ?? _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.StorageAction.GetProperties),
    }, {
        Bucket: bucket,
        Key: finalKey,
        ExpectedBucketOwner: input.options?.expectedBucketOwner,
    });
    const result = {
        contentType: response.ContentType,
        size: response.ContentLength,
        eTag: response.ETag,
        lastModified: response.LastModified,
        metadata: response.Metadata,
        versionId: response.VersionId,
    };
    return inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY
        ? { key: objectKey, ...result }
        : { path: objectKey, ...result };
};


//# sourceMappingURL=getProperties.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/getUrl.mjs":
/*!*****************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/getUrl.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUrl: () => (/* binding */ getUrl)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _utils_client_s3data_getObject_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/client/s3data/getObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/getObject.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utils/constructContentDisposition.mjs */ "../storage/dist/esm/providers/s3/utils/constructContentDisposition.mjs");
/* harmony import */ var _getProperties_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getProperties.mjs */ "../storage/dist/esm/providers/s3/apis/internal/getProperties.mjs");





























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getUrl = async (amplify, input) => {
    const { options: getUrlOptions } = input;
    const { s3Config, keyPrefix, bucket, identityId } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveS3ConfigAndInput)(amplify, input);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__.validateStorageOperationInput)(input, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__.validateBucketOwnerID)(getUrlOptions?.expectedBucketOwner);
    const finalKey = inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;
    if (getUrlOptions?.validateObjectExistence) {
        await (0,_getProperties_mjs__WEBPACK_IMPORTED_MODULE_7__.getProperties)(amplify, input, _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_8__.StorageAction.GetUrl);
    }
    let urlExpirationInSec = getUrlOptions?.expiresIn ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_PRESIGN_EXPIRATION;
    const resolvedCredential = typeof s3Config.credentials === 'function'
        ? await s3Config.credentials()
        : s3Config.credentials;
    const awsCredExpiration = resolvedCredential.expiration;
    if (awsCredExpiration) {
        const awsCredExpirationInSec = Math.floor((awsCredExpiration.getTime() - Date.now()) / 1000);
        urlExpirationInSec = Math.min(awsCredExpirationInSec, urlExpirationInSec);
    }
    const maxUrlExpirationInSec = _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.MAX_URL_EXPIRATION / 1000;
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_9__.assertValidationError)(urlExpirationInSec <= maxUrlExpirationInSec, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_10__.StorageValidationErrorCode.UrlExpirationMaxLimitExceed);
    // expiresAt is the minimum of credential expiration and url expiration
    return {
        url: await (0,_utils_client_s3data_getObject_mjs__WEBPACK_IMPORTED_MODULE_11__.getPresignedGetObjectUrl)({
            ...s3Config,
            credentials: resolvedCredential,
            expiration: urlExpirationInSec,
        }, {
            Bucket: bucket,
            Key: finalKey,
            ...(getUrlOptions?.contentDisposition && {
                ResponseContentDisposition: (0,_utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_12__.constructContentDisposition)(getUrlOptions.contentDisposition),
            }),
            ...(getUrlOptions?.contentType && {
                ResponseContentType: getUrlOptions.contentType,
            }),
            ExpectedBucketOwner: getUrlOptions?.expectedBucketOwner,
        }),
        expiresAt: new Date(Date.now() + urlExpirationInSec * 1000),
    };
};


//# sourceMappingURL=getUrl.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/list.mjs":
/*!***************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/list.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   list: () => (/* binding */ list)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_validateStorageOperationInputWithPrefix_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/validateStorageOperationInputWithPrefix.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInputWithPrefix.mjs");
/* harmony import */ var _utils_urlDecoder_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utils/urlDecoder.mjs */ "../storage/dist/esm/providers/s3/utils/urlDecoder.mjs");
/* harmony import */ var _utils_client_s3data_listObjectsV2_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/client/s3data/listObjectsV2.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/listObjectsV2.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");





























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const MAX_PAGE_SIZE = 1000;
const list = async (amplify, input) => {
    const { options = {} } = input;
    const { s3Config, bucket, keyPrefix: generatedPrefix, identityId, } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveS3ConfigAndInput)(amplify, input);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInputWithPrefix_mjs__WEBPACK_IMPORTED_MODULE_4__.validateStorageOperationInputWithPrefix)(input, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__.validateBucketOwnerID)(options.expectedBucketOwner);
    const isInputWithPrefix = inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_PREFIX;
    // @ts-expect-error pageSize and nextToken should not coexist with listAll
    if (options?.listAll && (options?.pageSize || options?.nextToken)) {
        const anyOptions = options;
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`listAll is set to true, ignoring ${anyOptions?.pageSize ? `pageSize: ${anyOptions?.pageSize}` : ''} ${anyOptions?.nextToken ? `nextToken: ${anyOptions?.nextToken}` : ''}.`);
    }
    const listParams = {
        Bucket: bucket,
        Prefix: isInputWithPrefix ? `${generatedPrefix}${objectKey}` : objectKey,
        MaxKeys: options?.listAll ? undefined : options?.pageSize,
        ContinuationToken: options?.listAll ? undefined : options?.nextToken,
        Delimiter: getDelimiter(options),
        ExpectedBucketOwner: options?.expectedBucketOwner,
        EncodingType: 'url',
    };
    _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`listing items from "${listParams.Prefix}"`);
    const listInputArgs = {
        s3Config,
        listParams,
    };
    if (options.listAll) {
        if (isInputWithPrefix) {
            return _listAllWithPrefix({
                ...listInputArgs,
                generatedPrefix,
            });
        }
        else {
            return _listAllWithPath(listInputArgs);
        }
    }
    else {
        if (isInputWithPrefix) {
            return _listWithPrefix({ ...listInputArgs, generatedPrefix });
        }
        else {
            return _listWithPath(listInputArgs);
        }
    }
};
/** @deprecated Use {@link _listAllWithPath} instead. */
const _listAllWithPrefix = async ({ s3Config, listParams, generatedPrefix, }) => {
    const listResult = [];
    let continuationToken = listParams.ContinuationToken;
    do {
        const { items: pageResults, nextToken: pageNextToken } = await _listWithPrefix({
            generatedPrefix,
            s3Config,
            listParams: {
                ...listParams,
                ContinuationToken: continuationToken,
                MaxKeys: MAX_PAGE_SIZE,
            },
        });
        listResult.push(...pageResults);
        continuationToken = pageNextToken;
    } while (continuationToken);
    return {
        items: listResult,
    };
};
/** @deprecated Use {@link _listWithPath} instead. */
const _listWithPrefix = async ({ s3Config, listParams, generatedPrefix, }) => {
    const listParamsClone = { ...listParams };
    if (!listParamsClone.MaxKeys || listParamsClone.MaxKeys > MAX_PAGE_SIZE) {
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`defaulting pageSize to ${MAX_PAGE_SIZE}.`);
        listParamsClone.MaxKeys = MAX_PAGE_SIZE;
    }
    const response = await (0,_utils_client_s3data_listObjectsV2_mjs__WEBPACK_IMPORTED_MODULE_8__.listObjectsV2)({
        ...s3Config,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.StorageAction.List),
    }, listParamsClone);
    const listOutput = decodeEncodedElements(response);
    validateEchoedElements(listParamsClone, listOutput);
    if (!listOutput?.Contents) {
        return {
            items: [],
        };
    }
    return {
        items: listOutput.Contents.map(item => ({
            key: generatedPrefix
                ? item.Key.substring(generatedPrefix.length)
                : item.Key,
            eTag: item.ETag,
            lastModified: item.LastModified,
            size: item.Size,
        })),
        nextToken: listOutput.NextContinuationToken,
    };
};
const _listAllWithPath = async ({ s3Config, listParams, }) => {
    const listResult = [];
    const excludedSubpaths = [];
    let continuationToken = listParams.ContinuationToken;
    do {
        const { items: pageResults, excludedSubpaths: pageExcludedSubpaths, nextToken: pageNextToken, } = await _listWithPath({
            s3Config,
            listParams: {
                ...listParams,
                ContinuationToken: continuationToken,
                MaxKeys: MAX_PAGE_SIZE,
            },
        });
        listResult.push(...pageResults);
        excludedSubpaths.push(...(pageExcludedSubpaths ?? []));
        continuationToken = pageNextToken;
    } while (continuationToken);
    return {
        items: listResult,
        excludedSubpaths,
    };
};
const _listWithPath = async ({ s3Config, listParams, }) => {
    const listParamsClone = { ...listParams };
    if (!listParamsClone.MaxKeys || listParamsClone.MaxKeys > MAX_PAGE_SIZE) {
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`defaulting pageSize to ${MAX_PAGE_SIZE}.`);
        listParamsClone.MaxKeys = MAX_PAGE_SIZE;
    }
    const response = await (0,_utils_client_s3data_listObjectsV2_mjs__WEBPACK_IMPORTED_MODULE_8__.listObjectsV2)({
        ...s3Config,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.StorageAction.List),
    }, listParamsClone);
    const listOutput = decodeEncodedElements(response);
    validateEchoedElements(listParamsClone, listOutput);
    const { Contents: contents, NextContinuationToken: nextContinuationToken, CommonPrefixes: commonPrefixes, } = listOutput;
    const excludedSubpaths = commonPrefixes && mapCommonPrefixesToExcludedSubpaths(commonPrefixes);
    if (!contents) {
        return {
            items: [],
            nextToken: nextContinuationToken,
            excludedSubpaths,
        };
    }
    return {
        items: contents.map(item => ({
            path: item.Key,
            eTag: item.ETag,
            lastModified: item.LastModified,
            size: item.Size,
        })),
        nextToken: nextContinuationToken,
        excludedSubpaths,
    };
};
const mapCommonPrefixesToExcludedSubpaths = (commonPrefixes) => {
    return commonPrefixes.reduce((mappedSubpaths, { Prefix }) => {
        if (Prefix) {
            mappedSubpaths.push(Prefix);
        }
        return mappedSubpaths;
    }, []);
};
const getDelimiter = (options) => {
    if (options?.subpathStrategy?.strategy === 'exclude') {
        return options?.subpathStrategy?.delimiter ?? _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_DELIMITER;
    }
};
const validateEchoedElements = (listInput, listOutput) => {
    const validEchoedParameters = listInput.Bucket === listOutput.Name &&
        listInput.Delimiter === listOutput.Delimiter &&
        listInput.MaxKeys === listOutput.MaxKeys &&
        listInput.Prefix === listOutput.Prefix &&
        listInput.ContinuationToken === listOutput.ContinuationToken;
    if (!validEchoedParameters) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_11__.IntegrityError();
    }
};
/**
 * Decodes URL-encoded elements in the S3 `ListObjectsV2Output` response when `EncodingType` is `'url'`.
 * Applies to values for 'Delimiter', 'Prefix', 'StartAfter' and 'Key' in the response.
 */
const decodeEncodedElements = (listOutput) => {
    if (listOutput.EncodingType !== 'url') {
        return listOutput;
    }
    const decodedListOutput = { ...listOutput };
    // Decode top-level properties
    ['Delimiter', 'Prefix', 'StartAfter'].forEach(prop => {
        const value = listOutput[prop];
        if (typeof value === 'string') {
            decodedListOutput[prop] = (0,_utils_urlDecoder_mjs__WEBPACK_IMPORTED_MODULE_12__.urlDecode)(value);
        }
    });
    // Decode 'Key' in each item of 'Contents', if it exists
    if (listOutput.Contents) {
        decodedListOutput.Contents = listOutput.Contents.map(content => ({
            ...content,
            Key: content.Key ? (0,_utils_urlDecoder_mjs__WEBPACK_IMPORTED_MODULE_12__.urlDecode)(content.Key) : content.Key,
        }));
    }
    // Decode 'Prefix' in each item of 'CommonPrefixes', if it exists
    if (listOutput.CommonPrefixes) {
        decodedListOutput.CommonPrefixes = listOutput.CommonPrefixes.map(content => ({
            ...content,
            Prefix: content.Prefix ? (0,_utils_urlDecoder_mjs__WEBPACK_IMPORTED_MODULE_12__.urlDecode)(content.Prefix) : content.Prefix,
        }));
    }
    return decodedListOutput;
};


//# sourceMappingURL=list.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/remove.mjs":
/*!*****************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/remove.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   remove: () => (/* binding */ remove)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?12d1");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?83be");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_deleteObject_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/client/s3data/deleteObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/deleteObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");



























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const remove = async (amplify, input) => {
    const { s3Config, keyPrefix, bucket, identityId } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveS3ConfigAndInput)(amplify, input);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_4__.validateStorageOperationInput)(input, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_5__.validateBucketOwnerID)(input.options?.expectedBucketOwner);
    let finalKey;
    if (inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY) {
        finalKey = `${keyPrefix}${objectKey}`;
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`remove "${objectKey}" from "${finalKey}".`);
    }
    else {
        finalKey = objectKey;
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_7__.logger.debug(`removing object in path "${finalKey}"`);
    }
    await (0,_utils_client_s3data_deleteObject_mjs__WEBPACK_IMPORTED_MODULE_8__.deleteObject)({
        ...s3Config,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_9__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.StorageAction.Remove),
    }, {
        Bucket: bucket,
        Key: finalKey,
        ExpectedBucketOwner: input.options?.expectedBucketOwner,
    });
    return inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY
        ? {
            key: objectKey,
        }
        : {
            path: objectKey,
        };
};


//# sourceMappingURL=remove.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/byteLength.mjs":
/*!********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/byteLength.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   byteLength: () => (/* binding */ byteLength)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Calculate the total size of the data to be uploaded. The total size is not required for multipart upload, as it's
 * only used in progress report.
 */
const byteLength = (input) => {
    if (input === null || input === undefined)
        return 0;
    if (typeof input === 'string') {
        const blob = new Blob([input]);
        return blob.size;
    }
    else if (typeof input.byteLength === 'number') {
        // handles Uint8Array, ArrayBuffer, Buffer, and ArrayBufferView
        return input.byteLength;
    }
    else if (typeof input.size === 'number') {
        // handles browser File object
        return input.size;
    }
    return undefined;
};


//# sourceMappingURL=byteLength.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/index.mjs":
/*!***************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/index.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadData: () => (/* binding */ uploadData)
/* harmony export */ });
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?16bd");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?cd36");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_transferTask_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/transferTask.mjs */ "../storage/dist/esm/providers/s3/utils/transferTask.mjs");
/* harmony import */ var _byteLength_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./byteLength.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/byteLength.mjs");
/* harmony import */ var _putObjectJob_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./putObjectJob.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/putObjectJob.mjs");
/* harmony import */ var _multipart_uploadHandlers_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./multipart/uploadHandlers.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadHandlers.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const uploadData = (input) => {
    const { data } = input;
    const dataByteLength = (0,_byteLength_mjs__WEBPACK_IMPORTED_MODULE_3__.byteLength)(data);
    // Using InvalidUploadSource error code because the input data must NOT be any
    // of permitted Blob, string, ArrayBuffer(View) if byteLength could not be determined.
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(dataByteLength !== undefined, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.InvalidUploadSource);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(dataByteLength <= _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.MAX_OBJECT_SIZE, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.ObjectIsTooLarge);
    if (dataByteLength <= _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_PART_SIZE) {
        // Single part upload
        const abortController = new AbortController();
        return (0,_utils_transferTask_mjs__WEBPACK_IMPORTED_MODULE_7__.createUploadTask)({
            isMultipartUpload: false,
            job: (0,_putObjectJob_mjs__WEBPACK_IMPORTED_MODULE_8__.putObjectJob)(input, abortController.signal, dataByteLength),
            onCancel: (message) => {
                abortController.abort(message);
            },
        });
    }
    else {
        // Multipart upload
        const { multipartUploadJob, onPause, onResume, onCancel } = (0,_multipart_uploadHandlers_mjs__WEBPACK_IMPORTED_MODULE_9__.getMultipartUploadHandlers)(input, dataByteLength);
        return (0,_utils_transferTask_mjs__WEBPACK_IMPORTED_MODULE_7__.createUploadTask)({
            isMultipartUpload: true,
            job: multipartUploadJob,
            onCancel: (message) => {
                onCancel(message);
            },
            onPause,
            onResume,
        });
    }
};


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/calculatePartSize.mjs":
/*!*************************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/calculatePartSize.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculatePartSize: () => (/* binding */ calculatePartSize)
/* harmony export */ });
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const calculatePartSize = (totalSize) => {
    if (!totalSize) {
        return _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PART_SIZE;
    }
    let partSize = _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PART_SIZE;
    let partsCount = Math.ceil(totalSize / partSize);
    while (partsCount > _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.MAX_PARTS_COUNT) {
        partSize *= 2;
        partsCount = Math.ceil(totalSize / partSize);
    }
    return partSize;
};


//# sourceMappingURL=calculatePartSize.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/getDataChunker.mjs":
/*!**********************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/getDataChunker.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDataChunker: () => (/* binding */ getDataChunker)
/* harmony export */ });
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");
/* harmony import */ var _calculatePartSize_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calculatePartSize.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/calculatePartSize.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const getDataChunker = (data, totalSize) => {
    const partSize = (0,_calculatePartSize_mjs__WEBPACK_IMPORTED_MODULE_0__.calculatePartSize)(totalSize);
    if (data instanceof Blob) {
        return helper(data, 0, data.size, partSize);
    }
    else if (ArrayBuffer.isView(data)) {
        return helper(data.buffer, data.byteOffset, data.byteLength, partSize);
    }
    else if (data instanceof ArrayBuffer) {
        return helper(data, 0, data.byteLength, partSize);
    }
    else if (typeof data === 'string') {
        const blob = new Blob([data]);
        return getDataChunker(blob, blob.size);
    }
    else {
        throw new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageError({
            name: _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.StorageValidationErrorCode.InvalidUploadSource,
            ..._errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.validationErrorMap[_errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.StorageValidationErrorCode.InvalidUploadSource],
        });
    }
};
const helper = function* (buffer, byteOffset, byteLength, partSize) {
    let partNumber = 1;
    let startByte = byteOffset;
    let endByte = byteOffset + Math.min(partSize, byteLength);
    while (endByte < byteLength + byteOffset) {
        yield {
            partNumber,
            data: buffer.slice(startByte, endByte),
            size: partSize,
        };
        partNumber += 1;
        startByte = endByte;
        endByte = startByte + partSize;
    }
    yield {
        partNumber,
        data: buffer.slice(startByte, byteLength + byteOffset),
        size: byteLength + byteOffset - startByte,
    };
};


//# sourceMappingURL=getDataChunker.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/initialUpload.mjs":
/*!*********************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/initialUpload.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadOrCreateMultipartUpload: () => (/* binding */ loadOrCreateMultipartUpload)
/* harmony export */ });
/* harmony import */ var _utils_client_s3data_createMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/client/s3data/createMultipartUpload.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/createMultipartUpload.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utils/constructContentDisposition.mjs */ "../storage/dist/esm/providers/s3/utils/constructContentDisposition.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_getCombinedCrc32_native_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/getCombinedCrc32.native.mjs */ "../storage/dist/esm/providers/s3/utils/getCombinedCrc32.native.mjs");
/* harmony import */ var _uploadCache_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uploadCache.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadCache.mjs");




















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Load the in-progress multipart upload from local storage or async storage(RN) if it exists, or create a new multipart
 * upload.
 *
 * @internal
 */
const loadOrCreateMultipartUpload = async ({ s3Config, data, size, contentType, bucket, accessLevel, keyPrefix, key, contentDisposition, contentEncoding, metadata, abortSignal, checksumAlgorithm, optionsHash, resumableUploadsCache, expectedBucketOwner, }) => {
    const finalKey = keyPrefix !== undefined ? keyPrefix + key : key;
    let cachedUpload;
    if (!resumableUploadsCache) {
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug('uploaded cache instance cannot be determined, skipping cache.');
        cachedUpload = undefined;
    }
    else {
        const uploadCacheKey = (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_1__.getUploadsCacheKey)({
            size,
            contentType,
            file: data instanceof File ? data : undefined,
            bucket,
            accessLevel,
            key,
            optionsHash,
        });
        const cachedUploadParts = await (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_1__.findCachedUploadParts)({
            s3Config,
            cacheKey: uploadCacheKey,
            bucket,
            finalKey,
            resumableUploadsCache,
        });
        cachedUpload = cachedUploadParts
            ? { ...cachedUploadParts, uploadCacheKey }
            : undefined;
    }
    if (cachedUpload) {
        return {
            uploadId: cachedUpload.uploadId,
            cachedParts: cachedUpload.parts,
            finalCrc32: cachedUpload.finalCrc32,
        };
    }
    else {
        const finalCrc32 = checksumAlgorithm === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.CHECKSUM_ALGORITHM_CRC32
            ? await (0,_utils_getCombinedCrc32_native_mjs__WEBPACK_IMPORTED_MODULE_3__.getCombinedCrc32)(data, size)
            : undefined;
        const { UploadId } = await (0,_utils_client_s3data_createMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_4__.createMultipartUpload)({
            ...s3Config,
            abortSignal,
        }, {
            Bucket: bucket,
            Key: finalKey,
            ContentType: contentType,
            ContentDisposition: (0,_utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_5__.constructContentDisposition)(contentDisposition),
            ContentEncoding: contentEncoding,
            Metadata: metadata,
            ChecksumAlgorithm: finalCrc32 ? 'CRC32' : undefined,
            ExpectedBucketOwner: expectedBucketOwner,
        });
        if (resumableUploadsCache) {
            const uploadCacheKey = (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_1__.getUploadsCacheKey)({
                size,
                contentType,
                file: data instanceof File ? data : undefined,
                bucket,
                accessLevel,
                key,
                optionsHash,
            });
            await (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_1__.cacheMultipartUpload)(resumableUploadsCache, uploadCacheKey, {
                uploadId: UploadId,
                bucket,
                key,
                finalCrc32,
                fileName: data instanceof File ? data.name : '',
            });
        }
        return {
            uploadId: UploadId,
            cachedParts: [],
            finalCrc32,
        };
    }
};


//# sourceMappingURL=initialUpload.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/progressTracker.mjs":
/*!***********************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/progressTracker.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getConcurrentUploadsProgressTracker: () => (/* binding */ getConcurrentUploadsProgressTracker)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Track the progress from multiple concurrent uploads, and invoke the onProgress callback.
 *
 * @internal
 */
const getConcurrentUploadsProgressTracker = ({ size, onProgress, }) => {
    const transferredBytesPerListener = [];
    const getTransferredBytes = () => transferredBytesPerListener.reduce((acc, transferredBytes) => acc + transferredBytes, 0);
    return {
        getOnProgressListener: () => {
            transferredBytesPerListener.push(0);
            const listenerIndex = transferredBytesPerListener.length - 1;
            return (event) => {
                const { transferredBytes } = event;
                transferredBytesPerListener[listenerIndex] = transferredBytes;
                onProgress?.({
                    transferredBytes: getTransferredBytes(),
                    totalBytes: size,
                });
            };
        },
    };
};


//# sourceMappingURL=progressTracker.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadCache.mjs":
/*!*******************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadCache.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cacheMultipartUpload: () => (/* binding */ cacheMultipartUpload),
/* harmony export */   findCachedUploadParts: () => (/* binding */ findCachedUploadParts),
/* harmony export */   getUploadsCacheKey: () => (/* binding */ getUploadsCacheKey),
/* harmony export */   removeCachedUpload: () => (/* binding */ removeCachedUpload)
/* harmony export */ });
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_listParts_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/client/s3data/listParts.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/listParts.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");

















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const ONE_HOUR = 1000 * 60 * 60;
/**
 * Find the cached multipart upload id and get the parts that have been uploaded
 * with ListParts API. If the cached upload is expired(1 hour), return null.
 */
const findCachedUploadParts = async ({ resumableUploadsCache, cacheKey, s3Config, bucket, finalKey, }) => {
    const cachedUploads = await listCachedUploadTasks(resumableUploadsCache);
    if (!cachedUploads[cacheKey] ||
        cachedUploads[cacheKey].lastTouched < Date.now() - ONE_HOUR // Uploads are cached for 1 hour
    ) {
        return null;
    }
    const cachedUpload = cachedUploads[cacheKey];
    cachedUpload.lastTouched = Date.now();
    await resumableUploadsCache.setItem(_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.UPLOADS_STORAGE_KEY, JSON.stringify(cachedUploads));
    try {
        const { Parts = [] } = await (0,_utils_client_s3data_listParts_mjs__WEBPACK_IMPORTED_MODULE_1__.listParts)(s3Config, {
            Bucket: bucket,
            Key: finalKey,
            UploadId: cachedUpload.uploadId,
        });
        return {
            parts: Parts,
            uploadId: cachedUpload.uploadId,
            finalCrc32: cachedUpload.finalCrc32,
        };
    }
    catch (e) {
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_2__.logger.debug('failed to list cached parts, removing cached upload.');
        await removeCachedUpload(resumableUploadsCache, cacheKey);
        return null;
    }
};
const listCachedUploadTasks = async (resumableUploadsCache) => {
    try {
        return JSON.parse((await resumableUploadsCache.getItem(_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.UPLOADS_STORAGE_KEY)) ?? '{}');
    }
    catch (e) {
        _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_2__.logger.debug('failed to parse cached uploads record.');
        return {};
    }
};
/**
 * Get the cache key of a multipart upload. Data source cached by different: size, content type, bucket, access level,
 * key. If the data source is a File instance, the upload is additionally indexed by file name and last modified time.
 * So the library always created a new multipart upload if the file is modified.
 */
const getUploadsCacheKey = ({ file, size, contentType, bucket, accessLevel, key, optionsHash, }) => {
    let levelStr;
    const resolvedContentType = contentType ?? file?.type ?? 'application/octet-stream';
    // If no access level is defined, we're using custom gen2 access rules
    if (accessLevel === undefined) {
        levelStr = 'custom';
    }
    else {
        levelStr = accessLevel === 'guest' ? 'public' : accessLevel;
    }
    const baseId = `${optionsHash}_${size}_${resolvedContentType}_${bucket}_${levelStr}_${key}`;
    if (file) {
        return `${file.name}_${file.lastModified}_${baseId}`;
    }
    else {
        return baseId;
    }
};
const cacheMultipartUpload = async (resumableUploadsCache, cacheKey, fileMetadata) => {
    const cachedUploads = await listCachedUploadTasks(resumableUploadsCache);
    cachedUploads[cacheKey] = {
        ...fileMetadata,
        lastTouched: Date.now(),
    };
    await resumableUploadsCache.setItem(_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.UPLOADS_STORAGE_KEY, JSON.stringify(cachedUploads));
};
const removeCachedUpload = async (resumableUploadsCache, cacheKey) => {
    const cachedUploads = await listCachedUploadTasks(resumableUploadsCache);
    delete cachedUploads[cacheKey];
    await resumableUploadsCache.setItem(_utils_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.UPLOADS_STORAGE_KEY, JSON.stringify(cachedUploads));
};


//# sourceMappingURL=uploadCache.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadHandlers.mjs":
/*!**********************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadHandlers.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getMultipartUploadHandlers: () => (/* binding */ getMultipartUploadHandlers)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?85fe");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer */ "?1964");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../errors/CanceledError.mjs */ "../storage/dist/esm/errors/CanceledError.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_completeMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../utils/client/s3data/completeMultipartUpload.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/completeMultipartUpload.mjs");
/* harmony import */ var _utils_client_s3data_abortMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../utils/client/s3data/abortMultipartUpload.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/abortMultipartUpload.mjs");
/* harmony import */ var _utils_client_s3data_headObject_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../utils/client/s3data/headObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/headObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");
/* harmony import */ var _utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utils/crc32.mjs */ "../storage/dist/esm/providers/s3/utils/crc32.mjs");
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");
/* harmony import */ var _uploadPartExecutor_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./uploadPartExecutor.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadPartExecutor.mjs");
/* harmony import */ var _uploadCache_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./uploadCache.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadCache.mjs");
/* harmony import */ var _progressTracker_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./progressTracker.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/progressTracker.mjs");
/* harmony import */ var _initialUpload_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./initialUpload.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/initialUpload.mjs");
/* harmony import */ var _getDataChunker_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./getDataChunker.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/getDataChunker.mjs");
/* harmony import */ var _calculatePartSize_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./calculatePartSize.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/calculatePartSize.mjs");





































// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Create closure hiding the multipart upload implementation details and expose the upload job and control functions(
 * onPause, onResume, onCancel).
 *
 * @internal
 */
const getMultipartUploadHandlers = (uploadDataInput, size) => {
    let resolveCallback;
    let rejectCallback;
    let inProgressUpload;
    let resolvedS3Config;
    let abortController;
    let resolvedAccessLevel;
    let resolvedBucket;
    let resolvedKeyPrefix;
    let resolvedIdentityId;
    let uploadCacheKey;
    let finalKey;
    let expectedBucketOwner;
    // Special flag that differentiates HTTP requests abort error caused by pause() from ones caused by cancel().
    // The former one should NOT cause the upload job to throw, but cancels any pending HTTP requests.
    // This should be replaced by a special abort reason. However,the support of this API is lagged behind.
    let isAbortSignalFromPause = false;
    const { resumableUploadsCache } = uploadDataInput.options ?? {};
    const startUpload = async () => {
        const { options: uploadDataOptions, data } = uploadDataInput;
        const resolvedS3Options = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveS3ConfigAndInput)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.Amplify, uploadDataInput);
        abortController = new AbortController();
        isAbortSignalFromPause = false;
        resolvedS3Config = resolvedS3Options.s3Config;
        resolvedBucket = resolvedS3Options.bucket;
        resolvedIdentityId = resolvedS3Options.identityId;
        expectedBucketOwner = uploadDataOptions?.expectedBucketOwner;
        const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_5__.validateStorageOperationInput)(uploadDataInput, resolvedIdentityId);
        const { contentDisposition, contentEncoding, contentType = 'application/octet-stream', metadata, preventOverwrite, onProgress, } = uploadDataOptions ?? {};
        finalKey = objectKey;
        // Resolve "key" specific options
        if (inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY) {
            const accessLevel = uploadDataOptions
                ?.accessLevel;
            resolvedKeyPrefix = resolvedS3Options.keyPrefix;
            finalKey = resolvedKeyPrefix + objectKey;
            resolvedAccessLevel = resolveAccessLevel(accessLevel);
        }
        const optionsHash = (await (0,_utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_7__.calculateContentCRC32)(JSON.stringify(uploadDataOptions))).checksum;
        if (!inProgressUpload) {
            const { uploadId, cachedParts, finalCrc32 } = await (0,_initialUpload_mjs__WEBPACK_IMPORTED_MODULE_8__.loadOrCreateMultipartUpload)({
                s3Config: resolvedS3Config,
                accessLevel: resolvedAccessLevel,
                bucket: resolvedBucket,
                keyPrefix: resolvedKeyPrefix,
                key: objectKey,
                contentType,
                contentDisposition,
                contentEncoding,
                metadata,
                data,
                size,
                abortSignal: abortController.signal,
                checksumAlgorithm: uploadDataOptions?.checksumAlgorithm,
                optionsHash,
                resumableUploadsCache,
                expectedBucketOwner,
            });
            inProgressUpload = {
                uploadId,
                completedParts: cachedParts,
                finalCrc32,
            };
        }
        uploadCacheKey = size
            ? (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_9__.getUploadsCacheKey)({
                file: data instanceof File ? data : undefined,
                accessLevel: resolvedAccessLevel,
                contentType: uploadDataOptions?.contentType,
                bucket: resolvedBucket,
                size,
                key: objectKey,
                optionsHash,
            })
            : undefined;
        const dataChunker = (0,_getDataChunker_mjs__WEBPACK_IMPORTED_MODULE_10__.getDataChunker)(data, size);
        const completedPartNumberSet = new Set(inProgressUpload.completedParts.map(({ PartNumber }) => PartNumber));
        const onPartUploadCompletion = (partNumber, eTag, crc32) => {
            inProgressUpload?.completedParts.push({
                PartNumber: partNumber,
                ETag: eTag,
                // TODO: crc32 can always be added once RN also has an implementation
                ...(crc32 ? { ChecksumCRC32: crc32 } : {}),
            });
        };
        const concurrentUploadsProgressTracker = (0,_progressTracker_mjs__WEBPACK_IMPORTED_MODULE_11__.getConcurrentUploadsProgressTracker)({
            size,
            onProgress,
        });
        const concurrentUploadPartExecutors = [];
        for (let index = 0; index < _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_QUEUE_SIZE; index++) {
            concurrentUploadPartExecutors.push((0,_uploadPartExecutor_mjs__WEBPACK_IMPORTED_MODULE_12__.uploadPartExecutor)({
                dataChunkerGenerator: dataChunker,
                completedPartNumberSet,
                s3Config: resolvedS3Config,
                abortSignal: abortController.signal,
                bucket: resolvedBucket,
                finalKey,
                uploadId: inProgressUpload.uploadId,
                onPartUploadCompletion,
                onProgress: concurrentUploadsProgressTracker.getOnProgressListener(),
                isObjectLockEnabled: resolvedS3Options.isObjectLockEnabled,
                useCRC32Checksum: Boolean(inProgressUpload.finalCrc32),
                expectedBucketOwner,
            }));
        }
        await Promise.all(concurrentUploadPartExecutors);
        validateCompletedParts(inProgressUpload.completedParts, size);
        const { ETag: eTag } = await (0,_utils_client_s3data_completeMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_13__.completeMultipartUpload)({
            ...resolvedS3Config,
            abortSignal: abortController.signal,
            userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_14__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_15__.StorageAction.UploadData),
        }, {
            Bucket: resolvedBucket,
            Key: finalKey,
            UploadId: inProgressUpload.uploadId,
            ChecksumCRC32: inProgressUpload.finalCrc32,
            IfNoneMatch: preventOverwrite ? '*' : undefined,
            MultipartUpload: {
                Parts: sortUploadParts(inProgressUpload.completedParts),
            },
            ExpectedBucketOwner: expectedBucketOwner,
        });
        if (size) {
            const { ContentLength: uploadedObjectSize } = await (0,_utils_client_s3data_headObject_mjs__WEBPACK_IMPORTED_MODULE_16__.headObject)(resolvedS3Config, {
                Bucket: resolvedBucket,
                Key: finalKey,
                ExpectedBucketOwner: expectedBucketOwner,
            });
            if (uploadedObjectSize && uploadedObjectSize !== size) {
                throw new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_17__.StorageError({
                    name: 'Error',
                    message: `Upload failed. Expected object size ${size}, but got ${uploadedObjectSize}.`,
                });
            }
        }
        if (resumableUploadsCache && uploadCacheKey) {
            await (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_9__.removeCachedUpload)(resumableUploadsCache, uploadCacheKey);
        }
        const result = {
            eTag,
            contentType,
            metadata,
        };
        return inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.STORAGE_INPUT_KEY
            ? { key: objectKey, ...result }
            : { path: objectKey, ...result };
    };
    const startUploadWithResumability = () => startUpload()
        .then(resolveCallback)
        .catch(error => {
        const abortSignal = abortController?.signal;
        if (abortSignal?.aborted && isAbortSignalFromPause) {
            _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_18__.logger.debug('upload paused.');
        }
        else {
            // Uncaught errors should be exposed to the users.
            rejectCallback(error);
        }
    });
    const multipartUploadJob = () => new Promise((resolve, reject) => {
        resolveCallback = resolve;
        rejectCallback = reject;
        startUploadWithResumability();
    });
    const onPause = () => {
        isAbortSignalFromPause = true;
        abortController?.abort();
    };
    const onResume = () => {
        startUploadWithResumability();
    };
    const onCancel = (message) => {
        // 1. abort in-flight API requests
        abortController?.abort(message);
        const cancelUpload = async () => {
            // 2. clear upload cache.
            if (uploadCacheKey && resumableUploadsCache) {
                await (0,_uploadCache_mjs__WEBPACK_IMPORTED_MODULE_9__.removeCachedUpload)(resumableUploadsCache, uploadCacheKey);
            }
            // 3. clear multipart upload on server side.
            await (0,_utils_client_s3data_abortMultipartUpload_mjs__WEBPACK_IMPORTED_MODULE_19__.abortMultipartUpload)(resolvedS3Config, {
                Bucket: resolvedBucket,
                Key: finalKey,
                UploadId: inProgressUpload?.uploadId,
                ExpectedBucketOwner: expectedBucketOwner,
            });
        };
        cancelUpload().catch(e => {
            _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_18__.logger.debug('error when cancelling upload task.', e);
        });
        rejectCallback(
        // Internal error that should not be exposed to the users. They should use isCancelError() to check if
        // the error is caused by cancel().
        new _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_20__.CanceledError(message ? { message } : undefined));
    };
    return {
        multipartUploadJob,
        onPause,
        onResume,
        onCancel,
    };
};
const resolveAccessLevel = (accessLevel) => accessLevel ??
    _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.Amplify.libraryOptions.Storage?.S3?.defaultAccessLevel ??
    _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_ACCESS_LEVEL;
const validateCompletedParts = (completedParts, size) => {
    const partsExpected = Math.ceil(size / (0,_calculatePartSize_mjs__WEBPACK_IMPORTED_MODULE_21__.calculatePartSize)(size));
    const validPartCount = completedParts.length === partsExpected;
    const sorted = sortUploadParts(completedParts);
    const validPartNumbers = sorted.every((part, index) => part.PartNumber === index + 1);
    if (!validPartCount || !validPartNumbers) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_22__.IntegrityError();
    }
};
const sortUploadParts = (parts) => {
    return [...parts].sort((partA, partB) => partA.PartNumber - partB.PartNumber);
};


//# sourceMappingURL=uploadHandlers.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadPartExecutor.mjs":
/*!**************************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/uploadPartExecutor.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadPartExecutor: () => (/* binding */ uploadPartExecutor)
/* harmony export */ });
/* harmony import */ var _utils_client_s3data_uploadPart_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/client/s3data/uploadPart.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/uploadPart.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");
/* harmony import */ var _utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/crc32.mjs */ "../storage/dist/esm/providers/s3/utils/crc32.mjs");
/* harmony import */ var _utils_md5_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/md5.mjs */ "../storage/dist/esm/providers/s3/utils/md5.mjs");


















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const uploadPartExecutor = async ({ dataChunkerGenerator, completedPartNumberSet, s3Config, abortSignal, bucket, finalKey, uploadId, onPartUploadCompletion, onProgress, isObjectLockEnabled, useCRC32Checksum, expectedBucketOwner, }) => {
    let transferredBytes = 0;
    for (const { data, partNumber, size } of dataChunkerGenerator) {
        if (abortSignal.aborted) {
            _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug('upload executor aborted.');
            break;
        }
        if (completedPartNumberSet.has(partNumber)) {
            _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`part ${partNumber} already uploaded.`);
            transferredBytes += size;
            onProgress?.({
                transferredBytes,
            });
        }
        else {
            // handle cancel error
            let checksumCRC32;
            if (useCRC32Checksum) {
                checksumCRC32 = await (0,_utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_1__.calculateContentCRC32)(data);
            }
            const contentMD5 = 
            // check if checksum exists. ex: should not exist in react native
            !checksumCRC32 && isObjectLockEnabled
                ? await (0,_utils_md5_mjs__WEBPACK_IMPORTED_MODULE_2__.calculateContentMd5)(data)
                : undefined;
            const { ETag: eTag } = await (0,_utils_client_s3data_uploadPart_mjs__WEBPACK_IMPORTED_MODULE_3__.uploadPart)({
                ...s3Config,
                abortSignal,
                onUploadProgress: (event) => {
                    const { transferredBytes: currentPartTransferredBytes } = event;
                    onProgress?.({
                        transferredBytes: transferredBytes + currentPartTransferredBytes,
                    });
                },
            }, {
                Bucket: bucket,
                Key: finalKey,
                UploadId: uploadId,
                Body: data,
                PartNumber: partNumber,
                ChecksumCRC32: checksumCRC32?.checksum,
                ContentMD5: contentMD5,
                ExpectedBucketOwner: expectedBucketOwner,
            });
            transferredBytes += size;
            // eTag will always be set even the S3 model interface marks it as optional.
            onPartUploadCompletion(partNumber, eTag, checksumCRC32?.checksum);
        }
    }
};


//# sourceMappingURL=uploadPartExecutor.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/internal/uploadData/putObjectJob.mjs":
/*!**********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/internal/uploadData/putObjectJob.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   putObjectJob: () => (/* binding */ putObjectJob)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");
/* harmony import */ var _utils_md5_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/md5.mjs */ "../storage/dist/esm/providers/s3/utils/md5.mjs");
/* harmony import */ var _utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/resolveS3ConfigAndInput.mjs */ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs");
/* harmony import */ var _utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/validateBucketOwnerID.mjs */ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs");
/* harmony import */ var _utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/validateStorageOperationInput.mjs */ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _utils_client_s3data_putObject_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/client/s3data/putObject.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/putObject.mjs");
/* harmony import */ var _utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/userAgent.mjs */ "../storage/dist/esm/providers/s3/utils/userAgent.mjs");
/* harmony import */ var _utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/crc32.mjs */ "../storage/dist/esm/providers/s3/utils/crc32.mjs");
/* harmony import */ var _utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../utils/constructContentDisposition.mjs */ "../storage/dist/esm/providers/s3/utils/constructContentDisposition.mjs");

























// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Get a function the returns a promise to call putObject API to S3.
 *
 * @internal
 */
const putObjectJob = (uploadDataInput, abortSignal, totalLength) => async () => {
    const { options: uploadDataOptions, data } = uploadDataInput;
    const { bucket, keyPrefix, s3Config, isObjectLockEnabled, identityId } = await (0,_utils_resolveS3ConfigAndInput_mjs__WEBPACK_IMPORTED_MODULE_0__.resolveS3ConfigAndInput)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, uploadDataInput);
    const { inputType, objectKey } = (0,_utils_validateStorageOperationInput_mjs__WEBPACK_IMPORTED_MODULE_2__.validateStorageOperationInput)(uploadDataInput, identityId);
    (0,_utils_validateBucketOwnerID_mjs__WEBPACK_IMPORTED_MODULE_3__.validateBucketOwnerID)(uploadDataOptions?.expectedBucketOwner);
    const finalKey = inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_4__.STORAGE_INPUT_KEY ? keyPrefix + objectKey : objectKey;
    const { contentDisposition, contentEncoding, contentType = 'application/octet-stream', preventOverwrite, metadata, checksumAlgorithm, onProgress, expectedBucketOwner, } = uploadDataOptions ?? {};
    const checksumCRC32 = checksumAlgorithm === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_4__.CHECKSUM_ALGORITHM_CRC32
        ? await (0,_utils_crc32_mjs__WEBPACK_IMPORTED_MODULE_5__.calculateContentCRC32)(data)
        : undefined;
    const contentMD5 = 
    // check if checksum exists. ex: should not exist in react native
    !checksumCRC32 && isObjectLockEnabled
        ? await (0,_utils_md5_mjs__WEBPACK_IMPORTED_MODULE_6__.calculateContentMd5)(data)
        : undefined;
    const { ETag: eTag, VersionId: versionId } = await (0,_utils_client_s3data_putObject_mjs__WEBPACK_IMPORTED_MODULE_7__.putObject)({
        ...s3Config,
        abortSignal,
        onUploadProgress: onProgress,
        userAgentValue: (0,_utils_userAgent_mjs__WEBPACK_IMPORTED_MODULE_8__.getStorageUserAgentValue)(_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_9__.StorageAction.UploadData),
    }, {
        Bucket: bucket,
        Key: finalKey,
        Body: data,
        ContentType: contentType,
        ContentDisposition: (0,_utils_constructContentDisposition_mjs__WEBPACK_IMPORTED_MODULE_10__.constructContentDisposition)(contentDisposition),
        ContentEncoding: contentEncoding,
        Metadata: metadata,
        ContentMD5: contentMD5,
        ChecksumCRC32: checksumCRC32?.checksum,
        ExpectedBucketOwner: expectedBucketOwner,
        IfNoneMatch: preventOverwrite ? '*' : undefined,
    });
    const result = {
        eTag,
        versionId,
        contentType,
        metadata,
        size: totalLength,
    };
    return inputType === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_4__.STORAGE_INPUT_KEY
        ? { key: objectKey, ...result }
        : { path: objectKey, ...result };
};


//# sourceMappingURL=putObjectJob.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/list.mjs":
/*!******************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/list.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   list: () => (/* binding */ list)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_list_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/list.mjs */ "../storage/dist/esm/providers/s3/apis/internal/list.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function list(input) {
    return (0,_internal_list_mjs__WEBPACK_IMPORTED_MODULE_0__.list)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input ?? {});
}


//# sourceMappingURL=list.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/remove.mjs":
/*!********************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/remove.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   remove: () => (/* binding */ remove)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/singleton/Amplify.mjs");
/* harmony import */ var _internal_remove_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/remove.mjs */ "../storage/dist/esm/providers/s3/apis/internal/remove.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function remove(input) {
    return (0,_internal_remove_mjs__WEBPACK_IMPORTED_MODULE_0__.remove)(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.Amplify, input);
}


//# sourceMappingURL=remove.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/apis/uploadData.mjs":
/*!************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/apis/uploadData.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadData: () => (/* binding */ uploadData)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _internal_uploadData_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal/uploadData/index.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/index.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function uploadData(input) {
    return (0,_internal_uploadData_index_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadData)({
        ...input,
        options: {
            ...input?.options,
            // This option enables caching in-progress multipart uploads.
            // It's ONLY needed for client-side API.
            resumableUploadsCache: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.defaultStorage,
        },
    });
}


//# sourceMappingURL=uploadData.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/index.mjs":
/*!**************************************************!*\
  !*** ../storage/dist/esm/providers/s3/index.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_PART_SIZE: () => (/* reexport safe */ _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_PART_SIZE),
/* harmony export */   copy: () => (/* reexport safe */ _apis_copy_mjs__WEBPACK_IMPORTED_MODULE_5__.copy),
/* harmony export */   downloadData: () => (/* reexport safe */ _apis_downloadData_mjs__WEBPACK_IMPORTED_MODULE_1__.downloadData),
/* harmony export */   getProperties: () => (/* reexport safe */ _apis_getProperties_mjs__WEBPACK_IMPORTED_MODULE_4__.getProperties),
/* harmony export */   getUrl: () => (/* reexport safe */ _apis_getUrl_mjs__WEBPACK_IMPORTED_MODULE_6__.getUrl),
/* harmony export */   list: () => (/* reexport safe */ _apis_list_mjs__WEBPACK_IMPORTED_MODULE_3__.list),
/* harmony export */   remove: () => (/* reexport safe */ _apis_remove_mjs__WEBPACK_IMPORTED_MODULE_2__.remove),
/* harmony export */   uploadData: () => (/* reexport safe */ _apis_uploadData_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadData)
/* harmony export */ });
/* harmony import */ var _apis_uploadData_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apis/uploadData.mjs */ "../storage/dist/esm/providers/s3/apis/uploadData.mjs");
/* harmony import */ var _apis_downloadData_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apis/downloadData.mjs */ "../storage/dist/esm/providers/s3/apis/downloadData.mjs");
/* harmony import */ var _apis_remove_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apis/remove.mjs */ "../storage/dist/esm/providers/s3/apis/remove.mjs");
/* harmony import */ var _apis_list_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./apis/list.mjs */ "../storage/dist/esm/providers/s3/apis/list.mjs");
/* harmony import */ var _apis_getProperties_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./apis/getProperties.mjs */ "../storage/dist/esm/providers/s3/apis/getProperties.mjs");
/* harmony import */ var _apis_copy_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apis/copy.mjs */ "../storage/dist/esm/providers/s3/apis/copy.mjs");
/* harmony import */ var _apis_getUrl_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./apis/getUrl.mjs */ "../storage/dist/esm/providers/s3/apis/getUrl.mjs");
/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");








//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/base64/index.browser.mjs":
/*!**************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/base64/index.browser.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toBase64: () => (/* binding */ toBase64)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function bytesToBase64(bytes) {
    const base64Str = Array.from(bytes, x => String.fromCodePoint(x)).join('');
    return btoa(base64Str);
}
function toBase64(input) {
    if (typeof input === 'string') {
        return bytesToBase64(new TextEncoder().encode(input));
    }
    return bytesToBase64(new Uint8Array(input.buffer, input.byteOffset, input.byteLength));
}


//# sourceMappingURL=index.browser.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/constants.mjs":
/*!***************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/constants.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ABORT_ERROR_CODE: () => (/* binding */ ABORT_ERROR_CODE),
/* harmony export */   ABORT_ERROR_MESSAGE: () => (/* binding */ ABORT_ERROR_MESSAGE),
/* harmony export */   CANCELED_ERROR_CODE: () => (/* binding */ CANCELED_ERROR_CODE),
/* harmony export */   CANCELED_ERROR_MESSAGE: () => (/* binding */ CANCELED_ERROR_MESSAGE),
/* harmony export */   CONTENT_SHA256_HEADER: () => (/* binding */ CONTENT_SHA256_HEADER),
/* harmony export */   NETWORK_ERROR_CODE: () => (/* binding */ NETWORK_ERROR_CODE),
/* harmony export */   NETWORK_ERROR_MESSAGE: () => (/* binding */ NETWORK_ERROR_MESSAGE),
/* harmony export */   SEND_DOWNLOAD_PROGRESS_EVENT: () => (/* binding */ SEND_DOWNLOAD_PROGRESS_EVENT),
/* harmony export */   SEND_UPLOAD_PROGRESS_EVENT: () => (/* binding */ SEND_UPLOAD_PROGRESS_EVENT)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const SEND_UPLOAD_PROGRESS_EVENT = 'sendUploadProgress';
const SEND_DOWNLOAD_PROGRESS_EVENT = 'sendDownloadProgress';
const NETWORK_ERROR_MESSAGE = 'Network Error';
const NETWORK_ERROR_CODE = 'ERR_NETWORK';
const ABORT_ERROR_MESSAGE = 'Request aborted';
const ABORT_ERROR_CODE = 'ERR_ABORTED';
const CANCELED_ERROR_MESSAGE = 'canceled';
const CANCELED_ERROR_CODE = 'ERR_CANCELED';
const CONTENT_SHA256_HEADER = 'x-amz-content-sha256';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/contentSha256middleware.mjs":
/*!*****************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/contentSha256middleware.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   contentSha256MiddlewareFactory: () => (/* binding */ contentSha256MiddlewareFactory)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/constants.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * A middleware that adds the x-amz-content-sha256 header to the request if it is not already present.
 * It's required for S3 requests in browsers where the request body is sent in 1 chunk.
 * @see https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html
 *
 * @internal
 */
const contentSha256MiddlewareFactory = () => (next) => async function contentSha256Middleware(request) {
    if (request.headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.CONTENT_SHA256_HEADER]) {
        return next(request);
    }
    else {
        const hash = await (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.getHashedPayload)(request.body);
        request.headers[_constants_mjs__WEBPACK_IMPORTED_MODULE_0__.CONTENT_SHA256_HEADER] = hash;
        return next(request);
    }
};


//# sourceMappingURL=contentSha256middleware.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs":
/*!***************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   s3TransferHandler: () => (/* binding */ s3TransferHandler)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/userAgent/middleware.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/retry/middleware.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/middleware.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeTransferHandler.mjs");
/* harmony import */ var _contentSha256middleware_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contentSha256middleware.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/contentSha256middleware.mjs");
/* harmony import */ var _xhrTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../xhrTransferHandler.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/xhrTransferHandler.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * S3 transfer handler for browser and React Native based on XHR. On top of basic transfer handler, it also supports
 * x-amz-content-sha256 header, and request&response process tracking.
 *
 * @internal
 */
const s3TransferHandler = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_0__.composeTransferHandler)(_xhrTransferHandler_mjs__WEBPACK_IMPORTED_MODULE_1__.xhrTransferHandler, [
    _contentSha256middleware_mjs__WEBPACK_IMPORTED_MODULE_2__.contentSha256MiddlewareFactory,
    _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__.userAgentMiddlewareFactory,
    _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_4__.retryMiddlewareFactory,
    _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_5__.signingMiddlewareFactory,
]);


//# sourceMappingURL=xhr.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/xhrTransferHandler.mjs":
/*!************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/xhrTransferHandler.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   xhrTransferHandler: () => (/* binding */ xhrTransferHandler)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/utils/memoization.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../errors/CanceledError.mjs */ "../storage/dist/esm/errors/CanceledError.mjs");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/constants.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('xhr-http-handler');
/**
 * Base transfer handler implementation using XMLHttpRequest to support upload and download progress events.
 *
 * @param request - The request object.
 * @param options - The request options.
 * @returns A promise that will be resolved with the response object.
 *
 * @internal
 */
const xhrTransferHandler = (request, options) => {
    const { url, method, headers, body } = request;
    const { onDownloadProgress, onUploadProgress, responseType, abortSignal } = options;
    return new Promise((resolve, reject) => {
        let xhr = new XMLHttpRequest();
        xhr.open(method.toUpperCase(), url.toString());
        Object.entries(headers)
            .filter(([header]) => !FORBIDDEN_HEADERS.includes(header))
            .forEach(([header, value]) => {
            xhr.setRequestHeader(header, value);
        });
        xhr.responseType = responseType;
        if (onDownloadProgress) {
            xhr.addEventListener('progress', event => {
                onDownloadProgress(convertToTransferProgressEvent(event));
                logger.debug(event);
            });
        }
        if (onUploadProgress) {
            xhr.upload.addEventListener('progress', event => {
                onUploadProgress(convertToTransferProgressEvent(event));
                logger.debug(event);
            });
        }
        xhr.addEventListener('error', () => {
            const networkError = new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageError({
                message: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.NETWORK_ERROR_MESSAGE,
                name: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.NETWORK_ERROR_CODE,
            });
            logger.error(_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.NETWORK_ERROR_MESSAGE);
            reject(networkError);
            xhr = null; // clean up request
        });
        // Handle browser request cancellation (as opposed to a manual cancellation)
        xhr.addEventListener('abort', () => {
            // The abort event can be triggered after the error or load event. So we need to check if the xhr is null.
            // When request is aborted by AbortSignal, the promise is rejected in the abortSignal's 'abort' event listener.
            if (!xhr || abortSignal?.aborted)
                return;
            // Handle abort request caused by browser instead of AbortController
            // see: https://github.com/axios/axios/issues/537
            const error = buildHandlerError(_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.ABORT_ERROR_MESSAGE, _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.ABORT_ERROR_CODE);
            logger.error(_constants_mjs__WEBPACK_IMPORTED_MODULE_2__.ABORT_ERROR_MESSAGE);
            reject(error);
            xhr = null; // clean up request
        });
        // Skip handling timeout error since we don't have a timeout
        xhr.addEventListener('readystatechange', () => {
            if (!xhr || xhr.readyState !== xhr.DONE) {
                return;
            }
            const onloadend = () => {
                // The load event is triggered after the error/abort/load event. So we need to check if the xhr is null.
                if (!xhr)
                    return;
                const responseHeaders = convertResponseHeaders(xhr.getAllResponseHeaders());
                const { responseType: loadEndResponseType } = xhr;
                const responseBlob = xhr.response;
                const responseText = loadEndResponseType === 'text' ? xhr.responseText : '';
                const bodyMixIn = {
                    blob: () => Promise.resolve(responseBlob),
                    text: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_3__.withMemoization)(() => loadEndResponseType === 'blob'
                        ? readBlobAsText(responseBlob)
                        : Promise.resolve(responseText)),
                    json: () => Promise.reject(
                    // S3 does not support JSON response. So fail-fast here with nicer error message.
                    new Error('Parsing response to JSON is not implemented. Please use response.text() instead.')),
                };
                const response = {
                    statusCode: xhr.status,
                    headers: responseHeaders,
                    // The xhr.responseType is only set to 'blob' for streaming binary S3 object data. The streaming data is
                    // exposed via public interface of Storage.get(). So we need to return the response as a Blob object for
                    // backward compatibility. In other cases, the response payload is only used internally, we return it is
                    // {@link ResponseBodyMixin}
                    body: (xhr.responseType === 'blob'
                        ? Object.assign(responseBlob, bodyMixIn)
                        : bodyMixIn),
                };
                resolve(response);
                xhr = null; // clean up request
            };
            // readystate handler is calling before onerror or ontimeout handlers,
            // so we should call onloadend on the next 'tick'
            // @see https://github.com/axios/axios/blob/9588fcdec8aca45c3ba2f7968988a5d03f23168c/lib/adapters/xhr.js#L98-L99
            setTimeout(onloadend);
        });
        if (abortSignal) {
            const onCanceled = () => {
                // The abort event is triggered after the error or load event. So we need to check if the xhr is null.
                if (!xhr) {
                    return;
                }
                const canceledError = new _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_4__.CanceledError({
                    name: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.CANCELED_ERROR_CODE,
                    message: _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.CANCELED_ERROR_MESSAGE,
                });
                reject(canceledError);
                xhr.abort();
                xhr = null;
            };
            abortSignal.aborted
                ? onCanceled()
                : abortSignal.addEventListener('abort', onCanceled);
        }
        if (typeof ReadableStream === 'function' &&
            body instanceof ReadableStream) {
            // This does not matter as previous implementation uses Axios which does not support ReadableStream anyway.
            throw new Error('ReadableStream request payload is not supported.');
        }
        xhr.send(body ?? null);
    });
};
const convertToTransferProgressEvent = (event) => ({
    transferredBytes: event.loaded,
    totalBytes: event.lengthComputable ? event.total : undefined,
});
const buildHandlerError = (message, name) => {
    const error = new Error(message);
    error.name = name;
    return error;
};
/**
 * Convert xhr.getAllResponseHeaders() string to a Record<string, string>. Note that modern browser already returns
 * header names in lowercase.
 * @param xhrHeaders - string of headers returned from xhr.getAllResponseHeaders()
 */
const convertResponseHeaders = (xhrHeaders) => {
    if (!xhrHeaders) {
        return {};
    }
    return xhrHeaders
        .split('\r\n')
        .reduce((headerMap, line) => {
        const parts = line.split(': ');
        const header = parts.shift();
        const value = parts.join(': ');
        headerMap[header.toLowerCase()] = value;
        return headerMap;
    }, {});
};
const readBlobAsText = (blob) => {
    const reader = new FileReader();
    return new Promise((resolve, reject) => {
        reader.onloadend = () => {
            if (reader.readyState !== FileReader.DONE) {
                return;
            }
            resolve(reader.result);
        };
        reader.onerror = () => {
            reject(reader.error);
        };
        reader.readAsText(blob);
    });
};
// To add more forbidden headers as found set by S3. Intentionally NOT list all of them here to save bundle size.
// https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name
const FORBIDDEN_HEADERS = ['host'];


//# sourceMappingURL=xhrTransferHandler.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/runtime/xmlParser/dom.mjs":
/*!*******************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/runtime/xmlParser/dom.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parser: () => (/* binding */ parser)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Drop-in replacement for fast-xml-parser's XmlParser class used in the AWS SDK S3 client XML deserializer. This
 * implementation is not tested against the full xml conformance test suite. It is only tested against the XML responses
 * from S3. This implementation requires the `DOMParser` class in the runtime.
 */
const parser = {
    parse: (xmlStr) => {
        const domParser = new DOMParser();
        const xml = domParser.parseFromString(xmlStr, 'text/xml');
        const parsedObj = parseXmlNode(xml);
        const rootKey = Object.keys(parsedObj)[0];
        return parsedObj[rootKey];
    },
};
const parseXmlNode = (node) => {
    if (isDocumentNode(node)) {
        return {
            [node.documentElement.nodeName]: parseXmlNode(node.documentElement),
        };
    }
    if (node.nodeType === Node.TEXT_NODE) {
        return node.nodeValue?.trim();
    }
    if (isElementNode(node)) {
        // Node like <Location>foo</Location> will be converted to { Location: 'foo' }
        // instead of { Location: { '#text': 'foo' } }.
        if (isTextOnlyElementNode(node)) {
            return node.childNodes[0].nodeValue;
        }
        const nodeValue = {};
        // convert attributes
        for (const attr of node.attributes) {
            if (!isNamespaceAttributeName(attr.nodeName)) {
                nodeValue[attr.nodeName] = attr.nodeValue;
            }
        }
        // convert child nodes
        if (node.children.length > 0) {
            for (const child of node.children) {
                const childValue = parseXmlNode(child);
                if (childValue === undefined) {
                    continue;
                }
                const childName = child.nodeName;
                if (nodeValue[childName] === undefined) {
                    nodeValue[childName] = childValue;
                }
                else if (Array.isArray(nodeValue[childName])) {
                    nodeValue[childName].push(childValue);
                }
                else {
                    nodeValue[childName] = [nodeValue[childName], childValue];
                }
            }
        }
        // Return empty element node as empty string instead of `{}`, which is the default behavior of fast-xml-parser.
        return Object.keys(nodeValue).length === 0 ? '' : nodeValue;
    }
};
const isElementNode = (node) => node.nodeType === Node.ELEMENT_NODE;
const isDocumentNode = (node) => node.nodeType === Node.DOCUMENT_NODE;
const isTextOnlyElementNode = (node) => hasOnlyNamespaceAttributes(node) &&
    node.children.length === 0 &&
    node.firstChild?.nodeType === Node.TEXT_NODE;
const hasOnlyNamespaceAttributes = (node) => {
    for (const attr of node.attributes) {
        if (!isNamespaceAttributeName(attr.nodeName)) {
            return false;
        }
    }
    return true;
};
const isNamespaceAttributeName = (name) => name === 'xmlns' || name.startsWith('xmlns:');


//# sourceMappingURL=dom.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/abortMultipartUpload.mjs":
/*!*************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/abortMultipartUpload.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   abortMultipartUpload: () => (/* binding */ abortMultipartUpload)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const abortMultipartUploadSerializer = (input, endpoint) => {
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.serializePathnameObjectKey)(url, input.Key);
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.UploadId, 'UploadId');
    url.search = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrlSearchParams({
        uploadId: input.UploadId,
    }).toString();
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    const headers = {
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assignStringVariables)({
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
        }),
    };
    return {
        method: 'DELETE',
        headers,
        url,
    };
};
const abortMultipartUploadDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
        };
    }
};
const abortMultipartUpload = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, abortMultipartUploadSerializer, abortMultipartUploadDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=abortMultipartUpload.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs":
/*!*********************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SERVICE_NAME: () => (/* binding */ SERVICE_NAME),
/* harmony export */   defaultConfig: () => (/* binding */ defaultConfig),
/* harmony export */   isDnsCompatibleBucketName: () => (/* binding */ isDnsCompatibleBucketName),
/* harmony export */   parseXmlError: () => (/* binding */ parseXmlError),
/* harmony export */   retryDecider: () => (/* binding */ retryDecider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/endpoints/getDnsSuffix.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_createRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/createRetryDecider.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/createRetryDecider.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const DOMAIN_PATTERN = /^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$/;
const IP_ADDRESS_PATTERN = /(\d+\.){3}\d+/;
const DOTS_PATTERN = /\.\./;
/**
 * The service name used to sign requests if the API requires authentication.
 */
const SERVICE_NAME = 's3';
/**
 * The endpoint resolver function that returns the endpoint URL for a given region, and input parameters.
 */
const endpointResolver = (options, apiInput) => {
    const { region, useAccelerateEndpoint, customEndpoint, forcePathStyle } = options;
    let endpoint;
    // 1. get base endpoint
    if (customEndpoint) {
        if (customEndpoint === _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.LOCAL_TESTING_S3_ENDPOINT) {
            endpoint = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(customEndpoint);
        }
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!customEndpoint.includes('://'), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.InvalidCustomEndpoint);
        endpoint = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(`http://${customEndpoint}`);
    }
    else if (useAccelerateEndpoint) {
        // this ErrorCode isn't expose yet since forcePathStyle param isn't publicly exposed
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(!forcePathStyle, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.ForcePathStyleEndpointNotSupported);
        endpoint = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(`https://s3-accelerate.${(0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_6__.getDnsSuffix)(region)}`);
    }
    else {
        endpoint = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(`https://s3.${region}.${(0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_6__.getDnsSuffix)(region)}`);
    }
    // 2. inject bucket name
    if (apiInput?.Bucket) {
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_4__.assertValidationError)(isDnsCompatibleBucketName(apiInput.Bucket), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_5__.StorageValidationErrorCode.DnsIncompatibleBucketName);
        if (forcePathStyle || apiInput.Bucket.includes('.')) {
            endpoint.pathname = `/${apiInput.Bucket}`;
        }
        else {
            endpoint.host = `${apiInput.Bucket}.${endpoint.host}`;
        }
    }
    return { url: endpoint };
};
/**
 * Determines whether a given string is DNS compliant per the rules outlined by
 * S3. Length, capitaization, and leading dot restrictions are enforced by the
 * DOMAIN_PATTERN regular expression.
 * @internal
 *
 * @see https://github.com/aws/aws-sdk-js-v3/blob/f2da6182298d4d6b02e84fb723492c07c27469a8/packages/middleware-bucket-endpoint/src/bucketHostnameUtils.ts#L39-L48
 * @see https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html
 */
const isDnsCompatibleBucketName = (bucketName) => DOMAIN_PATTERN.test(bucketName) &&
    !IP_ADDRESS_PATTERN.test(bucketName) &&
    !DOTS_PATTERN.test(bucketName);
/**
 * Error parser for the XML payload of S3 data plane error response. The error's
 * `Code` and `Message` locates directly at the XML root element.
 *
 * @example
 * ```
 * <?xml version="1.0" encoding="UTF-8"?>
 * 	<Error>
 * 		<Code>NoSuchKey</Code>
 * 		<Message>The resource you requested does not exist</Message>
 * 		<Resource>/mybucket/myfoto.jpg</Resource>
 * 		<RequestId>4442587FB7D0A2F9</RequestId>
 * 	</Error>
 * 	```
 *
 * @internal
 */
const parseXmlError = (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_7__.createXmlErrorParser)({ noErrorWrapping: true });
/**
 * @internal
 */
const retryDecider = (0,_utils_createRetryDecider_mjs__WEBPACK_IMPORTED_MODULE_8__.createRetryDecider)(parseXmlError);
/**
 * @internal
 */
const defaultConfig = {
    service: SERVICE_NAME,
    endpointResolver,
    retryDecider,
    computeDelay: _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_9__.jitteredBackoff,
    userAgentValue: (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_10__.getAmplifyUserAgent)(),
    useAccelerateEndpoint: false,
    uriEscapePath: false, // Required by S3. See https://github.com/aws/aws-sdk-js-v3/blob/9ba012dfa3a3429aa2db0f90b3b0b3a7a31f9bc3/packages/signature-v4/src/SignatureV4.ts#L76-L83
};


//# sourceMappingURL=base.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/completeMultipartUpload.mjs":
/*!****************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/completeMultipartUpload.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   completeMultipartUpload: () => (/* binding */ completeMultipartUpload)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _validateMultipartUploadXML_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../validateMultipartUploadXML.mjs */ "../storage/dist/esm/providers/s3/utils/validateMultipartUploadXML.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");














// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const INVALID_PARAMETER_ERROR_MSG = 'Invalid parameter for ComplteMultipartUpload API';
const completeMultipartUploadSerializer = async (input, endpoint) => {
    const headers = {
        'content-type': 'application/xml',
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
            'x-amz-checksum-crc32': input.ChecksumCRC32,
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
            'If-None-Match': input.IfNoneMatch,
        }),
    };
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePathnameObjectKey)(url, input.Key);
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.UploadId, 'UploadId');
    url.search = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrlSearchParams({
        uploadId: input.UploadId,
    }).toString();
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.MultipartUpload, 'MultipartUpload');
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    const xml = serializeCompletedMultipartUpload(input.MultipartUpload);
    (0,_validateMultipartUploadXML_mjs__WEBPACK_IMPORTED_MODULE_5__.validateMultipartUploadXML)(input.MultipartUpload, xml);
    return {
        method: 'POST',
        headers,
        url,
        body: '<?xml version="1.0" encoding="UTF-8"?>' + xml,
    };
};
const serializeCompletedMultipartUpload = (input) => {
    if (!input.Parts?.length) {
        throw new Error(`${INVALID_PARAMETER_ERROR_MSG}: ${input}`);
    }
    return `<CompleteMultipartUpload xmlns="http://s3.amazonaws.com/doc/2006-03-01/">${input.Parts.map(serializeCompletedPartList).join('')}</CompleteMultipartUpload>`;
};
const serializeCompletedPartList = (input) => {
    if (!input.ETag || input.PartNumber == null) {
        throw new Error(`${INVALID_PARAMETER_ERROR_MSG}: ${input}`);
    }
    const eTag = `<ETag>${input.ETag}</ETag>`;
    const partNumber = `<PartNumber>${input.PartNumber}</PartNumber>`;
    const checksumCRC32 = input.ChecksumCRC32
        ? `<ChecksumCRC32>${input.ChecksumCRC32}</ChecksumCRC32>`
        : '';
    return `<Part>${eTag}${partNumber}${checksumCRC32}</Part>`;
};
/**
 * Parse CompleteMultipartUpload API response payload, which may be empty or error indicating internal
 * server error, even when the status code is 200.
 *
 * Ref: https://docs.aws.amazon.com/AmazonS3/latest/API/API_CompleteMultipartUpload.html#API_CompleteMultipartUpload_Example_4
 */
const parseXmlBodyOrThrow = async (response) => {
    const parsed = await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__.parseXmlBody)(response); // Handles empty body case
    if (parsed.Code !== undefined && parsed.Message !== undefined) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_7__.parseXmlError)({
            ...response,
            statusCode: 500, // To workaround the >=300 status code check common to other APIs.
        }));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.buildStorageServiceError)(error, response.statusCode);
    }
    return parsed;
};
const completeMultipartUploadDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_7__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const parsed = await parseXmlBodyOrThrow(response);
        const contents = (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.map)(parsed, {
            ETag: 'ETag',
            Key: 'Key',
            Location: 'Location',
        });
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_9__.parseMetadata)(response),
            ...contents,
        };
    }
};
// CompleteMultiPartUpload API returns 200 status code with empty body or error message.
// This indicates internal server error after the response has been sent to the client.
// Ref: https://docs.aws.amazon.com/AmazonS3/latest/API/API_CompleteMultipartUpload.html#API_CompleteMultipartUpload_Example_4
const retryWhenErrorWith200StatusCode = async (response, error, middlewareContext) => {
    if (!response) {
        return { retryable: false };
    }
    if (response.statusCode === 200) {
        if (!response.body) {
            return { retryable: true };
        }
        const parsed = await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__.parseXmlBody)(response);
        if (parsed.Code !== undefined && parsed.Message !== undefined) {
            return { retryable: true };
        }
        return { retryable: false };
    }
    return (0,_base_mjs__WEBPACK_IMPORTED_MODULE_7__.retryDecider)(response, error, middlewareContext);
};
const completeMultipartUpload = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_10__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_11__.s3TransferHandler, completeMultipartUploadSerializer, completeMultipartUploadDeserializer, {
    ..._base_mjs__WEBPACK_IMPORTED_MODULE_7__.defaultConfig,
    responseType: 'text',
    retryDecider: retryWhenErrorWith200StatusCode,
});


//# sourceMappingURL=completeMultipartUpload.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/copyObject.mjs":
/*!***************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/copyObject.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   copyObject: () => (/* binding */ copyObject),
/* harmony export */   validateCopyObjectHeaders: () => (/* binding */ validateCopyObjectHeaders)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/integrityHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/integrityHelpers.mjs");
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");















// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const copyObjectSerializer = async (input, endpoint) => {
    const headers = {
        ...(await (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializeObjectConfigsToHeaders)(input)),
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
            'x-amz-copy-source': input.CopySource,
            'x-amz-metadata-directive': input.MetadataDirective,
            'x-amz-copy-source-if-match': input.CopySourceIfMatch,
            'x-amz-copy-source-if-unmodified-since': input.CopySourceIfUnmodifiedSince?.toUTCString(),
            'x-amz-source-expected-bucket-owner': input.ExpectedSourceBucketOwner,
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
        }),
    };
    validateCopyObjectHeaders(input, headers);
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePathnameObjectKey)(url, input.Key);
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    return {
        method: 'PUT',
        headers,
        url,
    };
};
const validateCopyObjectHeaders = (input, headers) => {
    const validations = [
        headers['x-amz-copy-source'] === input.CopySource,
        (0,_utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.bothNilOrEqual)(input.MetadataDirective, headers['x-amz-metadata-directive']),
        (0,_utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.bothNilOrEqual)(input.CopySourceIfMatch, headers['x-amz-copy-source-if-match']),
        (0,_utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.bothNilOrEqual)(input.CopySourceIfUnmodifiedSince?.toUTCString(), headers['x-amz-copy-source-if-unmodified-since']),
    ];
    if (validations.some(validation => !validation)) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_6__.IntegrityError();
    }
};
const copyObjectDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_7__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_8__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_9__.parseXmlBody)(response);
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_10__.parseMetadata)(response),
        };
    }
};
const copyObject = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_11__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_12__.s3TransferHandler, copyObjectSerializer, copyObjectDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_7__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=copyObject.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/createMultipartUpload.mjs":
/*!**************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/createMultipartUpload.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createMultipartUpload: () => (/* binding */ createMultipartUpload)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");













// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createMultipartUploadSerializer = async (input, endpoint) => {
    const headers = {
        ...(await (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializeObjectConfigsToHeaders)(input)),
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
            'x-amz-checksum-algorithm': input.ChecksumAlgorithm,
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
        }),
    };
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePathnameObjectKey)(url, input.Key);
    url.search = 'uploads';
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    return {
        method: 'POST',
        headers,
        url,
    };
};
const createMultipartUploadDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const parsed = await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_7__.parseXmlBody)(response);
        const contents = (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(parsed, {
            UploadId: 'UploadId',
        });
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_8__.parseMetadata)(response),
            ...contents,
        };
    }
};
const createMultipartUpload = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_9__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_10__.s3TransferHandler, createMultipartUploadSerializer, createMultipartUploadDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=createMultipartUpload.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/deleteObject.mjs":
/*!*****************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/deleteObject.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteObject: () => (/* binding */ deleteObject)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const deleteObjectSerializer = (input, endpoint) => {
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.serializePathnameObjectKey)(url, input.Key);
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    const headers = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assignStringVariables)({
        'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
    });
    return {
        method: 'DELETE',
        headers,
        url,
    };
};
const deleteObjectDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        // error is always set when statusCode >= 300
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const content = (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(response.headers, {
            DeleteMarker: ['x-amz-delete-marker', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeBoolean],
            VersionId: 'x-amz-version-id',
            RequestCharged: 'x-amz-request-charged',
        });
        return {
            ...content,
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
        };
    }
};
const deleteObject = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, deleteObjectSerializer, deleteObjectDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=deleteObject.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/getObject.mjs":
/*!**************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/getObject.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getObject: () => (/* binding */ getObject),
/* harmony export */   getPresignedGetObjectUrl: () => (/* binding */ getPresignedGetObjectUrl)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/signer/signatureV4/presignUrl.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _runtime_constants_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../runtime/constants.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/constants.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");













// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const USER_AGENT_HEADER = 'x-amz-user-agent';
const getObjectSerializer = async (input, endpoint) => {
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.serializePathnameObjectKey)(url, input.Key);
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    return {
        method: 'GET',
        headers: {
            ...(input.Range && { Range: input.Range }),
            ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assignStringVariables)({
                'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
            }),
        },
        url,
    };
};
const getObjectDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        return {
            ...(0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(response.headers, {
                DeleteMarker: ['x-amz-delete-marker', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeBoolean],
                AcceptRanges: 'accept-ranges',
                Expiration: 'x-amz-expiration',
                Restore: 'x-amz-restore',
                LastModified: ['last-modified', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeTimestamp],
                ContentLength: ['content-length', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeNumber],
                ETag: 'etag',
                ChecksumCRC32: 'x-amz-checksum-crc32',
                ChecksumCRC32C: 'x-amz-checksum-crc32c',
                ChecksumSHA1: 'x-amz-checksum-sha1',
                ChecksumSHA256: 'x-amz-checksum-sha256',
                MissingMeta: ['x-amz-missing-meta', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeNumber],
                VersionId: 'x-amz-version-id',
                CacheControl: 'cache-control',
                ContentDisposition: 'content-disposition',
                ContentEncoding: 'content-encoding',
                ContentLanguage: 'content-language',
                ContentRange: 'content-range',
                ContentType: 'content-type',
                Expires: ['expires', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeTimestamp],
                WebsiteRedirectLocation: 'x-amz-website-redirect-location',
                ServerSideEncryption: 'x-amz-server-side-encryption',
                SSECustomerAlgorithm: 'x-amz-server-side-encryption-customer-algorithm',
                SSECustomerKeyMD5: 'x-amz-server-side-encryption-customer-key-md5',
                SSEKMSKeyId: 'x-amz-server-side-encryption-aws-kms-key-id',
                BucketKeyEnabled: [
                    'x-amz-server-side-encryption-bucket-key-enabled',
                    _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeBoolean,
                ],
                StorageClass: 'x-amz-storage-class',
                RequestCharged: 'x-amz-request-charged',
                ReplicationStatus: 'x-amz-replication-status',
                PartsCount: ['x-amz-mp-parts-count', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeNumber],
                TagCount: ['x-amz-tagging-count', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeNumber],
                ObjectLockMode: 'x-amz-object-lock-mode',
                ObjectLockRetainUntilDate: [
                    'x-amz-object-lock-retain-until-date',
                    _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeTimestamp,
                ],
                ObjectLockLegalHoldStatus: 'x-amz-object-lock-legal-hold',
            }),
            Metadata: (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeMetadata)(response.headers),
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
            // @ts-expect-error The body is a CompatibleHttpResponse type because the lower-level handler is XHR instead of
            // fetch, which represents payload in Blob instread of ReadableStream.
            Body: response.body,
        };
    }
};
const getObject = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, getObjectSerializer, getObjectDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'blob' });
/**
 * Get a presigned URL for the `getObject` API.
 *
 * @internal
 */
const getPresignedGetObjectUrl = async (config, input) => {
    const endpoint = _base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig.endpointResolver(config, input);
    const { url, headers, method } = await getObjectSerializer(input, endpoint);
    // TODO: set content sha256 query parameter with value of UNSIGNED-PAYLOAD instead of empty hash.
    // It requires changes in presignUrl. Without this change, the generated url still works,
    // but not the same as other tools like AWS SDK and CLI.
    url.searchParams.append(_runtime_constants_mjs__WEBPACK_IMPORTED_MODULE_10__.CONTENT_SHA256_HEADER, _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_11__.EMPTY_HASH);
    if (config.userAgentValue) {
        url.searchParams.append(config.userAgentHeader ?? USER_AGENT_HEADER, config.userAgentValue);
    }
    if (input.ResponseContentType) {
        url.searchParams.append('response-content-type', input.ResponseContentType);
    }
    if (input.ResponseContentDisposition) {
        url.searchParams.append('response-content-disposition', input.ResponseContentDisposition);
    }
    for (const [headerName, value] of Object.entries(headers).sort(([key1], [key2]) => key1.localeCompare(key2))) {
        url.searchParams.append(headerName, value);
    }
    return (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_12__.presignUrl)({ method, url, body: undefined }, {
        signingService: _base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig.service,
        signingRegion: config.region,
        ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig,
        ...config,
    });
};


//# sourceMappingURL=getObject.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/headObject.mjs":
/*!***************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/headObject.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   headObject: () => (/* binding */ headObject)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const headObjectSerializer = async (input, endpoint) => {
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.serializePathnameObjectKey)(url, input.Key);
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    const headers = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.assignStringVariables)({
        'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
    });
    return {
        method: 'HEAD',
        headers,
        url,
    };
};
const headObjectDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        // error is always set when statusCode >= 300
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const contents = {
            ...(0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(response.headers, {
                ContentLength: ['content-length', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeNumber],
                ContentType: 'content-type',
                ETag: 'etag',
                LastModified: ['last-modified', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeTimestamp],
                VersionId: 'x-amz-version-id',
            }),
            Metadata: (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.deserializeMetadata)(response.headers),
        };
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
            ...contents,
        };
    }
};
const headObject = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, headObjectSerializer, headObjectDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=headObject.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/listObjectsV2.mjs":
/*!******************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/listObjectsV2.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listObjectsV2: () => (/* binding */ listObjectsV2)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");













// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const listObjectsV2Serializer = (input, endpoint) => {
    const headers = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
        'x-amz-request-payer': input.RequestPayer,
        'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
    });
    const query = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
        'list-type': '2',
        'continuation-token': input.ContinuationToken,
        delimiter: input.Delimiter,
        'encoding-type': input.EncodingType,
        'fetch-owner': input.FetchOwner,
        'max-keys': input.MaxKeys,
        prefix: input.Prefix,
        'start-after': input.StartAfter,
    });
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    url.search = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrlSearchParams(query).toString();
    return {
        method: 'GET',
        headers,
        url,
    };
};
const listObjectsV2Deserializer = async (response) => {
    if (response.statusCode >= 300) {
        // error is always set when statusCode >= 300
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_4__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const parsed = await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__.parseXmlBody)(response);
        const contents = (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.map)(parsed, {
            CommonPrefixes: [
                'CommonPrefixes',
                value => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.emptyArrayGuard)(value, deserializeCommonPrefixList),
            ],
            Contents: [
                'Contents',
                value => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.emptyArrayGuard)(value, deserializeObjectList),
            ],
            ContinuationToken: 'ContinuationToken',
            Delimiter: 'Delimiter',
            EncodingType: 'EncodingType',
            IsTruncated: ['IsTruncated', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeBoolean],
            KeyCount: ['KeyCount', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeNumber],
            MaxKeys: ['MaxKeys', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeNumber],
            Name: 'Name',
            NextContinuationToken: 'NextContinuationToken',
            Prefix: 'Prefix',
            StartAfter: 'StartAfter',
        });
        const output = {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
            ...contents,
        };
        validateCorroboratingElements(output);
        return output;
    }
};
const deserializeCommonPrefixList = (output) => output.map(deserializeCommonPrefix);
const deserializeCommonPrefix = (output) => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.map)(output, {
    Prefix: 'Prefix',
});
const deserializeObjectList = (output) => output.map(deserializeObject);
const deserializeObject = (output) => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.map)(output, {
    Key: 'Key',
    LastModified: ['LastModified', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeTimestamp],
    ETag: 'ETag',
    ChecksumAlgorithm: [
        'ChecksumAlgorithm',
        value => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.emptyArrayGuard)(value, deserializeChecksumAlgorithmList),
    ],
    Size: ['Size', _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeNumber],
    StorageClass: 'StorageClass',
    Owner: ['Owner', deserializeOwner],
});
const deserializeChecksumAlgorithmList = (output) => output.map(entry => String(entry));
const deserializeOwner = (output) => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.map)(output, { DisplayName: 'DisplayName', ID: 'ID' });
const validateCorroboratingElements = (response) => {
    const { IsTruncated, KeyCount, Contents = [], CommonPrefixes = [], NextContinuationToken, } = response;
    const validTruncation = (IsTruncated && !!NextContinuationToken) ||
        (!IsTruncated && !NextContinuationToken);
    const validNumberOfKeysReturned = KeyCount === Contents.length + CommonPrefixes.length;
    if (!validTruncation || !validNumberOfKeysReturned) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_8__.IntegrityError();
    }
};
const listObjectsV2 = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_9__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_10__.s3TransferHandler, listObjectsV2Serializer, listObjectsV2Deserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_4__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=listObjectsV2.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/listParts.mjs":
/*!**************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/listParts.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listParts: () => (/* binding */ listParts)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/parsePayload.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const listPartsSerializer = async (input, endpoint) => {
    const headers = {};
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.serializePathnameObjectKey)(url, input.Key);
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.validateS3RequiredParameter)(!!input.UploadId, 'UploadId');
    url.search = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyUrlSearchParams({
        uploadId: input.UploadId,
    }).toString();
    return {
        method: 'GET',
        headers,
        url,
    };
};
const listPartsDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_4__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        const parsed = await (0,_utils_parsePayload_mjs__WEBPACK_IMPORTED_MODULE_6__.parseXmlBody)(response);
        const contents = (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.map)(parsed, {
            UploadId: 'UploadId',
            Parts: [
                'Part',
                value => (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.emptyArrayGuard)(value, _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_5__.deserializeCompletedPartList),
            ],
        });
        return {
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
            ...contents,
        };
    }
};
const listParts = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, listPartsSerializer, listPartsDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_4__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=listParts.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/putObject.mjs":
/*!**************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/putObject.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   putObject: () => (/* binding */ putObject)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const putObjectSerializer = async (input, endpoint) => {
    const headers = {
        ...(await (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializeObjectConfigsToHeaders)({
            ...input,
            ContentType: input.ContentType ?? 'application/octet-stream',
        })),
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
            'content-md5': input.ContentMD5,
            'x-amz-checksum-crc32': input.ChecksumCRC32,
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
            'If-None-Match': input.IfNoneMatch,
        }),
    };
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePathnameObjectKey)(url, input.Key);
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    return {
        method: 'PUT',
        headers,
        url,
        body: input.Body,
    };
};
const putObjectDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        return {
            ...(0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(response.headers, {
                ETag: 'etag',
                VersionId: 'x-amz-version-id',
            }),
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
        };
    }
};
const putObject = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, putObjectSerializer, putObjectDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=putObject.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/s3data/uploadPart.mjs":
/*!***************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/s3data/uploadPart.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadPart: () => (/* binding */ uploadPart)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/amplifyUrl/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils/composers */ "../core/dist/esm/clients/internal/composeServiceApi.mjs");
/* harmony import */ var _runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runtime/s3TransferHandler/fetch.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/s3TransferHandler/xhr.mjs");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?3e26");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer */ "?e333");
/* harmony import */ var _utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs");
/* harmony import */ var _validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../validateObjectUrl.mjs */ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs");
/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.mjs */ "../storage/dist/esm/providers/s3/utils/client/s3data/base.mjs");












// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const uploadPartSerializer = async (input, endpoint) => {
    const headers = {
        ...(0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.assignStringVariables)({
            'x-amz-checksum-crc32': input.ChecksumCRC32,
            'content-md5': input.ContentMD5,
            'x-amz-expected-bucket-owner': input.ExpectedBucketOwner,
        }),
        'content-type': 'application/octet-stream',
    };
    const url = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrl(endpoint.url.toString());
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.Key, 'Key');
    url.pathname = (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.serializePathnameObjectKey)(url, input.Key);
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.PartNumber, 'PartNumber');
    (0,_utils_serializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.validateS3RequiredParameter)(!!input.UploadId, 'UploadId');
    url.search = new _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_3__.AmplifyUrlSearchParams({
        partNumber: input.PartNumber + '',
        uploadId: input.UploadId,
    }).toString();
    (0,_validateObjectUrl_mjs__WEBPACK_IMPORTED_MODULE_4__.validateObjectUrl)({
        bucketName: input.Bucket,
        key: input.Key,
        objectURL: url,
    });
    return {
        method: 'PUT',
        headers,
        url,
        body: input.Body,
    };
};
const uploadPartDeserializer = async (response) => {
    if (response.statusCode >= 300) {
        const error = (await (0,_base_mjs__WEBPACK_IMPORTED_MODULE_5__.parseXmlError)(response));
        throw (0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.buildStorageServiceError)(error, response.statusCode);
    }
    else {
        return {
            ...(0,_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_6__.map)(response.headers, {
                ETag: 'etag',
            }),
            $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_7__.parseMetadata)(response),
        };
    }
};
const uploadPart = (0,_aws_amplify_core_internals_aws_client_utils_composers__WEBPACK_IMPORTED_MODULE_8__.composeServiceApi)(_runtime_s3TransferHandler_fetch_mjs__WEBPACK_IMPORTED_MODULE_9__.s3TransferHandler, uploadPartSerializer, uploadPartDeserializer, { ..._base_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultConfig, responseType: 'text' });


//# sourceMappingURL=uploadPart.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/utils/createRetryDecider.mjs":
/*!**********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/utils/createRetryDecider.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createRetryDecider: () => (/* binding */ createRetryDecider)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Factory of a {@link RetryDecider} function.
 *
 * @param errorParser function to parse HTTP response wth XML payload to JS
 * 	Error instance.
 * @returns A structure indicating if the response is retryable; And if it is a
 * 	CredentialsExpiredError
 */
const createRetryDecider = (errorParser) => async (response, error, middlewareContext) => {
    const defaultRetryDecider = (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.getRetryDecider)(errorParser);
    const defaultRetryDecision = await defaultRetryDecider(response, error);
    if (!response) {
        return { retryable: defaultRetryDecision.retryable };
    }
    const parsedError = await errorParser(response);
    const errorCode = parsedError?.name;
    const errorMessage = parsedError?.message;
    const isCredentialsExpired = isCredentialsExpiredError(errorCode, errorMessage);
    return {
        retryable: defaultRetryDecision.retryable ||
            // If we know the previous retry attempt sets isCredentialsExpired in the
            // middleware context, we don't want to retry anymore.
            !!(isCredentialsExpired && !middlewareContext?.isCredentialsExpired),
        isCredentialsExpiredError: isCredentialsExpired,
    };
};
// Ref: https://github.com/aws/aws-sdk-js/blob/54829e341181b41573c419bd870dd0e0f8f10632/lib/event_listeners.js#L522-L541
const INVALID_TOKEN_ERROR_CODES = [
    'RequestExpired',
    'ExpiredTokenException',
    'ExpiredToken',
];
/**
 * Given an error code, returns true if it is related to invalid credentials.
 *
 * @param errorCode String representation of some error.
 * @returns True if given error indicates the credentials used to authorize request
 * are invalid.
 */
const isCredentialsExpiredError = (errorCode, errorMessage) => {
    const isExpiredTokenError = !!errorCode && INVALID_TOKEN_ERROR_CODES.includes(errorCode);
    // Ref: https://github.com/aws/aws-sdk-js/blob/54829e341181b41573c419bd870dd0e0f8f10632/lib/event_listeners.js#L536-L539
    const isExpiredSignatureError = !!errorCode &&
        !!errorMessage &&
        errorCode.includes('Signature') &&
        errorMessage.includes('expired');
    return isExpiredTokenError || isExpiredSignatureError;
};


//# sourceMappingURL=createRetryDecider.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs":
/*!**********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   buildStorageServiceError: () => (/* binding */ buildStorageServiceError),
/* harmony export */   createStringEnumDeserializer: () => (/* binding */ createStringEnumDeserializer),
/* harmony export */   deserializeBoolean: () => (/* binding */ deserializeBoolean),
/* harmony export */   deserializeCompletedPartList: () => (/* binding */ deserializeCompletedPartList),
/* harmony export */   deserializeMetadata: () => (/* binding */ deserializeMetadata),
/* harmony export */   deserializeNumber: () => (/* binding */ deserializeNumber),
/* harmony export */   deserializeTimestamp: () => (/* binding */ deserializeTimestamp),
/* harmony export */   emptyArrayGuard: () => (/* binding */ emptyArrayGuard),
/* harmony export */   map: () => (/* binding */ map)
/* harmony export */ });
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Maps an object to a new object using the provided instructions.
 * The instructions are a map of the returning mapped object's property names to a single instruction of how to map the
 * value from the original object to the new object. There are two types of instructions:
 *
 * 1. A string representing the property name of the original object to map to the new object. The value mapped from
 * the original object will be the same as the value in the new object, and it can ONLY be string.
 *
 * 2. An array of two elements. The first element is the property name of the original object to map to the new object.
 * The second element is a function that takes the value from the original object and returns the value to be mapped to
 * the new object. The function can return any type.
 *
 * Example:
 * ```typescript
 * const input = {
 *   Foo: 'foo',
 *   BarList: [{value: 'bar1'}, {value: 'bar2'}]
 * }
 * const output = map(input, {
 *   someFoo: 'Foo',
 *   bar: ['BarList', (barList) => barList.map(bar => bar.value)]
 *   baz: 'Baz' // Baz does not exist in input, so it will not be in the output.
 * });
 * // output = { someFoo: 'foo', bar: ['bar1', 'bar2'] }
 * ```
 *
 * @param obj The object containing the data to compose mapped object.
 * @param instructions The instructions mapping the object values to the new object.
 * @returns A new object with the mapped values.
 *
 * @internal
 */
const map = (obj, instructions) => {
    const result = {};
    for (const [key, instruction] of Object.entries(instructions)) {
        const [accessor, deserializer] = Array.isArray(instruction)
            ? instruction
            : [instruction];
        if (Object.prototype.hasOwnProperty.call(obj, accessor)) {
            result[key] = deserializer
                ? deserializer(obj[accessor])
                : String(obj[accessor]);
        }
    }
    return result;
};
/**
 * Deserializes a string to a number. Returns undefined if input is undefined.
 *
 * @internal
 */
const deserializeNumber = (value) => value ? Number(value) : undefined;
/**
 * Deserializes a string to a boolean. Returns undefined if input is undefined. Returns true if input is 'true',
 * otherwise false.
 *
 * @internal
 */
const deserializeBoolean = (value) => {
    return value ? value === 'true' : undefined;
};
/**
 * Deserializes a string to a Date. Returns undefined if input is undefined.
 * It supports epoch timestamp; rfc3339(cannot have a UTC, fractional precision supported); rfc7231(section 7.1.1.1)
 *
 * @see https://www.epoch101.com/
 * @see https://datatracker.ietf.org/doc/html/rfc3339.html#section-5.6
 * @see https://datatracker.ietf.org/doc/html/rfc7231.html#section-7.1.1.1
 *
 * @note For bundle size consideration, we use Date constructor to parse the timestamp string. There might be slight
 * difference among browsers.
 *
 * @internal
 */
const deserializeTimestamp = (value) => {
    return value ? new Date(value) : undefined;
};
/**
 * Create a function deserializing a string to an enum value. If the string is not a valid enum value, it throws a
 * StorageError.
 *
 * @example
 * ```typescript
 * const deserializeStringEnum = createStringEnumDeserializer(['a', 'b', 'c'] as const, 'FieldName');
 * const deserializedArray = ['a', 'b', 'c'].map(deserializeStringEnum);
 * // deserializedArray = ['a', 'b', 'c']
 *
 * const invalidValue = deserializeStringEnum('d');
 * // Throws InvalidFieldName: Invalid FieldName: d
 * ```
 *
 * @internal
 */
const createStringEnumDeserializer = (enumValues, fieldName) => {
    const deserializeStringEnum = (value) => {
        const parsedEnumValue = value
            ? enumValues.find(enumValue => enumValue === value)
            : undefined;
        if (!parsedEnumValue) {
            throw new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__.StorageError({
                name: `Invalid${fieldName}`,
                message: `Invalid ${fieldName}: ${value}`,
                recoverySuggestion: 'This is likely to be a bug. Please reach out to library authors.',
            });
        }
        return parsedEnumValue;
    };
    return deserializeStringEnum;
};
/**
 * Function that makes sure the deserializer receives non-empty array.
 *
 * @internal
 */
const emptyArrayGuard = (value, deserializer) => {
    if (value === '') {
        return [];
    }
    const valueArray = (Array.isArray(value) ? value : [value]).filter(e => e != null);
    return deserializer(valueArray);
};
/**
 * @internal
 */
const deserializeMetadata = (headers) => {
    const objectMetadataHeaderPrefix = 'x-amz-meta-';
    const deserialized = Object.keys(headers)
        .filter(header => header.startsWith(objectMetadataHeaderPrefix))
        .reduce((acc, header) => {
        acc[header.replace(objectMetadataHeaderPrefix, '')] = headers[header];
        return acc;
    }, {});
    return Object.keys(deserialized).length > 0 ? deserialized : undefined;
};
/**
 * Internal-only method to create a new StorageError from a service error.
 *
 * @internal
 */
const buildStorageServiceError = (error, statusCode) => {
    const storageError = new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_0__.StorageError({
        name: error.name,
        message: error.message,
    });
    if (statusCode === 404) {
        storageError.recoverySuggestion =
            'Please add the object with this key to the bucket as the key is not found.';
    }
    return storageError;
};
/**
 * Internal-only method used for deserializing the parts of a multipart upload.
 *
 * @internal
 */
const deserializeCompletedPartList = (input) => input.map(item => map(item, {
    PartNumber: ['PartNumber', deserializeNumber],
    ETag: 'ETag',
    ChecksumCRC32: 'ChecksumCRC32',
}));


//# sourceMappingURL=deserializeHelpers.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/utils/integrityHelpers.mjs":
/*!********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/utils/integrityHelpers.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bothNilOrEqual: () => (/* binding */ bothNilOrEqual),
/* harmony export */   isEqual: () => (/* binding */ isEqual),
/* harmony export */   isNil: () => (/* binding */ isNil),
/* harmony export */   isObject: () => (/* binding */ isObject)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const isNil = (value) => {
    return value === undefined || value === null;
};
const bothNilOrEqual = (original, output) => {
    return (isNil(original) && isNil(output)) || original === output;
};
/**
 * This function is used to determine if a value is an object.
 * It excludes arrays and null values.
 *
 * @param value
 * @returns
 */
const isObject = (value) => {
    return value != null && typeof value === 'object' && !Array.isArray(value);
};
/**
 * This function is used to compare two objects and determine if they are equal.
 * It handles nested objects and arrays as well.
 * Array order is not taken into account.
 *
 * @param object
 * @param other
 * @returns
 */
const isEqual = (object, other) => {
    if (Array.isArray(object) && !Array.isArray(other)) {
        return false;
    }
    if (!Array.isArray(object) && Array.isArray(other)) {
        return false;
    }
    if (Array.isArray(object) && Array.isArray(other)) {
        return (object.length === other.length &&
            object.every((val, ix) => isEqual(val, other[ix])));
    }
    if (!isObject(object) || !isObject(other)) {
        return object === other;
    }
    const objectKeys = Object.keys(object);
    const otherKeys = Object.keys(other);
    if (objectKeys.length !== otherKeys.length) {
        return false;
    }
    return objectKeys.every(key => {
        return (otherKeys.includes(key) &&
            isEqual(object[key], other[key]));
    });
};


//# sourceMappingURL=integrityHelpers.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs":
/*!****************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/utils/parsePayload.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createXmlErrorParser: () => (/* binding */ createXmlErrorParser),
/* harmony export */   parseXmlBody: () => (/* binding */ parseXmlBody)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/serde/responseInfo.mjs");
/* harmony import */ var _runtime_xmlParser_pureJs_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runtime/xmlParser/pureJs.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/xmlParser/dom.mjs");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer */ "?9c0a");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Factory creating a parser that parses the JS Error object from the XML
 * response payload.
 *
 * @param input Input object
 * @param input.noErrorWrapping Whether the error code and message are located
 *   directly in the root XML element, or in a nested `<Error>` element.
 *   See: https://smithy.io/2.0/aws/protocols/aws-restxml-protocol.html#restxml-errors
 *
 *   Default to false.
 *
 * @internal
 */
const createXmlErrorParser = ({ noErrorWrapping = false, } = {}) => async (response) => {
    if (!response || response.statusCode < 300) {
        return;
    }
    const { statusCode } = response;
    const body = await parseXmlBody(response);
    const errorLocation = noErrorWrapping ? body : body.Error;
    const code = errorLocation?.Code
        ? errorLocation.Code
        : statusCode === 404
            ? 'NotFound'
            : statusCode.toString();
    const message = errorLocation?.message ?? errorLocation?.Message ?? code;
    const error = new Error(message);
    return Object.assign(error, {
        name: code,
        $metadata: (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.parseMetadata)(response),
    });
};
const parseXmlBody = async (response) => {
    if (!response.body) {
        // S3 can return 200 without a body indicating failure.
        throw new Error('S3 aborted request.');
    }
    const data = await response.body.text();
    if (data?.length > 0) {
        try {
            return _runtime_xmlParser_pureJs_mjs__WEBPACK_IMPORTED_MODULE_2__.parser.parse(data);
        }
        catch (error) {
            throw new Error(`Failed to parse XML response: ${error}`);
        }
    }
    return {};
};


//# sourceMappingURL=parsePayload.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs":
/*!********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/client/utils/serializeHelpers.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assignStringVariables: () => (/* binding */ assignStringVariables),
/* harmony export */   serializeObjectConfigsToHeaders: () => (/* binding */ serializeObjectConfigsToHeaders),
/* harmony export */   serializePathnameObjectKey: () => (/* binding */ serializePathnameObjectKey),
/* harmony export */   validateS3RequiredParameter: () => (/* binding */ validateS3RequiredParameter)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/types/errors.mjs");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * @internal
 */
const assignStringVariables = (values) => {
    const queryParams = {};
    for (const [key, value] of Object.entries(values)) {
        if (value != null) {
            queryParams[key] = value.toString();
        }
    }
    return queryParams;
};
/**
 * Serailize the parameters for configuring the S3 object. Currently used by
 * `putObject` and `createMultipartUpload` API.
 *
 * @internal
 */
const serializeObjectConfigsToHeaders = async (input) => ({
    ...assignStringVariables({
        'x-amz-acl': input.ACL,
        'cache-control': input.CacheControl,
        'content-disposition': input.ContentDisposition,
        'content-language': input.ContentLanguage,
        'content-encoding': input.ContentEncoding,
        'content-type': input.ContentType,
        expires: input.Expires?.toUTCString(),
        'x-amz-tagging': input.Tagging,
        ...serializeMetadata(input.Metadata),
    }),
});
const serializeMetadata = (metadata = {}) => Object.keys(metadata).reduce((acc, suffix) => {
    acc[`x-amz-meta-${suffix.toLowerCase()}`] = metadata[suffix];
    return acc;
}, {});
/**
 * Serialize the object key to a URL pathname.
 * @see https://github.com/aws/aws-sdk-js-v3/blob/7ed7101dcc4e81038b6c7f581162b959e6b33a04/clients/client-s3/src/protocols/Aws_restXml.ts#L1108
 *
 * @internal
 */
const serializePathnameObjectKey = (url, key) => {
    return (url.pathname.replace(/\/$/, '') +
        `/${key.split('/').map(_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_0__.extendedEncodeURIComponent).join('/')}`);
};
function validateS3RequiredParameter(assertion, paramName) {
    if (!assertion) {
        throw new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageError({
            name: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_2__.AmplifyErrorCode.Unknown,
            message: 'An unknown error has occurred.',
            underlyingError: new TypeError(`Expected a non-null value for S3 parameter ${paramName}`),
            recoverySuggestion: 'This is likely to be a bug. Please reach out to library authors.',
        });
    }
}


//# sourceMappingURL=serializeHelpers.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/constants.mjs":
/*!************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/constants.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CHECKSUM_ALGORITHM_CRC32: () => (/* binding */ CHECKSUM_ALGORITHM_CRC32),
/* harmony export */   DEFAULT_ACCESS_LEVEL: () => (/* binding */ DEFAULT_ACCESS_LEVEL),
/* harmony export */   DEFAULT_DELIMITER: () => (/* binding */ DEFAULT_DELIMITER),
/* harmony export */   DEFAULT_PART_SIZE: () => (/* binding */ DEFAULT_PART_SIZE),
/* harmony export */   DEFAULT_PRESIGN_EXPIRATION: () => (/* binding */ DEFAULT_PRESIGN_EXPIRATION),
/* harmony export */   DEFAULT_QUEUE_SIZE: () => (/* binding */ DEFAULT_QUEUE_SIZE),
/* harmony export */   LOCAL_TESTING_S3_ENDPOINT: () => (/* binding */ LOCAL_TESTING_S3_ENDPOINT),
/* harmony export */   MAX_OBJECT_SIZE: () => (/* binding */ MAX_OBJECT_SIZE),
/* harmony export */   MAX_PARTS_COUNT: () => (/* binding */ MAX_PARTS_COUNT),
/* harmony export */   MAX_URL_EXPIRATION: () => (/* binding */ MAX_URL_EXPIRATION),
/* harmony export */   STORAGE_INPUT_KEY: () => (/* binding */ STORAGE_INPUT_KEY),
/* harmony export */   STORAGE_INPUT_PATH: () => (/* binding */ STORAGE_INPUT_PATH),
/* harmony export */   STORAGE_INPUT_PREFIX: () => (/* binding */ STORAGE_INPUT_PREFIX),
/* harmony export */   UPLOADS_STORAGE_KEY: () => (/* binding */ UPLOADS_STORAGE_KEY)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const LOCAL_TESTING_S3_ENDPOINT = 'localhost:4566';
const DEFAULT_ACCESS_LEVEL = 'guest';
const DEFAULT_PRESIGN_EXPIRATION = 900;
const MAX_URL_EXPIRATION = 7 * 24 * 60 * 60 * 1000;
const MiB = 1024 * 1024;
const GiB = 1024 * MiB;
const TiB = 1024 * GiB;
/**
 * Default part size in MB that is used to determine if an upload task is single part or multi part.
 */
const DEFAULT_PART_SIZE = 5 * MiB;
const MAX_OBJECT_SIZE = 5 * TiB;
const MAX_PARTS_COUNT = 10000;
const DEFAULT_QUEUE_SIZE = 4;
const UPLOADS_STORAGE_KEY = '__uploadInProgress';
const STORAGE_INPUT_PREFIX = 'prefix';
const STORAGE_INPUT_KEY = 'key';
const STORAGE_INPUT_PATH = 'path';
const DEFAULT_DELIMITER = '/';
const CHECKSUM_ALGORITHM_CRC32 = 'crc-32';


//# sourceMappingURL=constants.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/constructContentDisposition.mjs":
/*!******************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/constructContentDisposition.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   constructContentDisposition: () => (/* binding */ constructContentDisposition)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const constructContentDisposition = (contentDisposition) => {
    if (!contentDisposition)
        return undefined;
    if (typeof contentDisposition === 'string')
        return contentDisposition;
    const { type, filename } = contentDisposition;
    return filename !== undefined ? `${type}; filename="${filename}"` : type;
};


//# sourceMappingURL=constructContentDisposition.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/crc32.mjs":
/*!********************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/crc32.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateContentCRC32: () => (/* binding */ calculateContentCRC32)
/* harmony export */ });
/* harmony import */ var crc_32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crc-32 */ "../../node_modules/crc-32/crc32.js");
/* harmony import */ var _hexUtils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hexUtils.mjs */ "../storage/dist/esm/providers/s3/utils/hexUtils.mjs");
/* harmony import */ var _readFile_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readFile.mjs */ "../storage/dist/esm/providers/s3/utils/readFile.mjs");




// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const CHUNK_SIZE = 1024 * 1024; // 1MB chunks
const calculateContentCRC32 = async (content, seed = 0) => {
    let internalSeed = seed;
    if (content instanceof ArrayBuffer || ArrayBuffer.isView(content)) {
        let uint8Array;
        if (content instanceof ArrayBuffer) {
            uint8Array = new Uint8Array(content);
        }
        else {
            uint8Array = new Uint8Array(content.buffer, content.byteOffset, content.byteLength);
        }
        let offset = 0;
        while (offset < uint8Array.length) {
            const end = Math.min(offset + CHUNK_SIZE, uint8Array.length);
            const chunk = uint8Array.slice(offset, end);
            internalSeed = crc_32__WEBPACK_IMPORTED_MODULE_0__.buf(chunk, internalSeed) >>> 0;
            offset = end;
        }
    }
    else {
        let blob;
        if (content instanceof Blob) {
            blob = content;
        }
        else {
            blob = new Blob([content]);
        }
        let offset = 0;
        while (offset < blob.size) {
            const end = Math.min(offset + CHUNK_SIZE, blob.size);
            const chunk = blob.slice(offset, end);
            const arrayBuffer = await (0,_readFile_mjs__WEBPACK_IMPORTED_MODULE_1__.readFile)(chunk);
            const uint8Array = new Uint8Array(arrayBuffer);
            internalSeed = crc_32__WEBPACK_IMPORTED_MODULE_0__.buf(uint8Array, internalSeed) >>> 0;
            offset = end;
        }
    }
    const hex = internalSeed.toString(16).padStart(8, '0');
    return {
        checksumArrayBuffer: (0,_hexUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.hexToArrayBuffer)(hex),
        checksum: (0,_hexUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.hexToBase64)(hex),
        seed: internalSeed,
    };
};


//# sourceMappingURL=crc32.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/getCombinedCrc32.native.mjs":
/*!**************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/getCombinedCrc32.native.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCombinedCrc32: () => (/* binding */ getCombinedCrc32)
/* harmony export */ });
/* harmony import */ var _apis_internal_uploadData_multipart_getDataChunker_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../apis/internal/uploadData/multipart/getDataChunker.mjs */ "../storage/dist/esm/providers/s3/apis/internal/uploadData/multipart/getDataChunker.mjs");
/* harmony import */ var _crc32_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crc32.mjs */ "../storage/dist/esm/providers/s3/utils/crc32.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Calculates a combined CRC32 checksum for the given data.
 *
 * This function chunks the input data, calculates CRC32 for each chunk,
 * and then combines these checksums into a single value.
 *
 * @async
 * @param {StorageUploadDataPayload} data - The data to calculate the checksum for.
 * @param {number | undefined} size - The size of each chunk. If undefined, a default chunk size will be used.
 * @returns {Promise<string>} A promise that resolves to a string containing the combined CRC32 checksum
 *                            and the number of chunks, separated by a hyphen.
 */
const getCombinedCrc32 = async (data, size) => {
    const crc32List = [];
    const dataChunker = (0,_apis_internal_uploadData_multipart_getDataChunker_mjs__WEBPACK_IMPORTED_MODULE_0__.getDataChunker)(data, size);
    let totalLength = 0;
    for (const { data: checkData } of dataChunker) {
        const checksum = new Uint8Array((await (0,_crc32_mjs__WEBPACK_IMPORTED_MODULE_1__.calculateContentCRC32)(checkData)).checksumArrayBuffer);
        totalLength += checksum.length;
        crc32List.push(checksum);
    }
    // Combine all Uint8Arrays into a single Uint8Array
    const combinedArray = new Uint8Array(totalLength);
    let offset = 0;
    for (const crc32Hash of crc32List) {
        combinedArray.set(crc32Hash, offset);
        offset += crc32Hash.length;
    }
    return `${(await (0,_crc32_mjs__WEBPACK_IMPORTED_MODULE_1__.calculateContentCRC32)(combinedArray.buffer)).checksum}-${crc32List.length}`;
};


//# sourceMappingURL=getCombinedCrc32.native.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/hexUtils.mjs":
/*!***********************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/hexUtils.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   hexToArrayBuffer: () => (/* binding */ hexToArrayBuffer),
/* harmony export */   hexToBase64: () => (/* binding */ hexToBase64),
/* harmony export */   hexToUint8Array: () => (/* binding */ hexToUint8Array)
/* harmony export */ });
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-xml-parser */ "?a576");
/* harmony import */ var _client_runtime_base64_index_native_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client/runtime/base64/index.native.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/base64/index.browser.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const hexToUint8Array = (hexString) => new Uint8Array((hexString.match(/\w{2}/g) ?? []).map(h => parseInt(h, 16)));
const hexToArrayBuffer = (hexString) => hexToUint8Array(hexString).buffer;
const hexToBase64 = (hexString) => (0,_client_runtime_base64_index_native_mjs__WEBPACK_IMPORTED_MODULE_1__.toBase64)(hexToUint8Array(hexString));


//# sourceMappingURL=hexUtils.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/isInputWithPath.mjs":
/*!******************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/isInputWithPath.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isInputWithPath: () => (/* binding */ isInputWithPath)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const isInputWithPath = (input) => {
    return input.path !== undefined;
};


//# sourceMappingURL=isInputWithPath.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/md5.mjs":
/*!******************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/md5.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateContentMd5: () => (/* binding */ calculateContentMd5)
/* harmony export */ });
/* harmony import */ var _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/md5-js */ "../../node_modules/@smithy/md5-js/dist-es/index.js");
/* harmony import */ var fast_xml_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fast-xml-parser */ "?a576");
/* harmony import */ var _client_runtime_base64_index_native_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./client/runtime/base64/index.native.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/base64/index.browser.mjs");
/* harmony import */ var _readFile_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./readFile.mjs */ "../storage/dist/esm/providers/s3/utils/readFile.mjs");









// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const calculateContentMd5 = async (content) => {
    const hasher = new _smithy_md5_js__WEBPACK_IMPORTED_MODULE_0__.Md5();
    const buffer = content instanceof Blob ? await (0,_readFile_mjs__WEBPACK_IMPORTED_MODULE_2__.readFile)(content) : content;
    hasher.update(buffer);
    const digest = await hasher.digest();
    return (0,_client_runtime_base64_index_native_mjs__WEBPACK_IMPORTED_MODULE_3__.toBase64)(digest);
};


//# sourceMappingURL=md5.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/readFile.mjs":
/*!***********************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/readFile.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   readFile: () => (/* binding */ readFile)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const readFile = (file) => new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
        resolve(reader.result);
    };
    reader.onabort = () => {
        reject(new Error('Read aborted'));
    };
    reader.onerror = () => {
        reject(reader.error);
    };
    reader.readAsArrayBuffer(file);
});


//# sourceMappingURL=readFile.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/resolveIdentityId.mjs":
/*!********************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/resolveIdentityId.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveIdentityId: () => (/* binding */ resolveIdentityId)
/* harmony export */ });
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const resolveIdentityId = (identityId) => {
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!identityId, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoIdentityId);
    return identityId;
};


//# sourceMappingURL=resolveIdentityId.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs":
/*!**************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/resolveS3ConfigAndInput.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolveS3ConfigAndInput: () => (/* binding */ resolveS3ConfigAndInput)
/* harmony export */ });
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _utils_resolvePrefix_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/resolvePrefix.mjs */ "../storage/dist/esm/utils/resolvePrefix.mjs");
/* harmony import */ var _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../errors/StorageError.mjs */ "../storage/dist/esm/errors/StorageError.mjs");
/* harmony import */ var _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../errors/constants.mjs */ "../storage/dist/esm/errors/constants.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");







// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * resolve the common input options for S3 API handlers from Amplify configuration and library options.
 *
 * @param {AmplifyClassV6} amplify The Amplify instance.
 * @param {S3ApiOptions} apiOptions The input options for S3 provider.
 * @returns {Promise<ResolvedS3ConfigAndInput>} The resolved common input options for S3 API handlers.
 * @throws A `StorageError` with `error.name` from `StorageValidationErrorCode` indicating invalid
 *   configurations or Amplify library options.
 *
 * @internal
 */
const resolveS3ConfigAndInput = async (amplify, apiInput) => {
    const { options: apiOptions } = apiInput ?? {};
    /**
     * IdentityId is always cached in memory so we can safely make calls here. It
     * should be stable even for unauthenticated users, regardless of credentials.
     */
    const { identityId } = await amplify.Auth.fetchAuthSession();
    /**
     * A credentials provider function instead of a static credentials object is
     * used because the long-running tasks like multipart upload may span over the
     * credentials expiry. Auth.fetchAuthSession() automatically refreshes the
     * credentials if they are expired.
     *
     * The optional forceRefresh option is set when the S3 service returns expired
     * tokens error in the previous API call attempt.
     */
    const credentialsProvider = async (options) => {
        if (isLocationCredentialsProvider(apiOptions)) {
            assertStorageInput(apiInput);
        }
        // TODO: forceRefresh option of fetchAuthSession would refresh both tokens and
        // AWS credentials. So we do not support forceRefreshing from the Auth until
        // we support refreshing only the credentials.
        const { credentials } = isLocationCredentialsProvider(apiOptions)
            ? await apiOptions.locationCredentialsProvider(options)
            : await amplify.Auth.fetchAuthSession();
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!credentials, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoCredentials);
        return credentials;
    };
    const { bucket: defaultBucket, region: defaultRegion, dangerouslyConnectToHttpEndpointForTesting, buckets, } = amplify.getConfig()?.Storage?.S3 ?? {};
    const { bucket = defaultBucket, region = defaultRegion } = (apiOptions?.bucket && resolveBucketConfig(apiOptions, buckets)) || {};
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!bucket, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoBucket);
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!region, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoRegion);
    const { defaultAccessLevel, prefixResolver = _utils_resolvePrefix_mjs__WEBPACK_IMPORTED_MODULE_2__.resolvePrefix, isObjectLockEnabled, } = amplify.libraryOptions?.Storage?.S3 ?? {};
    const accessLevel = apiOptions?.accessLevel ?? defaultAccessLevel ?? _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_ACCESS_LEVEL;
    const targetIdentityId = accessLevel === 'protected'
        ? (apiOptions?.targetIdentityId ?? identityId)
        : identityId;
    const keyPrefix = await prefixResolver({ accessLevel, targetIdentityId });
    return {
        s3Config: {
            credentials: credentialsProvider,
            region,
            useAccelerateEndpoint: apiOptions?.useAccelerateEndpoint,
            ...(apiOptions?.customEndpoint
                ? { customEndpoint: apiOptions.customEndpoint }
                : {}),
            ...(dangerouslyConnectToHttpEndpointForTesting
                ? {
                    customEndpoint: _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.LOCAL_TESTING_S3_ENDPOINT,
                    forcePathStyle: true,
                }
                : {}),
        },
        bucket,
        keyPrefix,
        identityId,
        isObjectLockEnabled,
    };
};
const isLocationCredentialsProvider = (options) => {
    return !!options?.locationCredentialsProvider;
};
const isInputWithCallbackPath = (input) => {
    return ((input?.path &&
        typeof input.path === 'function') ||
        (input?.destination?.path &&
            typeof input.destination?.path === 'function') ||
        (input?.source?.path &&
            typeof input.source?.path === 'function'));
};
const isDeprecatedInput = (input) => {
    return (isInputWithKey(input) ||
        isInputWithPrefix(input) ||
        isInputWithCopySourceOrDestination(input));
};
const assertStorageInput = (input) => {
    if (isDeprecatedInput(input) || isInputWithCallbackPath(input)) {
        throw new _errors_StorageError_mjs__WEBPACK_IMPORTED_MODULE_4__.StorageError({
            name: _errors_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.INVALID_STORAGE_INPUT,
            message: 'The input needs to have a path as a string value.',
            recoverySuggestion: 'Please provide a valid path as a string value for the input.',
        });
    }
};
const isInputWithKey = (input) => {
    return !!(typeof input.key === 'string');
};
const isInputWithPrefix = (input) => {
    return !!(typeof input.prefix === 'string');
};
const isInputWithCopySourceOrDestination = (input) => {
    return !!(typeof input.source?.key === 'string' ||
        typeof input.destination?.key === 'string');
};
const resolveBucketConfig = (apiOptions, buckets) => {
    if (typeof apiOptions.bucket === 'string') {
        const bucketConfig = buckets?.[apiOptions.bucket];
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!bucketConfig, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidStorageBucket);
        return { bucket: bucketConfig.bucketName, region: bucketConfig.region };
    }
    if (typeof apiOptions.bucket === 'object') {
        return {
            bucket: apiOptions.bucket.bucketName,
            region: apiOptions.bucket.region,
        };
    }
};


//# sourceMappingURL=resolveS3ConfigAndInput.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/transferTask.mjs":
/*!***************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/transferTask.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDownloadTask: () => (/* binding */ createDownloadTask),
/* harmony export */   createUploadTask: () => (/* binding */ createUploadTask)
/* harmony export */ });
/* harmony import */ var _errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/CanceledError.mjs */ "../storage/dist/esm/errors/CanceledError.mjs");
/* harmony import */ var _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/logger.mjs */ "../storage/dist/esm/utils/logger.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const createCancellableTask = ({ job, onCancel, }) => {
    const state = 'IN_PROGRESS';
    let canceledErrorMessage;
    const cancelableTask = {
        cancel: (message) => {
            const { state: taskState } = cancelableTask;
            if (taskState === 'CANCELED' ||
                taskState === 'ERROR' ||
                taskState === 'SUCCESS') {
                _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`This task cannot be canceled. State: ${taskState}`);
                return;
            }
            cancelableTask.state = 'CANCELED';
            canceledErrorMessage = message;
            onCancel(canceledErrorMessage);
        },
        state,
    };
    const wrappedJobPromise = (async () => {
        try {
            const result = await job();
            cancelableTask.state = 'SUCCESS';
            return result;
        }
        catch (e) {
            if ((0,_errors_CanceledError_mjs__WEBPACK_IMPORTED_MODULE_1__.isCancelError)(e)) {
                cancelableTask.state = 'CANCELED';
                e.message = canceledErrorMessage ?? e.message;
            }
            cancelableTask.state = 'ERROR';
            throw e;
        }
    })();
    return Object.assign(cancelableTask, {
        result: wrappedJobPromise,
    });
};
const createDownloadTask = createCancellableTask;
const createUploadTask = ({ job, onCancel, onResume, onPause, isMultipartUpload, }) => {
    const cancellableTask = createCancellableTask({
        job,
        onCancel,
    });
    const uploadTask = Object.assign(cancellableTask, {
        pause: () => {
            const { state } = uploadTask;
            if (!isMultipartUpload || state !== 'IN_PROGRESS') {
                _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`This task cannot be paused. State: ${state}`);
                return;
            }
            // TODO(eslint): remove this linter suppression.
            // eslint-disable-next-line @typescript-eslint/ban-ts-comment
            // @ts-ignore
            uploadTask.state = 'PAUSED';
            onPause?.();
        },
        resume: () => {
            const { state } = uploadTask;
            if (!isMultipartUpload || state !== 'PAUSED') {
                _utils_logger_mjs__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`This task cannot be resumed. State: ${state}`);
                return;
            }
            // TODO(eslint): remove this linter suppression.
            // eslint-disable-next-line @typescript-eslint/ban-ts-comment
            // @ts-ignore
            uploadTask.state = 'IN_PROGRESS';
            onResume?.();
        },
    });
    return uploadTask;
};


//# sourceMappingURL=transferTask.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/urlDecoder.mjs":
/*!*************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/urlDecoder.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   urlDecode: () => (/* binding */ urlDecode)
/* harmony export */ });
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
/**
 * Decodes a URL-encoded string by replacing '+' characters with spaces and applying `decodeURIComponent`.
 * Reference:
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent#decoding_query_parameters_from_a_url
 * @param {string} value - The URL-encoded string to decode.
 * @returns {string} The decoded string.
 */
const urlDecode = (value) => {
    return decodeURIComponent(value.replace(/\+/g, ' '));
};


//# sourceMappingURL=urlDecoder.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/userAgent.mjs":
/*!************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/userAgent.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getStorageUserAgentValue: () => (/* binding */ getStorageUserAgentValue)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/Platform/types.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function getStorageUserAgentValue(action) {
    return (0,_aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_0__.getAmplifyUserAgent)({
        category: _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_1__.Category.Storage,
        action,
    });
}


//# sourceMappingURL=userAgent.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs":
/*!************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/validateBucketOwnerID.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateBucketOwnerID: () => (/* binding */ validateBucketOwnerID)
/* harmony export */ });
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const VALID_AWS_ACCOUNT_ID_PATTERN = /^\d{12}/;
const validateBucketOwnerID = (accountID) => {
    if (accountID === undefined) {
        return;
    }
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(VALID_AWS_ACCOUNT_ID_PATTERN.test(accountID), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidAWSAccountID);
};


//# sourceMappingURL=validateBucketOwnerID.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/validateMultipartUploadXML.mjs":
/*!*****************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/validateMultipartUploadXML.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateMultipartUploadXML: () => (/* binding */ validateMultipartUploadXML)
/* harmony export */ });
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");
/* harmony import */ var _client_runtime_xmlParser_pureJs_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./client/runtime/xmlParser/pureJs.mjs */ "../storage/dist/esm/providers/s3/utils/client/runtime/xmlParser/dom.mjs");
/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer */ "?98bf");
/* harmony import */ var _client_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./client/utils/deserializeHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/deserializeHelpers.mjs");
/* harmony import */ var _client_utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./client/utils/integrityHelpers.mjs */ "../storage/dist/esm/providers/s3/utils/client/utils/integrityHelpers.mjs");










// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function validateMultipartUploadXML(input, xml) {
    if (!input.Parts) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_1__.IntegrityError();
    }
    const parsedXML = _client_runtime_xmlParser_pureJs_mjs__WEBPACK_IMPORTED_MODULE_2__.parser.parse(xml);
    const mappedCompletedMultipartUpload = (0,_client_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.map)(parsedXML, {
        Parts: [
            'Part',
            value => (0,_client_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.emptyArrayGuard)(value, _client_utils_deserializeHelpers_mjs__WEBPACK_IMPORTED_MODULE_3__.deserializeCompletedPartList),
        ],
    });
    if (!(0,_client_utils_integrityHelpers_mjs__WEBPACK_IMPORTED_MODULE_4__.isEqual)(input, mappedCompletedMultipartUpload)) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_1__.IntegrityError();
    }
}


//# sourceMappingURL=validateMultipartUploadXML.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs":
/*!********************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/validateObjectUrl.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateObjectUrl: () => (/* binding */ validateObjectUrl)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core/internals/aws-client-utils */ "../core/dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs");
/* harmony import */ var _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/IntegrityError.mjs */ "../storage/dist/esm/errors/IntegrityError.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
function validateObjectUrl({ bucketName, key, objectURL, }) {
    if (!bucketName || !key || !objectURL) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_0__.IntegrityError();
    }
    const bucketWithDots = bucketName.includes('.');
    const encodedBucketName = (0,_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.extendedEncodeURIComponent)(bucketName);
    const encodedKey = key.split('/').map(_aws_amplify_core_internals_aws_client_utils__WEBPACK_IMPORTED_MODULE_1__.extendedEncodeURIComponent).join('/');
    const isPathStyleUrl = objectURL.pathname === `/${encodedBucketName}/${encodedKey}`;
    const isSubdomainUrl = objectURL.hostname.startsWith(`${encodedBucketName}.`) &&
        objectURL.pathname === `/${encodedKey}`;
    if (!(isPathStyleUrl || (!bucketWithDots && isSubdomainUrl))) {
        throw new _errors_IntegrityError_mjs__WEBPACK_IMPORTED_MODULE_0__.IntegrityError();
    }
}


//# sourceMappingURL=validateObjectUrl.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs":
/*!********************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/validateStorageOperationInput.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateStorageOperationInput: () => (/* binding */ validateStorageOperationInput)
/* harmony export */ });
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _isInputWithPath_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isInputWithPath.mjs */ "../storage/dist/esm/providers/s3/utils/isInputWithPath.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _resolveIdentityId_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolveIdentityId.mjs */ "../storage/dist/esm/providers/s3/utils/resolveIdentityId.mjs");






// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const validateStorageOperationInput = (input, identityId) => {
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(
    // Key present without a path
    (!!input.key && !input.path) ||
        // Path present without a key
        (!input.key && !!input.path), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidStorageOperationInput);
    if ((0,_isInputWithPath_mjs__WEBPACK_IMPORTED_MODULE_2__.isInputWithPath)(input)) {
        const { path } = input;
        const objectKey = typeof path === 'string'
            ? path
            : path({ identityId: (0,_resolveIdentityId_mjs__WEBPACK_IMPORTED_MODULE_3__.resolveIdentityId)(identityId) });
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!objectKey.startsWith('/'), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidStoragePathInput);
        return {
            inputType: _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.STORAGE_INPUT_PATH,
            objectKey,
        };
    }
    else {
        return { inputType: _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.STORAGE_INPUT_KEY, objectKey: input.key };
    }
};


//# sourceMappingURL=validateStorageOperationInput.mjs.map


/***/ }),

/***/ "../storage/dist/esm/providers/s3/utils/validateStorageOperationInputWithPrefix.mjs":
/*!******************************************************************************************!*\
  !*** ../storage/dist/esm/providers/s3/utils/validateStorageOperationInputWithPrefix.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateStorageOperationInputWithPrefix: () => (/* binding */ validateStorageOperationInputWithPrefix)
/* harmony export */ });
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");
/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants.mjs */ "../storage/dist/esm/providers/s3/utils/constants.mjs");
/* harmony import */ var _resolveIdentityId_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resolveIdentityId.mjs */ "../storage/dist/esm/providers/s3/utils/resolveIdentityId.mjs");





// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
// Local assertion function with StorageOperationInputWithPrefixPath as Input
const _isInputWithPath = (input) => {
    return input.path !== undefined;
};
const validateStorageOperationInputWithPrefix = (input, identityId) => {
    // Validate prefix & path not present at the same time
    (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!(input.prefix && input.path), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidStorageOperationPrefixInput);
    if (_isInputWithPath(input)) {
        const { path } = input;
        const objectKey = typeof path === 'string'
            ? path
            : path({ identityId: (0,_resolveIdentityId_mjs__WEBPACK_IMPORTED_MODULE_2__.resolveIdentityId)(identityId) });
        // Assert on no leading slash in the path parameter
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!objectKey.startsWith('/'), _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.InvalidStoragePathInput);
        return {
            inputType: _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.STORAGE_INPUT_PATH,
            objectKey,
        };
    }
    else {
        return { inputType: _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.STORAGE_INPUT_PREFIX, objectKey: input.prefix ?? '' };
    }
};


//# sourceMappingURL=validateStorageOperationInputWithPrefix.mjs.map


/***/ }),

/***/ "../storage/dist/esm/utils/logger.mjs":
/*!********************************************!*\
  !*** ../storage/dist/esm/utils/logger.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   logger: () => (/* binding */ logger)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");


// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.ConsoleLogger('Storage');


//# sourceMappingURL=logger.mjs.map


/***/ }),

/***/ "../storage/dist/esm/utils/resolvePrefix.mjs":
/*!***************************************************!*\
  !*** ../storage/dist/esm/utils/resolvePrefix.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   resolvePrefix: () => (/* binding */ resolvePrefix)
/* harmony export */ });
/* harmony import */ var _errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/utils/assertValidationError.mjs */ "../storage/dist/esm/errors/utils/assertValidationError.mjs");
/* harmony import */ var _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/types/validation.mjs */ "../storage/dist/esm/errors/types/validation.mjs");



// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
const resolvePrefix = ({ accessLevel, targetIdentityId, }) => {
    if (accessLevel === 'private') {
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!targetIdentityId, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoIdentityId);
        return `private/${targetIdentityId}/`;
    }
    else if (accessLevel === 'protected') {
        (0,_errors_utils_assertValidationError_mjs__WEBPACK_IMPORTED_MODULE_0__.assertValidationError)(!!targetIdentityId, _errors_types_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.StorageValidationErrorCode.NoIdentityId);
        return `protected/${targetIdentityId}/`;
    }
    else {
        return 'public/';
    }
};


//# sourceMappingURL=resolvePrefix.mjs.map


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var __webpack_exports__ = {};
/*!****************************!*\
  !*** ./dist/esm/index.mjs ***!
  \****************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Amplify: () => (/* reexport safe */ _initSingleton_mjs__WEBPACK_IMPORTED_MODULE_0__.DefaultAmplify)
/* harmony export */ });
/* harmony import */ var _initSingleton_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./initSingleton.mjs */ "./dist/esm/initSingleton.mjs");

//# sourceMappingURL=index.mjs.map

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var __webpack_exports__ = {};
/*!**********************************!*\
  !*** ./dist/esm/utils/index.mjs ***!
  \**********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cache: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.Cache),
/* harmony export */   ConsoleLogger: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.ConsoleLogger),
/* harmony export */   CookieStorage: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.CookieStorage),
/* harmony export */   Hub: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.Hub),
/* harmony export */   I18n: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.I18n),
/* harmony export */   ServiceWorker: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ServiceWorkerClass),
/* harmony export */   defaultStorage: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.defaultStorage),
/* harmony export */   parseAmplifyConfig: () => (/* reexport safe */ _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__.parseAmplifyConfig),
/* harmony export */   sessionStorage: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.sessionStorage),
/* harmony export */   sharedInMemoryStorage: () => (/* reexport safe */ _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__.sharedInMemoryStorage)
/* harmony export */ });
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Cache/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Logger/ConsoleLogger.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/CookieStorage.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/Hub/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/I18n/index.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/ServiceWorker/ServiceWorker.mjs");
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/core */ "../core/dist/esm/storage/index.mjs");
/* harmony import */ var _aws_amplify_core_internals_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core/internals/utils */ "../core/dist/esm/utils/parseAmplifyConfig.mjs");


//# sourceMappingURL=index.mjs.map

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var __webpack_exports__ = {};
/*!*********************************!*\
  !*** ./dist/esm/auth/index.mjs ***!
  \*********************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthError: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.AuthError),
/* harmony export */   associateWebAuthnCredential: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.associateWebAuthnCredential),
/* harmony export */   autoSignIn: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.autoSignIn),
/* harmony export */   confirmResetPassword: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.confirmResetPassword),
/* harmony export */   confirmSignIn: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.confirmSignIn),
/* harmony export */   confirmSignUp: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.confirmSignUp),
/* harmony export */   confirmUserAttribute: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.confirmUserAttribute),
/* harmony export */   decodeJWT: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.decodeJWT),
/* harmony export */   deleteUser: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.deleteUser),
/* harmony export */   deleteUserAttributes: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.deleteUserAttributes),
/* harmony export */   deleteWebAuthnCredential: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.deleteWebAuthnCredential),
/* harmony export */   fetchAuthSession: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.fetchAuthSession),
/* harmony export */   fetchDevices: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.fetchDevices),
/* harmony export */   fetchMFAPreference: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.fetchMFAPreference),
/* harmony export */   fetchUserAttributes: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.fetchUserAttributes),
/* harmony export */   forgetDevice: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.forgetDevice),
/* harmony export */   getCurrentUser: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.getCurrentUser),
/* harmony export */   listWebAuthnCredentials: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.listWebAuthnCredentials),
/* harmony export */   rememberDevice: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.rememberDevice),
/* harmony export */   resendSignUpCode: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.resendSignUpCode),
/* harmony export */   resetPassword: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.resetPassword),
/* harmony export */   sendUserAttributeVerificationCode: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.sendUserAttributeVerificationCode),
/* harmony export */   setUpTOTP: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.setUpTOTP),
/* harmony export */   signIn: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.signIn),
/* harmony export */   signInWithRedirect: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithRedirect),
/* harmony export */   signOut: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.signOut),
/* harmony export */   signUp: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.signUp),
/* harmony export */   updateMFAPreference: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.updateMFAPreference),
/* harmony export */   updatePassword: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.updatePassword),
/* harmony export */   updateUserAttribute: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.updateUserAttribute),
/* harmony export */   updateUserAttributes: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.updateUserAttributes),
/* harmony export */   verifyTOTPSetup: () => (/* reexport safe */ _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__.verifyTOTPSetup)
/* harmony export */ });
/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/auth */ "../auth/dist/esm/index.mjs");

//# sourceMappingURL=index.mjs.map

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var __webpack_exports__ = {};
/*!*****************************************!*\
  !*** ./dist/esm/auth/cognito/index.mjs ***!
  \*****************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CognitoAWSCredentialsAndIdentityIdProvider: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.CognitoAWSCredentialsAndIdentityIdProvider),
/* harmony export */   DefaultIdentityIdStore: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.DefaultIdentityIdStore),
/* harmony export */   DefaultTokenStore: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.DefaultTokenStore),
/* harmony export */   TokenOrchestrator: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.TokenOrchestrator),
/* harmony export */   autoSignIn: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.autoSignIn),
/* harmony export */   cognitoCredentialsProvider: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.cognitoCredentialsProvider),
/* harmony export */   cognitoUserPoolsTokenProvider: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.cognitoUserPoolsTokenProvider),
/* harmony export */   confirmResetPassword: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.confirmResetPassword),
/* harmony export */   confirmSignIn: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.confirmSignIn),
/* harmony export */   confirmSignUp: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.confirmSignUp),
/* harmony export */   confirmUserAttribute: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.confirmUserAttribute),
/* harmony export */   deleteUser: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.deleteUser),
/* harmony export */   deleteUserAttributes: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.deleteUserAttributes),
/* harmony export */   fetchDevices: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.fetchDevices),
/* harmony export */   fetchMFAPreference: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.fetchMFAPreference),
/* harmony export */   fetchUserAttributes: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.fetchUserAttributes),
/* harmony export */   forgetDevice: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.forgetDevice),
/* harmony export */   getCurrentUser: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.getCurrentUser),
/* harmony export */   refreshAuthTokens: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.refreshAuthTokens),
/* harmony export */   refreshAuthTokensWithoutDedupe: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.refreshAuthTokensWithoutDedupe),
/* harmony export */   rememberDevice: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.rememberDevice),
/* harmony export */   resendSignUpCode: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.resendSignUpCode),
/* harmony export */   resetPassword: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.resetPassword),
/* harmony export */   sendUserAttributeVerificationCode: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.sendUserAttributeVerificationCode),
/* harmony export */   setUpTOTP: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.setUpTOTP),
/* harmony export */   signIn: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.signIn),
/* harmony export */   signInWithRedirect: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.signInWithRedirect),
/* harmony export */   signOut: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.signOut),
/* harmony export */   signUp: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.signUp),
/* harmony export */   updateMFAPreference: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.updateMFAPreference),
/* harmony export */   updatePassword: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.updatePassword),
/* harmony export */   updateUserAttribute: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.updateUserAttribute),
/* harmony export */   updateUserAttributes: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.updateUserAttributes),
/* harmony export */   verifyTOTPSetup: () => (/* reexport safe */ _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__.verifyTOTPSetup)
/* harmony export */ });
/* harmony import */ var _aws_amplify_auth_cognito__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/auth/cognito */ "../auth/dist/esm/providers/cognito/index.mjs");

//# sourceMappingURL=index.mjs.map

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var __webpack_exports__ = {};
/*!************************************!*\
  !*** ./dist/esm/storage/index.mjs ***!
  \************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_PART_SIZE: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PART_SIZE),
/* harmony export */   StorageError: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.StorageError),
/* harmony export */   copy: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.copy),
/* harmony export */   downloadData: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.downloadData),
/* harmony export */   getProperties: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.getProperties),
/* harmony export */   getUrl: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.getUrl),
/* harmony export */   isCancelError: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.isCancelError),
/* harmony export */   list: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.list),
/* harmony export */   remove: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.remove),
/* harmony export */   uploadData: () => (/* reexport safe */ _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__.uploadData)
/* harmony export */ });
/* harmony import */ var _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/storage */ "../storage/dist/esm/index.mjs");

//# sourceMappingURL=index.mjs.map

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!***************************************!*\
  !*** ./dist/esm/storage/s3/index.mjs ***!
  \***************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_PART_SIZE: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PART_SIZE),
/* harmony export */   copy: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.copy),
/* harmony export */   downloadData: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.downloadData),
/* harmony export */   getProperties: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.getProperties),
/* harmony export */   getUrl: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.getUrl),
/* harmony export */   list: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.list),
/* harmony export */   remove: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.remove),
/* harmony export */   uploadData: () => (/* reexport safe */ _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__.uploadData)
/* harmony export */ });
/* harmony import */ var _aws_amplify_storage_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-amplify/storage/s3 */ "../storage/dist/esm/providers/s3/index.mjs");

//# sourceMappingURL=index.mjs.map

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=aws-amplify.js.map