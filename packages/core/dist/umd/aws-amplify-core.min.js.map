{"version":3,"file":"aws-amplify-core.min.js","mappings":"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","sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./dist/esm/Logger/types.mjs","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./dist/esm/Logger/ConsoleLogger.mjs","webpack:///./dist/esm/constants.mjs","webpack:///./dist/esm/errors/AmplifyError.mjs","webpack:///./dist/esm/Hub/index.mjs","webpack:///./dist/esm/utils/convert/base64/base64Decoder.mjs","webpack:///./dist/esm/utils/globalHelpers/index.mjs","webpack:///./dist/esm/singleton/Auth/utils/index.mjs","webpack:///./dist/esm/utils/deepFreeze.mjs","webpack:///./dist/esm/singleton/constants.mjs","webpack:///./dist/esm/parseAWSExports.mjs","webpack:///./dist/esm/parseAmplifyOutputs.mjs","webpack:///./dist/esm/utils/parseAmplifyConfig.mjs","webpack:///./dist/esm/singleton/Auth/index.mjs","webpack:///./node_modules/tslib/tslib.es6.mjs","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/constants.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/convertToBuffer.js","webpack:///./node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","webpack:///./node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js","webpack:///./node_modules/@aws-crypto/util/build/module/isEmptyData.js","webpack:///./node_modules/@smithy/util-hex-encoding/dist-es/index.js","webpack:///./dist/esm/singleton/Amplify.mjs","webpack:///./dist/esm/singleton/apis/fetchAuthSession.mjs","webpack:///./dist/esm/singleton/apis/internal/fetchAuthSession.mjs","webpack:///./dist/esm/singleton/apis/clearCredentials.mjs","webpack:///./dist/esm/clients/serde/responseInfo.mjs","webpack:///./dist/esm/clients/serde/json.mjs","webpack:///./dist/esm/clients/internal/composeServiceApi.mjs","webpack:///./dist/esm/Platform/types.mjs","webpack:///./dist/esm/Platform/version.mjs","webpack:///./dist/esm/Platform/detection/helpers.mjs","webpack:///./dist/esm/Platform/detection/index.mjs","webpack:///./dist/esm/Platform/detection/Expo.mjs","webpack:///./dist/esm/Platform/detection/ReactNative.mjs","webpack:///./dist/esm/Platform/detection/Next.mjs","webpack:///./dist/esm/Platform/detection/Nuxt.mjs","webpack:///./dist/esm/Platform/detection/Angular.mjs","webpack:///./dist/esm/Platform/detection/React.mjs","webpack:///./dist/esm/Platform/detection/Vue.mjs","webpack:///./dist/esm/Platform/detection/Svelte.mjs","webpack:///./dist/esm/Platform/detection/Web.mjs","webpack:///./dist/esm/Platform/detectFramework.mjs","webpack:///./dist/esm/Platform/customUserAgent.mjs","webpack:///./dist/esm/Platform/index.mjs","webpack:///./dist/esm/clients/middleware/retry/jitteredBackoff.mjs","webpack:///./dist/esm/utils/retry/jitteredBackoff.mjs","webpack:///./dist/esm/utils/retry/constants.mjs","webpack:///./dist/esm/types/errors.mjs","webpack:///./dist/esm/clients/middleware/retry/isClockSkewError.mjs","webpack:///./dist/esm/clients/middleware/retry/defaultRetryDecider.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs","webpack:///./dist/esm/clients/middleware/retry/middleware.mjs","webpack:///./dist/esm/clients/middleware/userAgent/middleware.mjs","webpack:///./dist/esm/clients/internal/composeTransferHandler.mjs","webpack:///./dist/esm/clients/utils/memoization.mjs","webpack:///./dist/esm/clients/handlers/fetch.mjs","webpack:///./dist/esm/clients/handlers/unauthenticated.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs","webpack:///./dist/esm/foundation/factories/middleware/createDisableCacheMiddleware.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetCredentialsForIdentityClient.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetIdClient.mjs","webpack:///./dist/esm/clients/endpoints/partitions.mjs","webpack:///./dist/esm/clients/endpoints/getDnsSuffix.mjs","webpack:///./dist/esm/utils/amplifyUrl/index.mjs","webpack:///./dist/esm/foundation/factories/serviceClients/cognitoIdentity/cognitoIdentityPoolEndpointResolver.mjs","webpack:///./dist/esm/errors/PlatformNotSupportedError.mjs","webpack:///./dist/esm/storage/KeyValueStorage.mjs","webpack:///./dist/esm/storage/InMemoryStorage.mjs","webpack:///./dist/esm/storage/utils.mjs","webpack:///./dist/esm/storage/index.mjs","webpack:///./dist/esm/storage/DefaultStorage.mjs","webpack:///./dist/esm/storage/SessionStorage.mjs","webpack:///./dist/esm/Cache/constants.mjs","webpack:///./dist/esm/Cache/utils/cacheHelpers.mjs","webpack:///./dist/esm/errors/createAssertionFunction.mjs","webpack:///./dist/esm/Cache/utils/errorHelpers.mjs","webpack:///./dist/esm/Cache/StorageCacheCommon.mjs","webpack:///./dist/esm/Cache/StorageCache.mjs","webpack:///./dist/esm/Cache/index.mjs","webpack:///./dist/esm/I18n/I18n.mjs","webpack:///./dist/esm/I18n/errorHelpers.mjs","webpack:///./dist/esm/I18n/index.mjs","webpack:///./dist/esm/utils/isBrowser.mjs","webpack:///./node_modules/uuid/dist/esm-browser/native.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./dist/esm/utils/amplifyUuid/index.mjs","webpack:///./dist/esm/errors/errorHelpers.mjs","webpack:///./dist/esm/utils/getClientInfo/getClientInfo.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs","webpack:///./dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs","webpack:///./dist/esm/clients/handlers/authenticated.mjs","webpack:///./dist/esm/clients/middleware/signing/middleware.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs","webpack:///./dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs","webpack:///./dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs","webpack:///./dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs","webpack:///./dist/esm/clients/middleware/signing/utils/extendedEncodeURIComponent.mjs","webpack:///./dist/esm/awsClients/pinpoint/base.mjs","webpack:///./dist/esm/awsClients/pinpoint/updateEndpoint.mjs","webpack:///./dist/esm/providers/pinpoint/utils/getCacheKey.mjs","webpack:///./dist/esm/providers/pinpoint/utils/createEndpointId.mjs","webpack:///./dist/esm/providers/pinpoint/utils/getEndpointId.mjs","webpack:///./dist/esm/providers/pinpoint/apis/updateEndpoint.mjs","webpack:///./dist/esm/providers/pinpoint/utils/cacheEndpointId.mjs","webpack:///./dist/esm/awsClients/pinpoint/errorHelpers.mjs","webpack:///./dist/esm/awsClients/pinpoint/putEvents.mjs","webpack:///./dist/esm/providers/pinpoint/utils/PinpointEventBuffer.mjs","webpack:///./dist/esm/providers/pinpoint/utils/getEventBuffer.mjs","webpack:///./dist/esm/providers/pinpoint/apis/record.mjs","webpack:///./dist/esm/ServiceWorker/errorHelpers.mjs","webpack:///./dist/esm/ServiceWorker/ServiceWorker.mjs","webpack:///./dist/esm/providers/pinpoint/utils/constants.mjs","webpack:///./dist/esm/providers/pinpoint/utils/resolveEndpointId.mjs","webpack:///./dist/esm/utils/sessionListener/constants.mjs","webpack:///./node_modules/js-cookie/dist/js.cookie.mjs","webpack:///./dist/esm/storage/CookieStorage.mjs"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aws_amplify_core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aws_amplify_core\"] = factory();\n\telse\n\t\troot[\"aws_amplify_core\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n\nexport { LogType };\n//# sourceMappingURL=types.mjs.map\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nconst AWS_CLOUDWATCH_CATEGORY = 'Logging';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nconst NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n\nexport { AWS_CLOUDWATCH_CATEGORY, NO_HUBCALLBACK_PROVIDED_EXCEPTION, USER_AGENT_HEADER };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n\nexport { AmplifyError };\n//# sourceMappingURL=AmplifyError.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nclass HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nconst Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nconst HubInternal = new HubClass('internal-hub');\n\nexport { AMPLIFY_SYMBOL, Hub, HubClass, HubInternal };\n//# sourceMappingURL=index.mjs.map\n","import { getAtob } from '../../globalHelpers/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst base64Decoder = {\n    convert(input, options) {\n        let inputStr = input;\n        // urlSafe character replacement options conform to the base64 url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#page-7\n        if (options?.urlSafe) {\n            inputStr = inputStr.replace(/-/g, '+').replace(/_/g, '/');\n        }\n        return getAtob()(inputStr);\n    },\n};\n\nexport { base64Decoder };\n//# sourceMappingURL=base64Decoder.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCrypto = () => {\n    if (typeof window === 'object' && typeof window.crypto === 'object') {\n        return window.crypto;\n    }\n    // Next.js global polyfill\n    if (typeof crypto === 'object') {\n        return crypto;\n    }\n    throw new AmplifyError({\n        name: 'MissingPolyfill',\n        message: 'Cannot resolve the `crypto` function from the environment.',\n    });\n};\nconst getBtoa = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {\n        return window.btoa;\n    }\n    // Next.js global polyfill\n    if (typeof btoa === 'function') {\n        return btoa;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `btoa` function from the environment.',\n    });\n};\nconst getAtob = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.atob === 'function') {\n        return window.atob;\n    }\n    // Next.js global polyfill\n    if (typeof atob === 'function') {\n        return atob;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `atob` function from the environment.',\n    });\n};\n\nexport { getAtob, getBtoa, getCrypto };\n//# sourceMappingURL=index.mjs.map\n","import { base64Decoder } from '../../../utils/convert/base64/base64Decoder.mjs';\nimport '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport { assert, AuthConfigurationErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction assertTokenProviderConfig(cognitoConfig) {\n    let assertionValid = true; // assume valid until otherwise proveed\n    if (!cognitoConfig) {\n        assertionValid = false;\n    }\n    else {\n        assertionValid =\n            !!cognitoConfig.userPoolId && !!cognitoConfig.userPoolClientId;\n    }\n    assert(assertionValid, AuthConfigurationErrorCode.AuthUserPoolException);\n}\nfunction assertOAuthConfig(cognitoConfig) {\n    const validOAuthConfig = !!cognitoConfig?.loginWith?.oauth?.domain &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignOut &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignIn &&\n        !!cognitoConfig?.loginWith?.oauth?.responseType;\n    assert(validOAuthConfig, AuthConfigurationErrorCode.OAuthNotConfigureException);\n}\nfunction assertIdentityPoolIdConfig(cognitoConfig) {\n    const validConfig = !!cognitoConfig?.identityPoolId;\n    assert(validConfig, AuthConfigurationErrorCode.InvalidIdentityPoolIdException);\n}\n/**\n * Decodes payload of JWT token\n *\n * @param {String} token A string representing a token to be decoded\n * @throws {@link Error} - Throws error when token is invalid or payload malformed.\n */\nfunction decodeJWT(token) {\n    const tokenParts = token.split('.');\n    if (tokenParts.length !== 3) {\n        throw new Error('Invalid token');\n    }\n    try {\n        const base64WithUrlSafe = tokenParts[1];\n        const base64 = base64WithUrlSafe.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonStr = decodeURIComponent(base64Decoder\n            .convert(base64)\n            .split('')\n            .map(char => `%${`00${char.charCodeAt(0).toString(16)}`.slice(-2)}`)\n            .join(''));\n        const payload = JSON.parse(jsonStr);\n        return {\n            toString: () => token,\n            payload,\n        };\n    }\n    catch (err) {\n        throw new Error('Invalid token payload');\n    }\n}\n\nexport { assertIdentityPoolIdConfig, assertOAuthConfig, assertTokenProviderConfig, decodeJWT };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst deepFreeze = (object) => {\n    const propNames = Reflect.ownKeys(object);\n    for (const name of propNames) {\n        const value = object[name];\n        if ((value && typeof value === 'object') || typeof value === 'function') {\n            deepFreeze(value);\n        }\n    }\n    return Object.freeze(object);\n};\n\nexport { deepFreeze };\n//# sourceMappingURL=deepFreeze.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst ADD_OAUTH_LISTENER = Symbol('oauth-listener');\n\nexport { ADD_OAUTH_LISTENER };\n//# sourceMappingURL=constants.mjs.map\n","import { ConsoleLogger } from './Logger/ConsoleLogger.mjs';\nimport { AmplifyError } from './errors/AmplifyError.mjs';\nimport './types/errors.mjs';\nimport './errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('parseAWSExports');\nconst authTypeMapping = {\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    OPENID_CONNECT: 'oidc',\n    NONE: 'none',\n    AWS_LAMBDA: 'lambda',\n    // `LAMBDA` is an incorrect value that was added during the v6 rewrite.\n    // Keeping it as a valid value until v7 to prevent breaking customers who might\n    // be relying on it as a workaround.\n    // ref: https://github.com/aws-amplify/amplify-js/pull/12922\n    // TODO: @v7 remove next line\n    LAMBDA: 'lambda',\n};\n/**\n * Converts the object imported from `aws-exports.js` or `amplifyconfiguration.json` files generated by\n * the Amplify CLI into an object that conforms to the {@link ResourcesConfig}.\n *\n * @param config A configuration object imported  from `aws-exports.js` or `amplifyconfiguration.json`.\n *\n * @returns An object that conforms to the {@link ResourcesConfig} .\n */\nconst parseAWSExports = (config = {}) => {\n    if (!Object.prototype.hasOwnProperty.call(config, 'aws_project_region')) {\n        throw new AmplifyError({\n            name: 'InvalidParameterException',\n            message: 'Invalid config parameter.',\n            recoverySuggestion: 'Ensure passing the config object imported from  `amplifyconfiguration.json`.',\n        });\n    }\n    const { aws_appsync_apiKey, aws_appsync_authenticationType, aws_appsync_graphqlEndpoint, aws_appsync_region, aws_bots_config, aws_cognito_identity_pool_id, aws_cognito_sign_up_verification_method, aws_cognito_mfa_configuration, aws_cognito_mfa_types, aws_cognito_password_protection_settings, aws_cognito_verification_mechanisms, aws_cognito_signup_attributes, aws_cognito_social_providers, aws_cognito_username_attributes, aws_mandatory_sign_in, aws_mobile_analytics_app_id, aws_mobile_analytics_app_region, aws_user_files_s3_bucket, aws_user_files_s3_bucket_region, aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing, aws_user_pools_id, aws_user_pools_web_client_id, geo, oauth, predictions, aws_cloud_logic_custom, Notifications, modelIntrospection, } = config;\n    const amplifyConfig = {};\n    // Analytics\n    if (aws_mobile_analytics_app_id) {\n        amplifyConfig.Analytics = {\n            Pinpoint: {\n                appId: aws_mobile_analytics_app_id,\n                region: aws_mobile_analytics_app_region,\n            },\n        };\n    }\n    // Notifications\n    const { InAppMessaging, Push } = Notifications ?? {};\n    if (InAppMessaging?.AWSPinpoint || Push?.AWSPinpoint) {\n        if (InAppMessaging?.AWSPinpoint) {\n            const { appId, region } = InAppMessaging.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                InAppMessaging: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n        if (Push?.AWSPinpoint) {\n            const { appId, region } = Push.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                ...amplifyConfig.Notifications,\n                PushNotification: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n    }\n    // Interactions\n    if (Array.isArray(aws_bots_config)) {\n        amplifyConfig.Interactions = {\n            LexV1: Object.fromEntries(aws_bots_config.map(bot => [bot.name, bot])),\n        };\n    }\n    // API\n    if (aws_appsync_graphqlEndpoint) {\n        const defaultAuthMode = authTypeMapping[aws_appsync_authenticationType];\n        if (!defaultAuthMode) {\n            logger.debug(`Invalid authentication type ${aws_appsync_authenticationType}. Falling back to IAM.`);\n        }\n        amplifyConfig.API = {\n            GraphQL: {\n                endpoint: aws_appsync_graphqlEndpoint,\n                apiKey: aws_appsync_apiKey,\n                region: aws_appsync_region,\n                defaultAuthMode: defaultAuthMode ?? 'iam',\n            },\n        };\n        if (modelIntrospection) {\n            amplifyConfig.API.GraphQL.modelIntrospection = modelIntrospection;\n        }\n    }\n    // Auth\n    const mfaConfig = aws_cognito_mfa_configuration\n        ? {\n            status: aws_cognito_mfa_configuration &&\n                aws_cognito_mfa_configuration.toLowerCase(),\n            totpEnabled: aws_cognito_mfa_types?.includes('TOTP') ?? false,\n            smsEnabled: aws_cognito_mfa_types?.includes('SMS') ?? false,\n        }\n        : undefined;\n    const passwordFormatConfig = aws_cognito_password_protection_settings\n        ? {\n            minLength: aws_cognito_password_protection_settings.passwordPolicyMinLength,\n            requireLowercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_LOWERCASE') ?? false,\n            requireUppercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_UPPERCASE') ?? false,\n            requireNumbers: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_NUMBERS') ?? false,\n            requireSpecialCharacters: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_SYMBOLS') ?? false,\n        }\n        : undefined;\n    const mergedUserAttributes = Array.from(new Set([\n        ...(aws_cognito_verification_mechanisms ?? []),\n        ...(aws_cognito_signup_attributes ?? []),\n    ]));\n    const userAttributes = mergedUserAttributes.reduce((attributes, key) => ({\n        ...attributes,\n        // All user attributes generated by the CLI are required\n        [key.toLowerCase()]: { required: true },\n    }), {});\n    const loginWithEmailEnabled = aws_cognito_username_attributes?.includes('EMAIL') ?? false;\n    const loginWithPhoneEnabled = aws_cognito_username_attributes?.includes('PHONE_NUMBER') ?? false;\n    if (aws_cognito_identity_pool_id || aws_user_pools_id) {\n        amplifyConfig.Auth = {\n            Cognito: {\n                identityPoolId: aws_cognito_identity_pool_id,\n                allowGuestAccess: aws_mandatory_sign_in !== 'enable',\n                signUpVerificationMethod: aws_cognito_sign_up_verification_method,\n                userAttributes,\n                userPoolClientId: aws_user_pools_web_client_id,\n                userPoolId: aws_user_pools_id,\n                mfa: mfaConfig,\n                passwordFormat: passwordFormatConfig,\n                loginWith: {\n                    username: !(loginWithEmailEnabled || loginWithPhoneEnabled),\n                    email: loginWithEmailEnabled,\n                    phone: loginWithPhoneEnabled,\n                },\n            },\n        };\n    }\n    const hasOAuthConfig = oauth ? Object.keys(oauth).length > 0 : false;\n    const hasSocialProviderConfig = aws_cognito_social_providers\n        ? aws_cognito_social_providers.length > 0\n        : false;\n    if (amplifyConfig.Auth && hasOAuthConfig) {\n        amplifyConfig.Auth.Cognito.loginWith = {\n            ...amplifyConfig.Auth.Cognito.loginWith,\n            oauth: {\n                ...getOAuthConfig(oauth),\n                ...(hasSocialProviderConfig && {\n                    providers: parseSocialProviders(aws_cognito_social_providers),\n                }),\n            },\n        };\n    }\n    // Storage\n    if (aws_user_files_s3_bucket) {\n        amplifyConfig.Storage = {\n            S3: {\n                bucket: aws_user_files_s3_bucket,\n                region: aws_user_files_s3_bucket_region,\n                dangerouslyConnectToHttpEndpointForTesting: aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing,\n            },\n        };\n    }\n    // Geo\n    if (geo) {\n        const { amazon_location_service } = geo;\n        amplifyConfig.Geo = {\n            LocationService: {\n                maps: amazon_location_service.maps,\n                geofenceCollections: amazon_location_service.geofenceCollections,\n                searchIndices: amazon_location_service.search_indices,\n                region: amazon_location_service.region,\n            },\n        };\n    }\n    // REST API\n    if (aws_cloud_logic_custom) {\n        amplifyConfig.API = {\n            ...amplifyConfig.API,\n            REST: aws_cloud_logic_custom.reduce((acc, api) => {\n                const { name, endpoint, region, service } = api;\n                return {\n                    ...acc,\n                    [name]: {\n                        endpoint,\n                        ...(service ? { service } : undefined),\n                        ...(region ? { region } : undefined),\n                    },\n                };\n            }, {}),\n        };\n    }\n    // Predictions\n    if (predictions) {\n        // map VoiceId from speechGenerator defaults to voiceId\n        const { VoiceId: voiceId } = predictions?.convert?.speechGenerator?.defaults ?? {};\n        amplifyConfig.Predictions = voiceId\n            ? {\n                ...predictions,\n                convert: {\n                    ...predictions.convert,\n                    speechGenerator: {\n                        ...predictions.convert.speechGenerator,\n                        defaults: { voiceId },\n                    },\n                },\n            }\n            : predictions;\n    }\n    return amplifyConfig;\n};\nconst getRedirectUrl = (redirectStr) => redirectStr?.split(',') ?? [];\nconst getOAuthConfig = ({ domain, scope, redirectSignIn, redirectSignOut, responseType, }) => ({\n    domain,\n    scopes: scope,\n    redirectSignIn: getRedirectUrl(redirectSignIn),\n    redirectSignOut: getRedirectUrl(redirectSignOut),\n    responseType,\n});\nconst parseSocialProviders = (aws_cognito_social_providers) => {\n    return aws_cognito_social_providers.map((provider) => {\n        const updatedProvider = provider.toLowerCase();\n        return updatedProvider.charAt(0).toUpperCase() + updatedProvider.slice(1);\n    });\n};\n\nexport { parseAWSExports };\n//# sourceMappingURL=parseAWSExports.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isAmplifyOutputs(config) {\n    // version format initially will be '1' but is expected to be something like x.y where x is major and y minor version\n    const { version } = config;\n    if (!version) {\n        return false;\n    }\n    return version.startsWith('1');\n}\nfunction parseStorage(amplifyOutputsStorageProperties) {\n    if (!amplifyOutputsStorageProperties) {\n        return undefined;\n    }\n    const { bucket_name, aws_region, buckets } = amplifyOutputsStorageProperties;\n    return {\n        S3: {\n            bucket: bucket_name,\n            region: aws_region,\n            buckets: buckets && createBucketInfoMap(buckets),\n        },\n    };\n}\nfunction parseAuth(amplifyOutputsAuthProperties) {\n    if (!amplifyOutputsAuthProperties) {\n        return undefined;\n    }\n    const { user_pool_id, user_pool_client_id, identity_pool_id, password_policy, mfa_configuration, mfa_methods, unauthenticated_identities_enabled, oauth, username_attributes, standard_required_attributes, groups, } = amplifyOutputsAuthProperties;\n    const authConfig = {\n        Cognito: {\n            userPoolId: user_pool_id,\n            userPoolClientId: user_pool_client_id,\n            groups,\n        },\n    };\n    if (identity_pool_id) {\n        authConfig.Cognito = {\n            ...authConfig.Cognito,\n            identityPoolId: identity_pool_id,\n        };\n    }\n    if (password_policy) {\n        authConfig.Cognito.passwordFormat = {\n            requireLowercase: password_policy.require_lowercase,\n            requireNumbers: password_policy.require_numbers,\n            requireUppercase: password_policy.require_uppercase,\n            requireSpecialCharacters: password_policy.require_symbols,\n            minLength: password_policy.min_length ?? 6,\n        };\n    }\n    if (mfa_configuration) {\n        authConfig.Cognito.mfa = {\n            status: getMfaStatus(mfa_configuration),\n            smsEnabled: mfa_methods?.includes('SMS'),\n            totpEnabled: mfa_methods?.includes('TOTP'),\n        };\n    }\n    if (unauthenticated_identities_enabled) {\n        authConfig.Cognito.allowGuestAccess = unauthenticated_identities_enabled;\n    }\n    if (oauth) {\n        authConfig.Cognito.loginWith = {\n            oauth: {\n                domain: oauth.domain,\n                redirectSignIn: oauth.redirect_sign_in_uri,\n                redirectSignOut: oauth.redirect_sign_out_uri,\n                responseType: oauth.response_type === 'token' ? 'token' : 'code',\n                scopes: oauth.scopes,\n                providers: getOAuthProviders(oauth.identity_providers),\n            },\n        };\n    }\n    if (username_attributes) {\n        authConfig.Cognito.loginWith = {\n            ...authConfig.Cognito.loginWith,\n            email: username_attributes.includes('email'),\n            phone: username_attributes.includes('phone_number'),\n            // Signing in with a username is not currently supported in Gen2, this should always evaluate to false\n            username: username_attributes.includes('username'),\n        };\n    }\n    if (standard_required_attributes) {\n        authConfig.Cognito.userAttributes = standard_required_attributes.reduce((acc, curr) => ({ ...acc, [curr]: { required: true } }), {});\n    }\n    return authConfig;\n}\nfunction parseAnalytics(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties?.amazon_pinpoint) {\n        return undefined;\n    }\n    const { amazon_pinpoint } = amplifyOutputsAnalyticsProperties;\n    return {\n        Pinpoint: {\n            appId: amazon_pinpoint.app_id,\n            region: amazon_pinpoint.aws_region,\n        },\n    };\n}\nfunction parseGeo(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties) {\n        return undefined;\n    }\n    const { aws_region, geofence_collections, maps, search_indices } = amplifyOutputsAnalyticsProperties;\n    return {\n        LocationService: {\n            region: aws_region,\n            searchIndices: search_indices,\n            geofenceCollections: geofence_collections,\n            maps,\n        },\n    };\n}\nfunction parseData(amplifyOutputsDataProperties) {\n    if (!amplifyOutputsDataProperties) {\n        return undefined;\n    }\n    const { aws_region, default_authorization_type, url, api_key, model_introspection, } = amplifyOutputsDataProperties;\n    const GraphQL = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n        modelIntrospection: model_introspection,\n    };\n    return {\n        GraphQL,\n    };\n}\nfunction parseCustom(amplifyOutputsCustomProperties) {\n    if (!amplifyOutputsCustomProperties?.events) {\n        return undefined;\n    }\n    const { url, aws_region, api_key, default_authorization_type } = amplifyOutputsCustomProperties.events;\n    const Events = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n    };\n    return {\n        Events,\n    };\n}\nfunction parseNotifications(amplifyOutputsNotificationsProperties) {\n    if (!amplifyOutputsNotificationsProperties) {\n        return undefined;\n    }\n    const { aws_region, channels, amazon_pinpoint_app_id } = amplifyOutputsNotificationsProperties;\n    const hasInAppMessaging = channels.includes('IN_APP_MESSAGING');\n    const hasPushNotification = channels.includes('APNS') || channels.includes('FCM');\n    if (!(hasInAppMessaging || hasPushNotification)) {\n        return undefined;\n    }\n    // At this point, we know the Amplify outputs contains at least one supported channel\n    const notificationsConfig = {};\n    if (hasInAppMessaging) {\n        notificationsConfig.InAppMessaging = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    if (hasPushNotification) {\n        notificationsConfig.PushNotification = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    return notificationsConfig;\n}\nfunction parseAmplifyOutputs(amplifyOutputs) {\n    const resourcesConfig = {};\n    if (amplifyOutputs.storage) {\n        resourcesConfig.Storage = parseStorage(amplifyOutputs.storage);\n    }\n    if (amplifyOutputs.auth) {\n        resourcesConfig.Auth = parseAuth(amplifyOutputs.auth);\n    }\n    if (amplifyOutputs.analytics) {\n        resourcesConfig.Analytics = parseAnalytics(amplifyOutputs.analytics);\n    }\n    if (amplifyOutputs.geo) {\n        resourcesConfig.Geo = parseGeo(amplifyOutputs.geo);\n    }\n    if (amplifyOutputs.data) {\n        resourcesConfig.API = parseData(amplifyOutputs.data);\n    }\n    if (amplifyOutputs.custom) {\n        const customConfig = parseCustom(amplifyOutputs.custom);\n        if (customConfig && 'Events' in customConfig) {\n            resourcesConfig.API = { ...resourcesConfig.API, ...customConfig };\n        }\n    }\n    if (amplifyOutputs.notifications) {\n        resourcesConfig.Notifications = parseNotifications(amplifyOutputs.notifications);\n    }\n    return resourcesConfig;\n}\nconst authModeNames = {\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AWS_LAMBDA: 'lambda',\n    OPENID_CONNECT: 'oidc',\n};\nfunction getGraphQLAuthMode(authType) {\n    return authModeNames[authType];\n}\nconst providerNames = {\n    GOOGLE: 'Google',\n    LOGIN_WITH_AMAZON: 'Amazon',\n    FACEBOOK: 'Facebook',\n    SIGN_IN_WITH_APPLE: 'Apple',\n};\nfunction getOAuthProviders(providers = []) {\n    return providers.reduce((oAuthProviders, provider) => {\n        if (providerNames[provider] !== undefined) {\n            oAuthProviders.push(providerNames[provider]);\n        }\n        return oAuthProviders;\n    }, []);\n}\nfunction getMfaStatus(mfaConfiguration) {\n    if (mfaConfiguration === 'OPTIONAL')\n        return 'optional';\n    if (mfaConfiguration === 'REQUIRED')\n        return 'on';\n    return 'off';\n}\nfunction createBucketInfoMap(buckets) {\n    const mappedBuckets = {};\n    buckets.forEach(({ name, bucket_name: bucketName, aws_region: region, paths }) => {\n        if (name in mappedBuckets) {\n            throw new Error(`Duplicate friendly name found: ${name}. Name must be unique.`);\n        }\n        mappedBuckets[name] = {\n            bucketName,\n            region,\n            paths,\n        };\n    });\n    return mappedBuckets;\n}\n\nexport { isAmplifyOutputs, parseAmplifyOutputs, parseAnalytics };\n//# sourceMappingURL=parseAmplifyOutputs.mjs.map\n","import { parseAWSExports } from '../parseAWSExports.mjs';\nimport { isAmplifyOutputs, parseAmplifyOutputs } from '../parseAmplifyOutputs.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Parses the variety of configuration shapes that Amplify can accept into a ResourcesConfig.\n *\n * @param amplifyConfig An Amplify configuration object conforming to one of the supported schemas.\n * @return A ResourcesConfig for the provided configuration object.\n */\nconst parseAmplifyConfig = (amplifyConfig) => {\n    if (Object.keys(amplifyConfig).some(key => key.startsWith('aws_'))) {\n        return parseAWSExports(amplifyConfig);\n    }\n    else if (isAmplifyOutputs(amplifyConfig)) {\n        return parseAmplifyOutputs(amplifyConfig);\n    }\n    else {\n        return amplifyConfig;\n    }\n};\n\nexport { parseAmplifyConfig };\n//# sourceMappingURL=parseAmplifyConfig.mjs.map\n","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('Auth');\nfunction isTokenExpired({ expiresAt, clockDrift, }) {\n    const currentTime = Date.now();\n    return currentTime + clockDrift > expiresAt;\n}\nclass AuthClass {\n    /**\n     * Configure Auth category\n     *\n     * @internal\n     *\n     * @param authResourcesConfig - Resources configurations required by Auth providers.\n     * @param authOptions - Client options used by library\n     *\n     * @returns void\n     */\n    configure(authResourcesConfig, authOptions) {\n        this.authConfig = authResourcesConfig;\n        this.authOptions = authOptions;\n        if (authResourcesConfig.Cognito.userPoolEndpoint) {\n            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito User Pool'));\n        }\n        if (authResourcesConfig.Cognito.identityPoolEndpoint) {\n            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito Identity Pool'));\n        }\n    }\n    /**\n     * Fetch the auth tokens, and the temporary AWS credentials and identity if they are configured. By default it\n     * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh\n     * with `{ forceRefresh: true }` input.\n     *\n     * @param options - Options configuring the fetch behavior.\n     *\n     * @returns Promise of current auth session {@link AuthSession}.\n     */\n    async fetchAuthSession(options = {}) {\n        let credentialsAndIdentityId;\n        let userSub;\n        // Get tokens will throw if session cannot be refreshed (network or service error) or return null if not available\n        const tokens = await this.getTokens(options);\n        if (tokens) {\n            userSub = tokens.accessToken?.payload?.sub;\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    tokens,\n                    authenticated: true,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        else {\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    authenticated: false,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        return {\n            tokens,\n            credentials: credentialsAndIdentityId?.credentials,\n            identityId: credentialsAndIdentityId?.identityId,\n            userSub,\n        };\n    }\n    async clearCredentials() {\n        await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId();\n    }\n    async getTokens(options) {\n        return ((await this.authOptions?.tokenProvider?.getTokens(options)) ?? undefined);\n    }\n}\nconst getCustomEndpointWarningMessage = (target) => `You are using a custom Amazon ${target} endpoint, ensure the endpoint is correct.`;\n\nexport { AuthClass, isTokenExpired };\n//# sourceMappingURL=index.mjs.map\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","/**\n * @internal\n */\nexport var BLOCK_SIZE = 64;\n/**\n * @internal\n */\nexport var DIGEST_LENGTH = 32;\n/**\n * @internal\n */\nexport var KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/**\n * @internal\n */\nexport var INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n];\n/**\n * @internal\n */\nexport var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n//# sourceMappingURL=constants.js.map","import { BLOCK_SIZE, DIGEST_LENGTH, INIT, KEY, MAX_HASHABLE_LENGTH } from \"./constants\";\n/**\n * @internal\n */\nvar RawSha256 = /** @class */ (function () {\n    function RawSha256() {\n        this.state = Int32Array.from(INIT);\n        this.temp = new Int32Array(64);\n        this.buffer = new Uint8Array(64);\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        /**\n         * @internal\n         */\n        this.finished = false;\n    }\n    RawSha256.prototype.update = function (data) {\n        if (this.finished) {\n            throw new Error(\"Attempted to update an already finished hash.\");\n        }\n        var position = 0;\n        var byteLength = data.byteLength;\n        this.bytesHashed += byteLength;\n        if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n            throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n        }\n        while (byteLength > 0) {\n            this.buffer[this.bufferLength++] = data[position++];\n            byteLength--;\n            if (this.bufferLength === BLOCK_SIZE) {\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n        }\n    };\n    RawSha256.prototype.digest = function () {\n        if (!this.finished) {\n            var bitsHashed = this.bytesHashed * 8;\n            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n            var undecoratedLength = this.bufferLength;\n            bufferView.setUint8(this.bufferLength++, 0x80);\n            // Ensure the final block has enough room for the hashed length\n            if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n                for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                    bufferView.setUint8(i, 0);\n                }\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n            for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n            bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n            this.hashBuffer();\n            this.finished = true;\n        }\n        // The value in state is little-endian rather than big-endian, so flip\n        // each word into a new Uint8Array\n        var out = new Uint8Array(DIGEST_LENGTH);\n        for (var i = 0; i < 8; i++) {\n            out[i * 4] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return out;\n    };\n    RawSha256.prototype.hashBuffer = function () {\n        var _a = this, buffer = _a.buffer, state = _a.state;\n        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];\n        for (var i = 0; i < BLOCK_SIZE; i++) {\n            if (i < 16) {\n                this.temp[i] =\n                    ((buffer[i * 4] & 0xff) << 24) |\n                        ((buffer[i * 4 + 1] & 0xff) << 16) |\n                        ((buffer[i * 4 + 2] & 0xff) << 8) |\n                        (buffer[i * 4 + 3] & 0xff);\n            }\n            else {\n                var u = this.temp[i - 2];\n                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\n                u = this.temp[i - 15];\n                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\n                this.temp[i] =\n                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);\n            }\n            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^\n                ((state4 >>> 11) | (state4 << 21)) ^\n                ((state4 >>> 25) | (state4 << 7))) +\n                ((state4 & state5) ^ (~state4 & state6))) |\n                0) +\n                ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) |\n                0;\n            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^\n                ((state0 >>> 13) | (state0 << 19)) ^\n                ((state0 >>> 22) | (state0 << 10))) +\n                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\n                0;\n            state7 = state6;\n            state6 = state5;\n            state5 = state4;\n            state4 = (state3 + t1) | 0;\n            state3 = state2;\n            state2 = state1;\n            state1 = state0;\n            state0 = (t1 + t2) | 0;\n        }\n        state[0] += state0;\n        state[1] += state1;\n        state[2] += state2;\n        state[3] += state3;\n        state[4] += state4;\n        state[5] += state5;\n        state[6] += state6;\n        state[7] += state7;\n    };\n    return RawSha256;\n}());\nexport { RawSha256 };\n//# sourceMappingURL=RawSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromUtf8 as fromUtf8Browser } from \"@smithy/util-utf8\";\n// Quick polyfill\nvar fromUtf8 = typeof Buffer !== \"undefined\" && Buffer.from\n    ? function (input) { return Buffer.from(input, \"utf8\"); }\n    : fromUtf8Browser;\nexport function convertToBuffer(data) {\n    // Already a Uint8, do nothing\n    if (data instanceof Uint8Array)\n        return data;\n    if (typeof data === \"string\") {\n        return fromUtf8(data);\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n    return new Uint8Array(data);\n}\n//# sourceMappingURL=convertToBuffer.js.map","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","import { __awaiter, __generator } from \"tslib\";\nimport { BLOCK_SIZE } from \"./constants\";\nimport { RawSha256 } from \"./RawSha256\";\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nvar Sha256 = /** @class */ (function () {\n    function Sha256(secret) {\n        this.secret = secret;\n        this.hash = new RawSha256();\n        this.reset();\n    }\n    Sha256.prototype.update = function (toHash) {\n        if (isEmptyData(toHash) || this.error) {\n            return;\n        }\n        try {\n            this.hash.update(convertToBuffer(toHash));\n        }\n        catch (e) {\n            this.error = e;\n        }\n    };\n    /* This synchronous method keeps compatibility\n     * with the v2 aws-sdk.\n     */\n    Sha256.prototype.digestSync = function () {\n        if (this.error) {\n            throw this.error;\n        }\n        if (this.outer) {\n            if (!this.outer.finished) {\n                this.outer.update(this.hash.digest());\n            }\n            return this.outer.digest();\n        }\n        return this.hash.digest();\n    };\n    /* The underlying digest method here is synchronous.\n     * To keep the same interface with the other hash functions\n     * the default is to expose this as an async method.\n     * However, it can sometimes be useful to have a sync method.\n     */\n    Sha256.prototype.digest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.digestSync()];\n            });\n        });\n    };\n    Sha256.prototype.reset = function () {\n        this.hash = new RawSha256();\n        if (this.secret) {\n            this.outer = new RawSha256();\n            var inner = bufferFromSecret(this.secret);\n            var outer = new Uint8Array(BLOCK_SIZE);\n            outer.set(inner);\n            for (var i = 0; i < BLOCK_SIZE; i++) {\n                inner[i] ^= 0x36;\n                outer[i] ^= 0x5c;\n            }\n            this.hash.update(inner);\n            this.outer.update(outer);\n            // overwrite the copied key in memory\n            for (var i = 0; i < inner.byteLength; i++) {\n                inner[i] = 0;\n            }\n        }\n    };\n    return Sha256;\n}());\nexport { Sha256 };\nfunction bufferFromSecret(secret) {\n    var input = convertToBuffer(secret);\n    if (input.byteLength > BLOCK_SIZE) {\n        var bufferHash = new RawSha256();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n//# sourceMappingURL=jsSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isEmptyData(data) {\n    if (typeof data === \"string\") {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\n//# sourceMappingURL=isEmptyData.js.map","const SHORT_TO_HEX = {};\nconst HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","import { Hub, AMPLIFY_SYMBOL } from '../Hub/index.mjs';\nimport '../utils/getClientInfo/getClientInfo.mjs';\nimport '../utils/retry/retry.mjs';\nimport { deepFreeze } from '../utils/deepFreeze.mjs';\nimport '../parseAWSExports.mjs';\nimport { ADD_OAUTH_LISTENER } from './constants.mjs';\nimport 'uuid';\nimport { parseAmplifyConfig } from '../utils/parseAmplifyConfig.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\nimport './Auth/utils/errorHelpers.mjs';\nimport { AuthClass } from './Auth/index.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../Platform/index.mjs';\nimport '../Platform/types.mjs';\nimport '../BackgroundProcessManager/types.mjs';\nimport '../Reachability/Reachability.mjs';\nimport '../utils/sessionListener/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AmplifyClass {\n    constructor() {\n        this.oAuthListener = undefined;\n        this.resourcesConfig = {};\n        this.libraryOptions = {};\n        this.Auth = new AuthClass();\n    }\n    /**\n     * Configures Amplify for use with your back-end resources.\n     *\n     * @remarks\n     * This API does not perform any merging of either `resourcesConfig` or `libraryOptions`. The most recently\n     * provided values will be used after configuration.\n     *\n     * @remarks\n     * `configure` can be used to specify additional library options where available for supported categories.\n     *\n     * @param resourceConfig - Back-end resource configuration. Typically provided via the `aws-exports.js` file.\n     * @param libraryOptions - Additional options for customizing the behavior of the library.\n     */\n    configure(resourcesConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourcesConfig);\n        this.resourcesConfig = resolvedResourceConfig;\n        if (libraryOptions) {\n            this.libraryOptions = libraryOptions;\n        }\n        // Make resource config immutable\n        this.resourcesConfig = deepFreeze(this.resourcesConfig);\n        this.Auth.configure(this.resourcesConfig.Auth, this.libraryOptions.Auth);\n        Hub.dispatch('core', {\n            event: 'configure',\n            data: this.resourcesConfig,\n        }, 'Configure', AMPLIFY_SYMBOL);\n        this.notifyOAuthListener();\n    }\n    /**\n     * Provides access to the current back-end resource configuration for the Library.\n     *\n     * @returns Returns the immutable back-end resource configuration.\n     */\n    getConfig() {\n        return this.resourcesConfig;\n    }\n    /** @internal */\n    [ADD_OAUTH_LISTENER](listener) {\n        if (this.resourcesConfig.Auth?.Cognito.loginWith?.oauth) {\n            // when Amplify has been configured with a valid OAuth config while adding the listener, run it directly\n            listener(this.resourcesConfig.Auth?.Cognito);\n        }\n        else {\n            // otherwise register the listener and run it later when Amplify gets configured with a valid oauth config\n            this.oAuthListener = listener;\n        }\n    }\n    notifyOAuthListener() {\n        if (!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth ||\n            !this.oAuthListener) {\n            return;\n        }\n        this.oAuthListener(this.resourcesConfig.Auth?.Cognito);\n        // the listener should only be notified once with a valid oauth config\n        this.oAuthListener = undefined;\n    }\n}\n/**\n * The `Amplify` utility is used to configure the library.\n *\n * @remarks\n * `Amplify` orchestrates cross-category communication within the library.\n */\nconst Amplify = new AmplifyClass();\n\nexport { Amplify, AmplifyClass };\n//# sourceMappingURL=Amplify.mjs.map\n","import { Amplify } from '../Amplify.mjs';\nimport { fetchAuthSession as fetchAuthSession$1 } from './internal/fetchAuthSession.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Fetch the auth session including the tokens and credentials if they are available. By default it\n * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh\n * with `{ forceRefresh: true }` input.\n *\n * @param options - Options configuring the fetch behavior.\n * @throws {@link AuthError} - Throws error when session information cannot be refreshed.\n * @returns Promise<AuthSession>\n */\nconst fetchAuthSession = (options) => {\n    return fetchAuthSession$1(Amplify, options);\n};\n\nexport { fetchAuthSession };\n//# sourceMappingURL=fetchAuthSession.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst fetchAuthSession = (amplify, options) => {\n    return amplify.Auth.fetchAuthSession(options);\n};\n\nexport { fetchAuthSession };\n//# sourceMappingURL=fetchAuthSession.mjs.map\n","import { Amplify } from '../Amplify.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction clearCredentials() {\n    return Amplify.Auth.clearCredentials();\n}\n\nexport { clearCredentials };\n//# sourceMappingURL=clearCredentials.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n\nexport { parseMetadata };\n//# sourceMappingURL=responseInfo.mjs.map\n","import { parseMetadata } from './responseInfo.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nconst parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nconst parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n\nexport { parseJsonBody, parseJsonError };\n//# sourceMappingURL=json.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a service API handler that accepts input as defined shape and responds conforming to defined output shape.\n * A service API handler is composed with:\n * * A transfer handler\n * * A serializer function\n * * A deserializer function\n * * A default config object\n *\n * The returned service API handler, when called, will trigger the following workflow:\n * 1. When calling the service API handler function, the default config object is merged into the input config\n * object to assign the default values of some omitted configs, resulting to a resolved config object.\n * 2. The `endpointResolver` function from the default config object will be invoked with the resolved config object and\n * API input object resulting to an endpoint instance.\n * 3. The serializer function is invoked with API input object and the endpoint instance resulting to an HTTP request\n * instance.\n * 4. The HTTP request instance and the resolved config object is passed to the transfer handler function.\n * 5. The transfer handler function resolves to an HTTP response instance(can be either successful or failed status code).\n * 6. The deserializer function is invoked with the HTTP response instance resulting to the API output object, and\n * return to the caller.\n *\n *\n * @param transferHandler Async function for dispatching HTTP requests and returning HTTP response.\n * @param serializer  Async function for converting object in defined input shape into HTTP request targeting a given\n * \tendpoint.\n * @param deserializer Async function for converting HTTP response into output object in defined output shape, or error\n * \tshape.\n * @param defaultConfig  object containing default options to be consumed by transfer handler, serializer and\n *  deserializer.\n * @returns a async service API handler function that accepts a config object and input object in defined shape, returns\n * \tan output object in defined shape. It may also throw error instance in defined shape in deserializer. The config\n *  object type is composed with options type of transferHandler, endpointResolver function as well as endpointResolver\n *  function's input options type, region string. The config object property will be marked as optional if it's also\n * \tdefined in defaultConfig.\n *\n * @internal\n */\nconst composeServiceApi = (transferHandler, serializer, deserializer, defaultConfig) => {\n    return async (config, input) => {\n        const resolvedConfig = {\n            ...defaultConfig,\n            ...config,\n        };\n        // We need to allow different endpoints based on both given config(other than region) and input.\n        // However for most of non-S3 services, region is the only input for endpoint resolver.\n        const endpoint = await resolvedConfig.endpointResolver(resolvedConfig, input);\n        // Unlike AWS SDK clients, a serializer should NOT populate the `host` or `content-length` headers.\n        // Both of these headers are prohibited per Spec(https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name).\n        // They will be populated automatically by browser, or node-fetch polyfill.\n        const request = await serializer(input, endpoint);\n        const response = await transferHandler(request, {\n            ...resolvedConfig,\n        });\n        return deserializer(response);\n    };\n};\n\nexport { composeServiceApi };\n//# sourceMappingURL=composeServiceApi.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nvar Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nvar AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nvar ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nvar AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nvar DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nvar GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nvar InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nvar InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nvar PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nvar PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nvar PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nvar StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n\nexport { AiAction, AnalyticsAction, ApiAction, AuthAction, Category, DataStoreAction, Framework, GeoAction, InAppMessagingAction, InteractionsAction, PredictionsAction, PubSubAction, PushNotificationAction, StorageAction };\n//# sourceMappingURL=types.mjs.map\n","// generated by genversion\nconst version = '6.10.2';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst globalExists = () => {\n    return typeof global !== 'undefined';\n};\nconst globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nconst windowExists = () => {\n    return typeof window !== 'undefined';\n};\nconst documentExists = () => {\n    return typeof document !== 'undefined';\n};\nconst processExists = () => {\n    return typeof process !== 'undefined';\n};\nconst keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n\nexport { documentExists, globalExists, globalThisExists, keyPrefixMatch, processExists, windowExists };\n//# sourceMappingURL=helpers.mjs.map\n","import { Framework } from '../types.mjs';\nimport { reactWebDetect, reactSSRDetect } from './React.mjs';\nimport { vueWebDetect, vueSSRDetect } from './Vue.mjs';\nimport { svelteWebDetect, svelteSSRDetect } from './Svelte.mjs';\nimport { nextWebDetect, nextSSRDetect } from './Next.mjs';\nimport { nuxtWebDetect, nuxtSSRDetect } from './Nuxt.mjs';\nimport { angularWebDetect, angularSSRDetect } from './Angular.mjs';\nimport { reactNativeDetect } from './ReactNative.mjs';\nimport { expoDetect } from './Expo.mjs';\nimport { webDetect } from './Web.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nfunction detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n\nexport { detect };\n//# sourceMappingURL=index.mjs.map\n","import { globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with expo 48 / react-native 0.71.3\nfunction expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n\nexport { expoDetect };\n//# sourceMappingURL=Expo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nfunction reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n\nexport { reactNativeDetect };\n//# sourceMappingURL=ReactNative.mjs.map\n","import { windowExists, globalExists, keyPrefixMatch } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with next 13.4 / react 18.2\nfunction nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nfunction nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n\nexport { nextSSRDetect, nextWebDetect };\n//# sourceMappingURL=Next.mjs.map\n","import { windowExists, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with nuxt 2.15 / vue 2.7\nfunction nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nfunction nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n\nexport { nuxtSSRDetect, nuxtWebDetect };\n//# sourceMappingURL=Nuxt.mjs.map\n","import { documentExists, processExists, windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with @angular/core 16.0.0\nfunction angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nfunction angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n\nexport { angularSSRDetect, angularWebDetect };\n//# sourceMappingURL=Angular.mjs.map\n","import { documentExists, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react 18.2 - built using Vite\nfunction reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nfunction reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n\nexport { reactSSRDetect, reactWebDetect };\n//# sourceMappingURL=React.mjs.map\n","import { windowExists, keyPrefixMatch, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with vue 3.3.2\nfunction vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nfunction vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n\nexport { vueSSRDetect, vueWebDetect };\n//# sourceMappingURL=Vue.mjs.map\n","import { windowExists, keyPrefixMatch, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with svelte 3.59\nfunction svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nfunction svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n\nexport { svelteSSRDetect, svelteWebDetect };\n//# sourceMappingURL=Svelte.mjs.map\n","import { windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction webDetect() {\n    return windowExists();\n}\n\nexport { webDetect };\n//# sourceMappingURL=Web.mjs.map\n","import { Framework } from './types.mjs';\nimport { detect } from './detection/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nconst frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nconst detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nconst observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nfunction clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n\nexport { clearCache, detectFramework, frameworkChangeObservers, observeFrameworkChanges };\n//# sourceMappingURL=detectFramework.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nconst setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nconst getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n\nexport { getCustomUserAgent, setCustomUserAgent };\n//# sourceMappingURL=customUserAgent.mjs.map\n","import { Framework } from './types.mjs';\nimport { version } from './version.mjs';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework.mjs';\nimport { getCustomUserAgent } from './customUserAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nconst sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nconst Platform = new PlatformBuilder();\nconst getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nconst getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n\nexport { Platform, getAmplifyUserAgent, getAmplifyUserAgentObject, sanitizeAmplifyVersion };\n//# sourceMappingURL=index.mjs.map\n","import '../../../utils/getClientInfo/getClientInfo.mjs';\nimport { jitteredBackoff as jitteredBackoff$1 } from '../../../utils/retry/jitteredBackoff.mjs';\nimport '../../../utils/retry/retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nconst DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\nconst jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoff$1(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nfunction jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { MAX_DELAY_MS };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n\nexport { AmplifyErrorCode };\n//# sourceMappingURL=errors.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nconst isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n\nexport { isClockSkewError };\n//# sourceMappingURL=isClockSkewError.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n\nexport { getRetryDecider };\n//# sourceMappingURL=defaultRetryDecider.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport { jitteredBackoff } from '../../../../clients/middleware/retry/jitteredBackoff.mjs';\nimport { getRetryDecider } from '../../../../clients/middleware/retry/defaultRetryDecider.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { parseJsonError } from '../../../../clients/serde/json.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst COGNITO_IDENTITY_SERVICE_NAME = 'cognito-identity';\nconst DEFAULT_SERVICE_CLIENT_API_CONFIG = {\n    service: COGNITO_IDENTITY_SERVICE_NAME,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    cache: 'no-store',\n};\n\nexport { COGNITO_IDENTITY_SERVICE_NAME, DEFAULT_SERVICE_CLIENT_API_CONFIG };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_RETRY_ATTEMPTS = 3;\n/**\n * Retry middleware\n */\nconst retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n\nexport { retryMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nconst userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n\nexport { userAgentMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nconst composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n\nexport { composeTransferHandler };\n//# sourceMappingURL=composeTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nconst withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n\nexport { withMemoization };\n//# sourceMappingURL=memoization.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n\nexport { fetchTransferHandler };\n//# sourceMappingURL=fetch.mjs.map\n","import { retryMiddlewareFactory } from '../middleware/retry/middleware.mjs';\nimport '../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../utils/retry/retry.mjs';\nimport '../../types/errors.mjs';\nimport { userAgentMiddlewareFactory } from '../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from './fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [userAgentMiddlewareFactory, retryMiddlewareFactory]);\n\nexport { unauthenticatedHandler };\n//# sourceMappingURL=unauthenticated.mjs.map\n","import '../../../../../types/errors.mjs';\nimport '../../../../../errors/errorHelpers.mjs';\nimport { unauthenticatedHandler } from '../../../../../clients/handlers/unauthenticated.mjs';\nimport '../../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../../utils/retry/retry.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { composeTransferHandler } from '../../../../../clients/internal/composeTransferHandler.mjs';\nimport { createDisableCacheMiddleware } from '../../../middleware/createDisableCacheMiddleware.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nconst cognitoIdentityTransferHandler = composeTransferHandler(unauthenticatedHandler, [createDisableCacheMiddleware]);\n\nexport { cognitoIdentityTransferHandler };\n//# sourceMappingURL=cognitoIdentityTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst createDisableCacheMiddleware = () => next => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n\nexport { createDisableCacheMiddleware };\n//# sourceMappingURL=createDisableCacheMiddleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createClientSerializer = (operation) => (input, endpoint) => {\n    const headers = getSharedHeaders(operation);\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityService.${operation}`,\n});\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n\nexport { buildHttpRpcRequest, createClientSerializer };\n//# sourceMappingURL=createClientSerializer.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { parseMetadata } from '../../../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../../../clients/serde/json.mjs';\nimport { composeServiceApi } from '../../../../clients/internal/composeServiceApi.mjs';\nimport { getAmplifyUserAgent } from '../../../../Platform/index.mjs';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants.mjs';\nimport { cognitoIdentityTransferHandler } from './handler/cognitoIdentityTransferHandler.mjs';\nimport { createClientSerializer } from './serde/createClientSerializer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetCredentialsForIdentityClient = (config) => composeServiceApi(cognitoIdentityTransferHandler, createClientSerializer('GetCredentialsForIdentity'), getCredentialsForIdentityDeserializer, {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n    userAgentValue: getAmplifyUserAgent(),\n});\nconst getCredentialsForIdentityDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const body = await parseJsonBody(response);\n        return {\n            IdentityId: body.IdentityId,\n            Credentials: deserializeCredentials(body.Credentials),\n            $metadata: parseMetadata(response),\n        };\n    }\n};\nconst deserializeCredentials = ({ Expiration, ...rest } = {}) => ({\n    ...rest,\n    Expiration: Expiration && new Date(Expiration * 1000),\n});\n\nexport { createGetCredentialsForIdentityClient };\n//# sourceMappingURL=createGetCredentialsForIdentityClient.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { parseMetadata } from '../../../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../../../clients/serde/json.mjs';\nimport { composeServiceApi } from '../../../../clients/internal/composeServiceApi.mjs';\nimport { getAmplifyUserAgent } from '../../../../Platform/index.mjs';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants.mjs';\nimport { cognitoIdentityTransferHandler } from './handler/cognitoIdentityTransferHandler.mjs';\nimport { createClientSerializer } from './serde/createClientSerializer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetIdClient = (config) => composeServiceApi(cognitoIdentityTransferHandler, createClientSerializer('GetId'), getIdDeserializer, {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n    userAgentValue: getAmplifyUserAgent(),\n});\nconst getIdDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const body = await parseJsonBody(response);\n        return {\n            IdentityId: body.IdentityId,\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n\nexport { createGetIdClient };\n//# sourceMappingURL=createGetIdClient.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default partition for AWS services. This is used when the region is not provided or the region is not recognized.\n *\n * @internal\n */\nconst defaultPartition = {\n    id: 'aws',\n    outputs: {\n        dnsSuffix: 'amazonaws.com',\n    },\n    regionRegex: '^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$',\n    regions: ['aws-global'],\n};\n/**\n * This data is adapted from the partition file from AWS SDK shared utilities but remove some contents for bundle size\n * concern. Information removed are `dualStackDnsSuffix`, `supportDualStack`, `supportFIPS`, restricted partitions, and\n * list of regions for each partition other than global regions.\n *\n * * Ref: https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints\n * * Ref: https://github.com/aws/aws-sdk-js-v3/blob/0201baef03c2379f1f6f7150b9d401d4b230d488/packages/util-endpoints/src/lib/aws/partitions.json#L1\n *\n * @internal\n */\nconst partitionsInfo = {\n    partitions: [\n        defaultPartition,\n        {\n            id: 'aws-cn',\n            outputs: {\n                dnsSuffix: 'amazonaws.com.cn',\n            },\n            regionRegex: '^cn\\\\-\\\\w+\\\\-\\\\d+$',\n            regions: ['aws-cn-global'],\n        },\n    ],\n};\n\nexport { defaultPartition, partitionsInfo };\n//# sourceMappingURL=partitions.mjs.map\n","import { defaultPartition, partitionsInfo } from './partitions.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get the AWS Services endpoint URL's DNS suffix for a given region. A typical AWS regional service endpoint URL will\n * follow this pattern: {endpointPrefix}.{region}.{dnsSuffix}. For example, the endpoint URL for Cognito Identity in\n * us-east-1 will be cognito-identity.us-east-1.amazonaws.com. Here the DnsSuffix is `amazonaws.com`.\n *\n * @param region\n * @returns The DNS suffix\n *\n * @internal\n */\nconst getDnsSuffix = (region) => {\n    const { partitions } = partitionsInfo;\n    for (const { regions, outputs, regionRegex } of partitions) {\n        const regex = new RegExp(regionRegex);\n        if (regions.includes(region) || regex.test(region)) {\n            return outputs.dnsSuffix;\n        }\n    }\n    return defaultPartition.outputs.dnsSuffix;\n};\n\nexport { getDnsSuffix };\n//# sourceMappingURL=getDnsSuffix.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\n\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n//# sourceMappingURL=index.mjs.map\n","import { getDnsSuffix } from '../../../../clients/endpoints/getDnsSuffix.mjs';\nimport '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { AmplifyUrl } from '../../../../utils/amplifyUrl/index.mjs';\nimport '../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport '../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '../../../../singleton/Auth/index.mjs';\nimport '../../../../Platform/index.mjs';\nimport '../../../../Platform/types.mjs';\nimport '../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../Reachability/Reachability.mjs';\nimport '../../../../Hub/index.mjs';\nimport '../../../../utils/sessionListener/index.mjs';\nimport { COGNITO_IDENTITY_SERVICE_NAME } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst cognitoIdentityPoolEndpointResolver = ({ region, }) => ({\n    url: new AmplifyUrl(`https://${COGNITO_IDENTITY_SERVICE_NAME}.${region}.${getDnsSuffix(region)}`),\n});\n\nexport { cognitoIdentityPoolEndpointResolver };\n//# sourceMappingURL=cognitoIdentityPoolEndpointResolver.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass PlatformNotSupportedError extends AmplifyError {\n    constructor() {\n        super({\n            name: AmplifyErrorCode.PlatformNotSupported,\n            message: 'Function not supported on current platform',\n        });\n    }\n}\n\nexport { PlatformNotSupportedError };\n//# sourceMappingURL=PlatformNotSupportedError.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass KeyValueStorage {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    async setItem(key, value) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    async getItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    async removeItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    async clear() {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.clear();\n    }\n}\n\nexport { KeyValueStorage };\n//# sourceMappingURL=KeyValueStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass InMemoryStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    get length() {\n        return this.storage.size;\n    }\n    key(index) {\n        if (index > this.length - 1) {\n            return null;\n        }\n        return Array.from(this.storage.keys())[index];\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    getItem(key) {\n        return this.storage.get(key) ?? null;\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { InMemoryStorage };\n//# sourceMappingURL=InMemoryStorage.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nconst getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nconst getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n\nexport { getLocalStorageWithFallback, getSessionStorageWithFallback };\n//# sourceMappingURL=utils.mjs.map\n","import { DefaultStorage } from './DefaultStorage.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\nimport { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { SessionStorage } from './SessionStorage.mjs';\nexport { CookieStorage } from './CookieStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst defaultStorage = new DefaultStorage();\nconst sessionStorage = new SessionStorage();\nconst sharedInMemoryStorage = new KeyValueStorage(new InMemoryStorage());\n\nexport { defaultStorage, sessionStorage, sharedInMemoryStorage };\n//# sourceMappingURL=index.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getLocalStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass DefaultStorage extends KeyValueStorage {\n    constructor() {\n        super(getLocalStorageWithFallback());\n    }\n}\n\nexport { DefaultStorage };\n//# sourceMappingURL=DefaultStorage.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getSessionStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SessionStorage extends KeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n\nexport { SessionStorage };\n//# sourceMappingURL=SessionStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default cache config\n */\nconst defaultConfig = {\n    keyPrefix: 'aws-amplify-cache',\n    capacityInBytes: 1048576,\n    itemMaxSize: 210000,\n    defaultTTL: 259200000,\n    defaultPriority: 5,\n    warningThreshold: 0.8,\n};\nconst currentSizeKey = 'CurSize';\n\nexport { currentSizeKey, defaultConfig };\n//# sourceMappingURL=constants.mjs.map\n","import { currentSizeKey } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * return the byte size of the string\n * @param str\n */\nfunction getByteLength(str) {\n    let ret = 0;\n    ret = str.length;\n    for (let i = str.length; i >= 0; i -= 1) {\n        const charCode = str.charCodeAt(i);\n        if (charCode > 0x7f && charCode <= 0x7ff) {\n            ret += 1;\n        }\n        else if (charCode > 0x7ff && charCode <= 0xffff) {\n            ret += 2;\n        }\n        // trail surrogate\n        if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n            i -= 1;\n        }\n    }\n    return ret;\n}\n/**\n * get current time\n */\nfunction getCurrentTime() {\n    const currentTime = new Date();\n    return currentTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nfunction isInteger(value) {\n    if (Number.isInteger) {\n        return Number.isInteger(value);\n    }\n    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);\n}\nconst getCurrentSizeKey = (keyPrefix) => `${keyPrefix}${currentSizeKey}`;\n\nexport { getByteLength, getCurrentSizeKey, getCurrentTime, isInteger };\n//# sourceMappingURL=cacheHelpers.mjs.map\n","import { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createAssertionFunction = (errorMap, AssertionError = AmplifyError) => (assertion, name, additionalContext) => {\n    const { message, recoverySuggestion } = errorMap[name];\n    if (!assertion) {\n        throw new AssertionError({\n            name,\n            message: additionalContext\n                ? `${message} ${additionalContext}`\n                : message,\n            recoverySuggestion,\n        });\n    }\n};\n\nexport { createAssertionFunction };\n//# sourceMappingURL=createAssertionFunction.mjs.map\n","import { createAssertionFunction } from '../../errors/createAssertionFunction.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar CacheErrorCode;\n(function (CacheErrorCode) {\n    CacheErrorCode[\"NoCacheItem\"] = \"NoCacheItem\";\n    CacheErrorCode[\"NullNextNode\"] = \"NullNextNode\";\n    CacheErrorCode[\"NullPreviousNode\"] = \"NullPreviousNode\";\n})(CacheErrorCode || (CacheErrorCode = {}));\nconst cacheErrorMap = {\n    [CacheErrorCode.NoCacheItem]: {\n        message: 'Item not found in the cache storage.',\n    },\n    [CacheErrorCode.NullNextNode]: {\n        message: 'Next node is null.',\n    },\n    [CacheErrorCode.NullPreviousNode]: {\n        message: 'Previous node is null.',\n    },\n};\nconst assert = createAssertionFunction(cacheErrorMap);\n\nexport { CacheErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { defaultConfig, currentSizeKey } from './constants.mjs';\nimport { getCurrentSizeKey, getCurrentTime, getByteLength } from './utils/cacheHelpers.mjs';\nimport { assert, CacheErrorCode } from './utils/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nclass StorageCacheCommon {\n    /**\n     * Initialize the cache\n     *\n     * @param config - Custom configuration for this instance.\n     */\n    constructor({ config, keyValueStorage, }) {\n        this.config = {\n            ...defaultConfig,\n            ...config,\n        };\n        this.keyValueStorage = keyValueStorage;\n        this.sanitizeConfig();\n    }\n    getModuleName() {\n        return 'Cache';\n    }\n    /**\n     * Set custom configuration for the cache instance.\n     *\n     * @param config - customized configuration (without keyPrefix, which can't be changed)\n     *\n     * @return - the current configuration\n     */\n    configure(config) {\n        if (config) {\n            if (config.keyPrefix) {\n                logger.warn('keyPrefix can not be re-configured on an existing Cache instance.');\n            }\n            this.config = {\n                ...this.config,\n                ...config,\n            };\n        }\n        this.sanitizeConfig();\n        return this.config;\n    }\n    /**\n     * return the current size of the cache\n     * @return {Promise}\n     */\n    async getCurrentCacheSize() {\n        let size = await this.getStorage().getItem(getCurrentSizeKey(this.config.keyPrefix));\n        if (!size) {\n            await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), '0');\n            size = '0';\n        }\n        return Number(size);\n    }\n    /**\n     * Set item into cache. You can put number, string, boolean or object.\n     * The cache will first check whether has the same key.\n     * If it has, it will delete the old item and then put the new item in\n     * The cache will pop out items if it is full\n     * You can specify the cache item options. The cache will abort and output a warning:\n     * If the key is invalid\n     * If the size of the item exceeds itemMaxSize.\n     * If the value is undefined\n     * If incorrect cache item configuration\n     * If error happened with browser storage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} value - the value of the item\n     * @param {Object} [options] - optional, the specified meta-data\n     *\n     * @return {Promise}\n     */\n    async setItem(key, value, options) {\n        logger.debug(`Set item: key is ${key}, value is ${value} with options: ${options}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        if (typeof value === 'undefined') {\n            logger.warn(`The value of item should not be undefined!`);\n            return;\n        }\n        const cacheItemOptions = {\n            priority: options?.priority !== undefined\n                ? options.priority\n                : this.config.defaultPriority,\n            expires: options?.expires !== undefined\n                ? options.expires\n                : this.config.defaultTTL + getCurrentTime(),\n        };\n        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {\n            logger.warn(`Invalid parameter: priority due to out or range. It should be within 1 and 5.`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        const item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);\n        // check whether this item is too big;\n        if (item.byteSize > this.config.itemMaxSize) {\n            logger.warn(`Item with key: ${key} you are trying to put into is too big!`);\n            return;\n        }\n        try {\n            // first look into the storage, if it exists, delete it.\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n            // check whether the cache is full\n            if (await this.isCacheFull(item.byteSize)) {\n                const validKeys = await this.clearInvalidAndGetRemainingKeys();\n                if (await this.isCacheFull(item.byteSize)) {\n                    const sizeToPop = await this.sizeToPop(item.byteSize);\n                    await this.popOutItems(validKeys, sizeToPop);\n                }\n            }\n            // put item in the cache\n            return this.setCacheItem(prefixedKey, item);\n        }\n        catch (e) {\n            logger.warn(`setItem failed! ${e}`);\n        }\n    }\n    /**\n     * Get item from cache. It will return null if item doesnt exist or it has been expired.\n     * If you specified callback function in the options,\n     * then the function will be executed if no such item in the cache\n     * and finally put the return value into cache.\n     * Please make sure the callback function will return the value you want to put into the cache.\n     * The cache will abort output a warning:\n     * If the key is invalid\n     * If error happened with AsyncStorage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} [options] - the options of callback function\n     *\n     * @return {Promise} - return a promise resolves to be the value of the item\n     */\n    async getItem(key, options) {\n        logger.debug(`Get item: key is ${key} with options ${options}`);\n        let cached;\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return null;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            cached = await this.getStorage().getItem(prefixedKey);\n            if (cached != null) {\n                if (await this.isExpired(prefixedKey)) {\n                    // if expired, remove that item and return null\n                    await this.removeCacheItem(prefixedKey, JSON.parse(cached).byteSize);\n                }\n                else {\n                    // if not expired, update its visitedTime and return the value\n                    const item = await this.updateVisitedTime(JSON.parse(cached), prefixedKey);\n                    return item.data;\n                }\n            }\n            if (options?.callback) {\n                const val = options.callback();\n                if (val !== null) {\n                    await this.setItem(key, val, options);\n                }\n                return val;\n            }\n            return null;\n        }\n        catch (e) {\n            logger.warn(`getItem failed! ${e}`);\n            return null;\n        }\n    }\n    /**\n     * remove item from the cache\n     * The cache will abort output a warning:\n     * If error happened with AsyncStorage\n     * @param {String} key - the key of the item\n     * @return {Promise}\n     */\n    async removeItem(key) {\n        logger.debug(`Remove item: key is ${key}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n        }\n        catch (e) {\n            logger.warn(`removeItem failed! ${e}`);\n        }\n    }\n    /**\n     * Return all the keys owned by this cache.\n     * Will return an empty array if error occurred.\n     *\n     * @return {Promise}\n     */\n    async getAllKeys() {\n        try {\n            return await this.getAllCacheKeys();\n        }\n        catch (e) {\n            logger.warn(`getAllkeys failed! ${e}`);\n            return [];\n        }\n    }\n    getStorage() {\n        return this.keyValueStorage;\n    }\n    /**\n     * check whether item is expired\n     *\n     * @param key - the key of the item\n     *\n     * @return true if the item is expired.\n     */\n    async isExpired(key) {\n        const text = await this.getStorage().getItem(key);\n        assert(text !== null, CacheErrorCode.NoCacheItem, `Key: ${key}`);\n        const item = JSON.parse(text);\n        if (getCurrentTime() >= item.expires) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * delete item from cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param size - optional, the byte size of the item\n     */\n    async removeCacheItem(prefixedKey, size) {\n        const item = await this.getStorage().getItem(prefixedKey);\n        assert(item !== null, CacheErrorCode.NoCacheItem, `Key: ${prefixedKey}`);\n        const itemSize = size ?? JSON.parse(item).byteSize;\n        // first try to update the current size of the cache\n        await this.decreaseCurrentSizeInBytes(itemSize);\n        // try to remove the item from cache\n        try {\n            await this.getStorage().removeItem(prefixedKey);\n        }\n        catch (removeItemError) {\n            // if some error happened, we need to rollback the current size\n            await this.increaseCurrentSizeInBytes(itemSize);\n            logger.error(`Failed to remove item: ${removeItemError}`);\n        }\n    }\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    fillCacheItem(key, value, options) {\n        const item = {\n            key,\n            data: value,\n            timestamp: getCurrentTime(),\n            visitedTime: getCurrentTime(),\n            priority: options.priority ?? 0,\n            expires: options.expires ?? 0,\n            type: typeof value,\n            byteSize: 0,\n        };\n        // calculate byte size\n        item.byteSize = getByteLength(JSON.stringify(item));\n        // re-calculate using cache item with updated byteSize property\n        item.byteSize = getByteLength(JSON.stringify(item));\n        return item;\n    }\n    sanitizeConfig() {\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // Set 5MB limit\n        const cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    }\n    /**\n     * increase current size of the cache\n     *\n     * @param amount - the amount of the cache szie which need to be increased\n     */\n    async increaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size + amount).toString());\n    }\n    /**\n     * decrease current size of the cache\n     *\n     * @param amount - the amount of the cache size which needs to be decreased\n     */\n    async decreaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size - amount).toString());\n    }\n    /**\n     * update the visited time if item has been visited\n     *\n     * @param item - the item which need to be updated\n     * @param prefixedKey - the key of the item\n     *\n     * @return the updated item\n     */\n    async updateVisitedTime(item, prefixedKey) {\n        item.visitedTime = getCurrentTime();\n        await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        return item;\n    }\n    /**\n     * put item into cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param itemData - the value of the item\n     * @param itemSizeInBytes - the byte size of the item\n     */\n    async setCacheItem(prefixedKey, item) {\n        // first try to update the current size of the cache.\n        await this.increaseCurrentSizeInBytes(item.byteSize);\n        // try to add the item into cache\n        try {\n            await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        }\n        catch (setItemErr) {\n            // if some error happened, we need to rollback the current size\n            await this.decreaseCurrentSizeInBytes(item.byteSize);\n            logger.error(`Failed to set item ${setItemErr}`);\n        }\n    }\n    /**\n     * total space needed when poping out items\n     *\n     * @param itemSize\n     *\n     * @return total space needed\n     */\n    async sizeToPop(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        const spaceItemNeed = cur + itemSize - this.config.capacityInBytes;\n        const cacheThresholdSpace = (1 - this.config.warningThreshold) * this.config.capacityInBytes;\n        return spaceItemNeed > cacheThresholdSpace\n            ? spaceItemNeed\n            : cacheThresholdSpace;\n    }\n    /**\n     * see whether cache is full\n     *\n     * @param itemSize\n     *\n     * @return true if cache is full\n     */\n    async isCacheFull(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        return itemSize + cur > this.config.capacityInBytes;\n    }\n    /**\n     * get all the items we have, sort them by their priority,\n     * if priority is same, sort them by their last visited time\n     * pop out items from the low priority (5 is the lowest)\n     * @private\n     * @param keys - all the keys in this cache\n     * @param sizeToPop - the total size of the items which needed to be poped out\n     */\n    async popOutItems(keys, sizeToPop) {\n        const items = [];\n        let remainedSize = sizeToPop;\n        for (const key of keys) {\n            const val = await this.getStorage().getItem(key);\n            if (val != null) {\n                const item = JSON.parse(val);\n                items.push(item);\n            }\n        }\n        // first compare priority\n        // then compare visited time\n        items.sort((a, b) => {\n            if (a.priority > b.priority) {\n                return -1;\n            }\n            else if (a.priority < b.priority) {\n                return 1;\n            }\n            else {\n                if (a.visitedTime < b.visitedTime) {\n                    return -1;\n                }\n                else\n                    return 1;\n            }\n        });\n        for (const item of items) {\n            // pop out items until we have enough room for new item\n            await this.removeCacheItem(item.key, item.byteSize);\n            remainedSize -= item.byteSize;\n            if (remainedSize <= 0) {\n                return;\n            }\n        }\n    }\n    /**\n     * Scan the storage and combine the following operations for efficiency\n     *   1. Clear out all expired keys owned by this cache, not including the size key.\n     *   2. Return the remaining keys.\n     *\n     * @return The remaining valid keys\n     */\n    async clearInvalidAndGetRemainingKeys() {\n        const remainingKeys = [];\n        const keys = await this.getAllCacheKeys({\n            omitSizeKey: true,\n        });\n        for (const key of keys) {\n            if (await this.isExpired(key)) {\n                await this.removeCacheItem(key);\n            }\n            else {\n                remainingKeys.push(key);\n            }\n        }\n        return remainingKeys;\n    }\n    /**\n     * clear the entire cache\n     * The cache will abort and output a warning if error occurs\n     * @return {Promise}\n     */\n    async clear() {\n        logger.debug(`Clear Cache`);\n        try {\n            const keys = await this.getAllKeys();\n            for (const key of keys) {\n                const prefixedKey = `${this.config.keyPrefix}${key}`;\n                await this.getStorage().removeItem(prefixedKey);\n            }\n        }\n        catch (e) {\n            logger.warn(`clear failed! ${e}`);\n        }\n    }\n}\n\nexport { StorageCacheCommon };\n//# sourceMappingURL=StorageCacheCommon.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { KeyValueStorage } from '../storage/KeyValueStorage.mjs';\nimport { getLocalStorageWithFallback } from '../storage/utils.mjs';\nimport { defaultConfig } from './constants.mjs';\nimport { StorageCacheCommon } from './StorageCacheCommon.mjs';\nimport { getCurrentSizeKey, getCurrentTime } from './utils/cacheHelpers.mjs';\nimport './utils/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Customized storage based on the SessionStorage or LocalStorage with LRU implemented\n */\nclass StorageCache extends StorageCacheCommon {\n    /**\n     * initialize the cache\n     * @param config - the configuration of the cache\n     */\n    constructor(config) {\n        const storage = getLocalStorageWithFallback();\n        super({ config, keyValueStorage: new KeyValueStorage(storage) });\n        this.storage = storage;\n        this.getItem = this.getItem.bind(this);\n        this.setItem = this.setItem.bind(this);\n        this.removeItem = this.removeItem.bind(this);\n    }\n    async getAllCacheKeys(options) {\n        const { omitSizeKey } = options ?? {};\n        const keys = [];\n        for (let i = 0; i < this.storage.length; i++) {\n            const key = this.storage.key(i);\n            if (omitSizeKey && key === getCurrentSizeKey(this.config.keyPrefix)) {\n                continue;\n            }\n            if (key?.startsWith(this.config.keyPrefix)) {\n                keys.push(key.substring(this.config.keyPrefix.length));\n            }\n        }\n        return keys;\n    }\n    /**\n     * Return a new instance of cache with customized configuration.\n     * @param {Object} config - the customized configuration\n     * @return {Object} - the new instance of Cache\n     */\n    createInstance(config) {\n        if (!config.keyPrefix || config.keyPrefix === defaultConfig.keyPrefix) {\n            logger.error('invalid keyPrefix, setting keyPrefix with timeStamp');\n            config.keyPrefix = getCurrentTime.toString();\n        }\n        return new StorageCache(config);\n    }\n}\n\nexport { StorageCache };\n//# sourceMappingURL=StorageCache.mjs.map\n","import { StorageCache } from './StorageCache.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst Cache = new StorageCache();\n\nexport { Cache };\n//# sourceMappingURL=index.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('I18n');\n/**\n * Language translation utility.\n */\nlet I18n$1 = class I18n {\n    constructor() {\n        /**\n         * @private\n         */\n        this._options = null;\n        /**\n         * @private\n         */\n        this._lang = null;\n        /**\n         * @private\n         */\n        this._dict = {};\n    }\n    /**\n     * Sets the default language from the configuration when required.\n     */\n    setDefaultLanguage() {\n        // Default to window language if not set in instance\n        if (!this._lang &&\n            typeof window !== 'undefined' &&\n            window &&\n            window.navigator) {\n            this._lang = window.navigator.language;\n        }\n        logger.debug(this._lang);\n    }\n    /**\n     * @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    setLanguage(lang) {\n        this._lang = lang;\n    }\n    /**\n     * @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    get(key, defVal = undefined) {\n        this.setDefaultLanguage();\n        if (!this._lang) {\n            return typeof defVal !== 'undefined' ? defVal : key;\n        }\n        const lang = this._lang;\n        let val = this.getByLanguage(key, lang);\n        if (val) {\n            return val;\n        }\n        if (lang.indexOf('-') > 0) {\n            val = this.getByLanguage(key, lang.split('-')[0]);\n        }\n        if (val) {\n            return val;\n        }\n        return typeof defVal !== 'undefined' ? defVal : key;\n    }\n    /**\n     * @method\n     * Get value according to specified language\n     * @param {String} key\n     * @param {String} language - Specified langurage to be used\n     * @param {String} defVal - Default value\n     */\n    getByLanguage(key, language, defVal = null) {\n        if (!language) {\n            return defVal;\n        }\n        const langDict = this._dict[language];\n        if (!langDict) {\n            return defVal;\n        }\n        return langDict[key];\n    }\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {String} language - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    putVocabulariesForLanguage(language, vocabularies) {\n        let langDict = this._dict[language];\n        if (!langDict) {\n            langDict = this._dict[language] = {};\n        }\n        this._dict[language] = { ...langDict, ...vocabularies };\n    }\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    putVocabularies(vocabularies) {\n        Object.keys(vocabularies).forEach(key => {\n            this.putVocabulariesForLanguage(key, vocabularies[key]);\n        });\n    }\n};\n\nexport { I18n$1 as I18n };\n//# sourceMappingURL=I18n.mjs.map\n","import { createAssertionFunction } from '../errors/createAssertionFunction.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar I18nErrorCode;\n(function (I18nErrorCode) {\n    I18nErrorCode[\"NotConfigured\"] = \"NotConfigured\";\n})(I18nErrorCode || (I18nErrorCode = {}));\nconst i18nErrorMap = {\n    [I18nErrorCode.NotConfigured]: {\n        message: 'i18n is not configured.',\n    },\n};\nconst assert = createAssertionFunction(i18nErrorMap);\n\nexport { I18nErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { I18n as I18n$1 } from './I18n.mjs';\nimport { assert, I18nErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('I18n');\nlet _config = { language: null };\nlet _i18n = null;\n/**\n * Export I18n APIs\n */\nclass I18n {\n    /**\n     * @static\n     * @method\n     * Configure I18n part\n     * @param {Object} config - Configuration of the I18n\n     */\n    static configure(config) {\n        logger.debug('configure I18n');\n        if (!config) {\n            return _config;\n        }\n        _config = Object.assign({}, _config, config.I18n || config);\n        I18n.createInstance();\n        return _config;\n    }\n    static getModuleName() {\n        return 'I18n';\n    }\n    /**\n     * @static\n     * @method\n     * Create an instance of I18n for the library\n     */\n    static createInstance() {\n        logger.debug('create I18n instance');\n        if (_i18n) {\n            return;\n        }\n        _i18n = new I18n$1();\n    }\n    /**\n     * @static @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    static setLanguage(lang) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.setLanguage(lang);\n    }\n    /**\n     * @static @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    static get(key, defVal) {\n        if (!I18n.checkConfig()) {\n            return typeof defVal === 'undefined' ? key : defVal;\n        }\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        return _i18n.get(key, defVal);\n    }\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {String} language - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    static putVocabulariesForLanguage(language, vocabularies) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.putVocabulariesForLanguage(language, vocabularies);\n    }\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    static putVocabularies(vocabularies) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.putVocabularies(vocabularies);\n    }\n    static checkConfig() {\n        if (!_i18n) {\n            I18n.createInstance();\n        }\n        return true;\n    }\n}\n// Create an instance of I18n in the static class\nI18n.createInstance();\n\nexport { I18n };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isBrowser = () => typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nexport { isBrowser };\n//# sourceMappingURL=isBrowser.mjs.map\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 } from 'uuid';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyUuid = v4;\n\nexport { amplifyUuid };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { createAssertionFunction } from './createAssertionFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyErrorMap = {\n    [AmplifyErrorCode.NoEndpointId]: {\n        message: 'Endpoint ID was not found and was unable to be created.',\n    },\n    [AmplifyErrorCode.PlatformNotSupported]: {\n        message: 'Function not supported on current platform.',\n    },\n    [AmplifyErrorCode.Unknown]: {\n        message: 'An unknown error occurred.',\n    },\n    [AmplifyErrorCode.NetworkError]: {\n        message: 'A network error has occurred.',\n    },\n};\nconst assert = createAssertionFunction(amplifyErrorMap);\n\nexport { assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('getClientInfo');\nfunction getClientInfo() {\n    if (typeof window === 'undefined') {\n        return {};\n    }\n    return browserClientInfo();\n}\nfunction browserClientInfo() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return {};\n    }\n    const nav = window.navigator;\n    if (!nav) {\n        logger.warn('No navigator object available to get browser client info');\n        return {};\n    }\n    const { platform, product, vendor, userAgent, language } = nav;\n    const type = getBrowserType(userAgent);\n    const timezone = browserTimezone();\n    return {\n        platform,\n        make: product || vendor,\n        model: type.type,\n        version: type.version,\n        appVersion: [type.type, type.version].join('/'),\n        language,\n        timezone,\n    };\n}\nfunction browserTimezone() {\n    const tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\n    return tzMatch ? tzMatch[1] || '' : '';\n}\nfunction getBrowserType(userAgent) {\n    // The latest user agents for Opera: https://www.whatismybrowser.com/guides/the-latest-user-agent/opera\n    const operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9.]+).*/i.exec(userAgent);\n    if (operaMatch) {\n        return { type: operaMatch[1], version: operaMatch[2] };\n    }\n    // The latest user agents for Edge: https://www.whatismybrowser.com/guides/the-latest-user-agent/edge\n    const ieMatch = /.+(Trident|Edge|Edg|EdgA|EdgiOS)\\/([0-9.]+).*/i.exec(userAgent);\n    if (ieMatch) {\n        return { type: ieMatch[1], version: ieMatch[2] };\n    }\n    // The latest user agents for web browsers on Firefox and Chrome\n    // https://www.whatismybrowser.com/guides/the-latest-user-agent/firefox\n    // https://www.whatismybrowser.com/guides/the-latest-user-agent/chrome\n    const cfMatch = /.+(Chrome|CriOS|Firefox|FxiOS)\\/([0-9.]+).*/i.exec(userAgent);\n    if (cfMatch) {\n        return { type: cfMatch[1], version: cfMatch[2] };\n    }\n    // The latest user agents for Safari: https://www.whatismybrowser.com/guides/the-latest-user-agent/safari\n    const sMatch = /.+(Safari)\\/([0-9.]+).*/i.exec(userAgent);\n    if (sMatch) {\n        return { type: sMatch[1], version: sMatch[2] };\n    }\n    const awkMatch = /.+(AppleWebKit)\\/([0-9.]+).*/i.exec(userAgent);\n    if (awkMatch) {\n        return { type: awkMatch[1], version: awkMatch[2] };\n    }\n    const anyMatch = /.*([A-Z]+)\\/([0-9.]+).*/i.exec(userAgent);\n    if (anyMatch) {\n        return { type: anyMatch[1], version: anyMatch[2] };\n    }\n    return { type: '', version: '' };\n}\n\nexport { getClientInfo };\n//# sourceMappingURL=getClientInfo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns signed headers.\n *\n * @param headers `headers` from the request.\n * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers\n * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.\n *\n * @internal\n */\nconst getSignedHeaders = (headers) => Object.keys(headers)\n    .map(key => key.toLowerCase())\n    .sort()\n    .join(';');\n\nexport { getSignedHeaders };\n//# sourceMappingURL=getSignedHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// query params\nconst ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';\nconst AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';\nconst CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';\nconst EXPIRES_QUERY_PARAM = 'X-Amz-Expires';\nconst REGION_SET_PARAM = 'X-Amz-Region-Set';\nconst SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';\nconst SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';\nconst TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';\n// headers\nconst AUTH_HEADER = 'authorization';\nconst HOST_HEADER = 'host';\nconst AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nconst TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\n// identifiers\nconst KEY_TYPE_IDENTIFIER = 'aws4_request';\nconst SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';\nconst SIGNATURE_IDENTIFIER = 'AWS4';\n// preset values\nconst EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\nconst UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';\n\nexport { ALGORITHM_QUERY_PARAM, AMZ_DATE_HEADER, AMZ_DATE_QUERY_PARAM, AUTH_HEADER, CREDENTIAL_QUERY_PARAM, EMPTY_HASH, EXPIRES_QUERY_PARAM, HOST_HEADER, KEY_TYPE_IDENTIFIER, REGION_SET_PARAM, SHA256_ALGORITHM_IDENTIFIER, SIGNATURE_IDENTIFIER, SIGNATURE_QUERY_PARAM, SIGNED_HEADERS_QUERY_PARAM, TOKEN_HEADER, TOKEN_QUERY_PARAM, UNSIGNED_PAYLOAD };\n//# sourceMappingURL=constants.mjs.map\n","import { Sha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@smithy/util-hex-encoding';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: V6 update to different crypto dependency?\n/**\n * Returns the hashed data a `Uint8Array`.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns `Uint8Array` created from the data as input to a hash function.\n */\nconst getHashedData = (key, data) => {\n    const sha256 = new Sha256(key ?? undefined);\n    sha256.update(data);\n    // TODO: V6 flip to async digest\n    const hashedData = sha256.digestSync();\n    return hashedData;\n};\n/**\n * Returns the hashed data as a hex string.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.\n *\n * @internal\n */\nconst getHashedDataAsHex = (key, data) => {\n    const hashedData = getHashedData(key, data);\n    return toHex(hashedData);\n};\n\nexport { getHashedData, getHashedDataAsHex };\n//# sourceMappingURL=dataHashHelpers.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns canonical headers.\n *\n * @param headers Headers from the request.\n * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must\n * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,\n * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values\n * for a multi-value header using commas.\n *\n * @internal\n */\nconst getCanonicalHeaders = (headers) => Object.entries(headers)\n    .map(([key, value]) => ({\n    key: key.toLowerCase(),\n    value: value?.trim().replace(/\\s+/g, ' ') ?? '',\n}))\n    .sort((a, b) => (a.key < b.key ? -1 : 1))\n    .map(entry => `${entry.key}:${entry.value}\\n`)\n    .join('');\n\nexport { getCanonicalHeaders };\n//# sourceMappingURL=getCanonicalHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical query string.\n *\n * @param searchParams `searchParams` from the request url.\n * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,\n * including the space character. Encode names and values separately. If there are empty parameters, append the equals\n * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there\n * is no query string, use an empty string (\"\").\n *\n * @internal\n */\nconst getCanonicalQueryString = (searchParams) => Array.from(searchParams)\n    .sort(([keyA, valA], [keyB, valB]) => {\n    if (keyA === keyB) {\n        return valA < valB ? -1 : 1;\n    }\n    return keyA < keyB ? -1 : 1;\n})\n    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)\n    .join('&');\nconst escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { getCanonicalQueryString };\n//# sourceMappingURL=getCanonicalQueryString.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical uri.\n *\n * @param pathname `pathname` from request url.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark\n * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).\n *\n * @internal\n */\nconst getCanonicalUri = (pathname, uriEscapePath = true) => pathname\n    ? uriEscapePath\n        ? encodeURIComponent(pathname).replace(/%2F/g, '/')\n        : pathname\n    : '/';\n\nexport { getCanonicalUri };\n//# sourceMappingURL=getCanonicalUri.mjs.map\n","import { EMPTY_HASH, UNSIGNED_PAYLOAD } from '../constants.mjs';\nimport { getHashedDataAsHex } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the hashed payload.\n *\n * @param body `body` (payload) from the request.\n * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string\n * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.\n *\n * @internal\n */\nconst getHashedPayload = (body) => {\n    // return precalculated empty hash if body is undefined or null\n    if (body == null) {\n        return EMPTY_HASH;\n    }\n    if (isSourceData(body)) {\n        const hashedData = getHashedDataAsHex(null, body);\n        return hashedData;\n    }\n    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.\n    return UNSIGNED_PAYLOAD;\n};\nconst isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);\nconst isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n\nexport { getHashedPayload };\n//# sourceMappingURL=getHashedPayload.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a `Date` that is corrected for clock skew.\n *\n * @param systemClockOffset The offset of the system clock in milliseconds.\n *\n * @returns `Date` representing the current time adjusted by the system clock offset.\n *\n * @internal\n */\nconst getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);\n\nexport { getSkewCorrectedDate };\n//# sourceMappingURL=getSkewCorrectedDate.mjs.map\n","import { retryMiddlewareFactory } from '../middleware/retry/middleware.mjs';\nimport '../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../utils/retry/retry.mjs';\nimport '../../types/errors.mjs';\nimport { signingMiddlewareFactory } from '../middleware/signing/middleware.mjs';\nimport { userAgentMiddlewareFactory } from '../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from './fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst authenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    retryMiddlewareFactory,\n    signingMiddlewareFactory,\n]);\n\nexport { authenticatedHandler };\n//# sourceMappingURL=authenticated.mjs.map\n","import { signRequest } from './signer/signatureV4/signRequest.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getSkewCorrectedDate } from './utils/getSkewCorrectedDate.mjs';\nimport { getUpdatedSystemClockOffset } from './utils/getUpdatedSystemClockOffset.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.\n * This middleware is expected to be placed after retry middleware.\n */\nconst signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {\n    let currentSystemClockOffset;\n    return (next, context) => async function signingMiddleware(request) {\n        currentSystemClockOffset = currentSystemClockOffset ?? 0;\n        const signRequestOptions = {\n            credentials: typeof credentials === 'function'\n                ? await credentials({\n                    forceRefresh: !!context?.isCredentialsExpired,\n                })\n                : credentials,\n            signingDate: getSkewCorrectedDate(currentSystemClockOffset),\n            signingRegion: region,\n            signingService: service,\n            uriEscapePath,\n        };\n        const signedRequest = await signRequest(request, signRequestOptions);\n        const response = await next(signedRequest);\n        // Update system clock offset if response contains date header, regardless of the status code.\n        // non-2xx response will still be returned from next handler instead of thrown, because it's\n        // only thrown by the retry middleware.\n        const dateString = getDateHeader(response);\n        if (dateString) {\n            currentSystemClockOffset = getUpdatedSystemClockOffset(Date.parse(dateString), currentSystemClockOffset);\n        }\n        return response;\n    };\n};\nconst getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];\n\nexport { signingMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","import { getSignedHeaders } from './utils/getSignedHeaders.mjs';\nimport { getSigningValues } from './utils/getSigningValues.mjs';\nimport { HOST_HEADER, AMZ_DATE_HEADER, TOKEN_HEADER, AUTH_HEADER, SHA256_ALGORITHM_IDENTIFIER } from './constants.mjs';\nimport { getSignature } from './utils/getSignature.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.\n */\nconst signRequest = (request, options) => {\n    const signingValues = getSigningValues(options);\n    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;\n    // create the request to sign\n    const headers = { ...request.headers };\n    headers[HOST_HEADER] = request.url.host;\n    headers[AMZ_DATE_HEADER] = longDate;\n    if (sessionToken) {\n        headers[TOKEN_HEADER] = sessionToken;\n    }\n    const requestToSign = { ...request, headers };\n    // calculate and add the signature to the request\n    const signature = getSignature(requestToSign, signingValues);\n    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;\n    const signedHeadersEntry = `SignedHeaders=${getSignedHeaders(headers)}`;\n    const signatureEntry = `Signature=${signature}`;\n    headers[AUTH_HEADER] =\n        `${SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;\n    return requestToSign;\n};\n\nexport { signRequest };\n//# sourceMappingURL=signRequest.mjs.map\n","import { getCredentialScope } from './getCredentialScope.mjs';\nimport { getFormattedDates } from './getFormattedDates.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Extracts common values used for signing both requests and urls.\n *\n * @param options `SignRequestOptions` object containing values used to construct the signature.\n * @returns Common `SigningValues` used for signing.\n *\n * @internal\n */\nconst getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {\n    // get properties from credentials\n    const { accessKeyId, secretAccessKey, sessionToken } = credentials;\n    // get formatted dates for signing\n    const { longDate, shortDate } = getFormattedDates(signingDate);\n    // copy header and set signing properties\n    const credentialScope = getCredentialScope(shortDate, signingRegion, signingService);\n    return {\n        accessKeyId,\n        credentialScope,\n        longDate,\n        secretAccessKey,\n        sessionToken,\n        shortDate,\n        signingRegion,\n        signingService,\n        uriEscapePath,\n    };\n};\n\nexport { getSigningValues };\n//# sourceMappingURL=getSigningValues.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns expected date strings to be used in signing.\n *\n * @param date JavaScript `Date` object.\n * @returns `FormattedDates` object containing the following:\n * - longDate: A date string in 'YYYYMMDDThhmmssZ' format\n * - shortDate: A date string in 'YYYYMMDD' format\n *\n * @internal\n */\nconst getFormattedDates = (date) => {\n    const longDate = date.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\n\nexport { getFormattedDates };\n//# sourceMappingURL=getFormattedDates.mjs.map\n","import { KEY_TYPE_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the credential scope which restricts the resulting signature to the specified region and service.\n *\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n *\n * @internal\n */\nconst getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${KEY_TYPE_IDENTIFIER}`;\n\nexport { getCredentialScope };\n//# sourceMappingURL=getCredentialScope.mjs.map\n","import { getHashedDataAsHex } from './dataHashHelpers.mjs';\nimport { getCanonicalRequest } from './getCanonicalRequest.mjs';\nimport { getSigningKey } from './getSigningKey.mjs';\nimport { getStringToSign } from './getStringToSign.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nconst getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = getCanonicalRequest(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = getHashedDataAsHex(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = getStringToSign(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = getHashedDataAsHex(getSigningKey(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\n\nexport { getSignature };\n//# sourceMappingURL=getSignature.mjs.map\n","import { getCanonicalHeaders } from './getCanonicalHeaders.mjs';\nimport { getCanonicalQueryString } from './getCanonicalQueryString.mjs';\nimport { getCanonicalUri } from './getCanonicalUri.mjs';\nimport { getHashedPayload } from './getHashedPayload.mjs';\nimport { getSignedHeaders } from './getSignedHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical request.\n *\n * @param request `HttpRequest` from which to create the canonical request from.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns String created by by concatenating the following strings, separated by newline characters:\n * - HTTPMethod\n * - CanonicalUri\n * - CanonicalQueryString\n * - CanonicalHeaders\n * - SignedHeaders\n * - HashedPayload\n *\n * @internal\n */\nconst getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [\n    method,\n    getCanonicalUri(url.pathname, uriEscapePath),\n    getCanonicalQueryString(url.searchParams),\n    getCanonicalHeaders(headers),\n    getSignedHeaders(headers),\n    getHashedPayload(body),\n].join('\\n');\n\nexport { getCanonicalRequest };\n//# sourceMappingURL=getCanonicalRequest.mjs.map\n","import { SHA256_ALGORITHM_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a string to be signed.\n *\n * @param date Current date in the format 'YYYYMMDDThhmmssZ'.\n * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n * @param hashedRequest Hashed canonical request.\n *\n * @returns A string created by by concatenating the following strings, separated by newline characters:\n * - Algorithm\n * - RequestDateTime\n * - CredentialScope\n * - HashedCanonicalRequest\n *\n * @internal\n */\nconst getStringToSign = (date, credentialScope, hashedRequest) => [SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\\n');\n\nexport { getStringToSign };\n//# sourceMappingURL=getStringToSign.mjs.map\n","import { KEY_TYPE_IDENTIFIER, SIGNATURE_IDENTIFIER } from '../constants.mjs';\nimport { getHashedData } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a signing key to be used for signing requests.\n *\n * @param secretAccessKey AWS secret access key from credentials.\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns `Uint8Array` calculated from its composite parts.\n *\n * @internal\n */\nconst getSigningKey = (secretAccessKey, date, region, service) => {\n    const key = `${SIGNATURE_IDENTIFIER}${secretAccessKey}`;\n    const dateKey = getHashedData(key, date);\n    const regionKey = getHashedData(dateKey, region);\n    const serviceKey = getHashedData(regionKey, service);\n    const signingKey = getHashedData(serviceKey, KEY_TYPE_IDENTIFIER);\n    return signingKey;\n};\n\nexport { getSigningKey };\n//# sourceMappingURL=getSigningKey.mjs.map\n","import { isClockSkewed } from './isClockSkewed.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the difference between clock time and the current system time if clock is skewed.\n *\n * @param clockTimeInMilliseconds Clock time in milliseconds.\n * @param currentSystemClockOffset Current system clock offset in milliseconds.\n *\n * @internal\n */\nconst getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {\n    if (isClockSkewed(clockTimeInMilliseconds, currentSystemClockOffset)) {\n        return clockTimeInMilliseconds - Date.now();\n    }\n    return currentSystemClockOffset;\n};\n\nexport { getUpdatedSystemClockOffset };\n//# sourceMappingURL=getUpdatedSystemClockOffset.mjs.map\n","import { getSkewCorrectedDate } from './getSkewCorrectedDate.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10\nconst SKEW_WINDOW = 5 * 60 * 1000;\n/**\n * Checks if the provided date is within the skew window of 5 minutes.\n *\n * @param clockTimeInMilliseconds Time to check for skew in milliseconds.\n * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.\n *\n * @returns True if skewed. False otherwise.\n *\n * @internal\n */\nconst isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs(getSkewCorrectedDate(clockOffsetInMilliseconds).getTime() -\n    clockTimeInMilliseconds) >= SKEW_WINDOW;\n\nexport { isClockSkewed };\n//# sourceMappingURL=isClockSkewed.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Wraps encodeURIComponent to encode additional characters to fully adhere to RFC 3986.\n * @see https://github.com/aws/aws-sdk-js-v3/blob/86b432c464150069678b25ff88d57c2ca26e75a2/packages/smithy-client/src/extended-encode-uri-component.ts#L7\n *\n * @param uri URI string to encode\n * @returns RFC 3986 encoded string\n *\n * @internal\n */\nconst extendedEncodeURIComponent = (uri) => {\n    // Match characters normally not encoded by `encodeURIComponent`\n    const extendedCharacters = /[!'()*]/g;\n    return encodeURIComponent(uri).replace(extendedCharacters, hexEncode);\n};\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { extendedEncodeURIComponent };\n//# sourceMappingURL=extendedEncodeURIComponent.mjs.map\n","import { getDnsSuffix } from '../../clients/endpoints/getDnsSuffix.mjs';\nimport { jitteredBackoff } from '../../clients/middleware/retry/jitteredBackoff.mjs';\nimport { getRetryDecider } from '../../clients/middleware/retry/defaultRetryDecider.mjs';\nimport { parseJsonError } from '../../clients/serde/json.mjs';\nimport { getAmplifyUserAgent } from '../../Platform/index.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'mobiletargeting';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = ({ region }) => ({\n    url: new AmplifyUrl(`https://pinpoint.${region}.${getDnsSuffix(region)}`),\n});\n/**\n * @internal\n */\nconst defaultConfig = {\n    service: SERVICE_NAME,\n    endpointResolver,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n};\n/**\n * @internal\n */\nconst getSharedHeaders = () => ({\n    'content-type': 'application/json',\n});\n\nexport { defaultConfig, getSharedHeaders };\n//# sourceMappingURL=base.mjs.map\n","import { authenticatedHandler } from '../../clients/handlers/authenticated.mjs';\nimport { composeServiceApi } from '../../clients/internal/composeServiceApi.mjs';\nimport { extendedEncodeURIComponent } from '../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs';\nimport { parseMetadata } from '../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../clients/serde/json.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\nimport { defaultConfig, getSharedHeaders } from './base.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst updateEndpointSerializer = ({ ApplicationId = '', EndpointId = '', EndpointRequest }, endpoint) => {\n    const headers = getSharedHeaders();\n    const url = new AmplifyUrl(endpoint.url);\n    url.pathname = `v1/apps/${extendedEncodeURIComponent(ApplicationId)}/endpoints/${extendedEncodeURIComponent(EndpointId)}`;\n    const body = JSON.stringify(EndpointRequest);\n    return { method: 'PUT', headers, url, body };\n};\nconst updateEndpointDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const { Message, RequestID } = await parseJsonBody(response);\n        return {\n            MessageBody: {\n                Message,\n                RequestID,\n            },\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n/**\n * @internal\n */\nconst updateEndpoint = composeServiceApi(authenticatedHandler, updateEndpointSerializer, updateEndpointDeserializer, defaultConfig);\n\nexport { updateEndpoint };\n//# sourceMappingURL=updateEndpoint.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'pinpoint';\n/**\n * Returns a unique cache key for a particular category/appId combination.\n *\n * @internal\n */\nconst getCacheKey = (appId, category) => `${category}:${PROVIDER_NAME}:${appId}`;\n\nexport { getCacheKey };\n//# sourceMappingURL=getCacheKey.mjs.map\n","import { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createdEndpointIds = {};\n/**\n * Creates an endpoint id and guarantees multiple creations for a category returns the same uuid.\n *\n * @internal\n */\nconst createEndpointId = (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    if (!createdEndpointIds[cacheKey]) {\n        createdEndpointIds[cacheKey] = amplifyUuid();\n    }\n    return createdEndpointIds[cacheKey];\n};\n/**\n * Clears a created endpoint id for a category.\n *\n * @internal\n */\nconst clearCreatedEndpointId = (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    delete createdEndpointIds[cacheKey];\n};\n\nexport { clearCreatedEndpointId, createEndpointId };\n//# sourceMappingURL=createEndpointId.mjs.map\n","import { Cache } from '../../../Cache/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns an endpoint id from cache or `undefined` if not found.\n *\n * @internal\n */\nconst getEndpointId = async (appId, category) => {\n    const cacheKey = getCacheKey(appId, category);\n    const cachedEndpointId = await Cache.getItem(cacheKey);\n    return cachedEndpointId ?? undefined;\n};\n\nexport { getEndpointId };\n//# sourceMappingURL=getEndpointId.mjs.map\n","import { getClientInfo } from '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport '../../../types/errors.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../awsClients/pinpoint/base.mjs';\nimport '../../../awsClients/pinpoint/errorHelpers.mjs';\nimport { updateEndpoint as updateEndpoint$1 } from '../../../awsClients/pinpoint/updateEndpoint.mjs';\nimport { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport { cacheEndpointId } from '../utils/cacheEndpointId.mjs';\nimport { createEndpointId, clearCreatedEndpointId } from '../utils/createEndpointId.mjs';\nimport { getEndpointId } from '../utils/getEndpointId.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst updateEndpoint = async ({ address, appId, category, channelType, credentials, identityId, optOut, region, userAttributes, userId, userProfile, userAgentValue, }) => {\n    const endpointId = await getEndpointId(appId, category);\n    // only generate a new endpoint id if one was not found in cache\n    const createdEndpointId = !endpointId\n        ? createEndpointId(appId, category)\n        : undefined;\n    const { customProperties, demographic, email, location, metrics, name, plan, } = userProfile ?? {};\n    // only automatically populate the endpoint with client info and identity id upon endpoint creation to\n    // avoid overwriting the endpoint with these values every time the endpoint is updated\n    const demographicsFromClientInfo = {};\n    const resolvedUserId = createdEndpointId ? (userId ?? identityId) : userId;\n    if (createdEndpointId) {\n        const clientInfo = getClientInfo();\n        demographicsFromClientInfo.appVersion = clientInfo.appVersion;\n        demographicsFromClientInfo.make = clientInfo.make;\n        demographicsFromClientInfo.model = clientInfo.model;\n        demographicsFromClientInfo.modelVersion = clientInfo.version;\n        demographicsFromClientInfo.platform = clientInfo.platform;\n    }\n    const mergedDemographic = {\n        ...demographicsFromClientInfo,\n        ...demographic,\n    };\n    const attributes = {\n        ...(email && { email: [email] }),\n        ...(name && { name: [name] }),\n        ...(plan && { plan: [plan] }),\n        ...customProperties,\n    };\n    const shouldAddDemographics = createdEndpointId || demographic;\n    const shouldAddAttributes = email || customProperties || name || plan;\n    const shouldAddUser = resolvedUserId || userAttributes;\n    const input = {\n        ApplicationId: appId,\n        EndpointId: endpointId ?? createdEndpointId,\n        EndpointRequest: {\n            RequestId: amplifyUuid(),\n            EffectiveDate: new Date().toISOString(),\n            ChannelType: channelType,\n            Address: address,\n            ...(shouldAddAttributes && { Attributes: attributes }),\n            ...(shouldAddDemographics && {\n                Demographic: {\n                    AppVersion: mergedDemographic.appVersion,\n                    Locale: mergedDemographic.locale,\n                    Make: mergedDemographic.make,\n                    Model: mergedDemographic.model,\n                    ModelVersion: mergedDemographic.modelVersion,\n                    Platform: mergedDemographic.platform,\n                    PlatformVersion: mergedDemographic.platformVersion,\n                    Timezone: mergedDemographic.timezone,\n                },\n            }),\n            ...(location && {\n                Location: {\n                    City: location.city,\n                    Country: location.country,\n                    Latitude: location.latitude,\n                    Longitude: location.longitude,\n                    PostalCode: location.postalCode,\n                    Region: location.region,\n                },\n            }),\n            Metrics: metrics,\n            OptOut: optOut,\n            ...(shouldAddUser && {\n                User: {\n                    UserId: resolvedUserId,\n                    UserAttributes: userAttributes,\n                },\n            }),\n        },\n    };\n    try {\n        await updateEndpoint$1({ credentials, region, userAgentValue }, input);\n        // if we had to create an endpoint id, we need to now cache it\n        if (createdEndpointId) {\n            await cacheEndpointId(appId, category, createdEndpointId);\n        }\n    }\n    finally {\n        // at this point, we completely reset the behavior so even if the update was unsuccessful\n        // we can just start over with a newly created endpoint id\n        if (createdEndpointId) {\n            clearCreatedEndpointId(appId, category);\n        }\n    }\n};\n\nexport { updateEndpoint };\n//# sourceMappingURL=updateEndpoint.mjs.map\n","import { Cache } from '../../../Cache/index.mjs';\nimport { getCacheKey } from './getCacheKey.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Writes an endpoint id to a long-lived cache.\n *\n * @internal\n */\nconst cacheEndpointId = async (appId, category, endpointId) => {\n    const cacheKey = getCacheKey(appId, category);\n    // Set a longer TTL to avoid endpoint id being deleted after the default TTL (3 days)\n    // Also set its priority to the highest to reduce its chance of being deleted when cache is full\n    const ttl = 1000 * 60 * 60 * 24 * 365 * 100; // 100 years\n    const expiration = new Date().getTime() + ttl;\n    return Cache.setItem(cacheKey, endpointId, {\n        expires: expiration,\n        priority: 1,\n    });\n};\n\nexport { cacheEndpointId };\n//# sourceMappingURL=cacheEndpointId.mjs.map\n","import { createAssertionFunction } from '../../errors/createAssertionFunction.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar PinpointValidationErrorCode;\n(function (PinpointValidationErrorCode) {\n    PinpointValidationErrorCode[\"NoAppId\"] = \"NoAppId\";\n})(PinpointValidationErrorCode || (PinpointValidationErrorCode = {}));\nconst pinpointValidationErrorMap = {\n    [PinpointValidationErrorCode.NoAppId]: {\n        message: 'Missing application id.',\n    },\n};\nconst assert = createAssertionFunction(pinpointValidationErrorMap);\n\nexport { PinpointValidationErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { authenticatedHandler } from '../../clients/handlers/authenticated.mjs';\nimport { composeServiceApi } from '../../clients/internal/composeServiceApi.mjs';\nimport { extendedEncodeURIComponent } from '../../clients/middleware/signing/utils/extendedEncodeURIComponent.mjs';\nimport { parseMetadata } from '../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../clients/serde/json.mjs';\nimport { AmplifyUrl } from '../../utils/amplifyUrl/index.mjs';\nimport { defaultConfig, getSharedHeaders } from './base.mjs';\nimport { assert, PinpointValidationErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst putEventsSerializer = ({ ApplicationId, EventsRequest }, endpoint) => {\n    assert(!!ApplicationId, PinpointValidationErrorCode.NoAppId);\n    const headers = getSharedHeaders();\n    const url = new AmplifyUrl(endpoint.url);\n    url.pathname = `v1/apps/${extendedEncodeURIComponent(ApplicationId)}/events`;\n    const body = JSON.stringify(EventsRequest ?? {});\n    return { method: 'POST', headers, url, body };\n};\nconst putEventsDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const { Results } = await parseJsonBody(response);\n        return {\n            EventsResponse: { Results },\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n/**\n * @internal\n */\nconst putEvents = composeServiceApi(authenticatedHandler, putEventsSerializer, putEventsDeserializer, defaultConfig);\n\nexport { putEvents };\n//# sourceMappingURL=putEvents.mjs.map\n","import { ConsoleLogger } from '../../../Logger/ConsoleLogger.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport '../../../types/errors.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../awsClients/pinpoint/base.mjs';\nimport { putEvents } from '../../../awsClients/pinpoint/putEvents.mjs';\nimport { isAppInForeground } from './isAppInForeground.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('PinpointEventBuffer');\nconst RETRYABLE_CODES = [429, 500];\nconst ACCEPTED_CODES = [202];\nclass PinpointEventBuffer {\n    constructor(config) {\n        this._interval = undefined;\n        this._pause = false;\n        this._flush = false;\n        this._buffer = [];\n        this._config = config;\n        this._sendBatch = this._sendBatch.bind(this);\n        this._startLoop();\n    }\n    push(event) {\n        if (this._buffer.length >= this._config.bufferSize) {\n            logger.debug('Exceeded Pinpoint event buffer limits, event dropped.', {\n                eventId: event.eventId,\n            });\n            return;\n        }\n        this._buffer.push({ [event.eventId]: event });\n    }\n    pause() {\n        this._pause = true;\n    }\n    resume() {\n        this._pause = false;\n    }\n    flush() {\n        this._flush = true;\n    }\n    identityHasChanged(identityId) {\n        return this._config.identityId !== identityId;\n    }\n    flushAll() {\n        this._putEvents(this._buffer.splice(0, this._buffer.length));\n    }\n    _startLoop() {\n        if (this._interval) {\n            clearInterval(this._interval);\n        }\n        const { flushInterval } = this._config;\n        this._interval = setInterval(this._sendBatch, flushInterval);\n    }\n    _sendBatch() {\n        const bufferLength = this._buffer.length;\n        if (this._flush && !bufferLength && this._interval) {\n            clearInterval(this._interval);\n        }\n        if (this._pause || !bufferLength || !isAppInForeground()) {\n            return;\n        }\n        const { flushSize } = this._config;\n        const batchSize = Math.min(flushSize, bufferLength);\n        const bufferSubset = this._buffer.splice(0, batchSize);\n        this._putEvents(bufferSubset);\n    }\n    async _putEvents(buffer) {\n        const eventMap = this._bufferToMap(buffer);\n        const batchEventParams = this._generateBatchEventParams(eventMap);\n        try {\n            const { credentials, region, userAgentValue } = this._config;\n            const data = await putEvents({\n                credentials,\n                region,\n                userAgentValue,\n            }, batchEventParams);\n            this._processPutEventsSuccessResponse(data, eventMap);\n        }\n        catch (err) {\n            this._handlePutEventsFailure(err, eventMap);\n        }\n    }\n    _generateBatchEventParams(eventMap) {\n        const batchItem = {};\n        Object.values(eventMap).forEach(item => {\n            const { event, timestamp, endpointId, eventId, session } = item;\n            const { name, attributes, metrics } = event;\n            batchItem[endpointId] = {\n                Endpoint: {\n                    ...batchItem[endpointId]?.Endpoint,\n                },\n                Events: {\n                    ...batchItem[endpointId]?.Events,\n                    [eventId]: {\n                        EventType: name,\n                        Timestamp: new Date(timestamp).toISOString(),\n                        Attributes: attributes,\n                        Metrics: metrics,\n                        Session: session,\n                    },\n                },\n            };\n        });\n        return {\n            ApplicationId: this._config.appId,\n            EventsRequest: {\n                BatchItem: batchItem,\n            },\n        };\n    }\n    _handlePutEventsFailure(err, eventMap) {\n        logger.debug('putEvents call to Pinpoint failed.', err);\n        const statusCode = err.$metadata && err.$metadata.httpStatusCode;\n        if (RETRYABLE_CODES.includes(statusCode)) {\n            const retryableEvents = Object.values(eventMap);\n            this._retry(retryableEvents);\n        }\n    }\n    _processPutEventsSuccessResponse(data, eventMap) {\n        const { Results = {} } = data.EventsResponse ?? {};\n        const retryableEvents = [];\n        Object.entries(Results).forEach(([_, endpointValues]) => {\n            const responses = endpointValues.EventsItemResponse ?? {};\n            Object.entries(responses).forEach(([eventId, eventValues]) => {\n                const eventObject = eventMap[eventId];\n                if (!eventObject) {\n                    return;\n                }\n                const { StatusCode, Message } = eventValues ?? {};\n                if (StatusCode && ACCEPTED_CODES.includes(StatusCode)) {\n                    return;\n                }\n                if (StatusCode && RETRYABLE_CODES.includes(StatusCode)) {\n                    retryableEvents.push(eventObject);\n                    return;\n                }\n                const { name } = eventObject.event;\n                logger.warn('Pinpoint event failed to send.', {\n                    eventId,\n                    name,\n                    message: Message,\n                });\n            });\n        });\n        if (retryableEvents.length) {\n            this._retry(retryableEvents);\n        }\n    }\n    _retry(retryableEvents) {\n        // retryable events that haven't reached the resendLimit\n        const eligibleEvents = [];\n        retryableEvents.forEach((bufferedEvent) => {\n            const { eventId } = bufferedEvent;\n            const { name } = bufferedEvent.event;\n            if (bufferedEvent.resendLimit-- > 0) {\n                logger.debug('Resending event.', {\n                    eventId,\n                    name,\n                    remainingAttempts: bufferedEvent.resendLimit,\n                });\n                eligibleEvents.push({ [eventId]: bufferedEvent });\n                return;\n            }\n            logger.debug('No retry attempts remaining for event.', {\n                eventId,\n                name,\n            });\n        });\n        // add the events to the front of the buffer\n        this._buffer.unshift(...eligibleEvents);\n    }\n    _bufferToMap(buffer) {\n        return buffer.reduce((acc, curVal) => {\n            const [[key, value]] = Object.entries(curVal);\n            acc[key] = value;\n            return acc;\n        }, {});\n    }\n}\n\nexport { PinpointEventBuffer };\n//# sourceMappingURL=PinpointEventBuffer.mjs.map\n","import { PinpointEventBuffer } from './PinpointEventBuffer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Map of buffers by region -> appId\nconst eventBufferMap = {};\n/**\n * Returns a PinpointEventBuffer instance for the specified region & app ID, creating one if it does not yet exist.\n *\n * @internal\n */\nconst getEventBuffer = ({ appId, region, credentials, bufferSize, flushInterval, flushSize, resendLimit, identityId, userAgentValue, }) => {\n    if (eventBufferMap[region]?.[appId]) {\n        const buffer = eventBufferMap[region][appId];\n        /*\n        If the identity has changed flush out the buffer and create a new instance. The old instance will be garbage\n        collected.\n        */\n        if (buffer.identityHasChanged(identityId)) {\n            buffer.flush();\n        }\n        else {\n            return buffer;\n        }\n    }\n    const buffer = new PinpointEventBuffer({\n        appId,\n        bufferSize,\n        credentials,\n        flushInterval,\n        flushSize,\n        identityId,\n        region,\n        resendLimit,\n        userAgentValue,\n    });\n    if (!eventBufferMap[region]) {\n        eventBufferMap[region] = {};\n    }\n    eventBufferMap[region][appId] = buffer;\n    return buffer;\n};\n\nexport { getEventBuffer };\n//# sourceMappingURL=getEventBuffer.mjs.map\n","import { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport '../../../Cache/index.mjs';\nimport { resolveEndpointId } from '../utils/resolveEndpointId.mjs';\nimport '../../../utils/sessionListener/index.mjs';\nimport { BUFFER_SIZE, FLUSH_INTERVAL, FLUSH_SIZE, RESEND_LIMIT } from '../utils/constants.mjs';\nimport { getEventBuffer } from '../utils/getEventBuffer.mjs';\nimport { SESSION_STOP_EVENT, SESSION_START_EVENT } from '../../../utils/sessionListener/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nlet session;\n/**\n * @internal\n */\nconst record = async ({ appId, category, channelType, credentials, event, identityId, region, userAgentValue, bufferSize, flushInterval, flushSize, resendLimit, }) => {\n    let eventSession = session;\n    const currentTime = new Date();\n    const timestampISOString = currentTime.toISOString();\n    const eventId = amplifyUuid();\n    // Prepare event buffer if required\n    const buffer = getEventBuffer({\n        appId,\n        region,\n        credentials,\n        bufferSize: bufferSize ?? BUFFER_SIZE,\n        flushInterval: flushInterval ?? FLUSH_INTERVAL,\n        flushSize: flushSize ?? FLUSH_SIZE,\n        resendLimit: resendLimit ?? RESEND_LIMIT,\n        identityId,\n        userAgentValue,\n    });\n    const endpointId = await resolveEndpointId({\n        appId,\n        category,\n        channelType,\n        credentials,\n        identityId,\n        region,\n        userAgentValue,\n    });\n    // Generate session if required\n    if (!eventSession || event.name === SESSION_START_EVENT) {\n        const sessionId = amplifyUuid();\n        session = {\n            Id: sessionId,\n            StartTimestamp: timestampISOString,\n        };\n        eventSession = session;\n    }\n    // Terminate session when required\n    if (session && event.name === SESSION_STOP_EVENT) {\n        eventSession = {\n            ...session,\n            StopTimestamp: timestampISOString,\n            Duration: currentTime.getTime() - new Date(session.StartTimestamp).getTime(),\n        };\n        session = undefined;\n    }\n    // Push event to buffer\n    buffer.push({\n        eventId,\n        endpointId,\n        event,\n        session: eventSession,\n        timestamp: timestampISOString,\n        resendLimit: resendLimit ?? RESEND_LIMIT,\n    });\n};\n\nexport { record };\n//# sourceMappingURL=record.mjs.map\n","import { createAssertionFunction } from '../errors/createAssertionFunction.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar ServiceWorkerErrorCode;\n(function (ServiceWorkerErrorCode) {\n    ServiceWorkerErrorCode[\"UndefinedInstance\"] = \"UndefinedInstance\";\n    ServiceWorkerErrorCode[\"UndefinedRegistration\"] = \"UndefinedRegistration\";\n    ServiceWorkerErrorCode[\"Unavailable\"] = \"Unavailable\";\n})(ServiceWorkerErrorCode || (ServiceWorkerErrorCode = {}));\nconst serviceWorkerErrorMap = {\n    [ServiceWorkerErrorCode.UndefinedInstance]: {\n        message: 'Service Worker instance is undefined.',\n    },\n    [ServiceWorkerErrorCode.UndefinedRegistration]: {\n        message: 'Service Worker registration is undefined.',\n    },\n    [ServiceWorkerErrorCode.Unavailable]: {\n        message: 'Service Worker not available.',\n    },\n};\nconst assert = createAssertionFunction(serviceWorkerErrorMap);\n\nexport { ServiceWorkerErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport '../utils/getClientInfo/getClientInfo.mjs';\nimport { isBrowser } from '../utils/isBrowser.mjs';\nimport '../utils/retry/retry.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../awsClients/pinpoint/base.mjs';\nimport '../awsClients/pinpoint/errorHelpers.mjs';\nimport 'uuid';\nimport '../Cache/index.mjs';\nimport { record } from '../providers/pinpoint/apis/record.mjs';\nimport '../providers/pinpoint/utils/PinpointEventBuffer.mjs';\nimport '../providers/pinpoint/types/errors.mjs';\nimport { Amplify } from '../singleton/Amplify.mjs';\nimport { fetchAuthSession } from '../singleton/apis/fetchAuthSession.mjs';\nimport { assert, ServiceWorkerErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Provides a means to registering a service worker in the browser\n * and communicating with it via postMessage events.\n * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/\n *\n * postMessage events are currently not supported in all browsers. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n *\n * At the minmum this class will register the service worker and listen\n * and attempt to dispatch messages on state change and record analytics\n * events based on the service worker lifecycle.\n */\nclass ServiceWorkerClass {\n    constructor() {\n        // The AWS Amplify logger\n        this._logger = new ConsoleLogger('ServiceWorker');\n    }\n    /**\n     * Get the currently active service worker\n     */\n    get serviceWorker() {\n        assert(this._serviceWorker !== undefined, ServiceWorkerErrorCode.UndefinedInstance);\n        return this._serviceWorker;\n    }\n    /**\n     * Register the service-worker.js file in the browser\n     * Make sure the service-worker.js is part of the build\n     * for example with Angular, modify the angular-cli.json file\n     * and add to \"assets\" array \"service-worker.js\"\n     * @param {string} filePath Service worker file. Defaults to \"/service-worker.js\"\n     * @param {string} scope The service worker scope. Defaults to \"/\"\n     *  - API Doc: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\n     * @returns {Promise}\n     *\t- resolve(ServiceWorkerRegistration)\n     *\t- reject(Error)\n     **/\n    register(filePath = '/service-worker.js', scope = '/') {\n        this._logger.debug(`registering ${filePath}`);\n        this._logger.debug(`registering service worker with scope ${scope}`);\n        return new Promise((resolve, reject) => {\n            if (navigator && 'serviceWorker' in navigator) {\n                navigator.serviceWorker\n                    .register(filePath, {\n                    scope,\n                })\n                    .then(registration => {\n                    if (registration.installing) {\n                        this._serviceWorker = registration.installing;\n                    }\n                    else if (registration.waiting) {\n                        this._serviceWorker = registration.waiting;\n                    }\n                    else if (registration.active) {\n                        this._serviceWorker = registration.active;\n                    }\n                    this._registration = registration;\n                    this._setupListeners();\n                    this._logger.debug(`Service Worker Registration Success: ${registration}`);\n                    resolve(registration);\n                })\n                    .catch(error => {\n                    this._logger.debug(`Service Worker Registration Failed ${error}`);\n                    reject(new AmplifyError({\n                        name: ServiceWorkerErrorCode.Unavailable,\n                        message: 'Service Worker not available',\n                        underlyingError: error,\n                    }));\n                });\n            }\n            else {\n                reject(new AmplifyError({\n                    name: ServiceWorkerErrorCode.Unavailable,\n                    message: 'Service Worker not available',\n                }));\n            }\n        });\n    }\n    /**\n     * Enable web push notifications. If not subscribed, a new subscription will\n     * be created and registered.\n     * \tTest Push Server: https://web-push-codelab.glitch.me/\n     * \tPush Server Libraries: https://github.com/web-push-libs/\n     * \tAPI Doc: https://developers.google.com/web/fundamentals/codelabs/push-notifications/\n     * @param publicKey\n     * @returns {Promise}\n     * \t- resolve(PushSubscription)\n     *  - reject(Error)\n     */\n    enablePush(publicKey) {\n        assert(this._registration !== undefined, ServiceWorkerErrorCode.UndefinedRegistration);\n        this._publicKey = publicKey;\n        return new Promise((resolve, reject) => {\n            if (isBrowser()) {\n                assert(this._registration !== undefined, ServiceWorkerErrorCode.UndefinedRegistration);\n                this._registration.pushManager.getSubscription().then(subscription => {\n                    if (subscription) {\n                        this._subscription = subscription;\n                        this._logger.debug(`User is subscribed to push: ${JSON.stringify(subscription)}`);\n                        resolve(subscription);\n                    }\n                    else {\n                        this._logger.debug(`User is NOT subscribed to push`);\n                        return this._registration.pushManager.subscribe({\n                            userVisibleOnly: true,\n                            applicationServerKey: this._urlB64ToUint8Array(publicKey),\n                        })\n                            .then(pushManagerSubscription => {\n                            this._subscription = pushManagerSubscription;\n                            this._logger.debug(`User subscribed: ${JSON.stringify(pushManagerSubscription)}`);\n                            resolve(pushManagerSubscription);\n                        })\n                            .catch(error => {\n                            this._logger.error(error);\n                        });\n                    }\n                });\n            }\n            else {\n                reject(new AmplifyError({\n                    name: ServiceWorkerErrorCode.Unavailable,\n                    message: 'Service Worker not available',\n                }));\n            }\n        });\n    }\n    /**\n     * Convert a base64 encoded string to a Uint8 array for the push server key\n     * @param base64String\n     */\n    _urlB64ToUint8Array(base64String) {\n        const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n        const base64 = (base64String + padding)\n            .replace(/-/g, '+')\n            .replace(/_/g, '/');\n        const rawData = window.atob(base64);\n        const outputArray = new Uint8Array(rawData.length);\n        for (let i = 0; i < rawData.length; ++i) {\n            outputArray[i] = rawData.charCodeAt(i);\n        }\n        return outputArray;\n    }\n    /**\n     * Send a message to the service worker. The service worker needs\n     * to implement `self.addEventListener('message') to handle the\n     * message. This ***currently*** does not work in Safari or IE.\n     * @param {object | string} message An arbitrary JSON object or string message to send to the service worker\n     *\t- see: https://developer.mozilla.org/en-US/docs/Web/API/Transferable\n     * @returns {Promise}\n     **/\n    send(message) {\n        if (this._serviceWorker) {\n            this._serviceWorker.postMessage(typeof message === 'object' ? JSON.stringify(message) : message);\n        }\n    }\n    /**\n     * Listen for service worker state change and message events\n     * https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker/state\n     **/\n    _setupListeners() {\n        this.serviceWorker.addEventListener('statechange', async () => {\n            const currentState = this.serviceWorker.state;\n            this._logger.debug(`ServiceWorker statechange: ${currentState}`);\n            const { appId, region, bufferSize, flushInterval, flushSize, resendLimit, } = Amplify.getConfig().Analytics?.Pinpoint ?? {};\n            const { credentials } = await fetchAuthSession();\n            if (appId && region && credentials) {\n                // Pinpoint is configured, record an event\n                record({\n                    appId,\n                    region,\n                    category: 'Core',\n                    credentials,\n                    bufferSize,\n                    flushInterval,\n                    flushSize,\n                    resendLimit,\n                    event: {\n                        name: 'ServiceWorker',\n                        attributes: {\n                            state: currentState,\n                        },\n                    },\n                });\n            }\n        });\n        this.serviceWorker.addEventListener('message', event => {\n            this._logger.debug(`ServiceWorker message event: ${event}`);\n        });\n    }\n}\n\nexport { ServiceWorkerClass };\n//# sourceMappingURL=ServiceWorker.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Default buffer constants\nconst BUFFER_SIZE = 1000;\nconst FLUSH_SIZE = 100;\nconst FLUSH_INTERVAL = 5 * 1000; // 5s\nconst RESEND_LIMIT = 5;\n\nexport { BUFFER_SIZE, FLUSH_INTERVAL, FLUSH_SIZE, RESEND_LIMIT };\n//# sourceMappingURL=constants.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { assert } from '../../../errors/errorHelpers.mjs';\nimport { updateEndpoint } from '../apis/updateEndpoint.mjs';\nimport { getEndpointId } from './getEndpointId.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Resolves an endpoint id from cache or prepare via updateEndpoint if one does not already exist,\n * which will generate and cache an endpoint id between calls.\n *\n * @internal\n */\nconst resolveEndpointId = async ({ address, appId, category, channelType, credentials, identityId, region, userAgentValue, }) => {\n    let endpointId = await getEndpointId(appId, category);\n    if (!endpointId) {\n        await updateEndpoint({\n            address,\n            appId,\n            category,\n            channelType,\n            credentials,\n            identityId,\n            region,\n            userAgentValue,\n        });\n        endpointId = await getEndpointId(appId, category);\n    }\n    assert(!!endpointId, AmplifyErrorCode.NoEndpointId);\n    return endpointId;\n};\n\nexport { resolveEndpointId };\n//# sourceMappingURL=resolveEndpointId.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Standard session start & stop event names\nconst SESSION_START_EVENT = '_session.start';\nconst SESSION_STOP_EVENT = '_session.stop';\n\nexport { SESSION_START_EVENT, SESSION_STOP_EVENT };\n//# sourceMappingURL=constants.mjs.map\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","import JsCookie from 'js-cookie';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass CookieStorage {\n    constructor(data = {}) {\n        const { path, domain, expires, sameSite, secure } = data;\n        this.domain = domain;\n        this.path = path || '/';\n        this.expires = Object.prototype.hasOwnProperty.call(data, 'expires')\n            ? expires\n            : 365;\n        this.secure = Object.prototype.hasOwnProperty.call(data, 'secure')\n            ? secure\n            : true;\n        if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n            if (!sameSite || !['strict', 'lax', 'none'].includes(sameSite)) {\n                throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n            }\n            if (sameSite === 'none' && !this.secure) {\n                throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n            }\n            this.sameSite = sameSite;\n        }\n    }\n    async setItem(key, value) {\n        JsCookie.set(key, value, this.getData());\n    }\n    async getItem(key) {\n        const item = JsCookie.get(key);\n        return item ?? null;\n    }\n    async removeItem(key) {\n        JsCookie.remove(key, this.getData());\n    }\n    async clear() {\n        const cookie = JsCookie.get();\n        const promises = Object.keys(cookie).map(key => this.removeItem(key));\n        await Promise.all(promises);\n    }\n    getData() {\n        return {\n            path: this.path,\n            expires: this.expires,\n            domain: this.domain,\n            secure: this.secure,\n            ...(this.sameSite && { sameSite: this.sameSite }),\n        };\n    }\n}\n\nexport { CookieStorage };\n//# sourceMappingURL=CookieStorage.mjs.map\n"],"names":["root","factory","exports","module","define","amd","this","LogType","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","LOG_LEVELS","VERBOSE","DEBUG","INFO","WARN","ERROR","NONE","ConsoleLogger","constructor","name","level","_pluggables","_padding","n","_ts","dt","Date","getMinutes","getSeconds","join","getMilliseconds","configure","config","_config","_log","type","msg","loggerLevelName","LOG_LEVEL","window","log","console","bind","error","warn","BIND_ALL_LOG_LEVELS","info","debug","prefix","message","length","slice","plugin","logEvent","timestamp","now","pushLogs","verbose","addPluggable","pluggable","getCategoryName","push","listPluggables","Error","recoverySuggestion","underlyingError","super","setPrototypeOf","AMPLIFY_SYMBOL","logger","HubClass","listeners","Map","protectedChannels","_remove","channel","listener","holder","set","filter","callback","dispatch","payload","source","ampSymbol","indexOf","capsule","patternInfo","_toListeners","e","listen","listenerName","cb","forEach","Hub","base64Decoder","convert","input","options","inputStr","urlSafe","replace","atob","getAtob","decodeJWT","token","tokenParts","split","base64","jsonStr","decodeURIComponent","map","char","charCodeAt","toString","JSON","parse","err","deepFreeze","object","propNames","Reflect","ownKeys","freeze","ADD_OAUTH_LISTENER","authTypeMapping","API_KEY","AWS_IAM","AMAZON_COGNITO_USER_POOLS","OPENID_CONNECT","AWS_LAMBDA","LAMBDA","getRedirectUrl","redirectStr","getOAuthConfig","domain","scope","redirectSignIn","redirectSignOut","responseType","scopes","parseSocialProviders","aws_cognito_social_providers","provider","updatedProvider","toLowerCase","charAt","toUpperCase","authModeNames","getGraphQLAuthMode","authType","providerNames","GOOGLE","LOGIN_WITH_AMAZON","FACEBOOK","SIGN_IN_WITH_APPLE","getOAuthProviders","providers","reduce","oAuthProviders","undefined","createBucketInfoMap","buckets","mappedBuckets","bucket_name","bucketName","aws_region","region","paths","parseAmplifyConfig","amplifyConfig","keys","some","startsWith","aws_appsync_apiKey","aws_appsync_authenticationType","aws_appsync_graphqlEndpoint","aws_appsync_region","aws_bots_config","aws_cognito_identity_pool_id","aws_cognito_sign_up_verification_method","aws_cognito_mfa_configuration","aws_cognito_mfa_types","aws_cognito_password_protection_settings","aws_cognito_verification_mechanisms","aws_cognito_signup_attributes","aws_cognito_username_attributes","aws_mandatory_sign_in","aws_mobile_analytics_app_id","aws_mobile_analytics_app_region","aws_user_files_s3_bucket","aws_user_files_s3_bucket_region","aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing","aws_user_pools_id","aws_user_pools_web_client_id","geo","oauth","predictions","aws_cloud_logic_custom","Notifications","modelIntrospection","Analytics","Pinpoint","appId","InAppMessaging","Push","AWSPinpoint","PushNotification","Array","isArray","Interactions","LexV1","fromEntries","bot","defaultAuthMode","API","GraphQL","endpoint","apiKey","mfaConfig","status","totpEnabled","includes","smsEnabled","passwordFormatConfig","minLength","passwordPolicyMinLength","requireLowercase","passwordPolicyCharacters","requireUppercase","requireNumbers","requireSpecialCharacters","userAttributes","from","Set","attributes","required","loginWithEmailEnabled","loginWithPhoneEnabled","Auth","Cognito","identityPoolId","allowGuestAccess","signUpVerificationMethod","userPoolClientId","userPoolId","mfa","passwordFormat","loginWith","username","email","phone","hasOAuthConfig","hasSocialProviderConfig","Storage","S3","bucket","dangerouslyConnectToHttpEndpointForTesting","amazon_location_service","Geo","LocationService","maps","geofenceCollections","searchIndices","search_indices","REST","acc","api","service","VoiceId","voiceId","speechGenerator","defaults","Predictions","parseAWSExports","version","isAmplifyOutputs","amplifyOutputs","resourcesConfig","storage","amplifyOutputsStorageProperties","parseStorage","auth","amplifyOutputsAuthProperties","user_pool_id","user_pool_client_id","identity_pool_id","password_policy","mfa_configuration","mfa_methods","unauthenticated_identities_enabled","username_attributes","standard_required_attributes","groups","authConfig","require_lowercase","require_numbers","require_uppercase","require_symbols","min_length","mfaConfiguration","redirect_sign_in_uri","redirect_sign_out_uri","response_type","identity_providers","curr","parseAuth","analytics","amplifyOutputsAnalyticsProperties","amazon_pinpoint","app_id","parseAnalytics","geofence_collections","parseGeo","data","amplifyOutputsDataProperties","default_authorization_type","url","api_key","model_introspection","parseData","custom","customConfig","amplifyOutputsCustomProperties","events","Events","parseCustom","notifications","amplifyOutputsNotificationsProperties","channels","amazon_pinpoint_app_id","hasInAppMessaging","hasPushNotification","notificationsConfig","parseNotifications","parseAmplifyOutputs","AuthClass","authResourcesConfig","authOptions","userPoolEndpoint","getCustomEndpointWarningMessage","identityPoolEndpoint","fetchAuthSession","credentialsAndIdentityId","userSub","tokens","getTokens","accessToken","sub","credentialsProvider","getCredentialsAndIdentityId","authenticated","forceRefresh","credentials","identityId","clearCredentials","clearCredentialsAndIdentityId","tokenProvider","target","create","SuppressedError","BLOCK_SIZE","KEY","Uint32Array","INIT","MAX_HASHABLE_LENGTH","Math","pow","RawSha256","state","Int32Array","temp","buffer","Uint8Array","bufferLength","bytesHashed","finished","update","position","byteLength","hashBuffer","digest","bitsHashed","bufferView","DataView","byteOffset","undecoratedLength","setUint8","i","setUint32","floor","out","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","t2","Buffer","TextEncoder","encode","convertToBuffer","ArrayBuffer","isView","BYTES_PER_ELEMENT","Sha256","secret","hash","reset","toHash","digestSync","outer","thisArg","_arguments","generator","body","f","y","t","_","label","sent","trys","ops","g","Iterator","next","verb","iterator","v","op","TypeError","done","pop","step","__generator","_a","P","Promise","resolve","reject","fulfilled","rejected","result","then","apply","inner","bufferHash","bufferFromSecret","SHORT_TO_HEX","HEX_TO_SHORT","encodedByte","AmplifyClass","oAuthListener","libraryOptions","resolvedResourceConfig","event","notifyOAuthListener","getConfig","Amplify","amplify","parseMetadata","response","headers","statusCode","isMetadataBearer","$metadata","httpStatusCode","requestId","extendedRequestId","cfId","parseJsonError","async","parseJsonBody","code","rawValue","cleanValue","sanitizeErrorCode","__type","Message","assign","output","json","composeServiceApi","transferHandler","serializer","deserializer","defaultConfig","resolvedConfig","endpointResolver","request","Framework","Category","AiAction","AnalyticsAction","ApiAction","AuthAction","DataStoreAction","GeoAction","InAppMessagingAction","InteractionsAction","PredictionsAction","PubSubAction","PushNotificationAction","StorageAction","globalExists","global","windowExists","documentExists","document","processExists","process","keyPrefixMatch","find","detectionMap","platform","Expo","detectionMethod","expo","ReactNative","navigator","product","NextJs","Nuxt","__NUXT__","$nuxt","Angular","angularVersionSetInDocument","Boolean","querySelector","angularContentSetInWindow","ng","React","elementKeyPrefixedWithReact","querySelectorAll","element","VueJs","Svelte","WebUnknown","NextJsSSR","NuxtSSR","__NUXT_PATHS__","ReactSSR","env","VueJsSSR","AngularSSR","npm_lifecycle_script","SvelteSSR","frameworkCache","frameworkChangeObservers","resetTriggered","detectFramework","detectionEntry","ServerSideUnknown","fcn","resetTimeout","framework","delay","setTimeout","customUserAgentState","BASE_USER_AGENT","sanitizeAmplifyVersion","amplifyVersion","userAgent","isReactNative","observeFrameworkChanges","getAmplifyUserAgent","customUserAgentDetails","category","action","customState","additionalDetails","getCustomUserAgent","getAmplifyUserAgentObject","agentKey","agentValue","DEFAULT_MAX_DELAY_MS","attempt","delayFunction","maxDelayMs","random","jitteredBackoff","AmplifyErrorCode","CLOCK_SKEW_ERROR_CODES","getRetryDecider","errorParser","parsedError","errorCode","retryable","isConnectionError","isThrottlingError","isClockSkewError","isServerSideError","THROTTLING_ERROR_CODES","TIMEOUT_ERROR_CODES","NetworkError","COGNITO_IDENTITY_SERVICE_NAME","DEFAULT_SERVICE_CLIENT_API_CONFIG","retryDecider","computeDelay","cache","retryMiddlewareFactory","maxAttempts","abortSignal","context","attemptsCount","handleTerminalErrorOrResponse","addOrIncrementMetadataAttempts","aborted","isCredentialsExpiredError","isCredentialsExpired","cancellableSleep","timeoutMs","timeoutId","sleepPromiseResolveFn","sleepPromise","addEventListener","cancelSleep","clearTimeout","removeEventListener","nextHandlerOutput","attempts","userAgentMiddlewareFactory","userAgentHeader","userAgentValue","trim","headerName","composeTransferHandler","coreHandler","middleware","composedHandler","composeHandlerRequest","m","resolvedMiddleware","withMemoization","payloadAccessor","cached","shouldSendBody","method","fetchTransferHandler","withCrossDomainCredentials","resp","fetch","signal","responseHeaders","text","blob","unauthenticatedHandler","cognitoIdentityTransferHandler","createClientSerializer","operation","getSharedHeaders","stringify","buildHttpRpcRequest","createGetCredentialsForIdentityClient","getCredentialsForIdentityDeserializer","IdentityId","Credentials","deserializeCredentials","Expiration","rest","createGetIdClient","getIdDeserializer","defaultPartition","id","outputs","dnsSuffix","regionRegex","regions","partitionsInfo","partitions","getDnsSuffix","regex","RegExp","test","AmplifyUrl","URL","cognitoIdentityPoolEndpointResolver","PlatformNotSupportedError","PlatformNotSupported","KeyValueStorage","setItem","getItem","removeItem","clear","InMemoryStorage","size","index","delete","getLocalStorageWithFallback","localStorage","defaultStorage","sessionStorage","getSessionStorageWithFallback","sharedInMemoryStorage","keyPrefix","capacityInBytes","itemMaxSize","defaultTTL","defaultPriority","warningThreshold","currentSizeKey","getByteLength","str","ret","charCode","getCurrentTime","getTime","getCurrentSizeKey","createAssertionFunction","errorMap","AssertionError","assertion","additionalContext","CacheErrorCode","NoCacheItem","NullNextNode","NullPreviousNode","StorageCacheCommon","keyValueStorage","sanitizeConfig","getModuleName","getCurrentCacheSize","getStorage","Number","cacheItemOptions","priority","expires","prefixedKey","item","fillCacheItem","byteSize","val","removeCacheItem","isCacheFull","validKeys","clearInvalidAndGetRemainingKeys","sizeToPop","popOutItems","setCacheItem","isExpired","updateVisitedTime","getAllKeys","getAllCacheKeys","itemSize","decreaseCurrentSizeInBytes","removeItemError","increaseCurrentSizeInBytes","visitedTime","amount","setItemErr","spaceItemNeed","cacheThresholdSpace","items","remainedSize","sort","a","b","remainingKeys","omitSizeKey","StorageCache","substring","createInstance","Cache","I18n$1","_options","_lang","_dict","setDefaultLanguage","language","setLanguage","lang","defVal","getByLanguage","langDict","putVocabulariesForLanguage","vocabularies","putVocabularies","I18nErrorCode","NotConfigured","_i18n","I18n","checkConfig","randomUUID","crypto","getRandomValues","rnds8","rng","byteToHex","amplifyUuid","buf","offset","rnds","arr","unsafeStringify","NoEndpointId","Unknown","getSignedHeaders","AMZ_DATE_HEADER","TOKEN_HEADER","KEY_TYPE_IDENTIFIER","SHA256_ALGORITHM_IDENTIFIER","getHashedData","sha256","getHashedDataAsHex","bytes","toHex","getCanonicalHeaders","entries","entry","escapeUri","uri","encodeURIComponent","hexEncode","c","getCanonicalUri","pathname","uriEscapePath","getHashedPayload","isSourceData","isArrayBuffer","arg","getSkewCorrectedDate","systemClockOffset","authenticatedHandler","currentSystemClockOffset","signRequestOptions","signingDate","signingRegion","signingService","signedRequest","signingValues","accessKeyId","secretAccessKey","sessionToken","longDate","shortDate","date","toISOString","getFormattedDates","credentialScope","getSigningValues","host","requestToSign","signature","canonicalRequest","searchParams","keyA","valA","keyB","valB","getCanonicalRequest","stringToSign","hashedRequest","getStringToSign","dateKey","regionKey","serviceKey","getSigningKey","getSignature","credentialEntry","signedHeadersEntry","signatureEntry","signRequest","dateString","getDateHeader","clockTimeInMilliseconds","clockOffsetInMilliseconds","abs","isClockSkewed","getUpdatedSystemClockOffset","extendedEncodeURIComponent","updateEndpoint","ApplicationId","EndpointId","EndpointRequest","RequestID","MessageBody","getCacheKey","createdEndpointIds","getEndpointId","cacheKey","address","channelType","optOut","userId","userProfile","endpointId","createdEndpointId","createEndpointId","customProperties","demographic","location","metrics","plan","demographicsFromClientInfo","resolvedUserId","clientInfo","nav","vendor","operaMatch","exec","ieMatch","cfMatch","sMatch","awkMatch","anyMatch","getBrowserType","timezone","tzMatch","browserTimezone","make","model","appVersion","browserClientInfo","modelVersion","mergedDemographic","shouldAddDemographics","shouldAddAttributes","shouldAddUser","RequestId","EffectiveDate","ChannelType","Address","Attributes","Demographic","AppVersion","Locale","locale","Make","Model","ModelVersion","Platform","PlatformVersion","platformVersion","Timezone","Location","City","city","Country","country","Latitude","latitude","Longitude","longitude","PostalCode","postalCode","Region","Metrics","OptOut","User","UserId","UserAttributes","expiration","cacheEndpointId","clearCreatedEndpointId","PinpointValidationErrorCode","NoAppId","putEvents","EventsRequest","Results","EventsResponse","RETRYABLE_CODES","ACCEPTED_CODES","PinpointEventBuffer","_interval","_pause","_flush","_buffer","_sendBatch","_startLoop","bufferSize","eventId","pause","resume","flush","identityHasChanged","flushAll","_putEvents","splice","clearInterval","flushInterval","setInterval","flushSize","batchSize","min","bufferSubset","eventMap","_bufferToMap","batchEventParams","_generateBatchEventParams","_processPutEventsSuccessResponse","_handlePutEventsFailure","batchItem","values","session","Endpoint","EventType","Timestamp","Session","BatchItem","retryableEvents","_retry","endpointValues","responses","EventsItemResponse","eventValues","eventObject","StatusCode","eligibleEvents","bufferedEvent","resendLimit","remainingAttempts","unshift","curVal","eventBufferMap","ServiceWorkerErrorCode","UndefinedInstance","UndefinedRegistration","Unavailable","ServiceWorkerClass","_logger","serviceWorker","_serviceWorker","register","filePath","registration","installing","waiting","active","_registration","_setupListeners","catch","enablePush","publicKey","_publicKey","pushManager","getSubscription","subscription","subscribe","userVisibleOnly","applicationServerKey","_urlB64ToUint8Array","pushManagerSubscription","_subscription","base64String","repeat","rawData","outputArray","send","postMessage","currentState","eventSession","currentTime","timestampISOString","getEventBuffer","resolveEndpointId","sessionId","Id","StartTimestamp","StopTimestamp","Duration","record","arguments","init","converter","defaultAttributes","toUTCString","escape","stringifiedAttributes","attributeName","cookie","write","cookies","jar","parts","found","read","remove","withAttributes","withConverter","path","CookieStorage","sameSite","secure","getData","promises","all"],"sourceRoot":""}